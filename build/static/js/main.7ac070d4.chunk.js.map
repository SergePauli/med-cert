{"version":3,"sources":["pages/NoMatchPage.tsx","utils/consts.ts","components/layouts/FooterLayout.tsx","images/favicon.png","components/menus/SideBarMenu.tsx","http/index.ts","models/responses/ITimeEvent.ts","components/layouts/SideBarLayout.tsx","images/ava.png","components/menus/ProfileMenu.tsx","components/menus/NotificationsMenu.tsx","services/UsersService.ts","components/layouts/TopBarLayout.tsx","services/AuditService.ts","components/layouts/RightSideBarLayout.tsx","components/layouts/ActionButtonLayout.tsx","components/layouts/MainLayout.tsx","NSI/1.2.643.5.1.13.13.99.2.19.ts","components/c_sections/section_0.tsx","utils/defaults.ts","components/NullFlavorWrapper.tsx","models/INullFlavor.ts","models/FormsData/Identity.ts","models/FormsData/Person.ts","models/IPersonName.ts","components/inputs/PersonName.tsx","components/c_sections/section_1.tsx","components/inputs/inputsIdentity.tsx","components/c_sections/section_2.tsx","components/dialogs/AddressDialog.tsx","services/FiasService.ts","models/FormsData/Address.ts","models/requests/IAddressR.ts","components/inputs/InputAddress.tsx","components/inputs/AreaType.tsx","components/c_sections/section_3.tsx","NSI/1.2.643.5.1.13.13.99.2.20.ts","NSI/1.2.643.5.1.13.13.99.2.15.ts","NSI/1.2.643.5.1.13.13.99.2.16.ts","NSI/1.2.643.5.1.13.13.11.1038.ts","NSI/1.2.643.5.1.13.13.99.2.18.ts","models/FormsData/RelatedSubject.ts","models/FormsData/ChildInfo.ts","components/MotherInfo.tsx","components/c_sections/section_5.tsx","NSI/1.2.643.5.1.13.13.99.2.21.ts","NSI/1.2.643.5.1.13.13.99.2.22.ts","NSI/1.2.643.5.1.13.13.99.2.23.ts","components/c_sections/section_6.tsx","models/FormsData/Procedure.ts","models/FormsData/DeathReason.ts","services/DiagnosisService.ts","components/inputs/Reason.tsx","services/ACME_Service.ts","utils/acme.ts","components/c_sections/section_7.tsx","components/c_sections/section_8.tsx","NSI/1.2.643.5.1.13.13.99.2.24.ts","NSI/1.2.643.5.1.13.13.99.2.25.ts","utils/functions.ts","models/FormsData/DoctorRequest.ts","services/DoctorService.ts","models/FormsData/Authenticator.ts","components/c_sections/section_9.tsx","models/FormsData/Participant.ts","components/c_sections/section_10.tsx","pages/CertificatePage.tsx","models/FormsData/Doctor.ts","pages/DoctorsPage.tsx","NSI/1.2.643.5.1.13.13.11.1040.ts","services/OrganizationService.ts","pages/ListPage.tsx","images/security.png","static/LoginImageDiv.js","pages/LoginPage.tsx","pages/MainPage.tsx","images/ava.jpg","images/hospital.jpg","pages/SettingsPage.tsx","routes.js","pages/AdminPage.tsx","pages/ProfilePage.tsx","pages/RegistrationPage.tsx","pages/PasswordRecoveryPage.tsx","pages/MessagePage.tsx","pages/ErrorPage.tsx","components/AppRouter.tsx","App.tsx","store/addressStore.ts","models/FormsData/Patient.ts","models/FormsData/Certificate.ts","models/render_options/default.ts","models/render_options/address.ts","models/render_options/Authenticator.ts","models/render_options/lettered_reason.ts","services/CertificateService.ts","models/render_options/patient.ts","models/render_options/external_death_reason.ts","models/render_options/other_reason.ts","models/render_options/procedure.ts","models/render_options/child_info.ts","models/render_options/related_subject.ts","models/render_options/person.ts","models/render_options/Doctor.ts","models/render_options/Participant.ts","store/certificateStore.ts","store/layoutStore.ts","store/suggestionsStore.ts","store/temporaryIDStore.ts","services/AuthService.ts","index.tsx","store/userStore.ts"],"names":["NoMatchPage","className","href","HOME_ROUTE","LOGIN_ROUTE","LIST_ROUTE","CERTIFICATE_ROUTE","DOCTORS_ROUTE","USER_ROUTE","MO_SETTINGS_ROUTE","DIRECTION","ROLES","USER","ADMIN","STATS","RunsackFilterMatchMode","startsWith","contains","notContains","endsWith","equals","notEquals","in","lt","lte","gt","gte","between","dateIs","dateIsNot","dateBefore","dateAfter","custom","DESTROY_OPTION","_destroy","TIME_FORMAT","year","month","day","hour","minute","DATE_FORMAT","FooterLayout","props","orgName","userInfo","organization","name","profile","roles","split","SideBarMenu","userStore","useContext","Context","useState","activeItem","setActiveItem","onItemClick","event","item","disabled","preventDefault","url","history","push","command","originalEvent","classNames","id","style","menu","items","label","role","length","map","index","separator","renderSeparator","iconClassName","icon","linkClassName","undefined","submenuIcon","content","type","onClick","e","target","includes","submenu","UniqueComponentId","renderMenuItem","renderItem","renderMenu","model","API_URL","FIAS_URL","ACME_URL","$api","axios","create","withCredentials","baseURL","$fias","$acme","headers","Accept","interceptors","request","use","config","Authorization","localStorage","getItem","response","error","a","originalRequest","status","_isRetry","get","setItem","data","tokens","access","Error","errors","message","reduce","result","element","JSON","stringify","Severity","SideBarLayout","observer","certificateStore","cert_id","cert","toString","cert_route_id","issueDate","logout","activeUrl","findActive","isActive","forEach","to","src","avatar","alt","ProfileMenu","useHistory","NotificationsMenu","summary","detail","UsersService","post","render_options","only","include","detail_templ","TopBarLayout","layoutStore","isTOM","useMediaQuery","query","profileMenuClassName","profileMenuActive","notificationsMenuClassName","notificationsMenuActive","userActivity","setUserActivity","useEffect","getUserActivity","then","catch","reason","console","log","notif_items","created","logged","updated","replaced","issued","userName","person_name","family","given_1","given_2","charAt","tabletOrMobile","setTabletOrMobile","sideBarToggle","title","setNotificationsMenuActive","count","setProfileMenuActive","ava","setRightSideBarActive","ACTIONS","Map","color","TIME_EVENT_OPTIONS","user","AuditService","rightSideBarActive","timeEvents","setTimeEvents","q","setQ","sorts","user_organization_id_eq","getAudits","limit","ACTION_ATTRIBUTES","action","timeStr","Date","created_at","toLocaleString","backgroundColor","email","ActionButtonLayout","position","radius","direction","layoutStaticInactive","wrapperClass","setUserInfo","userId","isLoading","addLocale","noFilter","clear","apply","matchAll","matchAny","addRule","removeRule","accept","reject","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","firstDay","isRTL","showMonthAfterYear","yearSuffix","week","timeOnlyTitle","timeText","hourText","minuteText","secondText","allDayText","actionItems","CERT_TYPES","code","s_name","header","htmlFor","value","series","placeholder","number","dateFormat","inputId","autoFocus","options","certType","filter","optionLabel","find","el","onChange","padding","fontWeight","numberPrev","seriesPrev","effTimePrev","borderLeft","borderLeftStyle","background","latestOne","HOME_REGION_CODE","DEFAULT_CERT_SUGGESTIONS","section","suggestion","done","NULL_FLAVORS","NULL_FLAVOR_IDX","NI","INV","DER","OTH","NINF","PINF","UNC","MSK","NA","UNK","ASKU","NAV","NASK","QS","TRC","ID_CARD_TYPES","s_mask","n_mask","c_mask","DEFAULT_ERROR_TOAST","severity","life","baseZIndex","NullFlavorWrapper","setValue","checked","setChecked","fieldStyle","paraNum","marginLeft","nullFlavors","field_name","parent_attr","nullFlavor","checkbox","lincked","setCheck","_nullFlavors","marginTop","checkboxLabel","dropdown","findIndex","idx","canNullFlavor","field","width","getCleanNullFlavor","old","_new","parent_guid","checkFieldNullFlavor","key","splice","Identity","_id","_identityCardType","_series","_number","_issueOrgName","_issueOrgCode","_issueOrgDate","_parentGUID","this","identity_card_type_id","issueOrgName","issueOrgCode","parentGUID","null_flavors","makeAutoObservable","deep","_identity","toDateString","null_flavors_attributes","ct","issueOrgDate","Person","_personName","_SNILS","_address","_contacts","_oldOne","SNILS","address","contacts","_person","state","streetAddressLine","address_attributes","contacts_attributes","person_name_attributes","fio","snils","getOneLinePersonName","trim","PersonName","personName","setFio","isErrorMessage","submitted","values","_result","suggestionsStore","certificate","patient","person","birth_year","yearBTChecked","setYearBTChecked","deathYear","yearDTChecked","setYearDTChecked","identified","optionCode","fromRelatives","isDeathTime","deathDatetime","identity","policyOMS","setBirthDay","birth_date","gender","locale","view","mask","showIcon","setDeathDay","timeOnly","hourFormat","inputsIdentity","dulValue","seriesProps","seriesField","numberProps","numberField","depCodeProps","docChecked","setDocChecked","identityCardType","setDulValue","nullFlavorOption","depCodeField","nf","cols","rows","paddingLeft","addressStore","regions","regionsOptions","searchStr","setSearchStr","region","setRegion","district","setDistrict","city","setCity","town","setTown","street","setStreet","housenum","house","setHouse","fiasOptions","addresses","setAddresses","toast","useRef","setAddress","parent","postalCode","aoGUID","AOGUID","houseGUID","HouseGUID","level","slice","buildnum","strucnum","fetchRegionOptions","onHide","dialogVisible","autocompleteOnChange","setter","getSuggestions","getChildItems","current","show","footer","manualMode","isNotStrictly","oldOne","onAddrComplete","onCancel","visible","breakpoints","modal","suggestions","completeMethod","replace","searchBar","filterBy","forceSelection","maxWidth","flat","ref","FiasService","regionID","parentOpt","Address","_streetAddressLine","_state","_district","_city","_town","_street","_aoGUID","_houseGUID","_housenum","_buildnum","_strucnum","_flat","_postalCode","_parent","house_number","building_number","struct_number","flat_number","fetchAddressHierarchy","fiasItem","shortname","parseFiasItem","DEFAULT_ADDRESS","invalid","strictly","bt_id","_addr","onClear","AreaType","addressLife","setAddressLife","deathAddr","addressDeath","setAddressDeath","checkedLifeArea","checkedDeathArea","onAddressCopy","deathAreaType","lifeAreaType","addressProps","DEAD_PLACE_TYPES","MARITAL_STATUSES","EDUCATION_LEVELS","SOCIAL_STATUSES","TERMS_PREGNANCY","RelatedSubject","_guid","_familyConnection","_fio","_birthTime","guid","uuidv4","family_connection","birthTime","addr","_rs","addr_attributes","toLocaleDateString","ChildInfo","_termPregnancy","_weight","_whichAccount","_relatedSubject","term_pregnancy","weight","which_account","related_subject","_chInfo","related_subject_attributes","getAttributes","MotherInfo","childInfo","relatedSubject","max","min","whichAccount","temp","age","hoursAge","isChildInfo","yearsAge","isMonthChild","daysAge","termPregnancy","ddStyle","minWidth","dDivStyle","paddingTop","deathPlace","chInf","maritalStatus","educationLevel","socialStatus","DEATH_KINDS","MEDICS","BASIS_DERMINING","isExtReason","deathKind","extReasonTime","panelStyle","extReasonDescription","establishedMedic","basisDetermining","Procedure","_medicalServ","_textValue","_effectiveTime","medical_serv","text_value","effective_time","_pr","medical_serv_id","getHours","getMinutes","DeathReason","_diagnosis","_years","_months","_weeks","_days","_hours","_minutes","_procedures","diagnosis","ext_diagnosis","days","hours","minutes","months","weeks","years","procedures","proc","textValue","medicalServ","effectiveTime","isExt","_dr","diagnosis_id","Number","parseInt","ext_diagnosis_id","procedures_attributes","_temp","pr","concat","DiagnosisService","offset","CSS_classes","diagnoses","setDiagnoses","diagnosisText","setDiagnosisText","diagnosisCode","setDiagnosisCode","cleanEffectiveTime","deathReason","deathTime","setDeathReason","upButton","onUp","downButton","onDown","diagnosisOptionTemplate","option","marginRight","ICD10","effTime","onTimeChecked","saveReasonEffTime","onDiagnosisChecked","fieldName","delay","s_name_cont","ICD10_start","fetchExtDiagnoses","fetchDiagnoses","itemTemplate","ACMEService","input","data_AIN","ACME_AIN","withOtherReasons","deathDate","X1X4","X7X12","padStart","X14X17","X19X21","X22X23","X24X25","X26X29","birthDay","deathDay","XYMD","X39X41","_diff","getFullYear","getMonth","getDate","X42","X45","reasonD","lastIndexOf","substring","reasonA","padEnd","reasonB","reasonC","reasons","deathReasons","reasons_in","X171","X174","pregnancyConnection","X176X177","X178X179","X180X183","X188","X219","X220X231","reason_a","reason_b","reason_c","ext_reason","_part_2","codogram","parse_ACME_TIN","xACME","_sb","x45","x54","x51_53","spX45","spX54","spX51_53","mainCSSClass","isACME","reasonBckecked","reasonCckecked","reasonDckecked","reasonIDExchange","first","second","reasonACME","height","changeReasonACME","onSucccess","onError","strACMEAIN1","isReasonD","strACMEAIN2","runACME","TINs","data_TIN","_res","_alter","doACME","temporaryIDStore","checkReason","lastDeathReasonID","newReason","setNewReason","medicalServs","setMedicalServs","medservText","setMedservText","medservCode","setMedservCode","procedure","setProcedure","dateETChecked","setDateETChecked","diagnosChecked","setDiagnosChecked","selectedProcedures","setSelectedProcedures","selectedReasons","setSelectedReasons","setMedServValue","lastProcedureID","s_code","medServOptionTemplate","_reasons","val","name_cont","s_code_start","fetchMedicalServs","inputStyle","showTime","margin","selection","responsiveLayout","dataKey","emptyMessage","onSelectionChange","selectionMode","headerStyle","body","rowData","_resultStr","procNames","TRAFFIC_ACCIDENT","PREGNANCY_CONNECTION","removeEmpty","obj","candidat","Array","prototype","isPrototypeOf","newObj","Object","keys","DOCTOR_RENDER_OPTIONS","DoctorService","doctor","Doctor","put","doctor_id","delete","Authenticator","_time","_doctorID","time","_authenticator","doctors","setDoctors","getDoctors","organization_id_eq","err","isTrafficAccident","trafficAccident","isPregnancyConnection","nullFlavorDropdnStyle","customDropdnStyle","customParagraphFieldStyle","fontSize","author","doctorID","showClear","legalAuthenticator","authenticator","Participant","_receiptDate","_description","_original","receipt_date","description","original","person_attributes","identity_attributes","participant","receiptDate","buttonDisabled","match","params","certID","setCertID","setMessage","_idx","cArray","certs","select","findById","location","search","clean","save","sm_code","finally","createNew","sugCount","redSuggestionsCount","layoutParams","secton_router","shape","rowClassName","_position","_organization","_doctor","organization_id","position_id","emptyDoctor","setDoctor","doctorDialog","setDoctorDialog","deleteDoctorDialog","setDeleteDoctorDialog","deleteDoctorsDialog","setDeleteDoctorsDialog","selectedDoctors","setSelectedDoctors","setSubmitted","telcom_value","main","setEmail","phone","setPhone","setPosition","positions","setPositions","dt","openNew","hideDialog","hideDeleteDoctorDialog","hideDeleteDoctorsDialog","findIndexById","confirmDeleteSelected","onContactChange","contact","_contact","telcom_use","doctorDialogFooter","Fragment","_doctors","oldValue","newValue","_request","audits","createAudit","audit","_audits","before","after","_person_attributes","oldPerson","newPerson","_person_name_attributes","oldFIO","newFIO","oldAddress","newAddress","oldContacts","u","newContacts","oldNullFlavors","newNullFlavors","null_flavor_attributes","genUpdateDoctorRequest","updateDoctor","addDoctor","deleteDoctorDialogFooter","removeDoctor","deleteDoctorsDialogFooter","fioBodyTemplate","row","right","exportable","editDoctor","required","getPositions","test","GENDERS","ORGANIZATION_RENDER_OPTIONS","except","OrganizationService","Organization","lazyLoading","setLazyLoading","sortField","setSortField","sortOrder","setSortOrder","filters","setFilters","propsFilters","setPropsFilters","organizations","setOrganizations","isSuperUser","getOrganizations","useMemo","_params","_filters","param","pair","PrimeReact","selected","setSelected","matchMode","FilterMatchMode","IN","operator","constraints","STARTS_WITH","CONTAINS","GREATER_THAN_OR_EQUAL_TO","LESS_THAN_OR_EQUAL_TO","DATE_AFTER","DATE_BEFORE","filterClearTemplate","filterClearCallback","filterApplyTemplate","filterApplyCallback","custodian","cusName","filterField","showFilterMatchModes","filterClear","filterApply","filterElement","filterCallback","flexGrow","flexBasis","scrollDirection","scrollable","scrollHeight","size","loading","filterDisplay","onFilter","_constraint","_codes","basis_determining_in","death_place_in","custodian_id_in","virtualScrollerOptions","lazy","onLazyLoad","getList","last","itemSize","filterLocale","onRowDoubleClick","onSort","order","rowNumber","sortable","frozen","cert_type","filterPlaceholder","dataType","showFilterOperator","acme","reason_ACME","cr","c_reason","ar","a_reason","br","b_reason","dr","d_reason","death_reasons","birth","death","death_datetime","death_year","dd","db","m","death_place","place","basis_determining","basis","iDate","issue_date","LoginImageDiv","onSubmit","form","login","password","onPassordRecovery","renew_link","isFormFieldValid","meta","touched","getFormErrorMessage","logo","initialValues","validate","render","handleSubmit","autoComplete","toggleMask","marginBottom","version","record","setAudits","setOrganization","ID","setID","getOrganization","changesAudit","oid","textAlign","name_full","license","license_data","okpo","isSaveAvaible","updateOrganization","link","AUTH_ROUTES","path","Component","MainPage","ListPage","CertificatePage","DoctorsPage","setUser","getUser","user_name","user_team","SettingsPage","NON_AUTH_ROUTES","LoginPage","names","phone_number","password_confirmation","registration","PWD_RECOVERY_ROUTE","pwd_renew","activation_link","PUBLIC_ROUTES","MESSAGE_ROUTE","ERROR_ROUTE","AppRouter","token","isAuth","setHistory","checkAuth","chech_routes","component","exact","App","AddressStore","_isLoding","_history","_regionsOptions","_fiasOptions","_dialogVisible","_manualMode","_onAddrComplete","_regions","parse","defaultRegion","getRegions","substr","createNullFlavors","isLoding","Patient","_gender","_birth_date","_birth_year","_provider_organization","_addrType","addr_type","_patient","person_id","provider_organization","isYear","Certificate","_issueDate","_certType","_seriesPrev","_numberPrev","_effTimePrev","_lifeAreaType","_deathAreaType","_deathDatetime","_deathYear","_deathMonth","_deathPlace","_maritalStatus","_educationLevel","_socialStatus","_deathKind","_extReasonTime","_extReasonDescription","_reasonA","_reasonB","_reasonC","_reasonD","_deathReasons","_reasonACME","_deathAddr","_policyOMS","_childInfo","_establishedMedic","_basisDetermining","_trafficAccident","_pregnancyConnection","_author","_audithor","_legalAuthenticator","_custodian_id","_participant","_latestOne","disposers","latest_one","number_prev","series_prev","policy_OMS","life_area_type","death_area_type","death_addr","death_kind","education_level","marital_status","social_status","eff_time_prev","child_info","audithor","legal_authenticator","ext_reason_time","ext_reason_description","established_medic","traffic_accident","pregnancy_connection","autorun","utc1","UTC","b","ms","milisecAge","Math","floor","setMinutes","setHours","setDate","setMonth","setFullYear","_cert","audithor_attributes","author_attributes","legal_authenticator_attributes","child_info_attributes","death_addr_attributes","death_reasons_attributes","a_reason_attributes","b_reason_attributes","c_reason_attributes","d_reason_attributes","patient_attributes","custodian_id","participant_attributes","eff_time","lat","dat","disposer","DEFAULT_RENDER_OPTIONS","NULLFLAVORABLE_RENDER_OPTIONS","DEFAULT_AUTHENTICATOR_RENDER_OPTIONS","LETTERED_DEATH_REASON_RENDER_OPTIONS","CERTIFICATE_FULL_RENDER_OPTIONS","CertificateService","certificate_id","configure","enforceActions","CertificateStore","_submitted","_userInfo","_certs","_selected","_sorts","_first","_last","_rows","_count","_needFetch","_q","custodian_id_eq","getCount","getCertificates","from","dataLength","num","onSuccess","patient_id","updateCertificate","nCert","addCertificate","removeCertificate","doAfter","id_eq","LayoutStore","_isTabletOrMobile","_isLayoutStaticInactive","_isRightSidebarActive","_isProfileMenuActive","_isNotificationsMenuActive","_isLoading","_message","isLayoutStaticInactive","rightSidebarActive","SuggestionsStore","cStore","_cStore","_suggestions","_identified","_fromRelatives","isBirthDay","isDeathDay","isSNILS","oms","isOMS","isCODE","isIORGDate","isIORGName","isIDSeries","isIDNumber","isLifeArea","isDeathArea","isDeathAreaType","isLifeAreaType","isTERMS_PREGNANCY","isCHILD_WEIGHT","isNUMBER_PREGNANCY","isMOTHER_FIO","isMOTHER_BIRTHDAY","isMOTHER_ADDRESS","isPersonNameSug","TemporaryIDStore","_lastCertificateID","_lastDeathReasonID","_lastProcedureID","AuthService","_isAuth","_user","_token","access_token","setAuth","removeItem","setToken","setLoading","getUserInfo","createContext","ReactDOM","Provider","document","getElementById"],"mappings":"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AM,GAER,CACEF,QAAS,IACT7B,KAAM,WACN8B,WAAY,6YACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,WACN8B,WAAY,8YACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,WACN8B,WAAY,iYACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,WACN8B,WAAY,oZACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,4XACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,4XACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,uTACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,sZACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WAAY,wVACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WACE,+gBACFC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WAAY,iXACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WAAY,waACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WAAY,gcACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,sTACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,2QACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,+PACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,iTACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WACE,2pBACFC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,igBACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,wZACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,eACN8B,WAAY,2PACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,qBACN8B,WAAY,8eACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,oBACN8B,WAAY,wVACZC,M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","file":"static/js/main.7ac070d4.chunk.js","sourcesContent":["\r\nimport { FC } from 'react'\r\nimport '../styles/simplePage.css'\r\nimport '../styles/root.css'\r\nexport const NoMatchPage: FC = () => {  \r\n\r\n  return (\r\n    <>\r\n      <div className=\"exception-body\">\r\n        <div className=\"nopage-block\">\r\n          <h1 className=\"nopage_h1\">Неверный адрес страницы</h1>\r\n          <div className=\"nopage_text\">Проверьте, правильно ли вы ввели его. Если данные верны, пожалуйста, сообщите нам об ошибке.</div>\r\n          <a className=\"nopage-button\" href=\"../\">На главную</a><a className=\"nopage-button\" href=\"../\">Сообщить об ошибке</a>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}","export interface IObjectKeys {\r\n  [key: string]: string | number | undefined\r\n}\r\nexport const HOME_ROUTE = \"/\"\r\nexport const LOGIN_ROUTE = \"/login\"\r\nexport const REGISTRATION_ROUTE = \"/registration\"\r\nexport const PWD_RECOVERY_ROUTE = \"/pwd_recovery\"\r\nexport const MESSAGE_ROUTE = \"/message\"\r\nexport const ERROR_ROUTE = \"/error\"\r\nexport const ADMIN_ROUTE = \"/admin\"\r\nexport const LIST_ROUTE = \"/list\"\r\nexport const CERTIFICATE_ROUTE = \"/cert\"\r\nexport const REPORT_ROUTE = \"/report\"\r\nexport const DOCTORS_ROUTE = \"/doctors\"\r\nexport const USER_ROUTE = \"/user\"\r\nexport const MO_SETTINGS_ROUTE = \"/organization\"\r\nexport const DIRECTION = [\"asc\", \"desc\"]\r\nexport const ROLES: IObjectKeys = {\r\n  USER: \"ПОЛЬЗОВАТЕЛЬ\",\r\n  ADMIN: \"АДМИНИСТРАТОР\",\r\n  STATS: \"СТАТИСТИК\",\r\n}\r\nexport const RunsackFilterMatchMode = {\r\n  startsWith: \"_start\",\r\n  contains: \"_cont\",\r\n  notContains: \"_not_cont\",\r\n  endsWith: \"_end\",\r\n  equals: \"_eq\",\r\n  notEquals: \"_not_eq\",\r\n  in: \"_in\",\r\n  lt: \"_lt\",\r\n  lte: \"lteq\",\r\n  gt: \"_gt\",\r\n  gte: \"_gteq\",\r\n  between: \"\",\r\n  dateIs: \"_eq\",\r\n  dateIsNot: \"_not_eq\",\r\n  dateBefore: \"_lt\",\r\n  dateAfter: \"_gt\",\r\n  custom: \"\",\r\n}\r\n// маркер удаления для использования в запросах на обновление\r\n// destroy-marker for using in nested_attributes\r\nexport const DESTROY_OPTION = { _destroy: \"1\" }\r\n\r\n//формат дата & время\r\nexport const TIME_FORMAT = {\r\n  year: \"2-digit\",\r\n  month: \"2-digit\",\r\n  day: \"2-digit\",\r\n  hour: \"2-digit\",\r\n  minute: \"2-digit\",\r\n} as Intl.DateTimeFormatOptions\r\n\r\n// формат даты\r\nexport const DATE_FORMAT = { year: \"2-digit\", month: \"short\", day: \"2-digit\" } as Intl.DateTimeFormatOptions\r\n","import { IUserInfo } from \"../../models/responses/IUserInfo\"\r\nimport {ROLES}  from \"../../utils/consts\"\r\n\r\ntype FooterLayoutProps = {userInfo: IUserInfo | null}\r\nconst FooterLayout = (props: FooterLayoutProps) => {\r\n  const orgName = props.userInfo!==null && props.userInfo.organization ? props.userInfo.organization.name : ''\r\n  const profile = props.userInfo!==null && props.userInfo.roles ? ROLES[props.userInfo.roles.split(' ')[0]]: ''  \r\n  return (\r\n    <div className=\"layout-footer\">\r\n      <div className=\"footer-logo-container\">\r\n        <span className=\"app-name\">{orgName}:</span>\r\n        <span className=\"app-profile\">{profile}</span>\r\n      </div>\r\n      <span className=\"copyright\">2022 © ГБУЗ АО \"АМИАЦ\"</span>\r\n    </div>       \r\n  )\r\n}\r\nexport default FooterLayout","export default __webpack_public_path__ + \"static/media/favicon.b5c775a4.png\";","import React, { FC,  useContext,  useState } from 'react'\r\nimport { MenuItem } from 'primereact/menuitem'\r\nimport { classNames, UniqueComponentId } from 'primereact/utils'\r\nimport { IMenuProps } from './IMenuProps'\r\nimport { HOME_ROUTE } from '../../utils/consts'\r\nimport { Context } from '../..'\r\n\r\n\r\nexport const SideBarMenu:FC<IMenuProps> = (props: IMenuProps) =>{ \r\n  const { userStore } = useContext(Context)\r\n  const [activeItem, setActiveItem] = useState<MenuItem>({})\r\n  const onItemClick = (event: React.MouseEvent, item:MenuItem)=> {\r\n        if (item.disabled) {\r\n            event.preventDefault()\r\n            return\r\n        }\r\n        if (!item.url) {\r\n           event.preventDefault()\r\n        } else if (item.url.startsWith(HOME_ROUTE)) {\r\n           userStore.history().push(item.url) \r\n           event.preventDefault()          \r\n        }\r\n        if (item.command) item.command({           \r\n              originalEvent: event,\r\n              item,\r\n            })        \r\n        if (item!==activeItem) {\r\n          if (activeItem.className) activeItem.className=''\r\n          item.className='active-menuitem'\r\n          setActiveItem(item)\r\n        } else {\r\n          item.className=''\r\n          setActiveItem({})\r\n        }\r\n  }\r\n\r\n  const className = classNames(\"layout-menu-container\", props.className)\r\n  const menu = (items: MenuItem[], label: string)=> {\r\n    const renderMenu = ()=> {\r\n      if (items.length>0) {\r\n        const renderItem = (item:MenuItem, index:number) => {\r\n          const renderSeparator = (index:number)=><li key={\"separator_\" + index} className='menu-separator' role='separator'></li>\r\n          const renderMenuItem =(item:MenuItem, index:number) => {\r\n          const submenuIconClassName = \"pi pi-fw pi-angle-down layout-submenu-toggler\"\r\n          const iconClassName = classNames(\"layout-menuitem-icon pi pi-fw\", item.icon)\r\n          const linkClassName = classNames(\"p-ripple\", { \"p-link\": item.url === undefined }, \r\n          { \"p-disabled\": item.disabled })\r\n          const submenuIcon = item.items && <span className={submenuIconClassName}></span>\r\n          const icon = item.icon && <span className={iconClassName}></span>\r\n          const label = item.label && <span className='layout-menuitem-text'>{item.label}</span>\r\n          const content = item.className || item.items ?             [\r\n              <button key={`bt_${item.label}_${index}`} type='button' onClick={(e:React.MouseEvent)=>onItemClick(e, item)} className=\"p-ripple p-link\">\r\n                {icon}\r\n                {label}\r\n                {submenuIcon}                                \r\n              </button>,              \r\n            ] :  [<a href={item.url} target={item.target}\r\n                    key={`a_${item.disabled ? label : index}`}  \r\n                    className={linkClassName} \r\n                    onClick={(e:React.MouseEvent)=>onItemClick(e, item)} \r\n                    aria-disabled={item.disabled}>\r\n                    {icon}{label}</a>,]\r\n            if (item.className?.includes('layout-root-menuitem')) \r\n               content.push(<div key={`dv_${item.label}_${index}`} className={item.className}><div className='layout-menuitem-root-text'>{item.label}</div></div>)\r\n            const submenu = (item.items && item.className) && menu(item.items as MenuItem[], item.label || UniqueComponentId())      \r\n            return (\r\n              <li key={`li_${index}_${item.className}`} \r\n                className={item.className} style={item.style}       \r\n                role='menuitem'>\r\n                {content}\r\n                {submenu}\r\n              </li>\r\n            )\r\n          }\r\n          if (item.separator) return renderSeparator(index)\r\n          else return renderMenuItem(item, index) \r\n        }\r\n        return items.map((item, index) => {\r\n          return renderItem(item, index)\r\n        })\r\n      }\r\n      return null\r\n    }\r\n    \r\n    return (\r\n      <ul key={label} className=\"layout-menu\" role=\"menu\">\r\n        {renderMenu()}\r\n      </ul>\r\n    )\r\n  }  \r\n  return (\r\n    <div id={props.id || \"sidebar_menu\"} className={className} style={props.style}>\r\n      {menu(props.model || [], \"global\")}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n","import axios, { AxiosRequestConfig } from \"axios\"\r\nimport { AuthResponse } from \"../models/responses/AuthResponse\"\r\n\r\n// настройки на back-end\r\n//Main API service (Основной API) URL\r\nexport const API_URL = \"http://localhost:5000/REST_API/v1/\"\r\n//FIAS service (Сервис адресов ФИАС) URL\r\nexport const FIAS_URL = \"http://fias.int.amurzdrav.ru/fias\"\r\n//АСМЕ service (Сервис взаимодействия с АСМЕ) URL\r\nexport const ACME_URL = \"http://acme.int.amurzdrav.ru/\"\r\n\r\nconst $api = axios.create({\r\n  withCredentials: true,\r\n  baseURL: API_URL,\r\n})\r\n\r\nexport const $fias = axios.create({\r\n  baseURL: FIAS_URL,\r\n})\r\n\r\nexport const $acme = axios.create({\r\n  headers: {\r\n    Accept: \"application/json\",\r\n    \"Content-Type\": \"application/json; charset=utf-8\",\r\n    \"X-Requested-With\": \"XMLHttpRequest\",\r\n  },\r\n  baseURL: ACME_URL,\r\n})\r\n\r\n$api.interceptors.request.use((config: AxiosRequestConfig) => {\r\n  config.headers.Authorization = `Bearer ${localStorage.getItem(\"token\")}`\r\n  return config\r\n})\r\n\r\n$api.interceptors.response.use(\r\n  (config) => config,\r\n  async (error) => {\r\n    const originalRequest = error.config\r\n    if (error.response && error.response.status === 401 && error.config && !error.config._isRetry) {\r\n      originalRequest._isRetry = true\r\n      try {\r\n        const response = await axios.get<AuthResponse>(`${API_URL}auth/refresh`, { withCredentials: true })\r\n        localStorage.setItem(\"token\", response.data.tokens.access)\r\n        return $api.request(originalRequest)\r\n      } catch (e) {\r\n        throw new Error(\"API error 401, Сеанс не авторизован\")\r\n      }\r\n    } else if (error.response && [406, 422].includes(error.response.status)) {\r\n      if (error.response.data && error.response.data.errors) {\r\n        let message = error.response.data.errors.reduce((result: string, element: string) => {\r\n          result = `${result}, ${element}`\r\n          return result\r\n        }, `API error ${error.response.status}`)\r\n        throw new Error(message)\r\n      } else throw new Error(`API error ${JSON.stringify(error)}`)\r\n    }\r\n    throw error\r\n  }\r\n)\r\n\r\n$fias.interceptors.response.use(\r\n  (config) => config,\r\n  async (error) => {\r\n    if (error.response && error.response.status && [406, 422].includes(error.response.status)) {\r\n      if (error.response.data && error.response.data.errors) {\r\n        let message = error.response.data.errors.reduce((result: string, element: string) => {\r\n          result = `${result}, ${element}`\r\n          return result\r\n        }, `API error ${error.response.status}`)\r\n        throw new Error(message)\r\n      } else throw new Error(`API error ${error.response.status}`)\r\n    } else if (error.message.includes(\"Network Error\")) new Error(\"Ошибка сети: соединение не может быть установлено\")\r\n    throw error\r\n  }\r\n)\r\nexport default $api\r\n","import { IPersonName } from \"../IPersonName\"\r\n\r\nexport const ACTIONS = new Map<string, IActionAttribute>([\r\n  [\"added\", { title: \"Добавлено:\", icon: \"pi pi-plus\", color: \"rgb(104, 159, 56)\" }],\r\n  [\"updated\", { title: \"Изменено:\", icon: \"pi pi-pencil\", color: \"rgb(2, 136, 209)\" }],\r\n  [\"removed\", { title: \"Удалено:\", icon: \"pi pi-trash\", color: \"rgb(251, 192, 45)\" }],\r\n  [\"archived\", { title: \"Архивировано:\", icon: \"pi pi-inbox\", color: \"rgb(96, 125, 139)\" }],\r\n  [\"commented\", { title: \"Комментарий:\", icon: \"pi pi-comment\", color: \"rgb(96, 125, 139)\" }],\r\n  [\"imported\", { title: \"Импорт:\", icon: \"pi pi-download\", color: \"rgb(156, 39, 176)\" }],\r\n  [\"exported\", { title: \"Экспорт:\", icon: \"pi pi-upload\", color: \"rgb(156, 39, 176)\" }],\r\n  [\"signed_in\", { title: \"Подписано:\", icon: \"pi pi-user-edit\", color: \"rgb(104, 159, 56)\" }],\r\n  [\"signed_out\", { title: \"Отозвано:\", icon: \"pi pi-user-minus\", color: \"rgb(251, 192, 45)\" }],\r\n])\r\nexport enum Severity {\r\n  success,\r\n  info,\r\n  warning,\r\n  error,\r\n}\r\nexport interface IActionAttribute {\r\n  title: string\r\n  icon: string\r\n  color: string\r\n}\r\n\r\nexport interface ITimeEvent {\r\n  id: number\r\n  action: string\r\n  severity: Severity\r\n  detail: string\r\n  table?: string\r\n  summary?: string\r\n  user: { id: number; email: string; person_name: IPersonName }\r\n  organization: { id: number; name: string }\r\n  created_at: string\r\n}\r\n","import avatar from \"../../images/favicon.png\"\r\nimport { useContext } from \"react\"\r\nimport { observer } from \"mobx-react-lite\"\r\nimport { Context } from \"../..\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { CERTIFICATE_ROUTE, HOME_ROUTE, LIST_ROUTE } from \"../../utils/consts\"\r\nimport { SideBarMenu } from \"../menus/SideBarMenu\"\r\nimport { MenuItem } from \"primereact/menuitem\"\r\nimport { API_URL } from \"../../http\"\r\ntype SideBarLayoutProps = {activeUrl: string}\r\nconst SideBarLayout = observer((props: SideBarLayoutProps) => {\r\n   const {userStore, certificateStore} = useContext(Context)\r\n   const cert_id =  certificateStore.cert.id?.toString() || 'new'\r\n   const cert_route_id = `${CERTIFICATE_ROUTE}/${cert_id}`\r\n   const items:MenuItem[] = [    \r\n      { label: \"Свидетельство\", className: \"layout-root-menuitem\",     \r\n        items:[{label:\"Секции\", icon:\"pi-file\", items:[\r\n          {label:\"Сведения о документе\", \r\n          url:`${cert_route_id}?q=0`}, \r\n          {label:\"Начало(п.1-3,7)\", url:`${cert_route_id}?q=1`},{label:\"Документы(п.4-6)\", url:`${cert_route_id}?q=2`},{label:\"Адреса.(п.8-11)\", url:`${cert_route_id}?q=3`},{label:\"п.12-17\", url:`${cert_route_id}?q=5`},{label:\"п.18-21\", url:`${cert_route_id}?q=6`},{label:\"Причины (п.22 I)\", url:`${cert_route_id}?q=7`},{label:\"Прочие (п.22 II)\", url:`${cert_route_id}?q=8`},{label:\"п.23-26\", url:`${cert_route_id}?q=9`},{label:\"Получатель\", url:`${cert_route_id}?q=10`}]},\r\n        { label: \"Печать\", disabled: !certificateStore.cert.issueDate,  icon:\"pi-print\", items: [{label:\"Лицевая\", icon:\"pi-file\", target:\"_blank\", url:`${API_URL}print/face/${cert_id}`},{ label:\"Оборотная\", icon:\"pi-file\", target:\"_blank\", url:`${API_URL}print/back/${cert_id}`}]},  \r\n        { label: \"Списки\",  icon:\"pi-list\", items: [{label:\"Свидетельства\", icon:\"pi-id-card\", url:LIST_ROUTE},{label:\"Журнал\", icon:\"pi-align-left\", url:\"/#\"}]},]}, \r\n      {separator: true},\r\n      { label: \"Сеанс\", className: \"layout-root-menuitem\",      \r\n        items: [{label:\"Главная\", icon:\"pi-home\", url:HOME_ROUTE},{label:\"Свидетельства\", icon:\"pi-list\", url:LIST_ROUTE},{label:\"Выход\", icon:\"pi-sign-out\", command:()=>{userStore.logout()}}]     \r\n      },     \r\n   ]   \r\n  const url = props.activeUrl\r\n  const findActive = (items: MenuItem[])=>{\r\n    let isActive = false    \r\n    items.forEach((item)=>{        \r\n      if (item.url === url)  { \r\n        item.className='active-menuitem' \r\n        isActive = true \r\n      }\r\n      if (isActive) return true\r\n      if (item.items) {         \r\n        if (findActive(item.items as MenuItem[])) { \r\n          item.className = item.className || 'active-menuitem'\r\n          isActive = true  \r\n        }  \r\n      } \r\n    })      \r\n    return isActive\r\n  }\r\n  findActive(items)  \r\n  return (\r\n    <div className='layout-sidebar'>      \r\n        <Link className='logo' to='#/'>\r\n          <img id='app-logo' className='logo-image' src={avatar} alt='РРМСС V3.0' />\r\n          <span className='app-name'>МедСС</span>\r\n        </Link>       \r\n        <SideBarMenu model={items} />  \r\n    </div>      \r\n  )\r\n})\r\nexport default SideBarLayout","export default __webpack_public_path__ + \"static/media/ava.0f62058a.png\";","import { MenuItem } from 'primereact/menuitem'\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { HOME_ROUTE } from '../../utils/consts'\r\nimport { IMenuProps } from './IMenuProps'\r\n\r\nexport const ProfileMenu: FC<IMenuProps> = (props: IMenuProps)=> { \r\n  const history = useHistory()  \r\n  const onItemClick = (event: React.MouseEvent, item:MenuItem)=> {\r\n    if (item.disabled) {\r\n      event.preventDefault()\r\n      return\r\n    }\r\n    if (!item.url) {\r\n      event.preventDefault()\r\n    } else if (item.url.startsWith(HOME_ROUTE)) {\r\n      history.push(item.url)\r\n      event.preventDefault()\r\n    }\r\n    if (item.command) item.command({           \r\n      originalEvent: event,\r\n      item,\r\n    })  \r\n  }\r\n  const className = \"profile-menu fade-in-up\"\r\n  const renderMenu = (items:MenuItem[]) => {\r\n    const renderItem = (item:MenuItem, index:number) => {\r\n        const renderSeparator = (index:number)=><li key={\"separator_\" + index} className='menu-separator' role='separator'></li>\r\n        const renderMenuItem =(item:MenuItem, index:number) => {          \r\n          const iconClassName = classNames(\"pi\", item.icon)          \r\n          const icon = item.icon && <i className={iconClassName}></i>\r\n          const label = item.label && <span>{item.label}</span>\r\n          const content = <button key={`bt_${item.label}_${index}`} \r\n              type='button' \r\n              onClick={(e:React.MouseEvent)=>onItemClick(e, item)} \r\n              className=\"p-link\">\r\n                {icon}\r\n                {label}                                                \r\n            </button> \r\n          return <li key={`pfi_${index}`}>{content}</li> \r\n            \r\n        }\r\n        if (item.separator) return renderSeparator(index)\r\n        else return renderMenuItem(item, index) \r\n      }\r\n    if (items.length > 0) {\r\n      return items.map((item, index) => {\r\n          return renderItem(item, index)\r\n      })\r\n    } else return null\r\n  }\r\n  return (\r\n    <ul className={className}>\r\n        {renderMenu(props.model || [])}\r\n    </ul>\r\n  )\r\n}","\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { HOME_ROUTE } from '../../utils/consts'\r\nimport { ExtMenuItem, INotificationMenuProps } from './IMenuProps'\r\n\r\nexport const NotificationsMenu: FC<INotificationMenuProps> = (props: INotificationMenuProps)=> {\r\n  const history = useHistory()   \r\n  const onItemClick = (event: React.MouseEvent, item:ExtMenuItem)=> {\r\n    if (item.disabled) {\r\n      event.preventDefault()\r\n      return\r\n    }\r\n    if (!item.url) {\r\n      event.preventDefault()\r\n    } else if (item.url.startsWith(HOME_ROUTE)) {\r\n      history.push(item.url)\r\n      event.preventDefault()\r\n    }\r\n    if (item.command) item.command({           \r\n      originalEvent: event,\r\n      item,\r\n    })  \r\n  }\r\n  const className = \"notifications-menu fade-in-up\"\r\n  const renderMenu = (items:ExtMenuItem[]) => {\r\n    const renderItem = (item:ExtMenuItem, index:number) => {\r\n        const renderSeparator = (index:number)=><li key={\"separator_\" + index} className='menu-separator' role='separator'></li>\r\n        const renderMenuItem =(item:ExtMenuItem, index:number) => { \r\n          const className =  classNames(\"notification-item\", item.className, item.disabled && \"p-disabled\")                           \r\n          const iconClassName = classNames(\"pi\", item.icon, item.className)          \r\n          const icon = item.icon && <i className={iconClassName}></i>\r\n          const summary = item.summary && <div className=\"notification-summary\">{item.summary}</div>\r\n          const label = (item.label && item.label.split('detail'))||[\"\",\"\"]\r\n          const content = <button key={`bt_${item.summary}_${index}`} \r\n              type='button' className=\"p-link\" \r\n              onClick={(e:React.MouseEvent)=>onItemClick(e, item)}>\r\n                {icon}\r\n              <div className={className}>\r\n                {summary}\r\n                <div className=\"notification-detail\">\r\n                  {label[0]} <b>{item.detail}</b> {label[1]}  \r\n                </div>\r\n              </div>                                                               \r\n            </button> \r\n          return <li key={`nmi_${index}`}>{content}</li> \r\n            \r\n        }\r\n        if (item.separator) return renderSeparator(index)\r\n        else return renderMenuItem(item, index) \r\n      }\r\n    if (items.length > 0) {\r\n      return items.map((item, index) => {\r\n          return renderItem(item, index)\r\n      })\r\n    } else return null\r\n  }\r\n  return (\r\n    <ul className={className}>\r\n        {renderMenu(props.model || [])}\r\n    </ul>\r\n  )\r\n}","import $api, { API_URL } from \"../http\"\r\nimport { AxiosResponse } from \"axios\"\r\nimport { IUser } from \"../models/IUser\"\r\nimport { IUserInfo } from \"../models/responses/IUserInfo\"\r\nimport { IActivityInfo } from \"../models/responses/IActivityInfo\"\r\n\r\n// сервис получения данных пользователя\r\nexport default class UsersService {\r\n  static async fetchUsers(): Promise<AxiosResponse<IUser[]>> {\r\n    return $api.post(`${API_URL}model/User/`, {\r\n      render_options: { only: [\"id\", \"email\", \"roles\", \"organization_id\", \"activated\"] },\r\n    })\r\n  }\r\n  static async getUser(id: number): Promise<AxiosResponse<IUserInfo>> {\r\n    return $api.post(`${API_URL}/show/model/User/${id}`, {\r\n      render_options: { only: [\"id\", \"roles\"], include: [\"person_name\", \"organization\", \"contacts\"] },\r\n      includes: [\"person_name\", \"organization\", \"contacts\"],\r\n      organization: { only: [\"id\", \"name\", \"sm_code\"] },\r\n    })\r\n  }\r\n  static async getUserActivity(): Promise<AxiosResponse<IActivityInfo>> {\r\n    return $api.get(`${API_URL}stat`)\r\n  }\r\n}\r\n","import { observer } from 'mobx-react-lite'\r\nimport { useContext, useEffect, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport ava from \"../../images/ava.png\"\r\nimport { classNames } from 'primereact/utils'\r\nimport { MenuItem } from 'primereact/menuitem'\r\nimport { ProfileMenu } from '../menus/ProfileMenu'\r\nimport { ExtMenuItem } from '../menus/IMenuProps'\r\nimport { NotificationsMenu } from '../menus/NotificationsMenu'\r\nimport { IUserInfo } from '../../models/responses/IUserInfo'\r\nimport { DOCTORS_ROUTE, LIST_ROUTE, MO_SETTINGS_ROUTE, USER_ROUTE } from '../../utils/consts'\r\nimport { IActivityInfo } from '../../models/responses/IActivityInfo'\r\nimport UsersService from '../../services/UsersService'\r\ntype TopBarLayoutProps = {title: string,  userInfo: IUserInfo | null }\r\nconst detail_templ =\"detail\"\r\nexport const TopBarLayout = observer((props: TopBarLayoutProps) =>{\r\n  const {layoutStore, userStore} = useContext(Context)\r\n  const isTOM = useMediaQuery({ query: \"(max-width: 991px)\" })\r\n  const profileMenuClassName = classNames(\"profile-item\",{\"active-menuitem fadeInDown\":layoutStore.profileMenuActive()})\r\n  const notificationsMenuClassName = classNames(\"notifications-item\", {\"active-menuitem\":layoutStore.notificationsMenuActive()})\r\n  const menuToggle=()=>{    \r\n    if (isTOM && layoutStore.tabletOrMobile()) layoutStore.setTabletOrMobile(false) \r\n    else if (isTOM && !layoutStore.tabletOrMobile()) layoutStore.setTabletOrMobile(true)\r\n    else layoutStore.sideBarToggle()          \r\n  } \r\n  const [userActivity, setUserActivity] = useState<IActivityInfo | null | undefined>()\r\n  \r\n  useEffect(()=>{\r\n    if (userActivity===undefined) {\r\n      UsersService.getUserActivity().then((data)=>{        \r\n        setUserActivity({...data.data})\r\n\r\n      })\r\n      .catch((reason)=>{\r\n        console.log(reason.message)\r\n        setUserActivity(null)\r\n      })\r\n    }\r\n  },[userActivity])\r\n  const items:MenuItem[] = [    \r\n      {label:\"Пользователь\", icon:\"pi-user\", url:`${USER_ROUTE}/${userStore.userInfo?.id}`},\r\n      {label:\"Медорганизация\", icon:\"pi-building\", url:`${MO_SETTINGS_ROUTE}/${userStore.userInfo?.organization.id}`}, \r\n      {label:\"Врачи\", icon:\"pi-users\", url:`${DOCTORS_ROUTE}`},     \r\n      {label:\"Выход\", icon:\"pi-power-off\", command:()=>{userStore.logout()}},       \r\n   ]\r\n  const notif_items:ExtMenuItem[] = [    \r\n      {label:`Создано ${detail_templ} свидетельств`, summary:\"Новых\", className:'p-success', icon:\"pi-user\", detail:userActivity?.created || 0, url:`${LIST_ROUTE}?created_at_gt=${userActivity?.logged}&issue_date_eq=null`, disabled: !userActivity || userActivity.created===0},\r\n      {label:`Изменено ${detail_templ} свидетельств`, summary:\"Измененных\", className:'p-info', icon:\"pi-pencil\", detail:userActivity?.updated || 0, url:`${LIST_ROUTE}?updated_at_gt=${userActivity?.logged}`, disabled: !userActivity || userActivity.updated===0},\r\n      {label:`Заменено ${detail_templ} свидетельств`, summary:\"Замены\", className:'p-info', icon:\"pi-sync\", detail:userActivity?.replaced || 0, url:`${LIST_ROUTE}?created_at_gt=${userActivity?.logged}&number_prev_neq=null`, disabled: !userActivity || userActivity.replaced===0},      \r\n      {label:`Выданы родственникам ${detail_templ} свидетельств`, summary:\"Выданно\", icon:\"pi-check\", detail:userActivity?.issued || 0, url:`${LIST_ROUTE}?issue_date_gt=${userActivity?.logged}`, disabled: !userActivity || userActivity.issued===0}, \r\n      {label:`С замечаниями ${detail_templ} свидетельств`, className:'p-danger', summary:\"Замечаний\", icon:\"pi-comment\", detail:0, url:\"/#\", disabled: true},\r\n      {label:`Проверены ${detail_templ} свидетельств`, summary:\"Проверенно\",  className:'p-success', icon:\"pi-check-circle\", detail:0, url:\"/#\", disabled: true},  \r\n      {label:`Отправлены в ФРМСИ ${detail_templ}`, summary:\"Отправлено\", className:'p-success', icon:\"pi-envelope\", detail:0, url:\"/#\", disabled: true},\r\n   ]\r\n   \r\n   \r\n   const userName = props.userInfo!==null && props.userInfo.person_name ? \r\n   `${props.userInfo.person_name?.family} ${props.userInfo.person_name?.given_1[0]} ${props.userInfo.person_name?.given_2?.charAt(0) ||''}` : ''     \r\n  return (\r\n    <div className=\"layout-topbar\">\r\n      <div className=\"topbar-left\">\r\n        <button type=\"button\" className=\"menu-button p-link\" onClick={()=>menuToggle()}>\r\n          <i className=\"pi pi-chevron-left\"> </i>\r\n        </button>\r\n        <span className=\"topbar-separator\"></span>\r\n        <div className=\"layout-breadcrumb viewname\">\r\n          <span>{props.title}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"topbar-right\">\r\n        <ul className=\"topbar-menu\">          \r\n          <li className={notificationsMenuClassName}>\r\n            <button type=\"button\" className=\"p-link\"\r\n            onClick={()=>layoutStore.setNotificationsMenuActive(true)}>\r\n              <i className=\"pi pi-bell\"></i>\r\n              <span className=\"topbar-badge\">{userActivity?.count || 0}</span>\r\n            </button>\r\n            <NotificationsMenu model={notif_items}/>\r\n          </li>\r\n          <li className={profileMenuClassName}>\r\n            <button type=\"button\" className=\"p-link\" onClick={()=>layoutStore.setProfileMenuActive(true)}>\r\n              <img src={ava} alt=\"\" className=\"profile-image\"/>\r\n              <span className=\"profile-name\">{userName}</span>\r\n            </button>\r\n            <ProfileMenu model={items}/>\r\n          </li> \r\n          <li className=\"right-sidebar-item\">\r\n            <button type=\"button\" className=\"p-link\" onClick={()=>layoutStore.setRightSideBarActive(true)}>\r\n              <i className=\"pi pi-align-right\"></i>\r\n            </button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n})","import { AxiosResponse } from \"axios\"\r\nimport $api, { API_URL } from \"../http\"\r\nimport { ITimeEvent } from \"../models/responses/ITimeEvent\"\r\n\r\n//Стандартные настройки JSON рендеринга модели timeEvent\r\nexport const TIME_EVENT_OPTIONS = {\r\n  render_options: {\r\n    only: [\"id\", \"summary\", \"table\", \"action\", \"detail\", \"created_at\"],\r\n    include: [\"user\", \"organization\"],\r\n  },\r\n  includes: [\"user\", \"organization\"],\r\n  user: { only: [\"id\", \"email\"], include: [\"person_name\"] },\r\n  organization: { only: [\"id\", \"name\"] },\r\n}\r\nexport default class AuditService {\r\n  //POST request for get audit's list\r\n  static async getAudits(query: any): Promise<AxiosResponse<ITimeEvent[]>> {\r\n    return $api.post(`${API_URL}model/Audit/`, { ...query, ...TIME_EVENT_OPTIONS })\r\n  }\r\n}\r\n","import { observer } from 'mobx-react-lite'\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC, useContext, useEffect, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { ACTIONS,  ITimeEvent } from '../../models/responses/ITimeEvent'\r\nimport {  TIME_FORMAT } from '../../utils/consts'\r\nimport AuditService from '../../services/AuditService'\r\n\r\n\r\ntype RightSideBarLayoutProps = {}\r\n\r\nconst RightSideBarLayout: FC<RightSideBarLayoutProps> = (props: RightSideBarLayoutProps) =>{ \r\n  const {layoutStore, userStore} = useContext(Context)\r\n  const className = classNames(\"layout-sidebar-right\", {\"layout-sidebar-right-active\": layoutStore.rightSideBarActive() }) \r\n  const [timeEvents, setTimeEvents] = useState<ITimeEvent[] | null>(null)\r\n  const [q , setQ] = useState<any | null>(null) \r\n  useEffect(()=>{\r\n    if (q === null && userStore.userInfo) {      \r\n      if (userStore.userInfo.roles.includes('ADMIN'))\r\n        setQ({ sorts: [ 'created_at desc']})\r\n      else \r\n        setQ({user_organization_id_eq: userStore.userInfo?.organization.id, sorts: [ 'created_at desc']})\r\n    }  \r\n  }, [q, userStore.userInfo, userStore.userInfo?.organization] ) \r\n  \r\n  useEffect(()=>{\r\n    if (timeEvents===null && q!==null) AuditService.getAudits({q:q, limit: 200})\r\n    .then(response=>setTimeEvents(response.data))\r\n    .catch(()=>setTimeEvents([]))\r\n  },[timeEvents, q]) \r\n    \r\n   \r\n  return (  \r\n  <div className={className}>\r\n    <h5>Активность</h5>\r\n    <div className=\"widget-timeline\">\r\n      { timeEvents===null || timeEvents.length===0 ? 'Событий не найдено' : timeEvents.map(item=>{        \r\n        const ACTION_ATTRIBUTES = ACTIONS.get(item.action)\r\n        if (ACTION_ATTRIBUTES === undefined) throw Error('неверный action')\r\n        const timeStr = new Date(item.created_at).toLocaleString(\r\n      \"ru\", TIME_FORMAT)\r\n        return (\r\n      <div className=\"timeline-event\" key={item.id}>\r\n        <span className=\"timeline-event-icon\" style={{ backgroundColor: ACTION_ATTRIBUTES.color }}>\r\n                <i className={ACTION_ATTRIBUTES.icon}></i>\r\n        </span>\r\n        <div className='timeline-event-title'>{timeStr} {ACTION_ATTRIBUTES.title}</div>\r\n        <div className='timeline-event-detail'>\r\n          {item.summary ? <><b>где: </b> <em>{item.summary}</em></> : ''}\r\n          {item.detail ? <p><b>что: </b>{item.detail}</p> : ''}          \r\n          <b>кем: </b> <em>{item.user.email}</em>         \r\n        </div>\r\n      </div>)})}\r\n    </div> \r\n        \r\n  </div>\r\n)}\r\nexport default observer(RightSideBarLayout)\r\n\r\n","\r\nimport  { FC } from 'react'\r\nimport '../../styles/components/ActionButtonLayout.css'\r\nimport '../../styles/components/Tooltip.css'\r\nimport { SpeedDial } from 'primereact/speeddial'\r\nimport { Tooltip } from 'primereact/tooltip'\r\n\r\nexport interface IActionItem {\r\n  label: string\r\n  icon: string\r\n  command: ()=>void\r\n}\r\n\r\ntype ActionButtonLayoutProps = {items?: IActionItem[]}\r\n\r\nexport const ActionButtonLayout: FC<ActionButtonLayoutProps> = (props: ActionButtonLayoutProps) =>{   \r\n  if (props.items)\r\n  return (\r\n  <div className=\"layout-action\"> \r\n    <Tooltip target=\".layout-action .p-speeddial-semi-circle.p-speeddial-direction-left .p-speeddial-action\" position=\"left\"  />   \r\n    <SpeedDial model={props.items} radius={80}  direction=\"left\" type=\"semi-circle\" />\r\n  </div>)\r\n  else return<></> \r\n}","import React, { FC, useContext, useEffect, useState } from 'react'\r\nimport '../../styles/layout.css'\r\nimport { Context } from '../..'\r\nimport FooterLayout from './FooterLayout'\r\nimport SideBarLayout from './SideBarLayout'\r\nimport { TopBarLayout } from './TopBarLayout'\r\nimport { classNames } from 'primereact/utils'\r\nimport { observer } from 'mobx-react-lite'\r\nimport RightSideBarLayout  from './RightSideBarLayout'\r\nimport { IUserInfo } from '../../models/responses/IUserInfo'\r\nimport { ActionButtonLayout, IActionItem } from './ActionButtonLayout'\r\nimport { ProgressSpinner } from 'primereact/progressspinner'\r\nimport { addLocale } from 'primereact/api'\r\ntype MainLayoutProps = {\r\n  title: string,\r\n  url:string, \r\n  content:React.ReactElement\r\n  actionItems?: IActionItem[]\r\n }\r\n\r\nconst MainLayout: FC<MainLayoutProps>=(props: MainLayoutProps) => { \r\n  const {layoutStore, userStore} = useContext(Context)\r\n  const rightSideBarActive = layoutStore.rightSideBarActive()\r\n  const layoutStaticInactive = layoutStore.layoutStaticInactive()\r\n  const profileMenuActive = layoutStore.profileMenuActive()\r\n  const notificationsMenuActive = layoutStore.notificationsMenuActive()  \r\n  const onClickOutside = ()=>{\r\n    if (rightSideBarActive) layoutStore.setRightSideBarActive(false)\r\n    else if (profileMenuActive) layoutStore.setProfileMenuActive(false)\r\n    else if (notificationsMenuActive) layoutStore.setNotificationsMenuActive(false)\r\n  } \r\n  const wrapperClass = classNames(\"layout-wrapper layout-static p-ripple layout-sidebar-indigo\",{\"layout-static-inactive\": layoutStaticInactive}, {\"layout-mobile-active\": layoutStore.tabletOrMobile()})\r\n  const [userInfo, setUserInfo] = useState<IUserInfo | null>(null)   \r\n  const userId = userStore.user().id   \r\n  useEffect(()=>{ \r\n     if (userId!== undefined && userInfo === null) \r\n     setUserInfo(userStore.userInfo)     \r\n    },[userId, userInfo, userStore.userInfo]\r\n  )\r\n  const content =  layoutStore.isLoading ? <ProgressSpinner/> : props.content \r\n  addLocale('ru', {\r\n    startsWith: 'Начинается с',\r\n    contains: 'Содержит',\r\n    notContains: 'Не содержит',\r\n    endsWith: 'Оканчивается на',\r\n    equals: 'Равно',\r\n    notEquals: 'Не равно',\r\n    noFilter: 'Любое',\r\n    lt: 'Меньше чем',\r\n    lte: 'Меньше или равно',\r\n    gt: 'Больше',\r\n    gte: 'Больше либо равно',\r\n    dateIs: 'Равна',\r\n    dateIsNot: 'Не равна',\r\n    dateBefore: 'Ранее чем',\r\n    dateAfter: 'Позже чем',\r\n    custom: 'Свое',\r\n    clear: 'Очистить',\r\n    apply: 'Применить',\r\n    matchAll: 'условия (И)',\r\n    matchAny: 'условия (ИЛИ)' ,\r\n    addRule: '+ условие',\r\n    removeRule: ' - условие',\r\n    accept: 'ДА',\r\n    reject: 'НЕТ',\r\n    closeText: 'закрыть',\r\n    prevText: 'назад',\r\n    nextText: 'вперед',\r\n    currentText: 'текущий',\r\n    monthNames: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь',\r\n        'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'],\r\n    monthNamesShort: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн',\r\n        'Июл', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек'],\r\n    dayNames: ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'],\r\n    dayNamesShort: ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'],\r\n    dayNamesMin: ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'],\r\n    weekHeader: 'Нед',\r\n    firstDay: 1,\r\n    isRTL: false,\r\n    showMonthAfterYear: false,\r\n    yearSuffix: '',\r\n    month: 'Мес',\r\n    week: 'Неделя',\r\n    day: 'День',\r\n    timeOnlyTitle: 'Выбор времени',\r\n    timeText: 'Время',\r\n    hourText: 'Часы',\r\n    minuteText: 'Минуты',\r\n    secondText: 'Секунды',\r\n    allDayText: 'Полный день',      \r\n  })\r\n  return (\r\n  <div className={wrapperClass} data-theme='light'>    \r\n    <div className='layout-content-wrapper' onClick={()=>onClickOutside()}>  \r\n      <TopBarLayout  title = {props.title}  userInfo={userInfo} />        \r\n      <div className='layout-content'>{content}\r\n        <ActionButtonLayout items={props.actionItems}/>\r\n      </div>\r\n      <FooterLayout userInfo={userInfo} />\r\n    </div>\r\n    <SideBarLayout  activeUrl={props.url} /> \r\n    <RightSideBarLayout />     \r\n    <div className=\"layout-search\"></div>        \r\n    <div className='layout-mask modal-in' onClick={()=>{layoutStore.setTabletOrMobile(false)}}></div>\r\n  </div>  \r\n  ) \r\n}\r\nexport default observer(MainLayout)\r\n\r\n","//\"Вид медицинского свидетельства о смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.19 Версия: 1.1\r\nexport const CERT_TYPES = [\r\n  { code: 1, name: \"окончательное\", s_name: \"ОКН\" },\r\n  { code: 2, name: \"предварительное\", s_name: \"ПРВ\" },\r\n  { code: 3, name: \"взамен предварительного\", s_name: \"ВП\" },\r\n  { code: 4, name: \"взамен окончательного\", s_name: \"ВO\" },\r\n]\r\n","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext } from 'react'\r\nimport { Context } from '../..'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { Divider } from 'primereact/divider'\r\nimport { Card } from 'primereact/card'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport { CERT_TYPES } from '../../NSI/1.2.643.5.1.13.13.99.2.19'\r\nimport { DATE_FORMAT } from '../../utils/consts'\r\n const Section0: FC = () => {\r\n   const { certificateStore } = useContext(Context)\r\n   const cert =  certificateStore.cert  \r\n   const header = () => {\r\n      return <span>Сведения о документе</span>\r\n    }\r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header} key={certificateStore.cert.id}>\r\n        <div className=\"p-fluid p-formgrid p-grid\">\r\n          <div className=\"p-field p-col-6 p-md-2\">\r\n            <label htmlFor=\"series\">Серия</label>\r\n            <InputText id=\"series\" value={cert.series} type=\"text\" \r\n              placeholder='Заполняется автоматически' disabled/>\r\n          </div>\r\n          <div className=\"p-field p-col-6 p-md-4\">\r\n            <label htmlFor=\"number\">Номер</label>\r\n            <InputText id=\"number\" value={cert.number} disabled type=\"text\" placeholder='Заполняется автоматически'/>\r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">                    \r\n            <label htmlFor=\"icon\">Дата</label>\r\n            <Calendar id=\"icon\"  dateFormat=\"dd.mm.yy\" value={cert.issueDate} disabled />\r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">\r\n            <label htmlFor=\"cert_type\">Вид свидетельства</label>\r\n            <Dropdown inputId=\"cert_type\"  placeholder=\"Выбрать\" autoFocus \r\n              options={cert.certType ? ([3, 4].includes(cert.certType) ? CERT_TYPES.filter((item)=>[4,3,1].includes(item.code)) : CERT_TYPES) : CERT_TYPES.filter((item)=>[1,2].includes(item.code)) } optionLabel=\"name\"\r\n              value={CERT_TYPES.find(el=>el.code===cert.certType)} onChange={(e) =>certificateStore.cert.certType = e.value.code} disabled={cert.id > -1} />\r\n          </div>\r\n          \r\n        </div>\r\n        <Divider/>\r\n        <div className=\"p-grid p-mt-2\">              \r\n          <div className=\"p-col-6 p-d-flex p-flex-column p-jc-left p-ai-center p-flex-md-row p-flex-wrap\">\r\n            <div className=\"overview-number p-mr-1 p-mb-1\" style={{padding:'0.1rem'}}>РАНЕЕ ВЫДАННОГО:</div>\r\n             <div className=\"overview-subtext p-mr-1 p-mb-1\" style={{fontWeight:600,padding:'0.2rem'}}>{!!cert.numberPrev ? `${cert.seriesPrev} ${cert.numberPrev} от ${cert.effTimePrev?.toLocaleString('ru', DATE_FORMAT)}` : 'НЕТ'}</div>\r\n          </div>\r\n          <div className=\"p-col-6 p-d-flex p-flex-column p-jc-left p-ai-center p-flex-md-row p-flex-wrap\"\r\n            style={{borderLeft:'1px #dee2e6', borderLeftStyle:'solid'}}>\r\n            <div className=\"overview-number p-mr-1 p-mb-1\" style={{padding:'0.1rem'}}>Статус:</div>\r\n            <div className=\"overview-subtext p-mr-1 p-mb-1\"style={{fontWeight:600,background: cert.latestOne ? 'rgb(211 47 47 / 22%)': '#c8e6c9', color: cert.latestOne ? 'rgb(211 47 47)' : '#256029', padding:'0.2rem'}}>{cert.latestOne ? 'ЗАМЕНЕНО' : 'АКТУАЛЬНОЕ'}</div>\r\n          </div>              \r\n        </div>\r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section0) ","export const HOME_REGION_CODE = \"28\"\r\nexport const DEFAULT_CERT_SUGGESTIONS = [\r\n  { section: \"0\", code: \"0\", suggestion: \"Необходимо выбрать тип свидетельства\", done: false },\r\n  {\r\n    section: \"1\",\r\n    code: \"п.1\",\r\n    suggestion: \"Поля ФИО должны быть заполнены, если умерший идентифицирован\",\r\n    done: false,\r\n  },\r\n  { section: \"1\", code: \"п.2\", suggestion: \"Указание пола умершего является обязательным для заполнения\", done: false },\r\n  {\r\n    section: \"1\",\r\n    code: \"п.3\",\r\n    suggestion: \"Указание даты рождения или причины ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"1\",\r\n    code: \"п.7\",\r\n    suggestion: \"Указание даты смерти или причины ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.1\",\r\n    suggestion: \"Указание серии ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.2\",\r\n    suggestion: \"Указание номера ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.3\",\r\n    suggestion: \"Указание органа выдавшего ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.4\",\r\n    suggestion: \"Указание даты выдачи ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.5\",\r\n    suggestion: \"Указание кода подразделения ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.5\",\r\n    suggestion: \"Указание SNILS умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.6\",\r\n    suggestion: \"Указание полиса ОМС или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"3\",\r\n    code: \"п.8\",\r\n    suggestion: \"Место жительства или причина его отсутствия - обязательны для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"3\",\r\n    code: \"п.9\",\r\n    suggestion: \"Вид места жительства или причина его отсутствия - обязательны для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"3\",\r\n    code: \"п.10\",\r\n    suggestion: \"Вид места смерти или причина его отсутствия - обязательны для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"3\",\r\n    code: \"п.11\",\r\n    suggestion: \"Вид места смерти или причина его отсутствия - обязательны для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.12\",\r\n    suggestion: \"Выбор места наступления смерти - обязателен для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.13\",\r\n    suggestion: \"Выбор срока береммености для детей от 168 ч до 1месяца  - обязателен для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.1\",\r\n    suggestion: \"Внесение весса для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.2\",\r\n    suggestion:\r\n      \"Внесение порядкового номера беременности матери для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.3\",\r\n    suggestion: \"Внесение ФИО матери для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.4\",\r\n    suggestion: \"Внесение даты рождения матери для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.5\",\r\n    suggestion: \"Внесение адреса жительства матери для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.15\",\r\n    suggestion: \"Указание семейного положения - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.16\",\r\n    suggestion: \"Указание образования - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.17\",\r\n    suggestion: \"Указание занятости - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"6\",\r\n    code: \"п.18\",\r\n    suggestion: \"Указание рода причины смерти - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"6\",\r\n    code: \"п.19\",\r\n    suggestion:\r\n      \"Указание указать дату, время и обстоятельства травмы (отравления), в случае смерти не от заболевания - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"6\",\r\n    code: \"п.20\",\r\n    suggestion: \"Указание типа медицинского работника, установившего причины смерти - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"6\",\r\n    code: \"п.21\",\r\n    suggestion: \"Указание основание установления причины смерти - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.a)\",\r\n    suggestion: \"Указание причины а) - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.a)т\",\r\n    suggestion: \"Период времени между началом патол. состояния и смертью в причине а) - обязателен для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.б)\",\r\n    suggestion: \"Указание причины б) или ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.б)т\",\r\n    suggestion:\r\n      \"Период времени между началом патол. состояния и смертью в причине б) или его отсутствие - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.в)\",\r\n    suggestion: \"Указание причины в) или ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.в)т\",\r\n    suggestion:\r\n      \"Период времени между началом патол. состояния и смертью в причине в) или его отсутствие - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.г)\",\r\n    suggestion: \"Указание причины г) или ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.г)т\",\r\n    suggestion:\r\n      \"Период времени между началом патол. состояния и смертью в причине г) или его отсутствие - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"8\",\r\n    code: \"п.22.II.1\",\r\n    suggestion: \"Указание кода прочего состояния или причины его отсутствия - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"8\",\r\n    code: \"п.22.II.2\",\r\n    suggestion:\r\n      \"Указание периода времени между началом патол. состояния и смертью или причины его отсутствия - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.23\",\r\n    suggestion: \"Указание периода наступления смерти в случае ДТП  - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.24\",\r\n    suggestion: \"Указание срока в случае наступления смерти при беременности  - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.25.1\",\r\n    suggestion:\r\n      \"Указание данных о враче (судебно-медицинском эксперте, фельдшере, акушерке), заполнившем свидетельство - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.25.2\",\r\n    suggestion: \"Указание данных о руководителе медицинской организации - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.26\",\r\n    suggestion:\r\n      \"Указание данных об ответственном за проверку медицинских свидетельств лице - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"10\",\r\n    code: \"*A\",\r\n    suggestion: \"Указание ФИО получателя - обязательно для печати\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"10\",\r\n    code: \"*B\",\r\n    suggestion: \"Указание даты выдачи - обязательно для печати\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"10\",\r\n    code: \"*С\",\r\n    suggestion: \"Указание СНИЛС или иного документа удостоверения личности - обязательно для печати\",\r\n    done: false,\r\n  },\r\n]\r\nexport const CERT_TYPE_SUG = 0\r\nexport const PERSON_NAME_SUG = 1\r\nexport const PATIENT_GENDER_SUG = 2\r\nexport const PATIENT_BIRTHDAY_SUG = 3\r\nexport const CERT_DEATH_THIME_SUG = 4\r\nexport const IDSERIES_SUG = 5\r\nexport const IDNUMBER_SUG = 6\r\nexport const IORGNAME_SUG = 7\r\nexport const IORGDATE_SUG = 8\r\nexport const IORGCODE_SUG = 9\r\nexport const SNILS_SUG = 10\r\nexport const OMS_SUG = 11\r\nexport const LIFE_AREA_SUG = 13\r\nexport const LIFE_PLACE_SUG = 12\r\nexport const DEATH_PLACE_SUG = 14\r\nexport const DEATH_AREA_SUG = 15\r\nexport const DEATH_PLACE_TYPE_SUG = 16\r\nexport const TERMS_PREGNANCY_SUG = 17\r\nexport const CHILD_WEIGHT_SUG = 18\r\nexport const NUMBER_PREGNANCY_SUG = 19\r\nexport const MOTHER_FIO_SUG = 20\r\nexport const MOTHER_BIRTHDAY_SUG = 21\r\nexport const MOTHER_ADDRESS_SUG = 22\r\nexport const MARITAL_STATUS_SUG = 23\r\nexport const EDUCATION_LEVEL_SUG = 24\r\nexport const SOCIAL_STATUS_SUG = 25\r\nexport const DEATH_KINDS_SUG = 26\r\nexport const KIND_DEATH_REASON_SUG = 27\r\nexport const EST_MEDIC_SUG = 28\r\nexport const BASIS_DERMINING_SUG = 29\r\nexport const REASON_A_SUG = 30\r\nexport const REASON_A_TIME_SUG = 31\r\nexport const REASON_B_SUG = 32\r\nexport const REASON_B_TIME_SUG = 33\r\nexport const REASON_C_SUG = 34\r\nexport const REASON_C_TIME_SUG = 35\r\nexport const REASON_D_SUG = 36\r\nexport const REASON_D_TIME_SUG = 37\r\nexport const EXT_REASON_SUG = 38\r\nexport const EXT_REASON_TIME_SUG = 39\r\nexport const TRAFFFIC_ACCIDENT_SUG = 40\r\nexport const PREGNANCY_CONNECTION_SUG = 41\r\nexport const AUTHOR_SUG = 42\r\nexport const AUTHENTICATOR_SUG = 44\r\nexport const LEGAL_AUTHENTICATOR_SUG = 43\r\nexport const PARTIPICIPANT_FIO_SUG = 45\r\nexport const PARTIPICIPANT_DATE_SUG = 46\r\nexport const PARTIPICIPANT_IDENTITY_SUG = 47\r\n\r\nexport const changeSuggestion = (code: string, suggestions: any[], done: boolean) => {\r\n  const suggestion = suggestions.find((item) => item.code === code)\r\n  if (suggestion) suggestion.done = done\r\n}\r\n\r\nexport const NULL_FLAVORS = [\r\n  { code: \"NI\", name: \"Нет информации\" },\r\n  { code: \"INV\", name: \"Недопустимое значение\" },\r\n  { code: \"DER\", name: \"Извлекаемое значение\" },\r\n  { code: \"OTH\", name: \"Другое\" },\r\n  { code: \"NINF\", name: \"Минус бесконечность\" },\r\n  { code: \"PINF\", name: \"Плюс бесконечность\" },\r\n  { code: \"UNC\", name: \"Кодирование не проводилось\" },\r\n  { code: \"MSK\", name: \"Скрыто\" },\r\n  { code: \"NA\", name: \"Неприменимо\" },\r\n  { code: \"UNK\", name: \"Неизвестно\" },\r\n  { code: \"ASKU\", name: \"Запрошено, но неизвестно\" },\r\n  { code: \"NAV\", name: \"Временно недоступно\" },\r\n  { code: \"NASK\", name: \"Не запрашивалось\" },\r\n  { code: \"QS\", name: \"Достаточное количество\" },\r\n  { code: \"TRC\", name: \"Трудноразличимо\" },\r\n]\r\nexport type NULL_FLAVOR_CODES =\r\n  | \"NI\"\r\n  | \"INV\"\r\n  | \"DER\"\r\n  | \"OTH\"\r\n  | \"NINF\"\r\n  | \"PINF\"\r\n  | \"UNC\"\r\n  | \"MSK\"\r\n  | \"NA\"\r\n  | \"UNK\"\r\n  | \"ASKU\"\r\n  | \"NAV\"\r\n  | \"NASK\"\r\n  | \"QS\"\r\n  | \"TRC\"\r\n\r\nexport type INullFlavorIdx = {\r\n  [index in NULL_FLAVOR_CODES]: number\r\n}\r\nexport const NULL_FLAVOR_IDX: INullFlavorIdx = {\r\n  NI: 0,\r\n  INV: 1,\r\n  DER: 2,\r\n  OTH: 3,\r\n  NINF: 4,\r\n  PINF: 5,\r\n  UNC: 6,\r\n  MSK: 7,\r\n  NA: 8,\r\n  UNK: 9,\r\n  ASKU: 10,\r\n  NAV: 11,\r\n  NASK: 12,\r\n  QS: 13,\r\n  TRC: 14,\r\n}\r\nexport const ASKU = 10\r\nexport const NA = 8\r\nexport const UNK = 9\r\n\r\nexport const MALE = 1\r\nexport const FEMALE = 2\r\nexport const NOGENDER = 4\r\n\r\nexport const URBAN_AREA_TYPE = 1\r\nexport const VILAGE_AREA_TYPE = 2\r\nexport interface ID_CARD_TYPE {\r\n  code: number\r\n  name: string\r\n  s_mask?: string\r\n  n_mask?: string\r\n  c_mask?: string\r\n}\r\nexport const ID_CARD_TYPES: Array<ID_CARD_TYPE> = [\r\n  { code: 1, name: \"Паспорт гр. РФ\", s_mask: \"99 99\", n_mask: \"999999\", c_mask: \"999-999\" },\r\n  { code: 2, name: \"Заграничный паспорт гр. РФ\", s_mask: \"99\", n_mask: \"9999999\", c_mask: \"ФМС 99999\" },\r\n  { code: 3, name: \"Служебный паспорт\" },\r\n  { code: 4, name: \"Врем. уд. личности(форма № 2П)\" },\r\n  { code: 6, name: \"Свидетельство о рождении\", n_mask: \"999999\" },\r\n  { code: 8, name: \"Удостоверение личности военнослужащего\" },\r\n  { code: 9, name: \"Военный билет\" },\r\n  { code: 10, name: \"Паспорт иностранного гражданина\" },\r\n  { code: 11, name: \"Вид на жительство\" },\r\n  { code: 17, name: \"Разрешение на временное проживание в РФ\" },\r\n  { code: 25, name: \"Справка об освобождении из места лишения свободы\" },\r\n  { code: 36, name: \"Водительское удостоверение\" },\r\n  { code: 38, name: \"Охотничий билет\" },\r\n]\r\n\r\nexport const PASSPORT_RF = 0\r\nexport const REGION = { code: \"28\", name: \"Амурская область\" }\r\nexport const REGION_OKATO = \"10\"\r\nexport const DEFAULT_ERROR_TOAST = {\r\n  severity: \"error\",\r\n  summary: \"Сбой\",\r\n  detail: \"Что-то пошло не так, по-пробуйте позднее\",\r\n  life: 3000,\r\n  baseZIndex: 999,\r\n}\r\n","import React, {FC} from 'react'\r\nimport { IReference } from '../models/IReference'\r\nimport { Checkbox, CheckboxChangeParams } from \"primereact/checkbox\"\r\nimport { Dropdown, DropdownChangeParams } from \"primereact/dropdown\"\r\nimport { useState } from 'react'\r\nimport { NULL_FLAVORS } from '../utils/defaults'\r\nimport { INullFlavorR } from '../models/INullFlavor'\r\nimport { useEffect } from 'react'\r\n\r\ntype NullFlavorWrapperProps = {\r\n  paraNum?: boolean,  \r\n  label: React.ReactElement,  \r\n  checked?: boolean, \r\n  setCheck?: ((e: CheckboxChangeParams, nullFlavors?: INullFlavorR[]) => void), \r\n  disabled?: boolean,\r\n  field: React.ReactElement,\r\n  field_name?: string,\r\n  options: IReference[],\r\n  nullFlavors?: INullFlavorR[], \r\n  value?: number,  \r\n  onChange?: ((e: IReference, nullFlavors: INullFlavorR[] | undefined) => void),\r\n  lincked?: boolean\r\n}\r\n\r\nconst NullFlavorWrapper: FC<NullFlavorWrapperProps>=(props: NullFlavorWrapperProps) => {   \r\n  const [value, setValue] = useState<IReference | null>(props.value? NULL_FLAVORS[props.value] : null)\r\n  const [checked, setChecked] = useState<boolean>(props.checked || false) \r\n  const fieldStyle = props.paraNum ? {marginLeft: '-0.76rem'} : {}\r\n  const ddStyle = {width: '200px'}\r\n  const nullFlavors = (props.nullFlavors && props.nullFlavors.length>0 && props.field_name ) ? props.nullFlavors.filter((element: INullFlavorR)=>element.parent_attr!==props.field_name) : []\r\n  const nullFlavor = (props.nullFlavors && props.nullFlavors.length>0 && props.field_name ) ? props.nullFlavors.find((element: INullFlavorR)=>element.parent_attr===props.field_name) : false\r\n  useEffect(()=>{   \r\n    if (props.nullFlavors) {\r\n      const nullFlavor = props.nullFlavors.find(item=>item.parent_attr===props.field_name && !item._destroy)\r\n      if (nullFlavor) {\r\n        setValue(NULL_FLAVORS[nullFlavor.code])\r\n        if (props.checked!==true) setChecked(false)\r\n      } else if (props.checked!==false) setChecked(true)\r\n    }    \r\n  },[props.nullFlavors, props.field_name, props.checked])   \r\n  \r\n  const checkbox  = !props.lincked && <Checkbox        \r\n        style={{ marginLeft: \"0.4rem\" }}\r\n        checked={checked}\r\n        disabled={props.disabled} \r\n        onChange={(e)=>{\r\n            setChecked(e.checked)\r\n            if (props.nullFlavors) {\r\n              if (props.setCheck && e.checked ) { \r\n                if (nullFlavor && nullFlavor.id) {\r\n                  props.nullFlavors.forEach(el=>{\r\n                    if (el.parent_attr===props.field_name) el._destroy=\"1\"\r\n                  })\r\n                  props.setCheck(e)\r\n                } else  props.setCheck(e, nullFlavors)\r\n              } else if (props.setCheck && props.value && props.field_name) { \r\n                let _nullFlavors = nullFlavors               \r\n                _nullFlavors.push({parent_attr: props.field_name, code: props.value })                                 \r\n                props.setCheck(e, _nullFlavors)                            \r\n              } else if (props.setCheck) props.setCheck(e)             \r\n            } else if (props.setCheck) props.setCheck(e)            \r\n          }\r\n        }        \r\n      />  \r\n       \r\n  const style =  props.lincked ? {marginTop:'0.4rem'} : {}  \r\n  const checkboxLabel = props.lincked && !props.checked ? (<></>) : (\r\n    <div className='p-checkbox-right p-field-checkbox'\r\n     key={`nf_${props.checked}_${props.paraNum}`} style={style}>            \r\n      {props.label}     \r\n      {checkbox}\r\n     </div>\r\n  )\r\n  const dropdown = !props.lincked && <Dropdown       \r\n      id={\"p\" + props.field_name}       \r\n      key={`dd_${props.field_name}_${props.checked}`}\r\n      style={fieldStyle}\r\n      value={value}      \r\n      options={props.options}\r\n      onChange={(e: DropdownChangeParams)=>{   \r\n        setValue(e.value)                \r\n        if (props.onChange) { // for not in MobX nullflavors\r\n          const nullFlavor = {parent_attr: props.field_name, code: NULL_FLAVORS.findIndex((element)=>element.code===e.value.code)}\r\n          let _nullFlavors = nullFlavors\r\n          _nullFlavors.push(nullFlavor as INullFlavorR)\r\n          props.onChange(e.value, _nullFlavors)\r\n        } else if (!!props.nullFlavors) { //standart case nullFlavor\r\n            const idx = props.nullFlavors.findIndex(item=>item.parent_attr===props.field_name)\r\n            if (idx > -1) props.nullFlavors[idx].code = NULL_FLAVORS.findIndex((element)=>element.code===e.value.code)\r\n            else throw new Error(`Error change nullFlavor: invalid field name:  ${props.field_name}`)            \r\n        }                                    \r\n      }}\r\n      optionLabel='name'      \r\n      placeholder='Причина отсутствия'\r\n    />    \r\n  const canNullFlavor = checked ? (\r\n    <div style={fieldStyle}>{props.field}</div>\r\n  ) : (\r\n    <div style={ddStyle}>{dropdown}</div>\r\n  )  \r\n  return (<>{checkboxLabel}{canNullFlavor}</>)\r\n}\r\nexport default NullFlavorWrapper","import { NULL_FLAVOR_CODES, UNK } from \"../utils/defaults\"\r\nimport { IDestroyble } from \"./IDestroyble\"\r\nexport interface INullFlavor {\r\n  id?: number\r\n  parent_guid?: string\r\n  parent_attr: string\r\n  code: NULL_FLAVOR_CODES\r\n}\r\n\r\nexport interface INullFlavorR extends IDestroyble {\r\n  id?: number\r\n  parent_guid?: string\r\n  parent_attr: string\r\n  code: number\r\n}\r\n\r\n//получаем чистый NullFlavor без метки удаления\r\nexport const getCleanNullFlavor = (old: INullFlavorR): INullFlavorR | undefined => {\r\n  if (old === undefined) return\r\n  let _new = { code: old.code, parent_attr: old.parent_attr } as INullFlavorR\r\n  if (old.id) _new.id = old.id\r\n  if (old.parent_guid) _new.parent_guid = old.parent_guid\r\n  return _new\r\n}\r\n\r\n//генерируем заполнитель UNK автоматически,\r\n//проверяя значение field\r\n//и массив заполнителей до внесения изменений: original\r\nexport const checkFieldNullFlavor = (\r\n  key: string,\r\n  field: any | null | undefined,\r\n  nullFlavors: INullFlavorR[],\r\n  code = UNK\r\n) => {\r\n  let idx = nullFlavors.findIndex((item) => item.parent_attr === key)\r\n  if (field && idx !== -1 && nullFlavors[idx].id) {\r\n    do {\r\n      nullFlavors[idx]._destroy = \"1\"\r\n      idx = nullFlavors.findIndex((item) => item.parent_attr === key && !item._destroy && item.id)\r\n    } while (idx !== -1)\r\n  } else if (field && idx !== -1) nullFlavors.splice(idx, 1)\r\n  else if (!field && idx !== -1 && nullFlavors[idx]._destroy === \"1\") {\r\n    nullFlavors[idx] = { ...getCleanNullFlavor(nullFlavors[idx]) } as INullFlavorR\r\n  } else if (!field && idx === -1) nullFlavors.push({ code: code, parent_attr: key })\r\n}\r\n\r\n//генерируем заполнители UNK автоматически,\r\n//проверяя карту fields<имя поля, значение>\r\n//и массив заполнителей до внесения изменений: original\r\nexport const createNullFlavors = (fields: Map<string, any | null | undefined>, original: INullFlavorR[]) => {\r\n  fields.forEach((value, key) => {\r\n    checkFieldNullFlavor(key, value, original)\r\n  })\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport IIdentity from \"../IIdentity\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport IIdentityR from \"../requests/IIdentityR\"\r\n\r\nexport default class Identity implements ISerializable {\r\n  private _id?: string\r\n  private _identityCardType: number\r\n  private _series?: string\r\n  private _number: string | undefined\r\n  private _issueOrgName: string | undefined\r\n  private _issueOrgCode?: string | undefined\r\n  private _issueOrgDate: Date | undefined\r\n  private _parentGUID: string\r\n  private _nullFlavors: INullFlavorR[]\r\n  constructor(props: IIdentity) {\r\n    this._id = props.id\r\n    this._identityCardType = props.identity_card_type_id\r\n    if (props.series) this._series = props.series\r\n    this._number = props.number\r\n    this._issueOrgName = props.issueOrgName\r\n    if (props.issueOrgCode) this._issueOrgCode = props.issueOrgCode\r\n    if (props.issueDate) this._issueOrgDate = new Date(props.issueDate)\r\n    this._parentGUID = props.parentGUID\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes(): IIdentityR {\r\n    let _identity = {} as IIdentityR\r\n    if (this._id) _identity.id = this._id\r\n    if (this._identityCardType) _identity.identity_card_type_id = this._identityCardType\r\n    if (this._issueOrgCode) _identity.issueOrgCode = this._issueOrgCode\r\n    if (this._issueOrgDate) _identity.issueDate = this._issueOrgDate.toDateString()\r\n    if (this._issueOrgName) _identity.issueOrgName = this._issueOrgName\r\n    if (this._nullFlavors.length > 0) _identity.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._number) _identity.number = this._number\r\n    if (this._parentGUID) _identity.parentGUID = this._parentGUID\r\n    if (this._series) _identity.series = this._series\r\n    return _identity\r\n  }\r\n  get identityCardType() {\r\n    return this._identityCardType\r\n  }\r\n  set identityCardType(ct: number) {\r\n    this._identityCardType = ct\r\n  }\r\n  get series() {\r\n    return this._series ? this._series : \"\"\r\n  }\r\n  set series(series: string | undefined) {\r\n    this._series = series\r\n  }\r\n  get number() {\r\n    return this._number\r\n  }\r\n  set number(number: string | undefined) {\r\n    this._number = number\r\n  }\r\n  get issueOrgName() {\r\n    return this._issueOrgName\r\n  }\r\n  set issueOrgName(issueOrgName: string | undefined) {\r\n    this._issueOrgName = issueOrgName\r\n  }\r\n  get issueOrgDate() {\r\n    return this._issueOrgDate\r\n  }\r\n  set issueOrgDate(issueOrgDate: Date | undefined) {\r\n    this._issueOrgDate = issueOrgDate\r\n  }\r\n  get issueOrgCode() {\r\n    return this._issueOrgCode ? this._issueOrgCode : \"\"\r\n  }\r\n  set issueOrgCode(issueOrgCode: string | undefined) {\r\n    this._issueOrgCode = issueOrgCode\r\n  }\r\n  get parentGUID() {\r\n    return this._parentGUID\r\n  }\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IContact } from \"../IContact\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IPerson } from \"../IPerson\"\r\nimport { IPersonName } from \"../IPersonName\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { IPersonR } from \"../requests/IPersonR\"\r\n\r\nexport default class Person implements ISerializable {\r\n  private _id?: string\r\n  private _personName?: IPersonName\r\n  private _SNILS?: string | undefined\r\n  private _nullFlavors: INullFlavorR[]\r\n  private _address?: IAddressR | undefined\r\n  private _contacts: IContact[]\r\n  private _oldOne?: IPerson\r\n\r\n  constructor(props = {} as IPerson) {\r\n    this._oldOne = props\r\n    this._personName = props.person_name\r\n    this._SNILS = props.SNILS\r\n    this._id = props.id\r\n    this._address = {\r\n      ...props.address,\r\n      null_flavors_attributes:\r\n        props.address?.null_flavors?.map((item) => {\r\n          return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n        }) || [],\r\n    } as IAddressR\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    this._contacts = props.contacts || []\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n\r\n  getAttributes(): IPersonR {\r\n    let _person = {} as IPersonR\r\n    if (this._id) _person.id = this._id\r\n    if (this._SNILS) _person.SNILS = this._SNILS\r\n    if (this._address && !!this._address.state && !!this._address.streetAddressLine)\r\n      _person.address_attributes = { ...this._address }\r\n    else if (this._oldOne && this._oldOne.address?.id)\r\n      _person.address_attributes = { id: this._oldOne.address.id, _destroy: \"1\" } as IAddressR\r\n    if (this._contacts.length > 0) _person.contacts_attributes = [...this._contacts]\r\n    if (this._nullFlavors.length > 0) _person.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._personName) _person.person_name_attributes = { ...this._personName }\r\n    return _person\r\n  }\r\n\r\n  get fio() {\r\n    return this._personName\r\n  }\r\n\r\n  set fio(fio: IPersonName | undefined) {\r\n    this._personName = fio\r\n  }\r\n\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  get SNILS() {\r\n    return this._SNILS\r\n  }\r\n\r\n  set SNILS(snils: string | undefined) {\r\n    this._SNILS = snils\r\n  }\r\n\r\n  get id() {\r\n    return this._id\r\n  }\r\n  get address(): IAddressR | undefined {\r\n    return this._address\r\n  }\r\n  set address(value: IAddressR | undefined) {\r\n    this._address = value\r\n  }\r\n  get contacts(): IContact[] {\r\n    return this._contacts\r\n  }\r\n  set contacts(value: IContact[]) {\r\n    this._contacts = value\r\n  }\r\n\r\n  fullName(): string {\r\n    const fio = this._personName\r\n    return !!fio ? `${fio.family} ${fio.given_1} ${!!fio.given_2 ? fio.given_2 : \"\"}` : \"\"\r\n  }\r\n}\r\n","export interface IPersonName {\r\n  id?: number\r\n  family: string // фамилия\r\n  given_1: string // имя\r\n  given_2?: string // отчество\r\n}\r\nexport const getOneLinePersonName = (person_name: IPersonName | undefined | null): string => {\r\n  if (!person_name) return \"\"\r\n  else return `${person_name.family} ${person_name.given_1} ${person_name.given_2 ? person_name.given_2 : \"\"}`.trim()\r\n}\r\n","import { InputText } from 'primereact/inputtext'\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC, useState } from 'react'\r\nimport { getOneLinePersonName, IPersonName } from '../../models/IPersonName'\r\n\r\ntype PersonNameProps = {\r\n  personName?: IPersonName\r\n  submitted?:boolean\r\n  onChange:(personName: IPersonName)=>void\r\n}\r\nexport const PersonName:FC<PersonNameProps> = (props:PersonNameProps) =>{\r\n  const [fio, setFio] = useState(getOneLinePersonName(props.personName)) \r\n  const isErrorMessage = props.submitted && (!props.personName || !props.personName.family || !props.personName.given_1)\r\n  return (<>\r\n    <InputText  id=\"fio\" type=\"text\" \r\n      value={fio}                    \r\n      onChange={(e)=>{\r\n        setFio(e.target.value)               \r\n        const values = e.target.value.trim().split(\" \")\r\n        let _result = {} as IPersonName\r\n        if (props.personName?.id) _result.id = props.personName?.id\r\n        if (values && values.length > 1) {\r\n          _result = {..._result, family: values[0], given_1: values[1]} as IPersonName\r\n          if (values[2]) _result.given_2 = values[2]                      \r\n        } else  _result = {..._result, family: '', given_1: ''} as IPersonName\r\n        props.onChange(_result)                                      \r\n      }}\r\n      className={classNames({ 'p-invalid': isErrorMessage})}\r\n    />\r\n    {isErrorMessage && <small className=\"p-error\">Фамилия, имя обязательны</small>}\r\n  </>)\r\n} ","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { Checkbox, CheckboxChangeParams } from 'primereact/checkbox'\r\nimport { RadioButton } from 'primereact/radiobutton'\r\nimport '../../styles/components/RadioButton.css'\r\nimport '../../styles/components/Calendar.css'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { ASKU, FEMALE, ID_CARD_TYPES, MALE, NOGENDER, NULL_FLAVORS, PASSPORT_RF, UNK } from '../../utils/defaults'\r\nimport { IReference } from '../../models/IReference'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { checkFieldNullFlavor, INullFlavorR } from '../../models/INullFlavor'\r\nimport { IPersonName } from '../../models/IPersonName'\r\nimport IIdentity from '../../models/IIdentity'\r\nimport Identity from '../../models/FormsData/Identity'\r\nimport Person from '../../models/FormsData/Person'\r\nimport { PersonName } from '../inputs/PersonName'\r\n\r\n\r\n const Section1: FC = () => {   \r\n  const { certificateStore, suggestionsStore, layoutStore } = useContext(Context) \r\n  const certificate = certificateStore.cert   \r\n  const patient = certificate.patient\r\n  const person =  patient.person     \r\n  const [yearBTChecked, setYearBTChecked] = useState<boolean>(!!patient.birth_year)   \r\n  const [yearDTChecked, setYearDTChecked] = useState<boolean>(!!certificate.deathYear) \r\n  \r\n  const header = () => {\r\n      return <span>Данные умершего</span>\r\n    }\r\n    \r\n  const identified = suggestionsStore.identified   \r\n  const optionCode = suggestionsStore.fromRelatives ? 'ASKU' : 'NA UNK'\r\n  const isDeathTime = certificate.deathDatetime!==undefined \r\n        && certificate.nullFlavors.findIndex((item)=>item.parent_attr===\"death_time\")===-1\r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">\r\n            <div className=\"p-field-checkbox p-col-12 p-lg-6\">              \r\n              <Checkbox inputId=\"notIdentified\" checked={!suggestionsStore.identified} onChange={e =>{                \r\n                if (e.checked) {\r\n                  patient.person = undefined\r\n                  patient.identity = undefined\r\n                  certificate.policyOMS = undefined\r\n                } else { \r\n                  patient.person = new Person()\r\n                  if (yearBTChecked) { setYearBTChecked(false) \r\n                    patient.setBirthDay(patient.birth_date as Date | undefined, false)\r\n                  }      \r\n                }  \r\n                checkFieldNullFlavor('person', patient.person, patient.nullFlavors, UNK) \r\n                checkFieldNullFlavor('identity', patient.identity, patient.nullFlavors, UNK)  \r\n                checkFieldNullFlavor('policy_OMS', certificate.policyOMS, certificate.nullFlavors, UNK)           \r\n                suggestionsStore.identified = !e.checked  \r\n                }} \r\n              />\r\n              <label htmlFor=\"notIdentified\">Умерший не идентифицирован</label>\r\n            </div>\r\n            <div className=\"p-field-checkbox p-col-12 p-lg-6\">              \r\n              <Checkbox inputId=\"fromRelatives\" checked={suggestionsStore.fromRelatives} \r\n              onChange={e =>{       \r\n                suggestionsStore.fromRelatives = e.checked\r\n                if (e.checked) { \r\n                  if (!patient.person) {\r\n                    patient.person = new Person()\r\n                    checkFieldNullFlavor('person', patient.person, patient.nullFlavors)\r\n                  }  \r\n                  if (yearBTChecked) { \r\n                    setYearBTChecked(false) \r\n                    patient.setBirthDay(patient.birth_date as Date | undefined, false)\r\n                  }\r\n                  patient.identity = undefined  \r\n                  checkFieldNullFlavor('identity', patient.identity, patient.nullFlavors, ASKU)                                  \r\n                } else \r\n                  patient.identity = new Identity({identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code} as IIdentity)                \r\n                }}/>\r\n              <label htmlFor=\"fromRelatives\">Внесено со слов родственников</label>\r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'> 1. </div>\r\n              <div className='p-paragraph-field p-mr-2 p-mb-2' \r\n                key={`pdiv1_${identified}`} >\r\n                <NullFlavorWrapper \r\n                  disabled={!suggestionsStore.fromRelatives}               \r\n                  checked={identified} \r\n                  paraNum                                \r\n                  label={<label htmlFor=\"family\">Фамилия, имя, отчество(при наличии)</label>}\r\n                  field={<PersonName personName={person?.fio}                                     \r\n                    onChange={(value: IPersonName | undefined)=>{     \r\n                      if (!person) return                          \r\n                      if (value?.family !== \"\" && (!person.fio || person.fio.family ===\"\")) layoutStore.message = { severity: 'success', summary: 'Успешно', detail: 'ФИО умершего изменены, чтобы сохранить изменения, введите причину А в п.22', life: 3000 }                                        \r\n                      person.fio = value || {family:'',given_1:''}\r\n                      checkFieldNullFlavor('fio.given_2', person.fio.given_2, person.nullFlavors, UNK)     \r\n                                                  \r\n                  }}/>}                  \r\n                  options={NULL_FLAVORS.filter((item:IReference)=>optionCode.includes(item.code))} \r\n                  value={suggestionsStore.fromRelatives ? ASKU : UNK} \r\n                  nullFlavors={patient.nullFlavors}  \r\n                  field_name=\"person\"                                 \r\n                />             \r\n              </div>\r\n            </div>  \r\n            <div className=\"p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1' > 2. </div>\r\n              <div className='p-paragraph-field'>\r\n                <div className=\"p-formgroup-inline\">\r\n                  <div className='p-field-radiobutton p-radiobutton'>Пол</div>\r\n                  <div className='p-field-radiobutton'>                  \r\n                    <RadioButton name='undef' checked={patient.gender === NOGENDER}\r\n                      onChange={(e)=>{\r\n                        if (e.checked) patient.gender = NOGENDER  \r\n                        else patient.gender = undefined\r\n                      }}/>\r\n                    <label htmlFor='undef'> Неопределенный </label>\r\n                  </div>\r\n                  <div className='p-field-radiobutton'>                  \r\n                    <RadioButton name='female' checked={patient.gender === FEMALE}\r\n                      onChange={(e)=>{\r\n                      if (e.checked) patient.gender = FEMALE  \r\n                      else patient.gender = undefined\r\n                      }}\r\n                    />\r\n                    <label htmlFor='female'> Женский</label>\r\n                  </div>                \r\n                  <div className='p-field-radiobutton'>                  \r\n                    <RadioButton name='male' checked={patient.gender === MALE}\r\n                      onChange={(e)=>{\r\n                        if (e.checked) patient.gender = MALE  \r\n                        else patient.gender = undefined\r\n                      }}\r\n                    />\r\n                    <label htmlFor='male'>Мужской</label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"p-field p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1'> 3. </div>\r\n              <div className='p-paragraph-field' key={`pdiv5_${identified}`}>                    \r\n                <NullFlavorWrapper paraNum\r\n                    disabled={suggestionsStore.identified}                    \r\n                    label={<label htmlFor=\"dateBirth\">Дата рождения</label>}\r\n                    checked={suggestionsStore.identified || yearBTChecked } setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) {                        \r\n                        patient.birth_date = undefined\r\n                        patient.birth_year = undefined \r\n                      } \r\n                      if (nullFlavors) patient.nullFlavors = nullFlavors \r\n                    }} \r\n                    onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) patient.nullFlavors = nullFlavors}}\r\n                    field={<div className=\"p-d-flex p-jc-start p-ai-center\">              \r\n                      <Calendar id=\"dateBirth\" className=\"p-mr-2\" locale=\"ru\"\r\n                        dateFormat={yearBTChecked ? \"yy\" : \"dd.mm.yy\"}  \r\n                        view={yearBTChecked ? \"year\" : \"date\"} \r\n                        mask={yearBTChecked ? \"9999\" : \"99.99.9999\"}                         \r\n                        value={patient.birth_date} \r\n                        onChange={(e)=>{\r\n                          console.log('e',e)\r\n                          patient.setBirthDay(e.target.value as Date | undefined, yearBTChecked)\r\n                        }                          \r\n                        }\r\n                        showIcon />\r\n                      <div className=\"p-field-checkbox\">              \r\n                        <Checkbox checked={yearBTChecked} \r\n                          inputId=\"bd_year\" \r\n                          onChange={e=>{\r\n                            setYearBTChecked(e.checked)\r\n                            patient.setBirthDay(patient.birth_date as Date | undefined, e.checked) }}/>\r\n                        <label htmlFor=\"bd_year\">Только год</label>\r\n                      </div>\r\n                    </div>}\r\n                    options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                    value={suggestionsStore.fromRelatives ? ASKU : UNK}\r\n                    field_name=\"birth_date\"\r\n                    nullFlavors={patient.nullFlavors}\r\n                />                               \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1'> 7. </div>\r\n              <div className='p-paragraph-field p-mr-3 p-mb-2'>\r\n                <NullFlavorWrapper paraNum                   \r\n                  label={<label htmlFor=\"dateDeath\">Дата смерти</label>}                  \r\n                  checked={certificate.deathDatetime!==undefined} setCheck={(e:CheckboxChangeParams, nullFlavors:      INullFlavorR[] | undefined)=>{                   \r\n                    if (!e.checked) certificate.setDeathDay(undefined, false)                      \r\n                    else certificate.setDeathDay(new Date(), false)                         \r\n                    if (nullFlavors) certificate.nullFlavors = nullFlavors  \r\n                  }} \r\n                  onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n                  field={<div className=\"p-d-flex p-jc-start p-ai-center\">              \r\n                      <Calendar id=\"dateDeath\" className=\"p-mr-2\" locale=\"ru\"\r\n                        dateFormat={yearDTChecked ? \"yy\" : \"dd.mm.yy\"} \r\n                        mask={yearDTChecked ? \"9999\" : \"99.99.9999\"}\r\n                        view={yearDTChecked ? \"year\" : \"date\"}\r\n                        value={certificate.deathDatetime}\r\n                        onChange={(e)=>certificate.setDeathDay(e.target.value as Date | undefined, yearDTChecked) \r\n                        } \r\n                        showIcon />\r\n                      <div className=\"p-field-checkbox\">              \r\n                        <Checkbox checked={yearDTChecked} \r\n                          inputId=\"bd_year\" \r\n                          onChange={e=>{ setYearDTChecked(e.checked)\r\n                            certificate.setDeathDay(certificate.deathDatetime as Date | undefined, e.checked)}}/>\r\n                        <label htmlFor=\"bd_year\">Только год</label>\r\n                      </div>\r\n                    </div>}\r\n                    options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                    value={UNK}\r\n                    field_name=\"death_datetime\"                    \r\n                    nullFlavors={certificate.nullFlavors}\r\n                 />\r\n              </div>     \r\n              <div className='p-paragraph-field' key={`pdivdt_${yearDTChecked}_${isDeathTime}`}>                \r\n                <NullFlavorWrapper \r\n                  disabled={yearDTChecked}                   \r\n                  label={<label htmlFor=\"timeDeath\">Время смерти</label>}\r\n                  checked={isDeathTime && !yearDTChecked} \r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                   \r\n                    if (nullFlavors) certificate.nullFlavors = nullFlavors  \r\n                  }}\r\n                  onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) certificate.nullFlavors = nullFlavors}} \r\n                  field={ <Calendar id=\"timeDeath\"  \r\n                    timeOnly hourFormat=\"24\" locale=\"ru\"                                                   \r\n                    value={certificate.deathDatetime} \r\n                    showIcon />}\r\n                  options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                  value={UNK}\r\n                  field_name=\"death_time\"\r\n                  nullFlavors={certificate.nullFlavors}                  \r\n                />\r\n              </div>\r\n            </div>            \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section1) ","import { InputMask, InputMaskProps } from 'primereact/inputmask'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport Identity from '../../models/FormsData/Identity'\r\nimport { ID_CARD_TYPE } from '../../utils/defaults'\r\n\r\ntype InputsIdentityProps = {\r\n  dulValue?: ID_CARD_TYPE\r\n  identity?:Identity  \r\n}\r\nexport const inputsIdentity = (props:InputsIdentityProps) =>{\r\n  const identity = props.identity\r\n  const dulValue = props.dulValue\r\n  const seriesProps = {type:\"text\", id:\"series\", value:identity?.series,                  \r\n      onChange:(e:any)=>{if (identity) identity.series = e.target.value }}  \r\n  const seriesField = dulValue?.s_mask ? <InputMask {...{mask:dulValue?.s_mask,...seriesProps} as InputMaskProps }/>\r\n    : <InputText {...seriesProps}/>   \r\n  const numberProps = {type:\"text\", id:\"docNumber\", value:identity?.number,                  \r\n      onChange:(e:any)=>{if (identity) identity.number = e.target.value }}  \r\n  const numberField = dulValue?.n_mask ? <InputMask {...{mask:dulValue?.n_mask,...numberProps} as InputMaskProps }/>\r\n    : <InputText {...numberProps}/> \r\n  const depCodeProps = {type:\"text\", id:\"depCode\", value:identity?.issueOrgCode,                  \r\n      onChange:(e:any)=>{if (identity) identity.issueOrgCode = e.target.value}}  \r\n  const depCodeField = dulValue?.c_mask ? <InputMask {...{mask:dulValue?.c_mask,...depCodeProps} as InputMaskProps }/>\r\n    : <InputText {...depCodeProps}/> \r\n  return [seriesField, numberField,  depCodeField]\r\n}","import { observer } from 'mobx-react-lite'\r\nimport React, { FC, useContext, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { Card } from 'primereact/card'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport '../../styles/components/RadioButton.css'\r\nimport '../../styles/components/Calendar.css'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { ASKU, ID_CARD_TYPES, NA, NULL_FLAVORS, PASSPORT_RF, UNK } from '../../utils/defaults'\r\nimport { IReference } from '../../models/IReference'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { checkFieldNullFlavor, INullFlavorR } from '../../models/INullFlavor'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { InputMask } from 'primereact/inputmask'\r\nimport { InputTextarea } from 'primereact/inputtextarea'\r\nimport Identity from '../../models/FormsData/Identity'\r\nimport IIdentity from '../../models/IIdentity'\r\nimport { inputsIdentity } from '../inputs/inputsIdentity'\r\n\r\n\r\n\r\n const Section2: FC = () => {\r\n  const { certificateStore, suggestionsStore } = useContext(Context)   \r\n  const identified = suggestionsStore.identified  \r\n  const header = () => {\r\n      return <span>Документы умершего</span>\r\n    }    \r\n  const certificate = certificateStore.cert   \r\n  const patient = certificate.patient\r\n  const identity = patient.identity \r\n  const [docChecked, setDocChecked] = useState(identified && patient.nullFlavors.findIndex(item=>!item._destroy && item.parent_attr==='identity')===-1)    \r\n  const [dulValue, setDulValue]  = useState(ID_CARD_TYPES.find((item)=>item.code === identity?.identityCardType))\r\n  const person =  patient.person   \r\n  const nullFlavorOption =  docChecked ? \"UNK\" : \"UNK ASKU NA\" \r\n  const [seriesField, numberField, depCodeField] = inputsIdentity({dulValue, identity})    \r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">            \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>4. </div>\r\n              <div className='p-paragraph-field p-mr-2 p-mb-2'>\r\n                <NullFlavorWrapper \r\n                  disabled={!identified} paraNum                              \r\n                  checked={docChecked} setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>\r\n                    { if (e.checked) {\r\n                      patient.identity = new Identity({\r\n                        identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code,                                  \r\n                          } as IIdentity)\r\n                        if (!identified) suggestionsStore.identified = true\r\n                      } else patient.identity = undefined \r\n                      if (nullFlavors) patient.nullFlavors = nullFlavors\r\n                      setDocChecked(e.checked)\r\n                    }}\r\n                  nullFlavors={patient.nullFlavors}\r\n                  field_name=\"identity\"\r\n                  label={<label htmlFor=\"identity_card_type\">Документ, удостоверяющей личность умершего: </label>}\r\n                  field={<Dropdown  id=\"identity_card_type\" value={dulValue} \r\n                  autoFocus options={ID_CARD_TYPES} optionLabel='name'\r\n                  onChange={(e)=>{\r\n                    if (identity) identity.identityCardType = e.value.code\r\n                    else {\r\n                      patient.identity = new Identity({identity_card_type_id: e.value.code} as IIdentity)\r\n                      checkFieldNullFlavor(\"identity\", patient.identity, patient.nullFlavors)\r\n                    }  \r\n                    setDulValue(ID_CARD_TYPES.find((item)=>item.code === e.value.code))\r\n                  }}\r\n                  />}                  \r\n                  options={NULL_FLAVORS.filter((item:IReference)=>nullFlavorOption.includes(item.code))} \r\n                  value={docChecked ? UNK : ASKU}                                    \r\n                />             \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`ser_${docChecked}`} \r\n                style={{marginLeft:'1.5rem'}}>\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"series\">Серия</label>}\r\n                  checked={docChecked && patient.identity?.nullFlavors.findIndex(nf=>nf.parent_attr==='series')===-1} setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                    if (e.checked && patient.identity) patient.identity.series = ''\r\n                    else if (patient.identity) patient.identity.series = undefined                                    \r\n                  }}                 \r\n                  field={seriesField}\r\n                  field_name='series'\r\n                  options={identified ? [NULL_FLAVORS[NA]] : [NULL_FLAVORS[ASKU]]}\r\n                  value={NA}\r\n                  nullFlavors={patient.identity?.nullFlavors}\r\n                  lincked={!docChecked}                                   \r\n                />  \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`num_${docChecked}`}\r\n                style={{marginLeft:'1.5rem'}} >\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"docNumber\">Номер</label>}\r\n                  checked={docChecked}                 \r\n                  field={numberField}\r\n                  options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                  value={identified ? UNK : ASKU} \r\n                  lincked                                      \r\n                />                    \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-3 p-mb-2\" key={`org_${docChecked}`} style={{marginLeft:'1.5rem'}} >\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"issueOrgName\">Кем выдан</label>}\r\n                  checked={docChecked}                   \r\n                  field={\r\n                    <InputTextarea id=\"issueOrgName\" value={identity?.issueOrgName} \r\n                    cols={65} rows={2}   disabled={!identified}\r\n                    onChange={(e)=>{if (identity) identity.issueOrgName = e.target.value }}/>}\r\n                  options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                  value={identified ? UNK : ASKU} \r\n                  lincked                                      \r\n                />                    \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{marginLeft:'1.5rem'}} key={`pdiv5_${docChecked}`}>\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"issueDate\">Когда выдан</label>}\r\n                  checked={docChecked}                   \r\n                  field={<Calendar  id=\"issueDate\" className=\"p-mr-2\" \r\n                    dateFormat={\"dd.mm.yy\"} \r\n                    locale=\"ru\" mask=\"99.99.9999\"                    \r\n                    value={identity?.issueOrgDate}\r\n                    onChange={(e)=>{if (identity) identity.issueOrgDate = e.target.value as Date | undefined}}\r\n                    showIcon />\r\n                  }\r\n                  options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                  value={identified ? UNK : ASKU}\r\n                  field_name=\"issueDate\"\r\n                  lincked                                       \r\n                /> \r\n              </div>  \r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`code_${docChecked}`} style={{marginLeft:'1.5rem'}}> \r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"depCode\">Код подразделения</label>}\r\n                  checked={docChecked && patient.identity?.nullFlavors.findIndex(nf=>nf.parent_attr==='issueOrgCode')===-1} \r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                    if (e.checked && patient.identity) patient.identity.issueOrgCode = ''\r\n                    else if (patient.identity) patient.identity.issueOrgCode = undefined  \r\n                    if (nullFlavors && patient.identity) patient.identity.nullFlavors =  nullFlavors            \r\n                  }}                   \r\n                  field={depCodeField}\r\n                  options={identified ? [NULL_FLAVORS[NA]] : [NULL_FLAVORS[ASKU]]}\r\n                  value={identified ? NA : ASKU} \r\n                  nullFlavors={patient.identity?.nullFlavors} \r\n                  lincked={!docChecked}\r\n                  field_name=\"issueOrgCode\"                                     \r\n                />                    \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1'> 5. </div>\r\n              <div className='p-paragraph-field'>                    \r\n                <NullFlavorWrapper paraNum                    \r\n                    label={<label htmlFor=\"snils\">СНИЛС</label>}\r\n                    disabled={!identified} \r\n                    checked={person && person.nullFlavors.findIndex(item=>item.parent_attr === 'SNILS' && !item._destroy)===-1} setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                      if (!person) return\r\n                      if (nullFlavors) person.nullFlavors = nullFlavors\r\n                      if (!e.checked) person.SNILS = undefined                                       \r\n                    }}                    \r\n                    field={<InputMask id=\"snils\"  \r\n                      type=\"text\" mask=\"999-999-999 99\"\r\n                      value={person?.SNILS} \r\n                      onChange={(e)=>{\r\n                        if (!person) return\r\n                        person.SNILS = e.target.value}}/>            \r\n                    }\r\n                    options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK NA\".includes(item.code))} \r\n                    value={docChecked ? UNK : ASKU}\r\n                    field_name=\"SNILS\"\r\n                    nullFlavors={person?.nullFlavors}\r\n                />                               \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1'>6.* </div>\r\n              <div className='p-paragraph-field p-mr-3 p-mb-2'>\r\n                <NullFlavorWrapper  paraNum                   \r\n                    label={<label htmlFor=\"policyOMS\">Серия и номер полиса ОМС</label>}\r\n                    checked={identified && certificate.nullFlavors.findIndex(item=>item.parent_attr === 'policy_OMS' && !item._destroy)===-1} setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                      if (!e.checked) certificate.policyOMS = undefined                                           \r\n                    }}                     \r\n                    field={<InputText id=\"policyOMS\"  \r\n                      type=\"text\" \r\n                      value={certificate.policyOMS} \r\n                      onChange={(e)=>{certificate.policyOMS = e.target.value}}/>            \r\n                    }\r\n                    options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK NA\".includes(item.code))} \r\n                    value={docChecked ? UNK : ASKU}\r\n                    field_name=\"policy_OMS\"\r\n                    nullFlavors={certificate.nullFlavors}\r\n                />\r\n              </div>                   \r\n            </div>  \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%', paddingLeft:'0.5rem'}} >\r\n              <em>* В случае смерти ребенка до года заполняется в отношении матери</em>\r\n            </div>          \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section2) ","/*\r\n* ADDRESS SEARCH DIALOG COMPONENT\r\n* функционал ввода адреса посредством поиска в ФИАС\r\n* параметры:\r\n* ID - ID существующей записи адреса в СУБД \r\n* address - полное представление записи адреса в СУБД  \r\n*/\r\nimport { observer } from 'mobx-react-lite'\r\nimport { AutoComplete, AutoCompleteChangeParams } from 'primereact/autocomplete'\r\nimport { Button } from 'primereact/button'\r\nimport { Dialog } from 'primereact/dialog'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { Toast } from 'primereact/toast'\r\nimport { FC, useContext, useEffect, useRef, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { IReference } from '../../models/IReference'\r\nimport { IFiasItem } from '../../models/responses/IFiasItem'\r\nimport { DEFAULT_ERROR_TOAST, HOME_REGION_CODE } from '../../utils/defaults'\r\n\r\ntype AddressDialogProps = {  \r\n  onCancel?: ()=>void \r\n}\r\n\r\nconst AddressDialog: FC<AddressDialogProps> = (props: AddressDialogProps) =>{ \r\n  const { addressStore } = useContext(Context)  \r\n  const [isLoading] = useState(addressStore.isLoading)  \r\n  const value = addressStore.address  \r\n  const streetAddressLine = value.streetAddressLine\r\n  const regions = addressStore.regionsOptions\r\n  const [searchStr, setSearchStr] = useState<string>('')   \r\n  useEffect(()=>setSearchStr(streetAddressLine)    \r\n  , [streetAddressLine])  \r\n  const [region, setRegion] = useState<IReference>()\r\n  useEffect(()=>setRegion(regions?.find((item)=>item.code === value.state?.code))      \r\n   , [regions, value.state])   \r\n  const [district, setDistrict] = useState<string>('')\r\n  useEffect(()=>setDistrict(value.district?.name || ''), [value.district?.name])\r\n  const [city, setCity] = useState<string>(value.city?.name || '')\r\n  useEffect(()=>setCity(value.city?.name || ''), [value.city?.name])\r\n  const [town, setTown] = useState<string>(value.town?.name || '')\r\n  useEffect(()=>setTown(value.town?.name || ''), [value.town?.name])\r\n  const [street, setStreet] = useState<string>(value.street?.name || '')\r\n  useEffect(()=>setStreet(value.street?.name || ''), [value.street?.name])\r\n  const [house, setHouse] = useState<string>(value.housenum || '')\r\n  useEffect(()=>setHouse(value.housenum || ''), [value.housenum])\r\n  const [addresses, setAddresses] = useState(addressStore.fiasOptions)   \r\n  const toast = useRef<Toast>(null)\r\n  const setAddress = (e:IFiasItem)=>{ \r\n    if (e === null) return      \r\n    if (e.parent) setAddress(e.parent)\r\n    if (e.postalCode && e.postalCode.length>0) value.postalCode = e.postalCode\r\n    value.aoGUID = e.AOGUID\r\n    value.houseGUID = e.HouseGUID \r\n    value.streetAddressLine = e.streetAddressLine\r\n    switch (e.level) {\r\n      case 'Region' : if (e.code) value.state = {code: e.code.slice(0,2), name: e.name}      \r\n        setRegion(regions?.find((item)=>item.code === value.state?.code))\r\n        break\r\n      case 'City': value.city = {code: e.AOGUID, name: e.name}\r\n        setCity(e.name) \r\n        break\r\n      case 'District': value.district = {code: e.AOGUID, name: e.name}\r\n        setDistrict(e.name)\r\n        break\r\n      case \"RailWayObject\":  \r\n      case 'Town': value.town = {code: e.AOGUID, name: e.name}\r\n        setTown(e.name)\r\n        break\r\n      case 'building': value.housenum = e.housenum; \r\n        value.buildnum = e.buildnum;\r\n        value.strucnum = e.strucnum;\r\n      break\r\n      case 'Street': \r\n        setStreet(e.name)\r\n        value.street = {code: e.AOGUID, name: e.name}\r\n      break\r\n    }         \r\n  }  \r\n  useEffect( () => {     \r\n    if (regions===undefined) {\r\n      addressStore.fetchRegionOptions()          \r\n    } else if (value.state===undefined || value.state===null)  {      \r\n      setRegion(regions?.find((region)=>region.code===HOME_REGION_CODE)) \r\n      value.state = region\r\n    } else if (value.state?.code) {\r\n      setRegion(regions?.find((region)=>region.code===value.state?.code))\r\n    }    \r\n  }, [regions, value, addressStore, region])  \r\n  \r\n  \r\n  const onHide = ()=>{ \r\n    addressStore.dialogVisible = false\r\n  }\r\n\r\n  const autocompleteOnChange = (e: AutoCompleteChangeParams, setter: (value: string)=>void) => {\r\n    if(e.value && e.value?.AOGUID) { \r\n      addressStore.clear()                                        \r\n      setAddress(e.value)\r\n    } else setter(e.value)\r\n  }\r\n\r\n  const getSuggestions = (parent:string, level: string, query:string)=>{\r\n   addressStore.getChildItems(parent, level, query)\r\n    .then(response=>setAddresses(response))\r\n    .catch(reason => {  \r\n       if (toast.current) toast.current.show({...DEFAULT_ERROR_TOAST, detail:`ошибка запроса к ФИАС: ${reason.message}`})\r\n       setAddresses([])\r\n    })    \r\n  }\r\n\r\n  const cantSaveChanges = ()=> {    \r\n    if ((!addressStore.manualMode && addressStore.isNotStrictly()) \r\n      || addressStore.address.oldOne.streetAddressLine === addressStore.streetAddressLine()) return true\r\n    else  return false  \r\n  }\r\n  const footer = (\r\n    <div>\r\n      <Button label=\"Применить\" icon=\"pi pi-check\" disabled={cantSaveChanges()}\r\n        onClick={()=>{          \r\n          if (addressStore.isNotStrictly() && addressStore.manualMode) {  \r\n            value.housenum = house          \r\n            if (value.houseGUID === null && !!house ) \r\n              addressStore.address.streetAddressLine = `${searchStr}${value.housenum.length>0 ? ', '+value.housenum : ''}`\r\n            else addressStore.address.streetAddressLine = searchStr\r\n          }  \r\n          if (addressStore.onAddrComplete) addressStore.onAddrComplete()          \r\n          onHide()\r\n        }} className=\"p-button-text p-button-success\"/>        \r\n      <Button label=\"Отмена\" icon=\"pi pi-times\" onClick={()=>{\r\n        if (props.onCancel) props.onCancel()\r\n        onHide()}} className=\"p-button-text\"/>\r\n    </div>\r\n)\r\n  return (\r\n  <Dialog footer={footer} header='Ввод адреса посредством ФИАС' visible={addressStore.dialogVisible} onHide={onHide} \r\n    breakpoints={{'960px': '75vw', '640px': '100vw'}} \r\n    style={{width: '50vw'}} modal>\r\n    <div className=\"p-grid p-fluid\">  \r\n    <div className='p-field p-col-12'>        \r\n      <div className='p-inputgroup'>\r\n        <span className='p-inputgroup-addon'>Строка поиска:</span> \r\n        <AutoComplete id='searchFIAS' disabled={isLoading}  \r\n            value={searchStr} \r\n            suggestions={addresses}\r\n            completeMethod={(e) =>{\r\n              const query = value.state?.name ? e.query.replace(value.state?.name+',', '') : e.query\r\n              if (query.trim().length>1) { \r\n                addressStore.searchBar(query.trim(), value.state?.code)\r\n                setAddresses(addressStore.fiasOptions)\r\n              }\r\n            }}\r\n          field='streetAddressLine'\r\n          onChange={(e) => {                                  \r\n            if(e.value && e.value?.AOGUID) { \r\n              addressStore.clear()                                        \r\n              setAddress(e.value)\r\n              setSearchStr(e.value.streetAddressLine)\r\n            } else setSearchStr(e.target.value)\r\n          }}\r\n          placeholder='Регион, Город(Район),(Нас.пункт), Улица, Дом'\r\n        />\r\n      </div> \r\n    </div>       \r\n    <div className=\"p-field p-col-12 p-md-6\">      \r\n      <label htmlFor=\"region\">субъект Российской Федерации</label>\r\n      <Dropdown id='region' value={region} filter filterBy='name'\r\n          onChange={(e)=>{                \r\n            value.state = e.value \r\n            addressStore.clear() \r\n            setRegion(e.value)\r\n          }}\r\n          options={regions}\r\n          optionLabel='name'                                           \r\n      />\r\n    </div> \r\n    <div className=\"p-field p-col-12 p-md-6\">\r\n      <label htmlFor=\"district\">район</label>\r\n      <AutoComplete id='district' dropdown              \r\n          value={district}  forceSelection                    \r\n          field='name' disabled={isLoading}\r\n          onChange={e=>autocompleteOnChange(e, setDistrict)}                       \r\n          suggestions={addresses}\r\n          completeMethod={e=>{\r\n            if (value.state?.code) \r\n            getSuggestions(value.state?.code, 'district', e.query)\r\n          }}                                                           \r\n        />\r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-6\">\r\n        <label htmlFor=\"city\">город</label>         \r\n        <AutoComplete id='city' dropdown              \r\n          value={city}  forceSelection                    \r\n          field='name' \r\n          onChange={e=>autocompleteOnChange(e,setCity)}                       \r\n          suggestions={addresses}\r\n          completeMethod={e=>{                \r\n            if (value.state?.code) getSuggestions(value.state?.code,'city', e.query)\r\n          }}               \r\n        />              \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-6\">\r\n        <label htmlFor=\"town\">населенный пункт</label>\r\n        <AutoComplete id='town' dropdown value={town}  \r\n          forceSelection field='name' \r\n          onChange={e=>autocompleteOnChange(e, setTown)}                       \r\n          suggestions={addresses}\r\n          completeMethod={async (e) =>{\r\n            let parent = value.state?.code               \r\n            if (value.city?.code) parent = value.city?.code  \r\n            if (value.district?.code) parent = value.district?.code                \r\n            if (parent) getSuggestions(parent, 'town', e.query)                \r\n          }}                                                   \r\n        />        \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-6\">\r\n        <label htmlFor=\"street\">улица</label>\r\n        <AutoComplete id='street' forceSelection              \r\n          value={street} field='name' dropdown                 \r\n          onChange={e=>autocompleteOnChange(e, setStreet)}                       \r\n          suggestions={addresses}\r\n          completeMethod={async (e) =>{\r\n            let parent = value.state?.code \r\n            if (value.district?.code) parent = value.district?.code              \r\n            if (value.city?.code) parent = value.city?.code                 \r\n            if (value.town?.code) parent = value.town?.code               \r\n            if (parent) getSuggestions(parent, 'street', e.query)                 \r\n          }}                                                   \r\n        />\r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\" style={{ maxWidth:'7rem'}}>\r\n        <label htmlFor=\"housenum\">дом</label>\r\n        <AutoComplete id='housenum' dropdown value={house} field='name'            \r\n          onChange={(e)=>{\r\n            if(e.value && e.value?.AOGUID) { \r\n              addressStore.clear()                                        \r\n              setAddress(e.value)\r\n              setHouse(e.value.name)\r\n            } else {\r\n              setHouse(e.value)              \r\n              value.housenum = e.value                               \r\n              value.houseGUID = null\r\n            }\r\n          }}                       \r\n          suggestions={addresses}\r\n          completeMethod={async (e) =>{\r\n            let parent = value.state?.code \r\n            if (value.district?.code) parent = value.district?.code              \r\n            if (value.city?.code) parent = value.city?.code                 \r\n            if (value.town?.code) parent = value.town?.code\r\n            if (value.street?.code) parent = value.street?.code               \r\n            if (parent) getSuggestions(parent, 'building', e.query)                \r\n          }}                                                   \r\n        />         \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\" style={{ maxWidth:'7rem'}}> \r\n        <label htmlFor=\"strucnum\">стр.</label>\r\n        <InputText id='strucnum'              \r\n          value={value.strucnum || ''}                \r\n          onChange={(e)=>{\r\n            if (e.target.value.trim().length>0) value.strucnum=e.target.value\r\n          }}\r\n        />        \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\" style={{ maxWidth:'7rem'}}>\r\n        <label htmlFor=\"buildnum\">корп.</label>\r\n        <InputText id='buildnum' value={value.buildnum || ''}                \r\n          onChange={(e)=>{\r\n            if (e.target.value.trim().length>0) value.buildnum=e.target.value                \r\n          }}                  \r\n        />        \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\" style={{ maxWidth:'9rem'}}>\r\n        <label htmlFor=\"flat\">квартира(офис)</label>\r\n        <InputText id='flat' value={value.flat || ''}                  \r\n          onChange={(e)=>{\r\n            value.flat=e.target.value}\r\n          }                                               \r\n        />        \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\">\r\n        <label htmlFor=\"postalCode\">почтовый код</label>\r\n        <InputText id='postalCode' disabled={value.aoGUID!==undefined}              \r\n          value={value.postalCode || \"\"}                  \r\n            onChange={(e)=>{\r\n              value.postalCode=e.target.value                \r\n            }}                                               \r\n        />        \r\n      </div>\r\n      <Toast ref={toast} />      \r\n    </div>  \r\n  </Dialog>)\r\n}\r\nexport default observer(AddressDialog)","import { AxiosResponse } from \"axios\"\r\nimport { $fias, FIAS_URL } from \"../http\"\r\nimport { IFiasResponse } from \"../models/responses/IFiasResponse\"\r\nimport { HOME_REGION_CODE } from \"../utils/defaults\"\r\n\r\nexport default class FiasService {\r\n  static async getRegions(): Promise<AxiosResponse<IFiasResponse>> {\r\n    return $fias.get(`${FIAS_URL}?level=region&limit=120`)\r\n  }\r\n  static async searchBar(query: string, regionID = HOME_REGION_CODE as string): Promise<AxiosResponse<IFiasResponse>> {\r\n    return $fias.get(`${FIAS_URL}?searchBar=1&withParent=1&regionID=${regionID}&total_found=1&query=${query}`)\r\n  }\r\n  static async getChildItems(\r\n    parent: string,\r\n    level: string,\r\n    query = \"\",\r\n    limit = \"120\"\r\n  ): Promise<AxiosResponse<IFiasResponse>> {\r\n    const parentOpt = parent.length === 2 ? `regionID=${parent}` : `parent=${parent}`\r\n    return $fias.get(`${FIAS_URL}?${parentOpt}&withParent=1&level=${level}&query=${query}&limit=${limit}`)\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport FiasService from \"../../services/FiasService\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IReference } from \"../IReference\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { IFiasItem } from \"../responses/IFiasItem\"\r\n\r\nexport default class Address {\r\n  private _oldOne: IAddressR\r\n  private _id?: string\r\n  private _streetAddressLine: string\r\n  private _state?: IReference\r\n  private _district?: IReference\r\n  private _city?: IReference\r\n  private _town?: IReference\r\n  private _street?: IReference\r\n  private _aoGUID?: string | null\r\n  private _houseGUID?: string | null\r\n  private _housenum?: string | null\r\n  private _buildnum?: string | null\r\n  private _strucnum?: string | null\r\n  private _flat?: string | null\r\n  private _postalCode?: string\r\n  private _nullFlavors: INullFlavorR[]\r\n  private _parent?: string\r\n  constructor(props: IAddressR) {\r\n    this._nullFlavors =\r\n      !!props.null_flavors_attributes && props.null_flavors_attributes.length > 0\r\n        ? [...props.null_flavors_attributes]\r\n        : []\r\n    if (props.id) this._id = props.id\r\n    this._oldOne = props\r\n    this._streetAddressLine = props.streetAddressLine\r\n    this._aoGUID = props.aoGUID\r\n    this._houseGUID = props.houseGUID\r\n    this._postalCode = props.postalCode\r\n    this._housenum = props.house_number\r\n    this._buildnum = props.building_number\r\n    this._strucnum = props.struct_number\r\n    this._flat = props.flat_number\r\n    this._parent = props.parent_guid\r\n    this.fetchAddressHierarchy()\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n\r\n  get oldOne(): IAddressR {\r\n    return this._oldOne\r\n  }\r\n\r\n  get id() {\r\n    return this._id\r\n  }\r\n  set id(id: string | undefined) {\r\n    this._id = id\r\n  }\r\n  get streetAddressLine() {\r\n    return this._streetAddressLine\r\n  }\r\n  set streetAddressLine(value: string) {\r\n    this._streetAddressLine = value\r\n  }\r\n  get state() {\r\n    return this._state\r\n  }\r\n  set state(value: IReference | undefined) {\r\n    this._state = value\r\n  }\r\n  get flat() {\r\n    return this._flat\r\n  }\r\n  set flat(value: string | undefined | null) {\r\n    this._flat = value\r\n  }\r\n\r\n  get postalCode() {\r\n    return this._postalCode\r\n  }\r\n  set postalCode(value: string | undefined) {\r\n    this._postalCode = value\r\n  }\r\n  get housenum() {\r\n    return this._housenum\r\n  }\r\n  set housenum(value: string | undefined | null) {\r\n    this._housenum = value\r\n  }\r\n  get buildnum() {\r\n    return this._buildnum\r\n  }\r\n  set buildnum(value: string | undefined | null) {\r\n    this._buildnum = value\r\n  }\r\n  get strucnum() {\r\n    return this._strucnum\r\n  }\r\n  set strucnum(value: string | undefined | null) {\r\n    this._strucnum = value\r\n  }\r\n\r\n  set street(value: IReference | undefined) {\r\n    this._street = value\r\n  }\r\n  get street() {\r\n    return this._street\r\n  }\r\n  set town(value: IReference | undefined) {\r\n    this._town = value\r\n  }\r\n  get town() {\r\n    return this._town\r\n  }\r\n  set aoGUID(value: string | undefined | null) {\r\n    this._aoGUID = value\r\n  }\r\n  get aoGUID() {\r\n    return this._aoGUID\r\n  }\r\n  set houseGUID(value: string | undefined | null) {\r\n    this._houseGUID = value\r\n  }\r\n  get houseGUID() {\r\n    return this._houseGUID\r\n  }\r\n  set district(value: IReference | undefined) {\r\n    this._district = value\r\n  }\r\n  get district() {\r\n    return this._district\r\n  }\r\n  set city(value: IReference | undefined) {\r\n    this._city = value\r\n  }\r\n  get city() {\r\n    return this._city\r\n  }\r\n\r\n  get parent() {\r\n    return this._parent\r\n  }\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes(): INullFlavorR[] {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  //рекурсивный парсинг структуры адресного объекта\r\n  parseFiasItem(fiasItem: IFiasItem) {\r\n    switch (fiasItem.level) {\r\n      case \"building\":\r\n        this._streetAddressLine = fiasItem.streetAddressLine\r\n        break\r\n      case \"Street\":\r\n        this._street = { code: fiasItem.AOGUID, name: `${fiasItem.name} ${fiasItem.shortname}` }\r\n        break\r\n      case \"Town\":\r\n      case \"RailWayObject\":\r\n        this._town = { code: fiasItem.AOGUID, name: `${fiasItem.name} ${fiasItem.shortname}` }\r\n        break\r\n      case \"City\":\r\n        this._city = { code: fiasItem.AOGUID, name: `${fiasItem.name} ${fiasItem.shortname}` }\r\n        break\r\n      case \"District\":\r\n        this._district = { code: fiasItem.AOGUID, name: `${fiasItem.name} ${fiasItem.shortname}` }\r\n        break\r\n      case \"Region\":\r\n        if (fiasItem.code) {\r\n          const code = fiasItem.code.slice(0, 2)\r\n          this._state = { code: code, name: `${fiasItem.name}` }\r\n        }\r\n        break\r\n      default:\r\n        console.log(\"invalid fiasItem.level\", fiasItem)\r\n        break\r\n    }\r\n    if (fiasItem.parent) this.parseFiasItem(fiasItem.parent)\r\n  }\r\n  // Получить всю ФИАС структуру адресного объекта по AOGUID\r\n  fetchAddressHierarchy() {\r\n    if (!this._aoGUID) return\r\n    FiasService.getChildItems(this._aoGUID, this._houseGUID ? \"building\" : \"\", \"\", \"1\")\r\n      .then((response) => {\r\n        if (response.data.data)\r\n          response.data.data.forEach((item) => {\r\n            this.parseFiasItem(item)\r\n          })\r\n      })\r\n      .catch((reason) => console.log(reason))\r\n  }\r\n}\r\n","import { HOME_REGION_CODE } from \"../../utils/defaults\"\r\nimport { IDestroyble } from \"../IDestroyble\"\r\nimport { INullFlavorableR } from \"./INullFlavorableR\"\r\n\r\nexport interface IAddressR extends INullFlavorableR, IDestroyble {\r\n  id?: string\r\n  state: string\r\n  streetAddressLine: string\r\n  aoGUID?: string | null\r\n  houseGUID?: string | null\r\n  postalCode?: string\r\n  code?: string\r\n  parent_guid?: string\r\n  actual?: boolean\r\n  house_number?: string | null\r\n  struct_number?: string | null\r\n  building_number?: string | null\r\n  flat_number?: string | null\r\n}\r\nexport const DEFAULT_ADDRESS = { state: HOME_REGION_CODE, streetAddressLine: \"\" } as IAddressR\r\n","import { observer } from 'mobx-react-lite'\r\nimport { Button } from 'primereact/button'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC, useContext, useEffect } from 'react'\r\nimport { Context } from '../..'\r\nimport Address from '../../models/FormsData/Address'\r\nimport { DEFAULT_ADDRESS, IAddressR } from '../../models/requests/IAddressR'\r\n\r\n\r\ntype InputAddressProps = { \r\n  submitted: boolean // is it form submitted already\r\n  value: IAddressR // object, containing address\r\n  onClear: (value: IAddressR)=>void // setter to state value in the form>\r\n  onChange: ()=>void // setter to state new value from dialog to form \r\n  label?: string\r\n  strictly?: boolean // if address need to be all from FIAS\r\n  className?: string // styles for main div  \r\n  id?: string \r\n}\r\n\r\nconst InputAddress: FC<InputAddressProps> = (props: InputAddressProps) =>{ \r\n  const submitted = props.submitted\r\n  const value = props.value\r\n  const {addressStore} = useContext(Context)\r\n\r\n  const invalid = props.strictly ? !value || !value.houseGUID\r\n     : !value || (value.streetAddressLine && value.streetAddressLine.split(',').length < 3)\r\n  \r\n  const bt_id = `bt_addr_${props.id}`   \r\n  \r\n  //useEffect(()=>{addressStore.address = new Address(props.value || DEFAULT_ADDRESS)\r\n  //  console.log('props.value', props.value.streetAddressLine)\r\n  //},[addressStore, props.value])\r\n\r\n   useEffect(()=>{\r\n    if (addressStore.manualMode!== !props.strictly) {\r\n      addressStore.manualMode = !props.strictly \r\n    }\r\n  },[addressStore, props.strictly])\r\n\r\n  return (<div className={classNames({'p-field': !!props.label}, props.className)} >\r\n    {props.label && <label htmlFor={bt_id}>{props.label}</label>}\r\n    <div className='p-inputgroup'>\r\n      <Button id='bt_addr_dialog' label=\"Ввод\" onClick={()=>{\r\n        addressStore.address = new Address(props.value || DEFAULT_ADDRESS)\r\n        addressStore.dialogVisible = true\r\n        addressStore.onAddrComplete = props.onChange}} style={{width:'5rem'}}/>\r\n      <InputText \r\n        title={value?.streetAddressLine}\r\n        value={value?.streetAddressLine}\r\n        placeholder={'введите адрес вида: Амурская область, Н-ский район, село Тосево, улица Товарная, дом 13, кв. 9' } className={classNames({ 'p-invalid': submitted && invalid})} />\r\n      <Button icon=\"pi pi-times\" className=\"p-button-danger\" onClick={()=>{\r\n        if (!value) return        \r\n        let _addr = DEFAULT_ADDRESS\r\n        if (value.id) _addr.id = value.id\r\n        if (value.parent_guid) _addr.parent_guid = value.parent_guid\r\n        if (value.null_flavors_attributes) _addr.null_flavors_attributes = value.null_flavors_attributes       \r\n        props.onClear(_addr)\r\n        addressStore.address = new Address(_addr)}}\r\n      />\r\n    </div>\r\n    {submitted && invalid && <small className=\"p-error\">Адресс введен не полностью или отсутствует</small>}\r\n  </div>)  \r\n}\r\nexport default observer(InputAddress)","import { RadioButton } from \"primereact/radiobutton\"\r\nimport { useState } from \"react\"\r\nimport { URBAN_AREA_TYPE, VILAGE_AREA_TYPE } from \"../../utils/defaults\"\r\n\r\n\r\ntype AreaTypeProps = {\r\n  value: number | undefined\r\n  onChange: ((value: number | undefined)=>void)\r\n}\r\n\r\nexport const AreaType = (props: AreaTypeProps) =>{ \r\n  const [value, setValue] = useState<number | undefined>(props.value)\r\n  return (  \r\n  <div className=\"p-formgroup-inline\" key={`rbt_${value}`} style={{marginLeft: '-0.76rem'}}>              \r\n      <div className='p-field-radiobutton'>                  \r\n        <RadioButton name='urban' checked={value === URBAN_AREA_TYPE}\r\n          onChange={(e)=>{\r\n            if (e.checked) { \r\n              setValue(URBAN_AREA_TYPE) \r\n              props.onChange(URBAN_AREA_TYPE)\r\n            } else {\r\n              setValue(undefined)\r\n              props.onChange(undefined) \r\n            }\r\n          }}\r\n        />\r\n        <label htmlFor='undef'>Городская</label>\r\n      </div>\r\n      <div className='p-field-radiobutton'>                  \r\n        <RadioButton name='vilage' checked={value === VILAGE_AREA_TYPE}\r\n          onChange={(e)=>{\r\n            if (e.checked) { \r\n              setValue(VILAGE_AREA_TYPE) \r\n              props.onChange(VILAGE_AREA_TYPE)\r\n            } else {\r\n              setValue(undefined)\r\n              props.onChange(undefined) \r\n            }\r\n          }}/>\r\n        <label htmlFor='vilage'>Сельская</label>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { observer } from \"mobx-react-lite\"\r\nimport { Button } from \"primereact/button\"\r\nimport { Card } from \"primereact/card\"\r\nimport { CheckboxChangeParams } from \"primereact/checkbox\"\r\nimport { FC, useContext, useState} from \"react\"\r\nimport { Context } from \"../..\"\r\nimport { IReference } from \"../../models/IReference\"\r\nimport { ASKU, NULL_FLAVORS, UNK } from \"../../utils/defaults\"\r\nimport AddressDialog from \"../dialogs/AddressDialog\"\r\nimport InputAddress from \"../inputs/InputAddress\"\r\nimport { AreaType } from \"../inputs/AreaType\"\r\nimport NullFlavorWrapper from \"../NullFlavorWrapper\"\r\nimport { INullFlavorR } from \"../../models/INullFlavor\"\r\nimport { DEFAULT_ADDRESS, IAddressR } from \"../../models/requests/IAddressR\"\r\n\r\n\r\nconst Section3: FC = () => {\r\n  const { addressStore, certificateStore,suggestionsStore } = useContext(Context)\r\n  const certificate = certificateStore.cert  \r\n  const patient = certificate.patient\r\n  const [addressLife, setAddressLife] = useState(patient.person?.address) \r\n  const [addressDeath, setAddressDeath] = useState(certificate.deathAddr) \r\n  const identified = suggestionsStore.identified\r\n  const checkedLifeArea = !!patient.person && patient.person.nullFlavors.findIndex((item)=>item.parent_attr==='address' && !item._destroy)===-1\r\n  const checkedDeathArea = !!addressDeath || certificate.nullFlavors.findIndex((item)=>item.parent_attr==='death_addr')===-1  \r\n  const fromRelatives = suggestionsStore.fromRelatives\r\n  const submitted = certificateStore.submitted\r\n  \r\n  const header = () => {\r\n    return <><span>Адреса мест жительства и смерти</span><Button type=\"button\" onClick={onAddressCopy} label=\"СОВПАДАЮТ\" disabled={!checkedLifeArea} className=\"p-button-raised p-button-success\"  /></>\r\n  }\r\n\r\n  //copy info from life address to dead address objects\r\n  const onAddressCopy = () => {\r\n    if (!patient.person) return\r\n    certificate.deathAreaType = certificate.lifeAreaType    \r\n     \r\n    if (!patient.person.address) certificate.deathAddr = undefined      \r\n    else {\r\n      certificate.deathAddr = {\r\n        ...patient.person.address,\r\n        null_flavors_attributes:\r\n          patient.person.address?.null_flavors_attributes?.map((item) => {\r\n            return { parent_attr: item.parent_attr, code: item.code } as INullFlavorR\r\n          }) || [],\r\n        id: undefined,\r\n        parent_guid: undefined,\r\n      } as IAddressR              \r\n    }    \r\n    setAddressDeath(certificate.deathAddr)\r\n  }\r\n  return (<>    \r\n    <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n      <div className=\"p-fluid p-formgrid p-grid\">\r\n        <div className=\"p-field p-d-flex p-jc-start\" style={{width: '98%'}}>          \r\n          <div className='paragraph p-mr-1'>8.</div>          \r\n          <div className='p-paragraph-field' style={{width: '98%'}}>\r\n            <NullFlavorWrapper paraNum                     \r\n              label={<label htmlFor=\"addr\">Место постоянного жительства(регистрации)</label>}\r\n              checked={identified && checkedLifeArea}  \r\n              setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (!patient.person) return\r\n                if (nullFlavors) patient.person.nullFlavors = nullFlavors\r\n                if (!e.checked) patient.person.address = undefined                \r\n              }}               \r\n              field={<InputAddress  submitted={submitted} \r\n                      id='person_addr'            \r\n                      value={addressLife || DEFAULT_ADDRESS} \r\n                      onClear={(value: IAddressR)=>{  \r\n                        if (!patient.person) return                                             \r\n                        patient.person.address = value\r\n                        setAddressLife(patient.person.address)\r\n                      }}\r\n                      onChange={()=>{\r\n                        if (!patient.person) return\r\n                        patient.person.address = addressStore.addressProps()                        \r\n                        setAddressLife(patient.person.address)\r\n                      }}  \r\n                    />}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={fromRelatives ? ASKU : UNK}\r\n              field_name=\"address\"\r\n              nullFlavors={patient.person?.nullFlavors}\r\n            />                  \r\n          </div>\r\n        </div>\r\n        <div className=\"p-d-flex p-jc-center\">          \r\n          <div className='paragraph p-mr-1'>9.</div>          \r\n          <div className='p-paragraph-field'>\r\n            <NullFlavorWrapper                     \r\n              label={<label htmlFor=\"urban\">Местность</label>}\r\n              checked={identified && !!certificate.lifeAreaType}  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                if (!e.checked) certificate.lifeAreaType = undefined                \r\n              }} \r\n              onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n              field={<AreaType value={certificate.lifeAreaType} onChange={(value: number | undefined)=>{\r\n                certificate.lifeAreaType = value                \r\n              }}/>}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={fromRelatives ? ASKU : UNK}\r\n              field_name=\"life_area_type\"\r\n              nullFlavors={certificate.nullFlavors}\r\n            />                  \r\n          </div>\r\n        </div>\r\n        <div className=\"p-field p-d-flex p-jc-start\" style={{width: '98%'}}>          \r\n          <div className='paragraph p-mr-1'>10.</div>          \r\n          <div className='p-paragraph-field' style={{width: '98%'}}>\r\n            <NullFlavorWrapper paraNum                     \r\n              label={<label htmlFor=\"death_addr\">Адрес места смерти</label>}\r\n              checked={checkedDeathArea}  \r\n              setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                if (!e.checked) certificate.deathAddr = undefined                \r\n              }}               \r\n              field={<InputAddress  submitted={submitted} \r\n                      id='death_addr'            \r\n                      value={addressDeath || DEFAULT_ADDRESS} \r\n                      onClear={(value: IAddressR)=>{                                               \r\n                        certificate.deathAddr = value \r\n                        setAddressDeath(certificate.deathAddr)                       \r\n                      }}\r\n                      onChange={()=>{\r\n                        certificate.deathAddr = addressStore.addressProps()  \r\n                        setAddressDeath(certificate.deathAddr)                      \r\n                      }}  \r\n                    />}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={fromRelatives ? ASKU : UNK}\r\n              field_name=\"death_addr\"\r\n              nullFlavors={certificate.nullFlavors}\r\n            />                  \r\n          </div>\r\n        </div>\r\n        <div className=\"p-d-flex p-jc-center\">          \r\n          <div className='paragraph p-mr-1'>11.</div>          \r\n          <div className='p-paragraph-field' key={`dArea_${certificate.deathAreaType}`}>\r\n            <NullFlavorWrapper                     \r\n              label={<label htmlFor=\"urban\">Местность</label>}\r\n              checked={!!certificate.deathAreaType && certificate.nullFlavors.findIndex(item=>item.parent_attr==='death_area_type' && !item._destroy\r\n              )===-1}  \r\n              setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                if (!e.checked) certificate.deathAreaType = undefined\r\n              }} \r\n              onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n              field={<AreaType value={certificate.deathAreaType} onChange={(value: number | undefined)=>{\r\n                certificate.deathAreaType = value\r\n              }}/>}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={fromRelatives ? ASKU : UNK}\r\n              field_name=\"death_area_type\"\r\n              nullFlavors={certificate.nullFlavors}\r\n            />                  \r\n          </div>\r\n        </div>        \r\n      </div>\r\n    </Card>\r\n    <AddressDialog /> \r\n  </>)\r\n}\r\n export default observer(Section3)  ","//Типы мест наступления смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.20 Версия: 3.1\r\nexport const DEAD_PLACE_TYPES = [\r\n  { code: 1, name: \"на месте происшествия\" },\r\n  { code: 2, name: \"в машине скорой помощи\" },\r\n  { code: 3, name: \"в стационаре\" },\r\n  { code: 4, name: \"дома\" },\r\n  { code: 5, name: \"в другом месте\" },\r\n  { code: 7, name: \"в образовательной организации\" },\r\n]\r\n","//\"Семейное положение\"\r\n//OID: 1.2.643.5.1.13.13.99.2.15  Версия: 3.1\r\nexport const MARITAL_STATUSES = [\r\n  { code: 4, name: \"состоял(а) в зарегистрированном браке\" },\r\n  { code: 5, name: \" не состоял(а) в зарегистрированном браке\" },\r\n  { code: 3, name: \" неизвестно\" },\r\n]\r\n","//\"Классификатор образования для медицинских свидетельств\"\r\n// OID: 1.2.643.5.1.13.13.99.2.16 Версия: 2.1\r\nexport const EDUCATION_LEVELS = [\r\n  { code: 1, name: \"профессиональное: высшее\" },\r\n  { code: 2, name: \"профессиональное: неполное высшее\" },\r\n  { code: 3, name: \"профессиональное: среднее профессиональное\" },\r\n  { code: 5, name: \"общее: среднее\" },\r\n  { code: 6, name: \"общее: основное\" },\r\n  { code: 7, name: \"общее: начальное\" },\r\n  { code: 10, name: \"общее: дошкольное\" },\r\n  { code: 11, name: \"не имеет начального образования\" },\r\n  { code: 9, name: \"неизвестно\" },\r\n]\r\n","//Социальные группы населения в учетной медицинской документации\r\n//OID: 1.2.643.5.1.13.13.11.1038 Версия: 5.1\r\nexport const SOCIAL_STATUSES = [\r\n  { code: 5, name: \"Работал(а)\" },\r\n  { code: 6, name: \"Проходил(а) военную службу или приравненную к ней службу\" },\r\n  { code: 4, name: \"Студент(ка)\" },\r\n  { code: 7, name: \"Пенсионер(ка)\" },\r\n  { code: 8, name: \"Не работал(а)\" },\r\n  { code: 10, name: \"Прочие\" },\r\n  { code: 22, name: \"неизвестно\" },\r\n]\r\n","// \"Доношенность новорожденного\"\r\n// OID: 1.2.643.5.1.13.13.99.2.18 Версия: 1.1\r\nexport const TERMS_PREGNANCY = [\r\n  { code: 1, name: \" доношенный (37-41 недели)\" },\r\n  { code: 2, name: \" недоношенный (менее 37 недель)\" },\r\n  { code: 3, name: \" переношенный (42 недели и более)\" },\r\n]\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IPersonName } from \"../IPersonName\"\r\nimport { IRelatedSubject } from \"../IRelatedSubject\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { IRelatedSubjectR } from \"../requests/IRelatedSubjectR\"\r\n\r\nconst MATHER = 1\r\n\r\nexport default class RelatedSubject implements ISerializable {\r\n  private _id?: number\r\n  private _guid: string\r\n  private _familyConnection: number\r\n  private _addr?: IAddressR | undefined\r\n  private _fio?: IPersonName | undefined\r\n  private _birthTime?: Date | undefined\r\n  private _nullFlavors: INullFlavorR[]\r\n\r\n  constructor(props: IRelatedSubject) {\r\n    this._guid = props.guid || uuidv4()\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    this._id = props.id\r\n    this._familyConnection = props.family_connection || MATHER\r\n    this._fio = props.person_name\r\n    if (props.birthTime) this._birthTime = new Date(props.birthTime)\r\n    this._addr = {\r\n      ...props.addr,\r\n      null_flavors_attributes:\r\n        props.addr?.null_flavors?.map((item) => {\r\n          return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n        }) || [],\r\n    } as IAddressR\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n\r\n  get addr(): IAddressR | undefined {\r\n    return this._addr\r\n  }\r\n  set addr(value: IAddressR | undefined) {\r\n    this._addr = value\r\n  }\r\n  get fio(): IPersonName | undefined {\r\n    return this._fio\r\n  }\r\n  set fio(value: IPersonName | undefined) {\r\n    this._fio = value\r\n  }\r\n\r\n  get birthTime(): Date | undefined {\r\n    return this._birthTime\r\n  }\r\n  set birthTime(value: Date | undefined) {\r\n    this._birthTime = value\r\n  }\r\n  get nullFlavors(): INullFlavorR[] {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(value: INullFlavorR[]) {\r\n    this._nullFlavors = value\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  getAttributes(): IRelatedSubjectR {\r\n    let _rs = { family_connection: this._familyConnection, guid: this._guid } as IRelatedSubjectR\r\n    if (this._nullFlavors.length > 0) _rs.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._addr) _rs.addr_attributes = { ...this._addr }\r\n    if (this._birthTime) _rs.birthTime = this._birthTime.toLocaleDateString()\r\n    if (this._fio) _rs.person_name_attributes = { ...this._fio }\r\n    if (this._id) _rs.id = this._id\r\n    return _rs\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IChildInfo } from \"../IChildInfo\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { IChildInfoR } from \"../requests/IChildInfoR\"\r\nimport RelatedSubject from \"./RelatedSubject\"\r\n\r\nexport class ChildInfo implements ISerializable {\r\n  private _id?: number\r\n  private _guid: string\r\n  private _termPregnancy?: number | undefined\r\n  private _weight?: number | undefined\r\n  private _whichAccount?: number | undefined\r\n  private _relatedSubject?: RelatedSubject | undefined\r\n  private _address?: IAddressR | undefined\r\n  private _nullFlavors: INullFlavorR[]\r\n\r\n  constructor(props: IChildInfo | undefined = undefined) {\r\n    if (props) {\r\n      this._id = props.id\r\n      this._guid = props.guid || uuidv4()\r\n      this._termPregnancy = props.term_pregnancy\r\n      this._weight = props.weight\r\n      this._whichAccount = props.which_account\r\n      this._address = {\r\n        ...props.address,\r\n        null_flavors_attributes:\r\n          props.address?.null_flavors?.map((item) => {\r\n            return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n          }) || [],\r\n      } as IAddressR\r\n      if (props.null_flavors && props.null_flavors.length > 0)\r\n        this._nullFlavors = props.null_flavors.map((item) => {\r\n          return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n        })\r\n      else this._nullFlavors = []\r\n      if (props.related_subject) this._relatedSubject = new RelatedSubject(props.related_subject)\r\n    } else {\r\n      this._nullFlavors = []\r\n      this._guid = uuidv4()\r\n    }\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n\r\n  get termPregnancy(): number | undefined {\r\n    return this._termPregnancy\r\n  }\r\n  set termPregnancy(value: number | undefined) {\r\n    this._termPregnancy = value\r\n  }\r\n  get weight(): number | undefined {\r\n    return this._weight\r\n  }\r\n  set weight(value: number | undefined) {\r\n    this._weight = value\r\n  }\r\n  get whichAccount(): number | undefined {\r\n    return this._whichAccount\r\n  }\r\n  set whichAccount(value: number | undefined) {\r\n    this._whichAccount = value\r\n  }\r\n  get relatedSubject(): RelatedSubject | undefined {\r\n    return this._relatedSubject\r\n  }\r\n  set relatedSubject(value: RelatedSubject | undefined) {\r\n    this._relatedSubject = value\r\n  }\r\n  get nullFlavors(): INullFlavorR[] {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(value: INullFlavorR[]) {\r\n    this._nullFlavors = value\r\n  }\r\n  get address(): IAddressR | undefined {\r\n    return this._address\r\n  }\r\n  set address(value: IAddressR | undefined) {\r\n    this._address = value\r\n  }\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  getAttributes(): IChildInfoR {\r\n    let _chInfo = { guid: this._guid } as IChildInfoR\r\n    if (this._nullFlavors.length > 0) _chInfo.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._relatedSubject) _chInfo.related_subject_attributes = this._relatedSubject.getAttributes()\r\n    if (this._termPregnancy) _chInfo.term_pregnancy = this._termPregnancy\r\n    if (this._weight) _chInfo.weight = this._weight\r\n    if (this._whichAccount) _chInfo.which_account = this._whichAccount\r\n    if (this._id) _chInfo.id = this._id\r\n    if (this._address && !!this._address.state && !!this._address.streetAddressLine)\r\n      _chInfo.address_attributes = { ...this._address }\r\n    return _chInfo\r\n  }\r\n}\r\n","import { useContext, useEffect, useState } from 'react'\r\nimport { InputNumber } from 'primereact/inputnumber'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport NullFlavorWrapper from './NullFlavorWrapper'\r\nimport { ChildInfo } from '../models/FormsData/ChildInfo'\r\nimport RelatedSubject from '../models/FormsData/RelatedSubject'\r\nimport { IChildInfo } from '../models/IChildInfo'\r\nimport {  checkFieldNullFlavor, INullFlavorR } from '../models/INullFlavor'\r\nimport { IPersonName } from '../models/IPersonName'\r\nimport { IReference } from '../models/IReference'\r\nimport { IRelatedSubject } from '../models/IRelatedSubject'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { Context } from '..'\r\nimport AddressFC2 from './inputs/InputAddress'\r\nimport { NA, NULL_FLAVORS, UNK } from '../utils/defaults'\r\nimport AddressDialog from './dialogs/AddressDialog'\r\nimport { DEFAULT_ADDRESS, IAddressR } from '../models/requests/IAddressR'\r\n\r\ntype MotherInfoProps = {\r\n  childInfo?: ChildInfo\r\n  onChange: ((childInfo: ChildInfo) => void)  \r\n}\r\n\r\nexport const MotherInfo = (props: MotherInfoProps) => {\r\n  const { addressStore, certificateStore} = useContext(Context)  \r\n  const [fio, setFio] = useState('')\r\n  const submitted = certificateStore.submitted\r\n  const [childInfo] = useState(props.childInfo || new ChildInfo({} as IChildInfo))\r\n  const [relatedSubject] = useState(childInfo.relatedSubject || new RelatedSubject({} as IRelatedSubject))\r\n  const [address, setAddress] = useState(relatedSubject.addr)\r\n  useEffect(()=>{    \r\n      setFio(relatedSubject.fio ? `${relatedSubject.fio.family} ${relatedSubject.fio.given_1} ${relatedSubject.fio?.given_2}` : '')         \r\n      if (childInfo.relatedSubject!==relatedSubject) childInfo.relatedSubject = relatedSubject         \r\n      if (!props.childInfo) props.onChange(childInfo)   \r\n    },[props, childInfo, relatedSubject])         \r\n    const options = NULL_FLAVORS.filter((item:IReference)=>\"UNK\".includes(item.code))       \r\n    const checked = relatedSubject.nullFlavors.findIndex((item)=>item.parent_attr==='addr')===-1\r\n        \r\n    \r\n    return ( <>\r\n      <div className=\"p-field p-grid\" style={{width:'90%'}}>\r\n        <label htmlFor=\"weight\" \r\n          className=\"p-col-fixed\" style={{width:'85%'}} >масса тела ребенка при рождении (грамм)</label>\r\n        <div className=\"p-col\">\r\n          <InputNumber  id=\"weight\" value={childInfo.weight} max={9999} min={10} \r\n            onChange={(e)=>{              \r\n             if (!!e.value) childInfo.weight=e.value \r\n             else childInfo.weight= undefined             \r\n            }}\r\n          type=\"text\"/>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-field p-grid\" style={{width:'90%'}}>\r\n        <label htmlFor=\"which_account\" className=\"p-col-fixed\" style={{width:'85%'}} >каким по счету был ребенок у матери (считая умерших и не считая мертворожденных)</label>\r\n        <div className=\"p-col\">\r\n          <InputNumber  id=\"which_account\" max={99} min={1}\r\n            onChange={(e)=>{\r\n             if (!!e.value) childInfo.whichAccount=e.value    \r\n             else  childInfo.whichAccount=undefined         \r\n            }} \r\n            value={childInfo.whichAccount} type=\"text\"/>\r\n        </div>\r\n      </div> \r\n      <div className='p-paragraph-field p-mr-2 p-mb-2'>\r\n        <NullFlavorWrapper                           \r\n          setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>\r\n            { if (e.checked)  { \r\n              } else { \r\n                relatedSubject.fio = undefined                \r\n                props.onChange(childInfo) \r\n              }\r\n              if (nullFlavors) relatedSubject.nullFlavors = nullFlavors              \r\n            }}                 \r\n          label={<label htmlFor=\"fio\">Фамилия матери, имя, отчество(при наличии)</label>}\r\n          field={<InputText  id=\"fio\" type=\"text\" \r\n                  value={fio}                    \r\n                  onChange={(e)=>{     \r\n                    setFio(e.target.value)               \r\n                    const values = e.target.value.trim().split(\" \")\r\n                    if (values && values.length > 1) {\r\n                      const temp = {family: values[0], given_1: values[1]} as IPersonName\r\n                      if (values[2]) temp.given_2 = values[2]\r\n                      else checkFieldNullFlavor('given_2',temp.given_2,relatedSubject.nullFlavors, NA)\r\n                      relatedSubject.fio = temp\r\n                      props.onChange(childInfo)                     \r\n                    }                                        \r\n                  }}/>}                  \r\n          options={options} \r\n          value={UNK} \r\n          nullFlavors={relatedSubject.nullFlavors}  \r\n          field_name=\"person_name\"                                 \r\n        />             \r\n      </div>\r\n      <div className='p-paragraph-field p-mr-2 p-mb-2'>                     \r\n        <NullFlavorWrapper                                       \r\n          label={<label htmlFor=\"dateBirth\">Дата рождения матери</label>}\r\n          setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) {                        \r\n                        relatedSubject.birthTime = undefined                        \r\n                      } \r\n                      if (nullFlavors) relatedSubject.nullFlavors = nullFlavors\r\n                    }} \r\n          onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{\r\n            if (nullFlavors) relatedSubject.nullFlavors = nullFlavors}}\r\n          field={<Calendar id=\"dateBirth\" showIcon dateFormat='dd.mm.yy'\r\n                  locale='ru' mask='99.99.9999'                                          \r\n                  value={relatedSubject.birthTime} \r\n                  onChange={(e)=>{\r\n                    relatedSubject.birthTime = e.target.value as Date | undefined\r\n                  }}                         \r\n                />}\r\n          options={options} \r\n          value={UNK} \r\n          nullFlavors={relatedSubject.nullFlavors}  \r\n          field_name=\"birthTime\"\r\n        />                               \r\n      </div> \r\n      <div className=\"p-field\" style={{width: '98%'}}>\r\n        <NullFlavorWrapper                      \r\n              label={<label htmlFor=\"mother_addr\">Место жительства матери</label>}\r\n              checked={checked}  \r\n              setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (nullFlavors) relatedSubject.nullFlavors = nullFlavors\r\n                if (!e.checked) relatedSubject.addr = undefined                \r\n              }}               \r\n              field={<AddressFC2  submitted={submitted} \r\n                      id='mother_addr'            \r\n                      value={address || DEFAULT_ADDRESS} \r\n                      onClear={(value: IAddressR)=>{                                               \r\n                        relatedSubject.addr = value\r\n                        setAddress(relatedSubject.addr)\r\n                      }}\r\n                      onChange={()=>{\r\n                        relatedSubject.addr = addressStore.addressProps()\r\n                        setAddress(relatedSubject.addr)\r\n                      }}  \r\n                    />}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={UNK}\r\n              field_name=\"addr\"\r\n              nullFlavors={relatedSubject.nullFlavors}\r\n            />\r\n      </div>  \r\n      <AddressDialog />        \r\n    </>)\r\n}","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useEffect, useState} from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport '../../styles/components/RadioButton.css'\r\nimport '../../styles/components/Calendar.css'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { NA, NULL_FLAVORS } from '../../utils/defaults'\r\nimport { IReference } from '../../models/IReference'\r\n\r\nimport { Dropdown } from 'primereact/dropdown'\r\n\r\nimport { DEAD_PLACE_TYPES } from '../../NSI/1.2.643.5.1.13.13.99.2.20'\r\nimport { MARITAL_STATUSES } from '../../NSI/1.2.643.5.1.13.13.99.2.15'\r\nimport { EDUCATION_LEVELS } from '../../NSI/1.2.643.5.1.13.13.99.2.16'\r\nimport { SOCIAL_STATUSES } from '../../NSI/1.2.643.5.1.13.13.11.1038'\r\nimport { checkFieldNullFlavor, INullFlavorR } from '../../models/INullFlavor'\r\nimport { TERMS_PREGNANCY } from '../../NSI/1.2.643.5.1.13.13.99.2.18'\r\nimport { ChildInfo } from '../../models/FormsData/ChildInfo'\r\nimport { MotherInfo } from '../MotherInfo'\r\nimport InputAddress from '../inputs/InputAddress'\r\nimport { DEFAULT_ADDRESS, IAddressR } from '../../models/requests/IAddressR'\r\n\r\n const Section5: FC = () => {\r\n  const { certificateStore, addressStore } = useContext(Context)\r\n   \r\n  const optionCode = 'NA'\r\n  const options = NULL_FLAVORS.filter((item:IReference)=>optionCode.includes(item.code))  \r\n  const defaultCode = NA \r\n  const header = () => {\r\n      return <span>Прочие данные умершего</span>\r\n    }\r\n  const certificate = certificateStore.cert\r\n  const age = certificate.hoursAge()  \r\n  const isChildInfo = !!age && (age > 168) && certificate.yearsAge() < 1      \r\n  const isMonthChild = isChildInfo && certificate.daysAge() < 30 \r\n  const [address, setAddress] = useState(certificate.childInfo?.address)\r\n  \r\n  useEffect(()=>{\r\n    if (isChildInfo && certificate.childInfo===undefined) \r\n     certificate.childInfo = new ChildInfo()\r\n    else if (!isChildInfo && certificate.childInfo!==undefined) certificate.childInfo = undefined\r\n  },[isChildInfo, certificate]) \r\n  \r\n  const childInfo = certificate.childInfo \r\n  useEffect(()=>{    \r\n    if (!isMonthChild && childInfo) {\r\n        childInfo.termPregnancy = undefined\r\n        checkFieldNullFlavor('term_pregnancy',childInfo.termPregnancy, childInfo.nullFlavors, NA)\r\n    }    \r\n  },[isMonthChild, childInfo]) \r\n  useEffect(()=>{       \r\n    if (!isChildInfo && !!certificate.childInfo) {\r\n      certificate.childInfo = undefined\r\n      checkFieldNullFlavor('related_subject', certificate.childInfo, certificate.nullFlavors, NA)\r\n    }    \r\n  }, [ isChildInfo, certificate ])\r\n  const ddStyle = {minWidth:'210px', maxWidth:'500px', marginTop: '0.5rem', marginLeft: '-0.75rem'}\r\n  const dDivStyle = {paddingTop: '0.1rem'}\r\n      \r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">            \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>12. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"deathPlaceType\">Смерть наступила</label>\r\n                <Dropdown inputId=\"deathPlaceType\" style={ddStyle} placeholder=\"Выбрать\"  \r\n                  options={DEAD_PLACE_TYPES} optionLabel=\"name\" autoFocus\r\n                  value={DEAD_PLACE_TYPES.find((item)=>item.code === certificate.deathPlace)} \r\n                  onChange={(e) =>{\r\n                    certificate.deathPlace = e.value.code                    \r\n                  }} />\r\n              </div>  \r\n            </div> \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}}>\r\n              <div className='paragraph p-mr-1'>13.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{width: '90%'}}>\r\n                <NullFlavorWrapper  checked={isMonthChild}  key={`MonthChild_${isMonthChild}`} \r\n                  disabled\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                            if (nullFlavors && certificate.childInfo) certificate.childInfo.nullFlavors = nullFlavors                  \r\n                            if (!e.checked)  certificate.childInfo = undefined                              \r\n                            }}            \r\n                  label={<label htmlFor=\"MonthChild\">Для детей, умерших в возрасте от 168 час. до 1 месяца</label>}\r\n                  field={<Dropdown inputId=\"MonthChild\"  placeholder=\"Выбрать\" autoFocus \r\n                    style={{minWidth:'210px', maxWidth:'300px'}}        \r\n                    options={TERMS_PREGNANCY} optionLabel=\"name\"\r\n                    value={TERMS_PREGNANCY.find((item)=>item.code === certificate.childInfo?.termPregnancy)} \r\n                    onChange={(e) =>{                      \r\n                      if (certificate.childInfo) certificate.childInfo.termPregnancy = e.value.code                                          \r\n                    }} />}\r\n                  options={options} \r\n                  value={defaultCode} \r\n                  nullFlavors={certificate.childInfo?.nullFlavors}  \r\n                  field_name=\"term_pregnancy\" paraNum \r\n                />    \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>14.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{width: '90%'}}>\r\n                <NullFlavorWrapper  checked={isChildInfo}  key={`YearChild_${isChildInfo}`} \r\n                  disabled\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                            if (nullFlavors) certificate.nullFlavors = nullFlavors                  \r\n                              certificate.childInfo = undefined\r\n                            }}            \r\n                  label={<label htmlFor=\"YearChild\">Для детей, умерших в возрасте от 168 час. до 1 года</label>}\r\n                  field={<MotherInfo childInfo={childInfo} onChange={(chInf: ChildInfo)=>{\r\n                    if (certificate.childInfo !== chInf) certificate.childInfo = chInf  \r\n                  }} />}\r\n                  options={options} \r\n                  value={defaultCode} \r\n                  nullFlavors={certificate.nullFlavors}  \r\n                  field_name=\"related_subject\" paraNum \r\n                />    \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>8K.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{width: '90%'}}>\r\n                <NullFlavorWrapper  checked={isChildInfo}  key={`YearChild_BP_${isChildInfo}`} \r\n                  disabled\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                              if (!certificate.childInfo) return\r\n                              if (nullFlavors) certificate.childInfo.nullFlavors = nullFlavors\r\n                              if (!e.checked) certificate.childInfo.address = undefined  \r\n                            }}            \r\n                  label={<label htmlFor=\"child_birth_addr\">Место рождения ребенка</label>}\r\n                  field={<InputAddress submitted={false} \r\n                      id='child_birth_addr'            \r\n                      value={address || DEFAULT_ADDRESS} \r\n                      onClear={(value: IAddressR)=>{ \r\n                        if (!certificate.childInfo) return                                             \r\n                        certificate.childInfo.address = value\r\n                        setAddress(certificate.childInfo.address)\r\n                      }}\r\n                      onChange={()=>{\r\n                        if (!certificate.childInfo) return\r\n                        certificate.childInfo.address = addressStore.addressProps()\r\n                        setAddress(certificate.childInfo.address)\r\n                      }}  \r\n                    />}\r\n                  options={options} \r\n                  value={defaultCode} \r\n                  nullFlavors={certificate.childInfo?.nullFlavors}  \r\n                  field_name=\"address\" paraNum \r\n                />    \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>15.*</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"marital_status\">Семейное положение</label>\r\n                <Dropdown inputId=\"marital_status\" style={ddStyle}\r\n                  placeholder=\"Выбрать\" autoFocus \r\n                  options={MARITAL_STATUSES} optionLabel=\"name\"\r\n                  value={MARITAL_STATUSES.find((item)=>item.code === certificate.maritalStatus)} \r\n                  onChange={(e) =>{certificate.maritalStatus= e.value.code}} \r\n                />                    \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>16.* </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"education_level\">Образование</label>\r\n                <Dropdown inputId=\"education_level\" style={ddStyle}\r\n                  placeholder=\"Выбрать\" autoFocus \r\n                  options={EDUCATION_LEVELS} optionLabel=\"name\"\r\n                  value={EDUCATION_LEVELS.find((item)=>item.code === certificate.educationLevel)} \r\n                  onChange={(e) =>{certificate.educationLevel = e.value.code}} \r\n                />   \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>17.*</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"social_status\">Занятость</label>\r\n                <Dropdown inputId=\"social_status\" style={ddStyle}\r\n                  placeholder=\"Выбрать\" autoFocus \r\n                  options={SOCIAL_STATUSES} optionLabel=\"name\"\r\n                  value={SOCIAL_STATUSES.find((item)=>item.code === certificate.socialStatus)} \r\n                  onChange={(e) => {certificate.socialStatus = e.value.code}} \r\n                />    \r\n              </div>  \r\n            </div> \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%', paddingLeft:'0.5rem'}} >\r\n              <em>* В случае смерти ребенка до года заполняется в отношении матери</em>\r\n            </div>            \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section5) ","//Род причины смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.21 Версия: 2.1\r\nexport const DISEASE_DEADTH_KIND = 1\r\nexport const DEATH_KINDS = [\r\n  { code: 1, name: \"от заболевания\" },\r\n  { code: 2, name: \"от несчастного случая, не связанного с производством\" },\r\n  { code: 3, name: \"от несчастного случая, связанного с производством\" },\r\n  { code: 4, name: \"убийства\" },\r\n  { code: 5, name: \"самоубийства\" },\r\n  { code: 6, name: \"в ходе военных действий\" },\r\n  { code: 7, name: \"в ходе террористических действий\" },\r\n  { code: 8, name: \"род смерти не установлен\" },\r\n]\r\n","//Тип медицинского работника, установившего причины смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.22 Версия: 3.1\r\nexport const MEDICS = [\r\n  { code: 1, name: \"врач, только установивший смерть\" },\r\n  { code: 2, name: \"лечащий врач\" },\r\n  { code: 3, name: \"фельдшер, акушерка\" },\r\n  { code: 4, name: \"врач-патологоанатом\" },\r\n  { code: 5, name: \"врач-судебно-медицинский эксперт\" },\r\n]\r\n","//Основания для установления причины смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.23  Версия: 2.1\r\nexport const BASIS_DERMINING = [\r\n  { code: 1, name: \"осмотр трупа\" },\r\n  { code: 2, name: \"записи в медицинской документации\" },\r\n  { code: 3, name: \"предшествующее наблюдение за пациентом\" },\r\n  { code: 4, name: \"вскрытие\" },\r\n]\r\n","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext} from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport '../../styles/components/RadioButton.css'\r\nimport '../../styles/components/Calendar.css'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { NA, NULL_FLAVORS } from '../../utils/defaults'\r\nimport { IReference } from '../../models/IReference'\r\nimport { Dropdown } from 'primereact/dropdown'\r\n\r\nimport { INullFlavorR } from '../../models/INullFlavor'\r\nimport { DEATH_KINDS, DISEASE_DEADTH_KIND } from '../../NSI/1.2.643.5.1.13.13.99.2.21'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { InputTextarea } from 'primereact/inputtextarea'\r\nimport { MEDICS } from '../../NSI/1.2.643.5.1.13.13.99.2.22'\r\nimport { BASIS_DERMINING } from '../../NSI/1.2.643.5.1.13.13.99.2.23'\r\n\r\n const Section6: FC = () => {\r\n  const { certificateStore } = useContext(Context)\r\n   \r\n  const optionCode = 'NA'\r\n  const options = NULL_FLAVORS.filter((item:IReference)=>optionCode.includes(item.code))  \r\n  \r\n  const header = () => {\r\n      return <span>Характеристика причины смерти</span>\r\n    }\r\n  const certificate = certificateStore.cert  \r\n  const isExtReason = certificate.deathKind !== undefined && certificate.deathKind !== DISEASE_DEADTH_KIND \r\n  \r\n  \r\n  \r\n  const ddStyle = {minWidth:'210px', maxWidth:'500px', marginTop: '0.5rem', marginLeft: '-0.75rem'}\r\n  const dDivStyle = {paddingTop: '0.1rem'}\r\n      \r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">            \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>18. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"deathPlaceType\">Смерть произошла</label>\r\n                <Dropdown inputId=\"deathPlaceType\" style={ddStyle} placeholder=\"Выбрать\"  \r\n                  options={DEATH_KINDS} optionLabel=\"name\" autoFocus\r\n                  value={DEATH_KINDS.find((item)=>item.code === certificate.deathKind)} \r\n                  onChange={(e) =>{\r\n                    certificate.deathKind = e.value.code                    \r\n                  }} />\r\n              </div>  \r\n            </div>            \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>19.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`pdivdt_${isExtReason}`} style={{width: '90%'}}>                                  \r\n                <NullFlavorWrapper paraNum disabled checked={isExtReason}                                      \r\n                  label={<label htmlFor=\"extReasonTime\"> В случае смерти от несчастного случая, убийства, самоубийства, от военных и террористических действий, при неустановленном роде смерти - указать дату, время и обстоятельства травмы (отравления)</label>}\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) {                        \r\n                        certificate.extReasonTime = undefined                        \r\n                      } \r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                    }} \r\n                  onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{\r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n                  field={<div className=\"p-d-flex p-flex-wrap p-jc-start\">\r\n                          <Calendar id=\"extReasonTime\" showIcon className=\"p-mr-3 p-mb-2\"\r\n                            placeholder='дата' dateFormat={\"dd.mm.yy\"} \r\n                            locale=\"ru\" mask=\"99.99.9999\" panelStyle={{marginLeft:'12rem'}}                                         \r\n                            value={certificate.extReasonTime} \r\n                            onChange={(e)=>{\r\n                              certificate.extReasonTime = e.target.value as Date | undefined\r\n                            }}                         \r\n                          />\r\n                         <Calendar id=\"timereason\" className=\"p-mr-3 p-mb-2\" timeOnly \r\n                         hourFormat=\"24\" placeholder='время' locale=\"ru\"           \r\n                         value={certificate.extReasonTime}                            \r\n                            onChange={(e)=>{\r\n                              certificate.extReasonTime = e.target.value as Date | undefined\r\n                            }}\r\n                          showIcon /> \r\n                         <InputTextarea id=\"extReasonDescription\" value={certificate.extReasonDescription} \r\n                            cols={65} rows={2} placeholder='обстоятельства'  \r\n                            onChange={(e)=>{certificate.extReasonDescription = e.target.value }}\r\n                          /> \r\n                        </div> \r\n                  }\r\n                  options={options} \r\n                  value={NA} \r\n                  nullFlavors={certificate.nullFlavors}  \r\n                  field_name=\"ext_reason_time\"\r\n                />                               \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>20. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"establishedMedic\">Причины смерти установлены:</label>\r\n                <Dropdown inputId=\"establishedMedic\" style={ddStyle} placeholder=\"Выбрать\"  \r\n                  options={MEDICS} optionLabel=\"name\" autoFocus\r\n                  value={MEDICS.find((item)=>item.code === certificate.establishedMedic)} \r\n                  onChange={(e) =>{\r\n                    certificate.establishedMedic = e.value.code                    \r\n                  }} />\r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>21. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"basisDetermining\">На основании:</label>\r\n                <Dropdown inputId=\"basisDetermining\" style={ddStyle} placeholder=\"Выбрать\"  \r\n                  options={BASIS_DERMINING} optionLabel=\"name\" autoFocus\r\n                  value={BASIS_DERMINING.find((item)=>item.code === certificate.basisDetermining)} \r\n                  onChange={(e) =>{\r\n                    certificate.basisDetermining = e.value.code                    \r\n                  }} />\r\n              </div>  \r\n            </div>     \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section6) ","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { DATE_FORMAT, TIME_FORMAT } from \"../../utils/consts\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IProcedureR } from \"../requests/IProcedureR\"\r\nimport { IMedicalServs } from \"../responses/IMedservs\"\r\nimport { IProcedure } from \"../responses/IProcedure\"\r\n\r\nexport class Procedure implements ISerializable {\r\n  private _id?: number\r\n  private _medicalServ: IMedicalServs\r\n  private _guid: string\r\n  private _textValue?: string | undefined\r\n  private _effectiveTime?: Date\r\n  private _nullFlavors: INullFlavorR[]\r\n  constructor(props: IProcedure) {\r\n    this._id = props.id\r\n    this._guid = props.guid || uuidv4()\r\n    this._medicalServ = props.medical_serv\r\n    this._textValue = props.text_value\r\n    if (props.effective_time) this._effectiveTime = new Date(props.effective_time)\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes(): IProcedureR {\r\n    let _pr = { guid: this._guid } as IProcedureR\r\n    if (this._id && this._id > -1) _pr.id = this._id\r\n    if (this._effectiveTime) _pr.effective_time = this._effectiveTime.toLocaleString()\r\n    if (this._medicalServ) _pr.medical_serv_id = this._medicalServ.id\r\n    if (this._textValue) _pr.text_value = this._textValue\r\n    if (this._nullFlavors.length > 0) _pr.null_flavors_attributes = this.null_flavors_attributes()\r\n    return _pr\r\n  }\r\n  get id(): number | undefined {\r\n    return this._id\r\n  }\r\n  set id(value: number | undefined) {\r\n    this._id = value\r\n  }\r\n  get effectiveTime(): Date | undefined {\r\n    return this._effectiveTime\r\n  }\r\n  set effectiveTime(value: Date | undefined) {\r\n    this._effectiveTime = value\r\n  }\r\n  get textValue(): string | undefined {\r\n    return this._textValue\r\n  }\r\n  set textValue(value: string | undefined) {\r\n    this._textValue = value\r\n  }\r\n  get medicalServ(): IMedicalServs {\r\n    return this._medicalServ\r\n  }\r\n  set medicalServ(value: IMedicalServs) {\r\n    this._medicalServ = value\r\n  }\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  get guid(): string {\r\n    return this._guid\r\n  }\r\n\r\n  timeStr(): string {\r\n    if (this._effectiveTime === undefined) return \"\"\r\n    return this._effectiveTime?.toLocaleString(\r\n      \"ru\",\r\n      this._effectiveTime.getHours() === 0 && this._effectiveTime.getMinutes() === 0 ? DATE_FORMAT : TIME_FORMAT\r\n    )\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IDeathReason } from \"../responses/IDeathReason\"\r\nimport { IDiagnosis } from \"../responses/IDiagnosis\"\r\nimport { Procedure } from \"./Procedure\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { IDeathReasonR } from \"../requests/IDeathReasonR\"\r\nimport { IProcedureR } from \"../requests/IProcedureR\"\r\nexport class DeathReason implements ISerializable {\r\n  private _oldOne: IDeathReason\r\n  private _id?: number\r\n  private _diagnosis?: IDiagnosis | undefined\r\n  private _effectiveTime?: Date | null\r\n  private _years?: number | null\r\n  private _months?: number | null\r\n  private _weeks?: number | null\r\n  private _days?: number | null\r\n  private _hours?: number | null\r\n  private _minutes?: number | null\r\n  private _guid: string\r\n  private _procedures: Procedure[]\r\n  private _nullFlavors: INullFlavorR[]\r\n\r\n  constructor(props = {} as IDeathReason) {\r\n    this._oldOne = { ...props }\r\n    this._id = props.id\r\n    this._guid = props.guid || uuidv4()\r\n    this._diagnosis = props.diagnosis || props.ext_diagnosis\r\n    if (props.effective_time) this._effectiveTime = new Date(props.effective_time)\r\n    this._days = props.days\r\n    this._hours = props.hours\r\n    this._minutes = props.minutes\r\n    this._months = props.months\r\n    this._weeks = props.weeks\r\n    this._years = props.years\r\n    this._procedures = props.procedures?.map((proc) => new Procedure(proc)) || []\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  get id(): number | undefined {\r\n    return this._id\r\n  }\r\n\r\n  set id(id: number | undefined) {\r\n    this._id = id\r\n  }\r\n\r\n  get diagnosis(): IDiagnosis | undefined {\r\n    return this._diagnosis\r\n  }\r\n  set diagnosis(value: IDiagnosis | undefined) {\r\n    this._diagnosis = value\r\n  }\r\n  get effectiveTime(): Date | null | undefined {\r\n    return this._effectiveTime\r\n  }\r\n  set effectiveTime(value: Date | undefined | null) {\r\n    this._effectiveTime = value\r\n  }\r\n  get years(): number | undefined | null {\r\n    return this._years\r\n  }\r\n  set years(value: number | undefined | null) {\r\n    this._years = value\r\n  }\r\n  get months(): number | undefined | null {\r\n    return this._months\r\n  }\r\n  set months(value: number | undefined | null) {\r\n    this._months = value\r\n  }\r\n  get weeks(): number | undefined | null {\r\n    return this._weeks\r\n  }\r\n  set weeks(value: number | undefined | null) {\r\n    this._weeks = value\r\n  }\r\n  get days(): number | undefined | null {\r\n    return this._days\r\n  }\r\n  set days(value: number | undefined | null) {\r\n    this._days = value\r\n  }\r\n  get hours(): number | undefined | null {\r\n    return this._hours\r\n  }\r\n  set hours(value: number | undefined | null) {\r\n    this._hours = value\r\n  }\r\n  get minutes(): number | undefined | null {\r\n    return this._minutes\r\n  }\r\n  set minutes(value: number | undefined | null) {\r\n    this._minutes = value\r\n  }\r\n  get procedures(): Procedure[] {\r\n    return this._procedures\r\n  }\r\n  set procedures(value: Procedure[]) {\r\n    this._procedures = value\r\n  }\r\n  get nullFlavors(): INullFlavorR[] {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(value: INullFlavorR[]) {\r\n    this._nullFlavors = value\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    let _result = this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n    this._oldOne.null_flavors?.forEach((el) => {\r\n      if (_result.findIndex((nf) => nf.id === el.id) === -1)\r\n        _result.push({ id: el.id, parent_guid: el.parent_guid, _destroy: \"1\" } as INullFlavorR)\r\n    })\r\n    return _result\r\n  }\r\n  procNames(): string {\r\n    let _result = \"\"\r\n    this._procedures.forEach((proc) => {\r\n      _result += proc.textValue || proc.medicalServ.name\r\n      if (proc.effectiveTime) _result += \" от \" + proc.timeStr()\r\n      _result += \"; \"\r\n    })\r\n    return _result\r\n  }\r\n  getAttributes(isExt = false): IDeathReasonR {\r\n    let _dr = { guid: this._guid } as IDeathReasonR\r\n    if (this._id && this._id > -1) _dr.id = this._id\r\n    if (this._days || this._oldOne.days) _dr.days = this._days\r\n    if (this._hours || this._oldOne.hours) _dr.hours = this._hours\r\n    if (this._minutes || this._oldOne.minutes) _dr.minutes = this._minutes\r\n    if (this._months || this._oldOne.months) _dr.months = this._months\r\n    if (this._weeks || this._oldOne.weeks) _dr.weeks = this._weeks\r\n    if (this._years || this._oldOne.years) _dr.years = this._years\r\n    if (this._effectiveTime || this._oldOne.effective_time) _dr.effective_time = this._effectiveTime\r\n    if (this._diagnosis && !isExt) _dr.diagnosis_id = Number.parseInt(this._diagnosis.id)\r\n    else if (this._oldOne.diagnosis) _dr.diagnosis_id = null\r\n    if (this._diagnosis && isExt) _dr.ext_diagnosis_id = Number.parseInt(this._diagnosis.id)\r\n    else if (this._oldOne.diagnosis) _dr.ext_diagnosis_id = null\r\n    if (this._nullFlavors.length > 0) _dr.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._procedures.length > 0) _dr.procedures_attributes = this._procedures.map((item) => item.getAttributes())\r\n    if (this._oldOne.procedures && this._oldOne.procedures.length > 0) {\r\n      let _temp = [] as IProcedureR[]\r\n      this._oldOne.procedures.forEach((item) => {\r\n        if (!_dr.procedures_attributes || _dr.procedures_attributes.findIndex((pr) => pr.id === item.id) === -1)\r\n          _temp.push({ id: item.id, _destroy: \"1\" } as IProcedureR)\r\n      })\r\n      if (_dr.procedures_attributes && _temp.length > 0)\r\n        _dr.procedures_attributes = _dr.procedures_attributes.concat(_temp)\r\n      else if (_temp.length > 0) _dr.procedures_attributes = _temp\r\n    }\r\n    return _dr\r\n  }\r\n}\r\n","import { AxiosResponse } from \"axios\"\r\nimport $api, { API_URL } from \"../http\"\r\nimport { IDiagnosis } from \"../models/responses/IDiagnosis\"\r\nimport { IMedicalServs } from \"../models/responses/IMedservs\"\r\n\r\nexport default class DiagnosisService {\r\n  static async fetchDiagnoses(query: any): Promise<AxiosResponse<IDiagnosis[]>> {\r\n    return $api.post(`${API_URL}model/Diagnosis/`, { q: query, offset: 0, limit: 200 })\r\n  }\r\n  static async fetchExtDiagnoses(query: any): Promise<AxiosResponse<IDiagnosis[]>> {\r\n    return $api.post(`${API_URL}model/ExtDiagnosis/`, { q: query, offset: 0, limit: 200 })\r\n  }\r\n  static async fetchMedicalServs(query: any): Promise<AxiosResponse<IMedicalServs[]>> {\r\n    return $api.post(`${API_URL}model/MedicalServ/`, { q: query, offset: 0, limit: 200 })\r\n  }\r\n}\r\n","\r\n\r\nimport { observer } from 'mobx-react-lite'\r\nimport { AutoComplete } from 'primereact/autocomplete'\r\nimport { Button } from 'primereact/button'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { FC, useState } from 'react'\r\nimport Certificate from '../../models/FormsData/Certificate'\r\nimport { DeathReason } from '../../models/FormsData/DeathReason'\r\nimport { INullFlavorR } from '../../models/INullFlavor'\r\nimport { IReference } from '../../models/IReference'\r\nimport { IDiagnosis } from '../../models/responses/IDiagnosis'\r\nimport DiagnosisService from '../../services/DiagnosisService'\r\nimport { NA, NULL_FLAVORS, UNK } from '../../utils/defaults'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\n\r\ntype ReasonProps = {\r\n  disabled?:boolean\r\n  checked?:boolean\r\n  isExt?:boolean\r\n  deathReason?: DeathReason\r\n  label: string \r\n  certificate: Certificate\r\n  fieldName?: string\r\n  onChange: (reason: DeathReason | undefined)=>void\r\n  onUp?: ()=>void\r\n  onDown?: ()=>void\r\n  onTimeChecked?: (checked: boolean)=>void \r\n  onDiagnosisChecked?: (checked: boolean, nullFlavors: INullFlavorR[] | undefined)=>void\r\n}\r\n\r\nconst Reason: FC<ReasonProps> = (props: ReasonProps) => { \r\n  const options = NULL_FLAVORS.filter((item:IReference)=>\"ASKU NA UNK\".includes(item.code))\r\n  const style = {width:'86px'}\r\n  const CSS_classes = \"p-field p-inputgroup p-mr-1\"\r\n  const [checked, setChecked] = useState(props.checked || false)   \r\n  const [diagnoses, setDiagnoses] = useState<IDiagnosis[]>([]) \r\n  const [diagnosisText, setDiagnosisText] = useState('')\r\n  const [diagnosisCode, setDiagnosisCode] = useState('')\r\n  const cleanEffectiveTime = () => {\r\n    if (!deathReason) return\r\n    if (deathReason.days) deathReason.days =null \r\n    if (deathReason.effectiveTime) deathReason.effectiveTime = null\r\n    if (deathReason.hours) deathReason.hours =null \r\n    if (deathReason.minutes) deathReason.minutes = null\r\n    if (deathReason.months) deathReason.months = null\r\n    if (deathReason.weeks) deathReason.weeks = null\r\n    if (deathReason.years) deathReason.years = null\r\n  }\r\n  const  getDiagnoses = (event: { query: string })=>{\r\n  const option = {} as any\r\n  if (event.query.trim().length>0) option.s_name_cont = event.query.trim()\r\n  if (!!diagnosisCode && diagnosisCode.trim().length>0) option.ICD10_start =  diagnosisCode    \r\n  if (props.isExt) DiagnosisService.fetchExtDiagnoses(option).then(response=>{\r\n        if (response.data.length>0) setDiagnoses(response.data)\r\n        else setDiagnoses([])        \r\n      }).catch((reason)=>console.log(reason)) \r\n  else DiagnosisService.fetchDiagnoses(option).then(response=>{\r\n        if (response.data.length>0) setDiagnoses(response.data)\r\n        else setDiagnoses([])        \r\n      }).catch((reason)=>console.log(reason))    \r\n  }\r\n  const  getCodes = (event: { query: string })=>{    \r\n    if (event.query.trim().length>0) {\r\n      if (props.isExt) DiagnosisService.fetchExtDiagnoses({'ICD10_start': event.query.trim()}).then(response=>{        \r\n        if (response.data.length>0) setDiagnoses(response.data)\r\n        else setDiagnoses([])        \r\n      }).catch((reason)=>console.log(reason))\r\n      else DiagnosisService.fetchDiagnoses({'ICD10_start': event.query.trim()}).then(response=>{                \r\n        if (response.data.length>0) setDiagnoses(response.data)\r\n        else setDiagnoses([])        \r\n      }).catch((reason)=>console.log(reason)) \r\n    } \r\n  }\r\n  const deathTime = props.certificate.deathDatetime  \r\n  const [deathReason, setDeathReason] = useState<DeathReason | null | undefined>(props.deathReason)  \r\n  const upButton = props.onUp === undefined ? <></> : <Button icon=\"pi pi-angle-up\" onClick={props.onUp} className=\"p-button-rounded p-button-secondary p-mr-1\" />\r\n  const downButton = props.onDown === undefined ? <></> : <Button icon=\"pi pi-angle-down\" onClick={props.onDown} className=\"p-button-rounded p-button-secondary\" />\r\n  const diagnosisOptionTemplate = (option: IDiagnosis) => {\r\n        return (\r\n          <span>\r\n            <span style={{marginRight:'4px'}}>{option.ICD10}</span>\r\n            <span>{option.s_name}</span>\r\n          </span>\r\n        )\r\n    }\r\n  const effTime = checked && !!deathReason && !!deathTime ? (<NullFlavorWrapper  \r\n      checked={checked && (!!deathReason.effectiveTime || deathReason.nullFlavors.findIndex(el=>el.parent_attr==='effective_time')===-1)} \r\n      key={`et_${deathReason.effectiveTime}`} \r\n      label={<label>Период времени между началом патол. состояния и смертью</label>} \r\n      options={options}  paraNum value={UNK}\r\n      nullFlavors={deathReason.nullFlavors}\r\n      setCheck={(e: CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n        if (!e.checked) cleanEffectiveTime() \r\n        //console.log('deathReason.nullFlavors',deathReason.nullFlavors)\r\n        if (nullFlavors) deathReason.nullFlavors = nullFlavors\r\n        //console.log('nullFlavors', nullFlavors)\r\n        props.onChange(deathReason)\r\n        if (props.onTimeChecked) props.onTimeChecked(e.checked)\r\n      }}\r\n      onChange={(e: IReference, nullFlavors: INullFlavorR[] | undefined)=>{        \r\n        if (nullFlavors) deathReason.nullFlavors = nullFlavors}}\r\n      field_name=\"effective_time\"\r\n      field={\r\n        <div className=\"p-fluid p-formgrid p-grid\" style={{marginLeft:'0'}}>           \r\n          <div className={CSS_classes} style={style} key={`rt_${deathTime}`}>  \r\n            <span className=\"p-inputgroup-addon\">лет</span>          \r\n            <InputText id=\"year\" type=\"number\" min={0} max={99}\r\n                onChange={(e)=>{  \r\n                const value = Number.parseInt(e.target.value)                             \r\n                deathReason.years = value === 0 ? undefined : value\r\n                props.certificate.saveReasonEffTime(deathReason)\r\n                props.onChange(deathReason)              \r\n              }}\r\n             value={deathReason.years || ''} />         \r\n          </div>\r\n          <div className={CSS_classes} style={style}>\r\n            <span className=\"p-inputgroup-addon\">мес</span>            \r\n            <InputText id=\"month\" type=\"number\" \r\n              min={0} max={12} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value)  \r\n              deathReason.months = value === 0 ? undefined : value\r\n              props.certificate.saveReasonEffTime(deathReason) \r\n              props.onChange(deathReason)\r\n            }}\r\n            value={deathReason.months || ''}/>\r\n          </div>\r\n          <div className={CSS_classes} style={style}> \r\n            <span className=\"p-inputgroup-addon\">нед</span>           \r\n            <InputText id=\"ned\" type=\"number\" \r\n            min={0} max={4} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value)\r\n              deathReason.weeks = value === 0 ? undefined : value\r\n              props.certificate.saveReasonEffTime(deathReason)\r\n              props.onChange(deathReason)\r\n            }}\r\n            value={deathReason.weeks || ''}/>         \r\n          </div>\r\n          <div className={CSS_classes} style={style}>\r\n            <span className=\"p-inputgroup-addon\">сут</span>            \r\n            <InputText id=\"dne\" type=\"number\" \r\n            min={0} max={7} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value)\r\n              deathReason.days = value === 0 ? undefined : value\r\n              if (props.certificate.saveReasonEffTime(deathReason)) props.onChange(deathReason)\r\n            }}\r\n            value={deathReason.days || ''}/>\r\n          </div>\r\n          <div className={CSS_classes} style={style}>\r\n            <span className=\"p-inputgroup-addon\">час</span>            \r\n            <InputText id=\"hours\" type=\"number\"\r\n             min={0} max={23} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value) \r\n              deathReason.hours = value === 0 ? undefined : value\r\n              if (props.certificate.saveReasonEffTime(deathReason)) props.onChange(deathReason)\r\n            }}\r\n             value={deathReason.hours || ''}/>          \r\n          </div>\r\n          <div className={CSS_classes} style={style}>\r\n            <span className=\"p-inputgroup-addon\">мин</span>            \r\n            <InputText id=\"minut\" type=\"number\"\r\n              min={0} max={59} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value)  \r\n              deathReason.minutes = value === 0 ? undefined : value\r\n              props.certificate.saveReasonEffTime(deathReason) \r\n              props.onChange(deathReason)\r\n            }}\r\n             value={deathReason.minutes || ''}/>\r\n          </div>\r\n        </div>\r\n      }\r\n    />) : <></>        \r\n  return (<div className=\"p-paragraph-field\"  style={{width: '100%'}}>  \r\n    <NullFlavorWrapper disabled={props.disabled} checked={checked} key={`rs2_${deathReason?.id}_${deathReason?.diagnosis}`}\r\n      setCheck={(e: CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n        setChecked(e.checked)        \r\n        if (e.checked) {\r\n          const reason = new DeathReason()\r\n          props.onChange(reason)\r\n          setDeathReason(reason)\r\n        } else {           \r\n          if (!!deathReason) {             \r\n            deathReason.nullFlavors = []\r\n            cleanEffectiveTime()  \r\n            deathReason.diagnosis = undefined\r\n            deathReason.nullFlavors.push({parent_attr:'effective_time', code: NA} as INullFlavorR)   \r\n            deathReason.nullFlavors.push({parent_attr:'diagnosis', code: NA} as INullFlavorR)       \r\n          } \r\n          props.onChange(undefined)   \r\n        }\r\n        if (props.onDiagnosisChecked) props.onDiagnosisChecked(e.checked, nullFlavors)        \r\n      }}  \r\n      label={<label>{props.label}</label>} \r\n      options={options} \r\n      nullFlavors={!props.fieldName ? deathReason?.nullFlavors : props.certificate.nullFlavors}       \r\n      paraNum      \r\n      field_name={props.fieldName || 'diagnosis'}\r\n      value={NA}\r\n      field={\r\n        <div className=\"p-fluid p-formgrid p-grid\">     \r\n          <div className={`p-field p-col-12 ${props.isExt ? 'p-md-10' : 'p-md-8'}`}>             \r\n            <AutoComplete id=\"reason_text\" placeholder=\"Диагноз\"\r\n              suggestions={diagnoses} delay={1000} dropdown\r\n              completeMethod={getDiagnoses} itemTemplate={diagnosisOptionTemplate}\r\n              field=\"s_name\" onChange={(e) =>{ \r\n                if (!!deathReason && !!e.value.s_name) { \r\n                  deathReason.diagnosis = e.value\r\n                  if (!!deathReason.diagnosis) setDiagnosisCode(deathReason.diagnosis?.ICD10)\r\n                } else if(e.value) {\r\n                  if (!!deathReason) deathReason.diagnosis = undefined\r\n                  setDiagnosisText(e.value)                  \r\n                } else {\r\n                  if (deathReason) deathReason.diagnosis = undefined\r\n                  setDiagnosisText('')                  \r\n                }  \r\n                if (deathReason!=null) props.onChange(deathReason)\r\n              }}\r\n              value={props.deathReason?.diagnosis || diagnosisText}/>          \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-2\">\r\n            <AutoComplete id=\"reason_code\" placeholder=\"Код\"\r\n              suggestions={diagnoses} delay={1000} field=\"ICD10\"\r\n              itemTemplate={diagnosisOptionTemplate}\r\n              completeMethod={getCodes} onChange={(e) =>{ \r\n                if (!!deathReason && !!e.value.s_name) {\r\n                    deathReason.diagnosis = e.value\r\n                    if (!!deathReason.diagnosis) setDiagnosisCode(deathReason.diagnosis?.ICD10)\r\n                } else if(e.value) {\r\n                    if (!!deathReason) deathReason.diagnosis = undefined\r\n                  setDiagnosisCode(e.value)                \r\n                } else {\r\n                  if (!!deathReason) deathReason.diagnosis = undefined               \r\n                  setDiagnosisCode('')\r\n                }  \r\n                if (!!deathReason) props.onChange(deathReason)\r\n              }}\r\n              value={props.deathReason?.diagnosis || diagnosisCode}/>          \r\n          </div>\r\n          <div className={`p-field ${props.isExt ? '' : 'p-col-12 p-md-2'}`}>\r\n            {upButton}\r\n            {downButton}            \r\n          </div>\r\n        </div>\r\n      }\r\n    />  \r\n    {effTime}\r\n  </div>)\r\n}\r\nexport default observer(Reason)","import { AxiosResponse } from \"axios\"\r\nimport { $acme, ACME_URL } from \"../http\"\r\n\r\nexport default class ACMEService {\r\n  //POST request for run ACME and get result\r\n  static async runACME(input: string): Promise<AxiosResponse<string>> {\r\n    return $acme.post(`${ACME_URL}useACME`, { data_AIN: input })\r\n  }\r\n}\r\n","import Certificate from \"../models/FormsData/Certificate\"\r\nimport ACMEService from \"../services/ACME_Service\"\r\n\r\n/**\r\n * Преобразование массива причин в строку заданного формата: Позиции\r\n * соответствуют кодам МКБ-10 причин смерти, записанных без точки (4\r\n * знакоместа) и разделенные знаком / внутри раздела 1 пункта 22 нашего\r\n * свидетельства о смерти, знаком * между разделами, пробелом внутри раздела\r\n * 2 и с размещением кода внешней причины (первые 3 знака) в конце\r\n * кодограммы с добавленным знаком & впереди.\r\n *\r\n * @return результирующая строка\r\n */\r\nconst codogram = (\r\n  reason_a: string,\r\n  reason_b: string | undefined,\r\n  reason_c: string | undefined,\r\n  ext_reason: string | undefined,\r\n  reasons: Array<string | undefined>\r\n): string => {\r\n  let _result = \"\"\r\n  let _part_2 = \"\"\r\n  reasons.forEach((code) => {\r\n    if (!!code) _part_2 += \" \" + code\r\n  })\r\n  if (!reason_b && !ext_reason && !reasons[0]) {\r\n    _result = reason_a\r\n  } else if (!!reason_b && !reason_c && !ext_reason && !reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b\r\n  } else if (!!reason_b && !!reason_c && !ext_reason && !reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"/\" + reason_c\r\n  } else if (!reason_b && !ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"*\" + _part_2\r\n  } else if (!!reason_b && !reason_c && !ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"*\" + _part_2\r\n  } else if (!!reason_b && !!reason_c && !ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"/\" + reason_c + \"*\" + _part_2\r\n  } else if (!reason_b && !!ext_reason && !reasons[0]) {\r\n    _result = reason_a + \" \" + ext_reason\r\n  } else if (!!reason_b && !reason_c && !!ext_reason && !reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \" \" + ext_reason\r\n  } else if (!!reason_b && !!reason_c && !!ext_reason && !reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"/\" + reason_c + \" \" + ext_reason\r\n  } else if (!reason_b && !!ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"*\" + _part_2 + \" \" + ext_reason\r\n  } else if (!!reason_b && !reason_c && !!ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"*\" + _part_2 + \" \" + ext_reason\r\n  } else if (!!reason_b && !!reason_c && !!ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"/\" + reason_c + \"*\" + _part_2 + \" \" + ext_reason\r\n  }\r\n  return _result.padEnd(120, \" \")\r\n}\r\n\r\n/**\r\n * экспорт массива причин в строку\r\n *\r\n * @param withOtherReasons определяет есть ли прочие причины\r\n * @return входную кодограмму для внешнего модуля АСМЕ\r\n * (файл с расширением ain)\r\n */\r\nconst ACME_AIN = (withOtherReasons: boolean, certificate: Certificate) => {\r\n  const deathDatetime = certificate.deathDatetime?.toDateString()\r\n  const deathDate = certificate.deathDatetime?.toLocaleDateString()\r\n  //Позиции 1-4 соответствуют году смерти\r\n  const X1X4 = !deathDatetime ? \"0000\" : deathDatetime.slice(-4)\r\n  //Позиции 5-6 соответствуют месту смерти, которая обозначена NC\r\n\r\n  //Позиции 7-12 соответствуют номеру сертификата, вместо которого для\r\n  //идентификации записи после ее возврата от АСМЕ\r\n  //заполнены левой частью форматированного до 10 знаков незначащими нулями\r\n  //значения счетчика (6 знакомест)\r\n  const X7X12 = certificate.number?.slice(-4).padStart(6, \"0\") || \"000000\"\r\n\r\n  //Позиция 13 соответствует номеру кодировщика, который обозначен как 1\r\n\r\n  //Позиции 14-17 соответствуют лоту, вместо которого для идентификации записи после\r\n  //ее возврата от АСМЕ заполнены правой частью форматированного до 10 знаков\r\n  //незначащими нулями значения счетчика (4 знакоместа)\r\n  const X14X17 = withOtherReasons ? \"0000\" : \"0001\"\r\n\r\n  //Позиция 18 соответствует номеру секции, который обозначен как 1\r\n  //Позиции 19-21 соответствуют первым трем буквам месяца смерти\r\n  const X19X21 = !deathDatetime ? \"000\" : deathDatetime.slice(4, 7)\r\n  //Позиции 22-23 соответствуют месяцу смерти\r\n  const X22X23 = !deathDate ? \"  \" : deathDate.slice(3, 5)\r\n  //Позиции 24-25 соответствуют дню смерти\r\n  const X24X25 = !deathDate ? \"  \" : deathDate.slice(0, 2)\r\n  // Позиции 26-29 соответствуют Х26Х29 (году смерти), отсутствие заполняется пробелами\r\n  const X26X29 = !deathDate ? \"    \" : deathDate.slice(-4)\r\n  // Позиции 30-33 соответствуют году версии программы SuperMICAR\r\n  // Позиции 34-37 соответствуют году версии программы MICAR200\r\n  const birthDay = certificate.patient.birth_date\r\n  const deathDay = certificate.deathDatetime\r\n  //Позиция 38 соответствует: 1 - год, 2 - месяц, 4 - день\r\n  //Позиции 39 - 41 числу годов или месяцев или дней (в зависимости от позиции 38)\r\n  let XYMD = \"9\"\r\n  let X39X41 = \"999\"\r\n  if (deathDay && birthDay) {\r\n    let _diff = deathDay.getFullYear() - birthDay.getFullYear()\r\n    if (_diff > 1) {\r\n      XYMD = \"1\"\r\n      X39X41 = _diff.toString().padStart(3, \"0\")\r\n    } else if (_diff === 1) {\r\n      _diff = deathDay.getMonth() - birthDay.getMonth()\r\n      if (_diff > 0) {\r\n        XYMD = \"1\"\r\n        X39X41 = \"001\"\r\n      } else {\r\n        XYMD = \"2\"\r\n        _diff = deathDay.getMonth() + 12 - birthDay.getMonth()\r\n        X39X41 = _diff.toString().padStart(3, \"0\")\r\n      }\r\n    } else {\r\n      _diff = deathDay.getMonth() - birthDay.getMonth()\r\n      if (_diff > 1) {\r\n        XYMD = \"2\"\r\n        X39X41 = _diff.toString().padStart(3, \"0\")\r\n      } else if (_diff === 1) {\r\n        _diff = deathDay.getDate() - birthDay.getDate()\r\n        if (_diff > 0) {\r\n          XYMD = \"1\"\r\n          X39X41 = \"001\"\r\n        } else {\r\n          XYMD = \"3\"\r\n          _diff = deathDay.getDate() + 30 - birthDay.getDate()\r\n          X39X41 = _diff.toString().padStart(3, \"0\")\r\n        }\r\n      } else {\r\n        _diff = deathDay.getDate() - birthDay.getDate()\r\n        if (_diff > 0) {\r\n          XYMD = \"3\"\r\n          X39X41 = _diff.toString().padStart(3, \"0\")\r\n        } else {\r\n          XYMD = \"3\"\r\n          X39X41 = \"000\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //Позиция 42 соответствует пункту 14 нашего свидетельства: от чего умер.\r\n  //Значению deathKind=1 (заболевание) соответствует в АСМЕ код N\r\n  //Значению deathKind=2 или 3 (несчастный случай) соответствует в АСМЕ код A\r\n  //Значению deathKind=4 (убийство) соответствует в АСМЕ код H\r\n  //Значению deathKind=5 (самоубийство) соответствует в АСМЕ код S\r\n  //Значению deathKind=6 (в ходе военных действий) соответствует в АСМЕ код A\r\n  //Значению deathKind=7 (в ходе террористических действий) соответствует в АСМЕ код A\r\n  //Значению deathKind=8 (род смерти не установлен) соответствует в АСМЕ код C\r\n  let X42 = \" \"\r\n  if (!!certificate.deathKind && certificate.deathKind > 0)\r\n    X42 = [\"N\", \"A\", \"A\", \"H\", \"S\", \"A\", \"A\", \"C\"][certificate.deathKind - 1]\r\n  //Позиция 43 соответствует одному пробелу (\" \")\r\n  //Позиция 44 - кем отвергнута запись (принимается пробел, т.е. не отвергнута)\r\n\r\n  //X45 - четвертый знак кода четвертой строки при условии, что он\r\n  //находится в пределах W00-Y34.X, кроме Y06._ и Y07._\r\n  let X45 = certificate.reasonD?.diagnosis?.ICD10\r\n  X45 =\r\n    !X45 ||\r\n    !(X45 >= \"W00\" && X45 <= \"Y34.X\") ||\r\n    X45.lastIndexOf(\"X\") > 1 ||\r\n    X45.includes(\"Y06.\") ||\r\n    X45.includes(\"Y07.\") ||\r\n    X45.length < 4\r\n      ? \" \"\r\n      : X45.substring(4, 5)\r\n\r\n  //Позиции 51-170 соответствуют кодам МКБ-10 причин смерти, записанных\r\n  //без точки (4 знакоместа) и разделенные знаком / внутри раздела 1\r\n  //пункта 18 нашего свидетельства о смерти, знаком * между разделами,\r\n  //пробелом внутри раздела 2 и с размещением кода внешней причины (первые 3 знака) в конце\r\n  //кодограммы с добавленным знаком & впереди.\r\n  let reasonA = certificate.reasonA?.diagnosis?.ICD10\r\n  reasonA = reasonA && reasonA.replace(\".\", \"\").padEnd(4, \" \")\r\n  let reasonB = certificate.reasonB?.diagnosis?.ICD10\r\n  reasonB = reasonB && reasonB.replace(\".\", \"\").padEnd(4, \" \")\r\n  let reasonC = certificate.reasonC?.diagnosis?.ICD10\r\n  reasonC = reasonC && reasonC.replace(\".\", \"\").padEnd(4, \" \")\r\n  let reasonD = certificate.reasonD?.diagnosis?.ICD10\r\n  reasonD = reasonD && reasonD.replace(\".\", \"\")\r\n  if (X45 !== \" \" && !!reasonD) {\r\n    reasonD = \"&\" + reasonD\r\n    if (reasonD.length > 4) reasonD = reasonD.slice(0, 4)\r\n  } else if (!!reasonD && X45 === \" \") reasonD = (\"&\" + reasonD).padEnd(5, \" \")\r\n  if (reasonD && reasonD.length < 4) reasonD = reasonD.padEnd(4, \" \")\r\n  const reasons = []\r\n  reasons[0] =\r\n    certificate.deathReasons.length < 1 || !withOtherReasons\r\n      ? undefined\r\n      : certificate.deathReasons[0].diagnosis?.ICD10.replace(\".\", \"\").padEnd(4, \" \")\r\n  reasons[1] =\r\n    certificate.deathReasons.length < 2 || !withOtherReasons\r\n      ? undefined\r\n      : certificate.deathReasons[1].diagnosis?.ICD10.replace(\".\", \"\").padEnd(4, \" \")\r\n  reasons[2] =\r\n    certificate.deathReasons.length < 3 || !withOtherReasons\r\n      ? undefined\r\n      : certificate.deathReasons[2].diagnosis?.ICD10.replace(\".\", \"\").padEnd(4, \" \")\r\n  reasons[3] =\r\n    certificate.deathReasons.length < 4 || !withOtherReasons\r\n      ? undefined\r\n      : certificate.deathReasons[3].diagnosis?.ICD10.replace(\".\", \"\").padEnd(4, \" \")\r\n\r\n  reasonA = reasonA && reasonA.lastIndexOf(\"X\") > 1 ? reasonA.slice(0, 3) + \" \" : reasonA\r\n  reasonB = reasonB && reasonB.lastIndexOf(\"X\") > 1 ? reasonB.slice(0, 3) + \" \" : reasonB\r\n  reasonC = reasonC && reasonC.lastIndexOf(\"X\") > 1 ? reasonC.slice(0, 3) + \" \" : reasonC\r\n\r\n  const reasons_in = reasons.map((reason) => {\r\n    return reason && reason.lastIndexOf(\"X\") > 1 ? reason.substring(0, 3) + \" \" : reason\r\n  })\r\n\r\n  //Далее позиции 90 - 170 заняты пробелами, т.е. Space(81)\r\n\r\n  //Позиция 171 - вскрытие (Y - да, N - нет, U - поле не заполнено)\r\n  //В базе код вскрытия 4, а не 1!!!!!!\r\n\r\n  const X171 = !certificate.basisDetermining ? \"U\" : certificate.basisDetermining === 4 ? \"Y\" : \"N\"\r\n  //Позиции 172-173 заняты пробелами\r\n  //Позиция 174 в случае смерти беременной (21п.)\r\n  let X174 = \"3\"\r\n  if (certificate.pregnancyConnection) X174 = [\"9\", \"3\", \"4\", \"1\"][certificate.pregnancyConnection]\r\n\r\n  //Позиция 175 занята пробелом\r\n  //Позиции 176-177 - месяц даты травмы (пункт 15 нашего свитетельства), отсутствие обозначено 99\r\n  const extReasonTime = certificate.extReasonTime?.toLocaleString()\r\n  const X176X177 = !extReasonTime ? \"99\" : extReasonTime.substring(3, 5)\r\n  //Позиции 178-179 - день даты травмы (пункт 15 нашего свитетельства), отсутствие обозначено 99\r\n  const X178X179 = !extReasonTime ? \"99\" : extReasonTime.substring(0, 2)\r\n  //Позиции 180-183 - год даты травмы (пункт 15 нашего свитетельства), отсутствие обозначено 9999\r\n  const X180X183 = !extReasonTime ? \"9999\" : extReasonTime.substring(6, 10)\r\n\r\n  //Позиции 184-187 (время травмы) заполнены 9999\r\n  //Позиция 188 (смерть от травмирования)\r\n\r\n  const X188 = !certificate.deathKind || certificate.deathKind !== 3 ? \" \" : \"Y\"\r\n\r\n  //Позиции 189 - 218 заполнены 30 пробелами, т.е. Space(30)\r\n  //Позиция 219 соответствует пятому знаку кода внешней причины (не считая точки)\r\n  let X219 = certificate.reasonD?.diagnosis?.ICD10\r\n  X219 = X219 && X219.length > 5 ? X219.substring(5, 6) : \" \"\r\n  //Позиции 220 - 231 могут быть заполнены кодом территории (п.7 свидетельства - республика, область, край)\r\n  let X220X231 = certificate.patient.person?.address?.state\r\n  X220X231 = !X220X231 ? \"            \" : X220X231.padStart(12, \" \")\r\n\r\n  //Позиции 232 - 261 для дополнительной информации заполнены пробелами, т.е. Space(30) с буквой q на конце\r\n  //ACMEAIN - объединяющая строка, формирующая входную кодограмму для внешнего модуля АСМЕ (файл с расширением ain)\r\n  const ACMEAIN =\r\n    X1X4 +\r\n    \"NC\" +\r\n    X7X12 +\r\n    \"1\" +\r\n    X14X17 +\r\n    \"1\" +\r\n    X19X21 +\r\n    X22X23 +\r\n    X24X25 +\r\n    X26X29 +\r\n    \"20042004\" +\r\n    XYMD +\r\n    X39X41 +\r\n    X42 +\r\n    \"  \" +\r\n    X45 +\r\n    \"     \" +\r\n    codogram(reasonA || \"    \", reasonB, reasonC, reasonD, reasons_in) +\r\n    X171 +\r\n    \"  \" +\r\n    X174 +\r\n    \" \" +\r\n    X176X177 +\r\n    X178X179 +\r\n    X180X183 +\r\n    \"9999\" +\r\n    X188 +\r\n    \"                              \" +\r\n    X219 +\r\n    X220X231\r\n  return ACMEAIN.padEnd(260, \" \") + \"q\"\r\n}\r\n/**\r\n * Достаем первоначальную причину смерти из кодограммы ACME Во входной\r\n * кодограмме позиции 51-54 соответствуют первоначальной причине смерти, а\r\n * позиция 45 - четвертому знаку внешней причины. При отсутствии четвертого\r\n * знака добавляется знак Х.\r\n *\r\n * @param xACME - входная кодограмма из файла *.TIN\r\n * @return первоначальную причину смерти или пустую строку\r\n */\r\nconst parse_ACME_TIN = (xACME: string) => {\r\n  let _sb = \"\"\r\n  const x45 = xACME.substring(44, 45)\r\n  const x54 = xACME.substring(53, 54)\r\n  const x51_53 = xACME.substring(50, 53)\r\n  const spX45 = \" \" === x45\r\n  const spX54 = \" \" === x54\r\n  const spX51_53 = \"   \" === x51_53\r\n  if (spX45 && !spX54) _sb = `${x51_53}.${x54}`\r\n  else if (spX45 && spX54 && !spX51_53) _sb = `${x51_53}.X`\r\n  else if (!spX45 && !spX51_53 && \"V01\" < x51_53 && \"Y98.X\" >= x51_53) _sb = `${x51_53}.${x45}`\r\n  else if (!spX45 && !spX51_53 && \"V\" > x51_53) _sb = `${x51_53}.${x54}`\r\n  return _sb\r\n}\r\n\r\n/**\r\n * экспорт массива причин в строку АСМЕAIN запрос сервиса ACME\r\n * чтение парсинг результата АСМЕTIN и его обработка.\r\n *\r\n * @return код результата операции\r\n */\r\nexport const doACME = (\r\n  certificate: Certificate,\r\n  onSucccess: (result: string) => void,\r\n  onError: (message: string) => void\r\n) => {\r\n  let _result = -1\r\n  try {\r\n    // Получаем строку входных параметров для внешнего модуля АСМЕ\r\n    const strACMEAIN1 = ACME_AIN(true, certificate)\r\n    _result = -2\r\n    const isReasonD = !!certificate.reasonD && !!certificate.reasonD.diagnosis && !!certificate.reasonD.diagnosis.ICD10\r\n    // Получаем дополнительную строку входных параметров\r\n    // без прочих причин на входе, если внешняя причина определена\r\n    const strACMEAIN2 = isReasonD ? ACME_AIN(false, certificate) : \"\"\r\n    _result = -3\r\n    // делаем запрос к сервису АСМЕ\r\n    ACMEService.runACME(strACMEAIN1 + strACMEAIN2)\r\n      .then((response) => {\r\n        if (response.data && response.data.length < 120) {\r\n          //Длина менее 120, что-то пошло не так\r\n          onError(`Сбой операции: получен некорректный ответ от АСМЕ: ${response.data}`)\r\n        } else {\r\n          // сервис вернул корректный результат\r\n          const TINs = (response.data as any).data_TIN.split(\"\\r\\n\")\r\n          console.log(\"response.data\", response.data)\r\n          if (!isReasonD) onSucccess(parse_ACME_TIN(TINs[0]))\r\n          else {\r\n            let _res = \"\"\r\n            let _alter = \"\"\r\n            if (Number.parseInt(TINs[0].slice(6, 12) + TINs[0].slice(13, 17)) === 1) {\r\n              _res = parse_ACME_TIN(TINs[0])\r\n              _alter = parse_ACME_TIN(TINs[1])\r\n            } else {\r\n              _res = parse_ACME_TIN(TINs[1])\r\n              _alter = parse_ACME_TIN(TINs[0])\r\n            }\r\n            if (_res < \"V00\" || _res > \"Y99.X\") _res = \"\"\r\n            if (\"\" === _res) _res = _alter\r\n            onSucccess(_res)\r\n          }\r\n        }\r\n      })\r\n      .catch((reason) => {\r\n        onError(`Сбой операции: код завершения - 0, подробности: ${reason.message}`)\r\n      })\r\n    _result = 0\r\n  } catch (error) {\r\n    onError(`Сбой операции: код завершения ${_result}, подробности: ${error}`)\r\n  }\r\n}\r\n","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext} from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { DeathReason } from '../../models/FormsData/DeathReason'\r\nimport Reason from '../inputs/Reason'\r\nimport { Button } from 'primereact/button'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { doACME } from '../../utils/acme'\r\n\r\n\r\n const Section7: FC = () => {\r\n  const { certificateStore, layoutStore } = useContext(Context)   \r\n  \r\n  \r\n  const header = () => {\r\n      return <span> <span className='paragraph p-mr-1'>22(I).</span>  Причины смерти.</span>\r\n    }\r\n  const certificate = certificateStore.cert     \r\n  const mainCSSClass = (isACME: boolean) => isACME  ? \"p-fluid p-d-flex p-jc-start ACME-reason\" : \"p-fluid p-d-flex p-jc-start\"\r\n  const reasonBckecked = !!certificate.reasonB\r\n  const reasonCckecked = !!certificate.reasonC\r\n  const reasonDckecked = !!certificate.reasonD \r\n\r\n  const reasonIDExchange = (first: DeathReason, second: DeathReason) => {\r\n    if (!first.id && !second.id) return\r\n    let _id = first.id\r\n    first.id = second.id\r\n    second.id = _id      \r\n  }\r\n      \r\n  return (<>    \r\n    <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n      <div className={mainCSSClass(!!certificate.reasonA && certificate.reasonA===certificate.reasonACME)}\r\n       style={{width: '98%'}} key={`ra_${certificate.reasonA?.diagnosis?.ICD10}`}> \r\n        <div className='paragraph p-mr-1'>а) </div>           \r\n        <Reason label=\"Болезнь или состояние, непосредственно приведшее к смерти\" \r\n          deathReason={certificate.reasonA} certificate={certificate}\r\n           key={`ra2_${certificate.reasonA?.effectiveTime}`} \r\n          onChange={(reason: DeathReason | undefined)=>{ \r\n            if (reason!==certificate.reasonA ) { certificate.reasonA = reason\r\n            layoutStore.message = { severity: 'success', summary: 'Успешно', detail: 'Причина А изменена, рекомендуется сохранить изменения', life: 3000 }}\r\n           }}\r\n          disabled checked\r\n          fieldName='a_reason' \r\n          onDown={()=>{\r\n            if (!certificate.reasonA && !certificate.reasonB) return\r\n            reasonIDExchange(certificate.reasonA || new DeathReason(), \r\n            certificate.reasonB || new DeathReason())            \r\n            const reason = certificate.reasonA\r\n            certificate.reasonA = certificate.reasonB\r\n            certificate.reasonB = reason           \r\n          }}\r\n        />\r\n      </div>  \r\n      <div className={mainCSSClass(!!certificate.reasonB && certificate.reasonB===certificate.reasonACME)} style={{width: '98%'}} key={`rb_${certificate.reasonB?.diagnosis?.ICD10}`}>   \r\n        <div className='paragraph p-mr-1'>б) </div>\r\n        <Reason label=\"Патологическое состояние, которое привело к возникновению непос- редственной причины смерти\" \r\n          deathReason={certificate.reasonB} certificate={certificate}  key={`rb2_${certificate.reasonB?.id}`}\r\n          onChange={(reason: DeathReason | undefined)=>{ \r\n            if (reason!==certificate.reasonB ) \r\n            certificate.reasonB = reason \r\n          }}           \r\n          checked={reasonBckecked} \r\n          fieldName='b_reason' \r\n          onDown={()=>{\r\n            if (!certificate.reasonB && !certificate.reasonC) return\r\n            reasonIDExchange(certificate.reasonB || new DeathReason(), \r\n            certificate.reasonC || new DeathReason())\r\n            const reason = certificate.reasonB\r\n            certificate.reasonB = certificate.reasonC\r\n            certificate.reasonC = reason\r\n          }}  \r\n          onUp={()=>{\r\n            if (!certificate.reasonB && !certificate.reasonC) return\r\n            reasonIDExchange(certificate.reasonC || new DeathReason(),\r\n             certificate.reasonB || new DeathReason())\r\n            const reason = certificate.reasonB\r\n            certificate.reasonB = certificate.reasonA\r\n            certificate.reasonA = reason\r\n          }}            \r\n        />\r\n      </div>  \r\n      <div className={mainCSSClass(!!certificate.reasonC && certificate.reasonC===certificate.reasonACME)} \r\n      style={{width: '98%'}} key={`rc_${certificate.reasonC?.diagnosis?.ICD10}`}>  \r\n        <div className='paragraph p-mr-1'>в) </div>\r\n        <Reason label=\"Первоначальная причина смерти\" \r\n          deathReason={certificate.reasonC} certificate={certificate} \r\n          key={`rc2_${reasonCckecked}_${certificate.reasonC?.effectiveTime}`}\r\n          onChange={(reason: DeathReason | undefined)=>{ \r\n            if (reason !== certificate.reasonC) certificate.reasonC = reason            \r\n          }} fieldName='c_reason' checked={reasonCckecked}\r\n          onUp={()=>{\r\n            if (!certificate.reasonC && !certificate.reasonB) return\r\n            reasonIDExchange(certificate.reasonC || new DeathReason(),\r\n             certificate.reasonB || new DeathReason())\r\n            const reason = certificate.reasonC\r\n            certificate.reasonC = certificate.reasonB\r\n            certificate.reasonB = reason\r\n          }}        \r\n        />\r\n      </div>\r\n      <div className={mainCSSClass(false)}  style={{width: '98%'}} >  \r\n        <div className='paragraph p-mr-1'>г) </div>\r\n        <Reason label=\"Внешняя причина смерти при травмах и отравлениях\" \r\n          deathReason={certificate.reasonD} certificate={certificate} \r\n          key={`rd2_${reasonDckecked}_${certificate.reasonD?.effectiveTime}`}\r\n          onChange={(reason: DeathReason | undefined)=>{ if (reason!==certificate.reasonD ) certificate.reasonD = reason }} fieldName='d_reason'\r\n          checked={reasonDckecked}  \r\n          isExt       \r\n        />   \r\n      </div>  \r\n      <div className={mainCSSClass(false)+'p-fluid'}  style={{width: '98%',padding:'4px'}} >  \r\n        <Button type=\"button\" label=\"ACME\" \r\n          style={{width: '5rem', height: '2.4rem'}} \r\n          className='p-button-warning p-mr-2'\r\n          onClick={()=>{            \r\n            if (certificate.reasonA?.diagnosis?.ICD10) {\r\n              if (certificate.reasonC?.diagnosis?.ICD10 && certificate.reasonC.diagnosis.ICD10.includes('U07')) {\r\n                  certificate.changeReasonACME(certificate.reasonC.diagnosis.ICD10)\r\n                  layoutStore.message = { severity: 'success', summary: 'Успешно', detail: `${certificate.reasonC.diagnosis.ICD10}-первопричина определенная АСМЕ`, life: 3000 }\r\n              } else                 \r\n              doACME(certificate, result=>{\r\n                certificate.changeReasonACME(result)\r\n                layoutStore.message = { severity: 'success', summary: 'Успешно', detail: `${result}-первопричина определенная АСМЕ`, life: 3000 }           \r\n              },message=>{\r\n                layoutStore.message = { severity: 'error', summary: 'Сбой', detail: message, life: 7000 }\r\n              })\r\n            } else {\r\n              layoutStore.message = { severity: 'warn', summary: 'Oтклонено', detail: \"Причина а) отсутствует\", life: 7000 }\r\n            }\r\n          }}\r\n        />\r\n         <div className=\"p-field  p-grid\">       \r\n          <label htmlFor=\"ACME\" \r\n                 className=\"p-col-fixed\" \r\n                 style={{width:'226px'}}>Первоначальная причина по АСМЕ</label>   \r\n          <div className='p-col-12 p-md-2'>                  \r\n            <InputText id=\"ACME\" type=\"text\" \r\n              disabled value={certificate.reasonACME?.diagnosis?.ICD10 || ''}  \r\n            />\r\n          </div>\r\n         </div>            \r\n      </div>        \r\n    </Card>  \r\n  </>)\r\n  }\r\n  export default observer(Section7) ","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useEffect, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport '../../styles/components/Calendar.css'\r\nimport { DeathReason } from '../../models/FormsData/DeathReason'\r\nimport { IDeathReason } from '../../models/responses/IDeathReason'\r\nimport Reason from '../inputs/Reason'\r\nimport { Button } from 'primereact/button'\r\nimport { IMedicalServs } from '../../models/responses/IMedservs'\r\nimport DiagnosisService from '../../services/DiagnosisService'\r\nimport { AutoComplete } from 'primereact/autocomplete'\r\nimport { Procedure } from '../../models/FormsData/Procedure'\r\nimport { IProcedure } from '../../models/responses/IProcedure'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { Checkbox } from 'primereact/checkbox'\r\nimport { DataTable } from 'primereact/datatable'\r\nimport { Column } from 'primereact/column'\r\nimport { EXT_REASON_SUG, EXT_REASON_TIME_SUG } from '../../utils/defaults'\r\nimport { InputText } from 'primereact/inputtext'\r\n\r\n\r\n\r\n const Section8: FC = () => {\r\n  const { certificateStore, temporaryIDStore, suggestionsStore } = useContext(Context) \r\n  const checkReason = suggestionsStore.suggestions[EXT_REASON_SUG].done && suggestionsStore.suggestions[EXT_REASON_TIME_SUG].done\r\n  \r\n  \r\n  const certificate = certificateStore.cert   \r\n  const [newReason, setNewReason] = useState(new DeathReason({id: temporaryIDStore.lastDeathReasonID} as IDeathReason))\r\n  const [medicalServs, setMedicalServs] = useState<IMedicalServs[]>([]) \r\n  const [medservText, setMedservText] = useState('')  \r\n  const [medservCode, setMedservCode] = useState('')\r\n  const [procedure, setProcedure] = useState<Procedure | null>(null)  \r\n  const [dateETChecked, setDateETChecked] = useState(false)\r\n  const [diagnosChecked, setDiagnosChecked] = useState(true)\r\n  const [selectedProcedures, setSelectedProcedures] = useState<Procedure[]>([])\r\n  const [selectedReasons, setSelectedReasons] = useState<DeathReason[]>([])\r\n  useEffect(()=>{\r\n    suggestionsStore.suggestions[EXT_REASON_SUG].done = !(newReason.diagnosis === undefined && (newReason.nullFlavors.length===0 || newReason.nullFlavors.findIndex((item)=>item.parent_attr==='diagnosis')===-1))\r\n    suggestionsStore.suggestions[EXT_REASON_TIME_SUG].done = !(newReason.effectiveTime === undefined && newReason.nullFlavors.findIndex((item)=>item.parent_attr==='effective_time')===-1)\r\n  },[newReason.diagnosis, newReason.effectiveTime, suggestionsStore.suggestions, newReason.nullFlavors]) \r\n  const header = () => {\r\n      return <><span><span className='paragraph p-mr-1'>22(II).</span>Прочие состояния.</span> \r\n      <Button icon=\"pi pi-plus\" className=\"p-ml-auto p-mr-2 p-button-sm p-button-raised p-button-success\" label=\"Добавить состояние\" \r\n        disabled={!checkReason || (!newReason.diagnosis && newReason.procedures.length===0) || procedure!==null }\r\n        onClick={()=>{\r\n          if (!certificate.deathReasons.includes(newReason)) certificate.deathReasons.push(newReason)\r\n          setNewReason(new DeathReason({id: temporaryIDStore.lastDeathReasonID} as IDeathReason))                \r\n        }}\r\n      />\r\n      <Button icon=\"pi pi-minus\" className=\"p-button-sm p-button-raised p-button-danger\"  \r\n        title=\"Удалить состояние\" disabled={selectedReasons.length===0} \r\n        onClick={()=>{\r\n          let _reasons = certificate.deathReasons?.filter(val => !selectedReasons.includes(val));\r\n          certificate.deathReasons = _reasons\r\n          setSelectedReasons([])\r\n        }} />\r\n      </>\r\n    }\r\n    \r\n  const  getMedservs = (event: { query: string })=>{\r\n  const option = {} as any\r\n  if (event.query.trim().length>0) option.name_cont = event.query.trim()\r\n  if (medservCode.trim().length>0) option.s_code_start =  medservCode    \r\n  DiagnosisService.fetchMedicalServs(option).then(response=>{\r\n        if (response.data.length>0) setMedicalServs(response.data)\r\n        else setMedicalServs([])        \r\n      }).catch((reason)=>console.log(reason))    \r\n  }\r\n  const  getCodes = (event: { query: string })=>{    \r\n    if (event.query.trim().length>0) {\r\n      DiagnosisService.fetchMedicalServs({'s_code_start': event.query.trim()}).then(response=>{        \r\n        if (response.data.length>0) setMedicalServs(response.data)\r\n        else setMedicalServs([])        \r\n      }).catch((reason)=>console.log(reason))       \r\n    } \r\n  }\r\n\r\n  const setMedServValue = (e:any)=>{\r\n    if (procedure) procedure.medicalServ = e.value\r\n    else  setProcedure(new Procedure({id: temporaryIDStore.lastProcedureID, medical_serv: e.value} as IProcedure))    \r\n    setMedservText(e.value.name)\r\n    setMedservCode(e.value.s_code)              \r\n  } \r\n  const medServOptionTemplate = (option: IMedicalServs) => {\r\n        return (\r\n          <span>\r\n            <span style={{marginRight:'4px'}}>{option.s_code}</span>\r\n            <span>{option.name}</span>\r\n          </span>\r\n        )\r\n    }\r\n\r\n  const mainCSSClass = (isACME: boolean) => isACME  ? \"p-fluid p-d-flex p-jc-start ACME-reason\" : \"p-fluid p-d-flex p-jc-start\"\r\n  \r\n  const procTimeBodyTemplate = (rowData: Procedure) => {\r\n    return rowData.timeStr()\r\n  }\r\n  const reasonTimeBodyTemplate = (rowData: DeathReason) => {\r\n    let _resultStr = ''\r\n    if (rowData.effectiveTime === undefined) return _resultStr\r\n    if (rowData.years && rowData.years > 0) _resultStr += `лет:${rowData.years} `\r\n    if (rowData.months && rowData.months > 0) _resultStr += `мес: ${rowData.months}`\r\n    if (rowData.weeks && rowData.weeks > 0) _resultStr += `нед: ${rowData.weeks}`\r\n    if (rowData.days && rowData.days > 0) _resultStr += `дн: ${rowData.days}`\r\n    if (rowData.hours && rowData.hours > 0) _resultStr += `час: ${rowData.hours}`\r\n    if (rowData.minutes && rowData.minutes > 0) _resultStr += `мин: ${rowData.minutes}`\r\n    return _resultStr\r\n  }\r\n  \r\n  const reasonTextBodyTemplate = (rowData: DeathReason) => {\r\n    let _resultStr = ''\r\n    if (rowData.diagnosis) _resultStr = rowData.diagnosis.s_name+';'\r\n    if (rowData.procedures.length>0) _resultStr += rowData.procNames()\r\n    return _resultStr\r\n  }  \r\n  return (<>    \r\n    <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>\r\n      <div className={mainCSSClass(false)}\r\n       style={{width: '98%'}} key={`ra_${newReason.id}_${diagnosChecked}`}>      \r\n        <div className='paragraph p-mr-1'>*)</div>\r\n        <Reason label=\"способствовавшие смерти, но не связанные с болезнью или патологическим состоянием, приведшим к ней\" \r\n          deathReason={newReason} certificate={certificate}\r\n          key={`ra2_${newReason.effectiveTime}`}           \r\n          onChange={(reason: DeathReason | undefined)=>{  \r\n            if (reason) {              \r\n              if (reason!==newReason) {\r\n                if (!reason.id) reason.id = temporaryIDStore.lastDeathReasonID\r\n                setNewReason(reason)\r\n              }  \r\n            }           \r\n          }}\r\n          onDiagnosisChecked={(checked)=>setDiagnosChecked(checked)}\r\n          checked={diagnosChecked}                                   \r\n        />                   \r\n      </div>\r\n      <div className='p-fluid p-formgrid p-grid p-add-block' style={{marginLeft:'1rem'}}>   \r\n          <div className='p-field p-col-12 p-md-9'>             \r\n            <AutoComplete id=\"procedure_text\" placeholder=\"Наименование хирургической операции\"\r\n              suggestions={medicalServs} delay={1000} dropdown \r\n              completeMethod={getMedservs} itemTemplate={medServOptionTemplate}\r\n              field=\"name\" onChange={(e) =>{ \r\n                if (e.value.s_code) setMedServValue(e)\r\n                else setMedservText(e.value)\r\n              }}\r\n              value={medservText}/>          \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-3\">\r\n            <AutoComplete id=\"procedure_code\" placeholder=\"Код\"\r\n              suggestions={medicalServs} delay={1000} field=\"s_code\"\r\n              itemTemplate={medServOptionTemplate}\r\n              completeMethod={getCodes} onChange={(e) =>{ \r\n                 if (e.value.s_code) setMedServValue(e)\r\n                 else setMedservCode(e.value)               \r\n              }}\r\n              value={medservCode}/>          \r\n          </div>  \r\n          <div className=\"p-field p-col-12\">\r\n            <InputText id=\"procedure_alterText\" disabled={!procedure}\r\n            placeholder=\"Свое наименование, если оно отличается от официального\"\r\n               onChange={e =>{ \r\n                if (procedure) procedure.textValue = e.target.value               \r\n              }}\r\n              value={procedure?.textValue || ''}/>          \r\n          </div>       \r\n          <div className=\"p-field p-col-12  p-d-flex p-ai-center\">                          \r\n            <Calendar id=\"effectiveDate\" key={`effectiveDate${dateETChecked}`} className=\"p-mr-3\" inputStyle={{width:'12.5rem'}} \r\n              showTime={!dateETChecked} dateFormat=\"dd.mm.yy\" locale=\"ru\"\r\n              mask={dateETChecked ? '99.99.9999' : '99.99.9999 99:99'} panelStyle={{margin:'10rem'}}                           \r\n              value={procedure?.effectiveTime} \r\n              onChange={(e)=>{ \r\n                if (procedure===null) return \r\n                if (e.target.value) {                  \r\n                  procedure.effectiveTime = e.target.value as Date\r\n                } else procedure.effectiveTime =  undefined               \r\n               }}\r\n              showIcon \r\n            />            \r\n            <div className=\"p-field-checkbox\">              \r\n              <Checkbox checked={dateETChecked} \r\n                inputId=\"et_date\" \r\n                onChange={e=>{setDateETChecked(e.checked)}}\r\n              />\r\n              <label htmlFor=\"et_date\">Только дата</label>\r\n            </div>                       \r\n            <Button icon=\"pi pi-plus\" className=\"p-ml-auto p-mr-2 p-button-sm p-button-raised p-button-success\"  title=\"Добавить хир.операцию\" disabled={procedure===null || (procedure.medicalServ===undefined && procedure.textValue === undefined)} onClick={()=>{\r\n              if (procedure) { \r\n                if (newReason.procedures.findIndex(pr=>pr.guid === procedure.guid)===-1) newReason.procedures.push(procedure)\r\n                setProcedure(null) \r\n                setMedservCode('')\r\n                setMedservText('')               \r\n              }  \r\n            }} />   \r\n            <Button icon=\"pi pi-minus\" className=\"p-button-sm p-button-raised p-button-danger\"  title=\"Удалить  хир.операцию\" disabled={selectedProcedures.length===0} onClick={()=>{\r\n              let _procedures = newReason.procedures.filter(val => !selectedProcedures.includes(val));\r\n              newReason.procedures = _procedures\r\n              setSelectedProcedures([])\r\n            }} />                    \r\n          </div>\r\n          <div className=\"p-field p-col-12\">\r\n            <DataTable value={newReason.procedures} selection={selectedProcedures}\r\n              responsiveLayout=\"scroll\" dataKey={\"id\"}\r\n              className=\"p-datatable-sm\" emptyMessage=\"Операции отсутствуют\" style={{width:'100%'}} \r\n              onSelectionChange={e =>{\r\n                setSelectedProcedures(e.value)                \r\n                if (e.value && e.value.length>0) {\r\n                  const pr = e.value[0] as Procedure\r\n                  setProcedure(pr)\r\n                  setDateETChecked(pr.effectiveTime?.getHours() === 0 && pr.effectiveTime.getMinutes()=== 0)\r\n                  setMedservCode(pr.medicalServ.s_code)\r\n                  setMedservText(pr.medicalServ.name)\r\n                } else {\r\n                  setProcedure(null) \r\n                  setMedservCode('')\r\n                  setMedservText('') \r\n                }\r\n              }}  >\r\n              <Column selectionMode=\"multiple\" headerStyle={{width: '3em'}}></Column>\r\n              <Column field=\"medicalServ.name\" header=\"Наименование\"></Column>\r\n              <Column header=\"Время\" body={procTimeBodyTemplate}></Column>                            \r\n            </DataTable>\r\n          </div>  \r\n        </div> \r\n        <DataTable value={certificate.deathReasons} style={{marginTop:'8px', marginLeft:'10px'}} \r\n          className=\"p-datatable-sm\" emptyMessage=\"Состояния отсутствуют\" selection={selectedReasons}  \r\n          responsiveLayout=\"scroll\" dataKey={\"id\"} onSelectionChange={e=>{            \r\n            setSelectedReasons(e.value)            \r\n            if (e.value && e.value.length>0) setNewReason(e.value[0])\r\n            else {\r\n              setNewReason(new DeathReason({id: temporaryIDStore.lastDeathReasonID} as IDeathReason)) \r\n            }\r\n          }}>\r\n          <Column selectionMode=\"multiple\" headerStyle={{width: '3em'}}></Column>\r\n          <Column header=\"Состояние\" body={reasonTextBodyTemplate}></Column>\r\n          <Column header=\"Период времени\" body={reasonTimeBodyTemplate}></Column>\r\n          <Column field=\"diagnosis.ICD10\" header=\"Kод МКБ10\"></Column>              \r\n        </DataTable>            \r\n    </Card>  \r\n  </>)\r\n  }\r\n  export default observer(Section8) ","//Связь смерти с ДТП\r\n//OID: 1.2.643.5.1.13.13.99.2.24  Версия: 1.1\r\nexport const TRAFFIC_ACCIDENT = [\r\n  { code: 1, name: \"в течение 30 суток\" },\r\n  { code: 2, name: \"из них в течение 7 суток\" },\r\n]\r\n","//Связь смерти с беременностью\r\n//OID: 1.2.643.5.1.13.13.99.2.25  Версия: 1.2\r\nexport const PREGNANCY_CONNECTION = [\r\n  { code: 1, name: \"смерть беременной (независимо от срока и локализации)\" },\r\n  { code: 2, name: \"в процессе родов\" },\r\n  { code: 3, name: \"в течение 42 дней после окончания беременности\" },\r\n  { code: 4, name: \"в течение 43-365 дней после окончания беременности\" },\r\n]\r\n","const SEC_IN_WEEK = 604800\r\nconst SEC_IN_DAY = 86400\r\nexport interface ITimeDiff {\r\n  years: number | undefined\r\n  months: number | undefined\r\n  weeks: number | undefined\r\n  days: number | undefined\r\n  hours: number | undefined\r\n  minutes: number | undefined\r\n}\r\nexport const timeDiff = (d1: Date, d2: Date) => {\r\n  if (d2 < d1) throw Error(\"invalid dates d1 > d2\")\r\n  let latest = d2\r\n  let yearDiff = d2.getFullYear() - d1.getFullYear()\r\n  const years = yearDiff > 0 ? yearDiff : undefined\r\n  if (years) {\r\n    latest = new Date(d1.getFullYear(), latest.getMonth(), latest.getDate(), latest.getHours(), latest.getMinutes())\r\n    if (d1 > latest)\r\n      latest = new Date(\r\n        d1.getFullYear() + 1,\r\n        latest.getMonth(),\r\n        latest.getDate(),\r\n        latest.getHours(),\r\n        latest.getMinutes()\r\n      )\r\n  }\r\n\r\n  const months =\r\n    latest.getMonth() < d1.getMonth() ? 12 + latest.getMonth() - d1.getMonth() : latest.getMonth() - d1.getMonth()\r\n  if (months > 0) {\r\n    latest = new Date(d1.getFullYear(), d1.getMonth(), latest.getDate(), latest.getHours(), latest.getMinutes())\r\n    if (d1 > latest) {\r\n      if (d1.getMonth() === 12) {\r\n        latest = new Date(d1.getFullYear() + 1, 1, latest.getDate(), latest.getHours(), latest.getMinutes())\r\n      } else\r\n        latest = new Date(d1.getFullYear(), d1.getMonth() + 1, latest.getDate(), latest.getHours(), latest.getMinutes())\r\n    }\r\n  }\r\n  let diff = (latest.getTime() - d1.getTime()) / 1000\r\n  diff = Math.floor(diff)\r\n  const weeks = Math.floor(diff / SEC_IN_WEEK)\r\n  diff = diff - weeks * SEC_IN_WEEK\r\n  const days = Math.floor(diff / SEC_IN_DAY)\r\n  diff = diff - days * SEC_IN_DAY\r\n  const hours = Math.floor(diff / 3600)\r\n  diff = diff - hours * 3600\r\n  const minutes = Math.floor(diff / 60)\r\n  return {\r\n    years,\r\n    months,\r\n    weeks,\r\n    days,\r\n    hours,\r\n    minutes,\r\n  } as ITimeDiff\r\n}\r\n// for API request params objects\r\n// to remove the indefined items from nested objects as well, using a recursive\r\n// используем рекурсивную функцию очистки объектов от undefined свойств\r\nexport const removeEmpty = (obj: any) => {\r\n  let candidat = obj as Object\r\n  if (Array.prototype.isPrototypeOf(candidat)) {\r\n    return obj\r\n  }\r\n  let newObj = {} as any\r\n  Object.keys(obj).forEach((key) => {\r\n    if (obj[key] === Object(obj[key])) newObj[key] = removeEmpty(obj[key])\r\n    else if (obj[key] !== undefined) newObj[key] = obj[key]\r\n  })\r\n  return newObj\r\n}\r\n","import { removeEmpty } from \"../../utils/functions\"\r\nimport { IAudit } from \"../IAudit\"\r\nimport { IDoctor } from \"../IDoctor\"\r\nimport Doctor from \"./Doctor\"\r\n\r\n//генерит API запрос на добавление врача\r\nexport const genCreateDoctorRequest = (doctor: IDoctor) => {\r\n  let _doctor = {\r\n    id: doctor.id,\r\n    guid: doctor.guid,\r\n    position_id: doctor.position?.id,\r\n    organization_id: doctor.organization?.id,\r\n    person_attributes: {\r\n      id: doctor.person?.id,\r\n      person_name_attributes: { ...doctor.person?.person_name },\r\n      SNILS: doctor.person?.SNILS,\r\n      address_attributes: doctor.person?.address ? { ...doctor.person?.address } : undefined,\r\n      contacts_attributes:\r\n        doctor.person?.contacts && doctor.person?.contacts?.length > 0\r\n          ? doctor.person?.contacts.map((item) => item)\r\n          : undefined,\r\n    },\r\n    null_flavor_attributes:\r\n      doctor.null_flavors && doctor.null_flavors?.length > 0 ? doctor.null_flavors.map((item) => item) : undefined,\r\n  }\r\n  _doctor = removeEmpty(_doctor)\r\n  return _doctor\r\n}\r\n\r\n//Стандартные настройки JSON рендеринга модели врача\r\nexport const DOCTOR_RENDER_OPTIONS = {\r\n  render_options: { only: [\"id\", \"guid\"], include: [\"position\", \"person\", \"organization\"] },\r\n  includes: [\"position\", \"person\", \"organization\"],\r\n  organization: { only: [\"id\", \"name\"] },\r\n  position: { only: [\"id\", \"name\"] },\r\n  person: { only: [\"id\", \"SNILS\"], include: [\"person_name\", \"address\", \"contacts\"] },\r\n}\r\n\r\n//генерит API запрос на обновление врача\r\nexport const genUpdateDoctorRequest = (oldValue: IDoctor, newValue: Doctor) => {\r\n  if (oldValue.id !== newValue.id) return false\r\n  let _request = { Doctor: {}, audits: [] as IAudit[] } as any\r\n  const createAudit = (audit: IAudit) => {\r\n    let _audits = _request.audits.filter((item: IAudit) => item.field !== audit.field)\r\n    if (_audits) {\r\n      _audits.push(audit)\r\n      _request.audits = _audits\r\n    } else _request.audits.push(audit) // keep only uniq changes\r\n  }\r\n  if (oldValue.position?.id !== newValue.position?.id) {\r\n    _request.Doctor.position_id = newValue.position?.id\r\n    createAudit({\r\n      field: \"position\",\r\n      before: oldValue.position?.id + \"\",\r\n      after: newValue.position?.id + \"\",\r\n      detail: `должность: ${oldValue.position?.name} -> ${newValue.position?.name}`,\r\n    } as IAudit)\r\n  }\r\n  let _person_attributes = {} as any\r\n  const oldPerson = oldValue.person\r\n  const newPerson = newValue.person\r\n  if (oldPerson?.SNILS !== newPerson?.SNILS) {\r\n    _person_attributes.SNILS = newPerson?.SNILS\r\n    createAudit({\r\n      field: \"person.SNILS\",\r\n      before: oldPerson?.SNILS,\r\n      after: newPerson?.SNILS,\r\n      detail: `СНИЛС: ${oldPerson?.SNILS} -> ${newPerson?.SNILS}`,\r\n    } as IAudit)\r\n  }\r\n  let _person_name_attributes = {} as any\r\n  const oldFIO = oldPerson?.person_name\r\n  const newFIO = newValue.person?.fio\r\n  if (!!oldFIO && !!newFIO) {\r\n    if (oldFIO.family !== newFIO.family) {\r\n      _person_name_attributes.family = newFIO.family\r\n      createAudit({\r\n        field: \"person.person_name.family\",\r\n        before: oldFIO.family,\r\n        after: newFIO.family,\r\n        detail: `фамилия: ${oldFIO.family} -> ${newFIO.family}`,\r\n      } as IAudit)\r\n    }\r\n    if (oldFIO.given_1 !== newFIO.given_1) {\r\n      _person_name_attributes.given_1 = newFIO.given_1\r\n      createAudit({\r\n        field: \"person.person_name.given_1\",\r\n        before: oldFIO.given_1,\r\n        after: newFIO.given_1,\r\n        detail: `имя: ${oldFIO.given_1} -> ${newFIO.given_1}`,\r\n      } as IAudit)\r\n    }\r\n    if (oldFIO.given_2 !== newFIO.given_2) {\r\n      _person_name_attributes.given_2 = newFIO.given_2\r\n      createAudit({\r\n        field: \"person.person_name.given_2\",\r\n        before: oldFIO.given_2,\r\n        after: newFIO.given_2,\r\n        detail: `Отчество: ${oldFIO.given_2} -> ${newFIO.given_2}`,\r\n      } as IAudit)\r\n    }\r\n  }\r\n  if (Object.keys(_person_name_attributes).length > 0)\r\n    if (newValue.person.fio)\r\n      _person_attributes.person_name_attributes = { id: newValue.person.fio.id, ..._person_name_attributes }\r\n  const oldAddress = oldPerson.address?.streetAddressLine\r\n  const newAddress = newPerson.address?.streetAddressLine\r\n  if (oldAddress !== newAddress) {\r\n    _person_attributes.address_attributes = newPerson.address\r\n    createAudit({\r\n      field: \"person.address\",\r\n      before: oldAddress,\r\n      after: newAddress,\r\n      detail: `адрес: ${oldAddress} -> ${newAddress}`,\r\n    } as IAudit)\r\n  }\r\n  const oldContacts = oldPerson.contacts?.reduce<string>((u, item) => `${u} ${item.telcom_value}`, \"\").trim()\r\n  const newContacts = newPerson.contacts?.reduce<string>((u, item) => `${u} ${item.telcom_value}`, \"\").trim()\r\n  if (oldContacts !== newContacts) {\r\n    _person_attributes.contacts_attributes = newPerson.contacts\r\n    createAudit({\r\n      field: \"person.contacts\",\r\n      before: oldContacts,\r\n      after: newContacts,\r\n      detail: `контакты: ${oldContacts} -> ${newContacts}`,\r\n    } as IAudit)\r\n  }\r\n  const oldNullFlavors = oldPerson.null_flavors\r\n    ?.reduce<string>((u, item) => `${u} ${item.parent_attr}${item.code}`, \"\")\r\n    .trim()\r\n  const newNullFlavors = newPerson.nullFlavors\r\n    ?.reduce<string>((u, item) => `${u} ${item.parent_attr}${item.code}`, \"\")\r\n    .trim()\r\n  if (oldNullFlavors !== newNullFlavors) {\r\n    _person_attributes.null_flavor_attributes = newPerson.null_flavors_attributes()\r\n    createAudit({\r\n      field: \"person.nullFlavors\",\r\n      before: oldNullFlavors,\r\n      after: newNullFlavors,\r\n      detail: `изменены причины отсутствия информации`,\r\n    } as IAudit)\r\n  }\r\n\r\n  if (Object.keys(_person_attributes).length > 0)\r\n    _request.Doctor.person_attributes = { id: oldPerson.id, ..._person_attributes }\r\n  if (Object.keys(_request.Doctor).length > 0) {\r\n    _request.Doctor.id = newValue.id\r\n    return _request\r\n  } else return false\r\n}\r\n","//All interactions with the API for working with the doctors model\r\n//Все взаимодействия с API для работы с моделью  врачей\r\n\r\nimport { AxiosResponse } from \"axios\"\r\nimport $api, { API_URL } from \"../http\"\r\nimport { IDoctor } from \"../models/IDoctor\"\r\nimport { IReferenceId } from \"../models/IReference\"\r\nimport { DOCTOR_RENDER_OPTIONS } from \"../models/FormsData/DoctorRequest\"\r\nimport { IDoctorR } from \"../models/requests/IDoctorR\"\r\n\r\nexport default class DoctorService {\r\n  //POST request for get doctor's list\r\n  static async getDoctors(query: any): Promise<AxiosResponse<IDoctor[]>> {\r\n    return $api.post(`${API_URL}model/Doctor/`, { ...query, offset: 0, limit: 100, ...DOCTOR_RENDER_OPTIONS })\r\n  }\r\n  //POST request for get list of pasible values for Doctor.position field\r\n  static async getPositions(query: any): Promise<AxiosResponse<IReferenceId[]>> {\r\n    return $api.post(`${API_URL}model/Position/`, { q: query, offset: 0, limit: 200 })\r\n  }\r\n  //POST request for add Doctor /REST_API/v1/model/Doctor/add\r\n  static async addDoctor(doctor: IDoctorR): Promise<AxiosResponse<IDoctor>> {\r\n    return $api.post(`${API_URL}model/Doctor/add`, {\r\n      Doctor: doctor,\r\n      ...DOCTOR_RENDER_OPTIONS,\r\n    })\r\n  }\r\n\r\n  //PUT request for update Doctor /REST_API/v1/model/Doctor/:id\r\n  static async updateDoctor(request: any): Promise<AxiosResponse<IDoctor>> {\r\n    return $api.put(`${API_URL}model/Doctor/${request.Doctor.id}`, {\r\n      ...request,\r\n      ...DOCTOR_RENDER_OPTIONS,\r\n    })\r\n  }\r\n  // DELETE request for remove Doctor /REST_API/v1/model/Doctor/:id\r\n  static async removeDoctor(doctor_id: number): Promise<AxiosResponse<IDoctor>> {\r\n    return $api.delete(`${API_URL}model/Doctor/${doctor_id}`)\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IAuthenticatorR } from \"../requests/IAuthenticatorR\"\r\nimport { IAuthenticator } from \"../responses/IAuthenticator\"\r\n\r\nexport default class Authenticator implements ISerializable {\r\n  private _id?: number | undefined\r\n  private _time?: Date | undefined\r\n  private _doctorID?: number | undefined\r\n  constructor(props: IAuthenticator) {\r\n    this._id = props.id\r\n    this._doctorID = props.doctor.id\r\n    if (props.time) this._time = new Date(props.time)\r\n    else this._time = new Date()\r\n    makeAutoObservable(this)\r\n  }\r\n  get time(): Date | undefined {\r\n    return this._time\r\n  }\r\n  set time(value: Date | undefined) {\r\n    this._time = value\r\n  }\r\n  get doctorID(): number | undefined {\r\n    return this._doctorID\r\n  }\r\n  set doctorID(value: number | undefined) {\r\n    this._doctorID = value\r\n  }\r\n  get id(): number | undefined {\r\n    return this._id\r\n  }\r\n\r\n  getAttributes(): IAuthenticatorR {\r\n    let _authenticator = { time: this._time } as IAuthenticatorR\r\n    if (this._id) _authenticator.id = this._id\r\n    if (this._doctorID) _authenticator.doctor_id = this._doctorID\r\n    return _authenticator\r\n  }\r\n}\r\n","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useEffect, useState} from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { NA, NULL_FLAVORS } from '../../utils/defaults'\r\nimport { IReference, IReferenceId } from '../../models/IReference'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { INullFlavorR } from '../../models/INullFlavor'\r\nimport { TRAFFIC_ACCIDENT } from '../../NSI/1.2.643.5.1.13.13.99.2.24'\r\nimport { PREGNANCY_CONNECTION } from '../../NSI/1.2.643.5.1.13.13.99.2.25'\r\nimport DoctorService from '../../services/DoctorService'\r\nimport Authenticator from '../../models/FormsData/Authenticator'\r\nimport { IAuthenticator } from '../../models/responses/IAuthenticator'\r\n\r\n const Section9: FC = () => {\r\n  const { userStore, certificateStore, layoutStore } = useContext(Context)\r\n   const certificate = certificateStore.cert \r\n  const [doctors, setDoctors] = useState<IReferenceId[] | null>(null)  \r\n  useEffect(()=>{\r\n    if (doctors===null && userStore.userInfo) {\r\n      //layoutStore.isLoading = true\r\n      DoctorService.getDoctors({       \r\n        q:{organization_id_eq: userStore.userInfo.organization.id}        \r\n      }).then(response=>{\r\n        const data = response.data.map(doctor=>{\r\n          if (!doctor.person || !doctor.person.person_name) return {id: doctor.id, name: doctor.position?.name } as IReferenceId\r\n          return {id: doctor.id, name: `${doctor.person.person_name.family} ${doctor.person.person_name.given_1} ${doctor.person.person_name.given_2} ${doctor.position?.name}`} as IReferenceId})\r\n        if (data) setDoctors(data)\r\n      }).catch((err)=>console.log('ошибка загрузки списка врачей'))//.finally(()=>layoutStore.isLoading=false)\r\n    }\r\n  },[doctors, layoutStore, userStore.userInfo])\r\n   \r\n  const optionCode = 'NA'\r\n  const options = NULL_FLAVORS.filter((item:IReference)=>optionCode.includes(item.code))  \r\n  \r\n  const header = () => {\r\n      return <span>Прочие характеристики причины смерти</span>\r\n    }\r\n  \r\n  const isTrafficAccident = !!certificate.trafficAccident || certificate.nullFlavors.findIndex((item)=>item.parent_attr==='traffic_accident')===-1\r\n  const isPregnancyConnection = !!certificate.pregnancyConnection || certificate.nullFlavors.findIndex((item)=>item.parent_attr==='pregnancy_connection')===-1  \r\n  const nullFlavorDropdnStyle = {minWidth:'210px', maxWidth:'500px', marginTop: '0.5rem', marginLeft: '-0.75rem'}\r\n  const customDropdnStyle = {minWidth:'210px', maxWidth:'500px', marginTop: '0.5rem', marginLeft: '-1.25rem'}\r\n  const customParagraphFieldStyle = {paddingTop: '0.1rem', width: '80%'} \r\n     \r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>23.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{width: '90%'}}>                                  \r\n                <NullFlavorWrapper paraNum  checked={isTrafficAccident}                                      \r\n                  label={<label htmlFor=\"trafficAccident\">В случае смерти в результате ДТП: смерть наступила –</label>}\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) certificate.trafficAccident = undefined                        \r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                    }} \r\n                  field={\r\n                    <Dropdown inputId=\"trafficAccident\" style={nullFlavorDropdnStyle} placeholder=\"Выбрать\"  \r\n                      options={TRAFFIC_ACCIDENT} optionLabel=\"name\" \r\n                      value={TRAFFIC_ACCIDENT.find((item)=> item.code === certificate.trafficAccident)} \r\n                      onChange={(e) =>certificate.trafficAccident =  e.value.code}                       \r\n                    />             \r\n                  }\r\n                  options={options} \r\n                  value={NA} \r\n                  nullFlavors={certificate.nullFlavors}  \r\n                  field_name=\"traffic_accident\"\r\n                />                               \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>24.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\"  \r\n              style={{width: '90%'}}>                                  \r\n                <NullFlavorWrapper paraNum  checked={isPregnancyConnection}                                      \r\n                  label={<label htmlFor=\"pregnancyConnection\"> В случае смерти беременной (независимо от срока и локализации) </label>}\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) {                        \r\n                        certificate.pregnancyConnection = undefined                        \r\n                      } \r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                    }} \r\n                  onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{\r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n                  field={\r\n                    <Dropdown inputId=\"pregnancyConnection\" style={nullFlavorDropdnStyle} placeholder=\"Выбрать\"  \r\n                      options={PREGNANCY_CONNECTION} optionLabel=\"name\" \r\n                      value={PREGNANCY_CONNECTION.find((item)=> item.code === certificate.pregnancyConnection)} \r\n                      onChange={(e) =>{\r\n                        certificate.pregnancyConnection = e.value.code}\r\n                      } \r\n                    />             \r\n                  }\r\n                  options={options} \r\n                  value={NA} \r\n                  nullFlavors={certificate.nullFlavors}  \r\n                  field_name=\"pregnancy_connection\"\r\n                />                               \r\n              </div>              \r\n            </div> \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%', paddingLeft:'0.5rem',fontWeight:600, fontSize: 'larger'}} >\r\n              Подписи \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}}>\r\n              <div className='paragraph p-mr-1'>25. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={customParagraphFieldStyle}>\r\n                <label htmlFor=\"author\">Врач (фельдшер, акушерка), заполнивший Медицинское свидетельство о смерти *</label>\r\n                <Dropdown inputId=\"author\"  placeholder=\"Выбрать\" style={customDropdnStyle}                   \r\n                  optionLabel=\"name\" autoFocus className=\"p-mb-2\"  options={doctors || []} \r\n                  value={doctors?.find(item=>item.id === certificate.author?.doctorID)} showClear             \r\n                  onChange={(e) =>{\r\n                    if (e.value) { \r\n                      certificate.author = new Authenticator({doctor: e.value} as IAuthenticator)                     \r\n                    } else certificate.author = undefined                       \r\n                  }} />\r\n                <label htmlFor=\"legalAuthenticator\">Руководитель медицинской организации *</label>\r\n                <Dropdown inputId=\"legalAuthenticator\"  placeholder=\"Выбрать\" style={customDropdnStyle} \r\n                  optionLabel=\"name\" options={doctors || []} showClear\r\n                  value={doctors?.find(item=>item.id === certificate.legalAuthenticator?.doctorID)}                \r\n                  onChange={(e) =>{\r\n                    if (e.value) { \r\n                      certificate.legalAuthenticator =  new Authenticator({doctor: e.value} as IAuthenticator)                     \r\n                    } else certificate.legalAuthenticator = undefined                   \r\n                  }} />  \r\n              </div>               \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}}>\r\n              <div className='paragraph p-mr-1'>26. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={customParagraphFieldStyle}>\r\n                <label htmlFor=\"authenticator\">Свидетельство проверено ответственным *</label>\r\n                <Dropdown inputId=\"authenticator\" placeholder=\"Выбрать\" style={customDropdnStyle} \r\n                  optionLabel=\"name\"  options={doctors || []} showClear\r\n                  value={doctors?.find(item=>item.id===certificate.authenticator?.doctorID)}                \r\n                  onChange={e=>{\r\n                    if (e.value) {\r\n                      certificate.authenticator =  new Authenticator({doctor: e.value} as IAuthenticator)                      \r\n                    } else certificate.authenticator = undefined\r\n                  }} \r\n                />\r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%', paddingLeft:'0.5rem'}} >\r\n              <em>* Заполнить в день фактического подписания бумажного носителя</em>\r\n            </div>     \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section9) ","import { makeAutoObservable } from \"mobx\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IParticipantR } from \"../requests/IParticipintR\"\r\nimport { IParticipant } from \"../responses/IParticipant\"\r\nimport Identity from \"./Identity\"\r\nimport Person from \"./Person\"\r\n\r\nexport default class Participant implements ISerializable {\r\n  private _id?: number | undefined\r\n  private _person: Person\r\n  private _receiptDate: Date\r\n  private _description?: string | undefined\r\n  private _identity?: Identity | undefined\r\n  private _original: boolean\r\n  private _oldOne?: IParticipant | undefined\r\n\r\n  constructor(props = {} as IParticipant) {\r\n    this._oldOne = { ...props }\r\n    if (props.person) this._person = new Person(props.person)\r\n    else this._person = new Person()\r\n    if (props.receipt_date) this._receiptDate = new Date(props.receipt_date)\r\n    else this._receiptDate = new Date()\r\n    if (props.identity) this._identity = new Identity(props.identity)\r\n    this._id = props.id\r\n    this._description = props.description\r\n    this._original = props.original === undefined ? true : props.original\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes() {\r\n    const _pr = {} as IParticipantR\r\n    if (this._id) _pr.id = this._id\r\n    _pr.description = this._description\r\n    _pr.original = this._original\r\n    _pr.receipt_date = this._receiptDate?.toDateString()\r\n    if (this._person) _pr.person_attributes = this._person.getAttributes()\r\n    if (this._identity) _pr.identity_attributes = this._identity.getAttributes()\r\n    return _pr\r\n  }\r\n  get oldOne(): IParticipant | undefined {\r\n    return this._oldOne\r\n  }\r\n  get original(): boolean {\r\n    return this._original\r\n  }\r\n  set original(value: boolean) {\r\n    this._original = value\r\n  }\r\n  get identity(): Identity | undefined {\r\n    return this._identity\r\n  }\r\n  set identity(value: Identity | undefined) {\r\n    this._identity = value\r\n  }\r\n  get description(): string | undefined {\r\n    return this._description\r\n  }\r\n  set description(value: string | undefined) {\r\n    this._description = value\r\n  }\r\n  get receiptDate(): Date {\r\n    return this._receiptDate\r\n  }\r\n  set receiptDate(value: Date) {\r\n    this._receiptDate = value\r\n  }\r\n  get person(): Person {\r\n    return this._person\r\n  }\r\n  set person(value: Person) {\r\n    this._person = value\r\n  }\r\n  get id(): number | undefined {\r\n    return this._id\r\n  }\r\n}\r\n","import { observer } from \"mobx-react-lite\"\r\nimport { Button } from \"primereact/button\"\r\nimport { Calendar } from \"primereact/calendar\"\r\nimport { Card } from \"primereact/card\"\r\nimport { CheckboxChangeParams } from \"primereact/checkbox\"\r\nimport { Dropdown } from \"primereact/dropdown\"\r\nimport { InputMask } from \"primereact/inputmask\"\r\nimport { InputText } from \"primereact/inputtext\"\r\nimport { InputTextarea } from \"primereact/inputtextarea\"\r\nimport { FC, useContext, useEffect, useState } from \"react\"\r\nimport { Context } from \"../..\"\r\nimport Identity from \"../../models/FormsData/Identity\"\r\nimport Participant from \"../../models/FormsData/Participant\"\r\nimport IIdentity from \"../../models/IIdentity\"\r\nimport { IPersonName } from \"../../models/IPersonName\"\r\nimport { ID_CARD_TYPES, NA, NULL_FLAVORS, PARTIPICIPANT_DATE_SUG, PARTIPICIPANT_FIO_SUG, PARTIPICIPANT_IDENTITY_SUG, PASSPORT_RF } from \"../../utils/defaults\"\r\nimport { inputsIdentity } from \"../inputs/inputsIdentity\"\r\nimport { PersonName } from \"../inputs/PersonName\"\r\nimport NullFlavorWrapper from \"../NullFlavorWrapper\"\r\n\r\nconst Section10: FC = () => {\r\n  const { certificateStore, suggestionsStore, layoutStore } = useContext(Context)\r\n  const certificate = certificateStore.cert \r\n  const [participant] = useState(certificate.participant || new Participant())\r\n  const person = participant.person \r\n  const identity = participant.identity\r\n  const [docChecked, setDocChecked] = useState(!!participant.identity)\r\n  const [dulValue, setDulValue]  = useState(ID_CARD_TYPES.find((item)=>item.code === identity?.identityCardType))\r\n  const header = () => {\r\n      return <span>Данные получателя свидетельства</span>\r\n  }  \r\n  useEffect(()=>{\r\n    if (!!participant.person.fio?.family && !!participant.person.fio?.given_1) \r\n    suggestionsStore.suggestions[PARTIPICIPANT_FIO_SUG].done = true\r\n  },[participant.person.fio?.family, participant.person.fio?.given_1, suggestionsStore.suggestions])\r\n  useEffect(()=>{\r\n    if (!!participant.receiptDate) \r\n    suggestionsStore.suggestions[PARTIPICIPANT_DATE_SUG].done = true\r\n  },[participant.receiptDate, suggestionsStore.suggestions])\r\n  useEffect(()=>{\r\n    if (!!participant.person.SNILS || !!participant.identity) \r\n    suggestionsStore.suggestions[PARTIPICIPANT_IDENTITY_SUG].done = true\r\n  },[participant.identity, participant.person.SNILS, suggestionsStore.suggestions])\r\n\r\n  const [seriesField, numberField, depCodeField] = inputsIdentity({dulValue, identity})\r\n  const buttonDisabled = !!certificate.participant || !(suggestionsStore.suggestions[PARTIPICIPANT_IDENTITY_SUG].done \r\n      && suggestionsStore.suggestions[PARTIPICIPANT_DATE_SUG].done\r\n      && suggestionsStore.suggestions[PARTIPICIPANT_FIO_SUG].done)\r\n  \r\n\r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header} style={{paddingLeft:'1rem'}}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">   \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">              \r\n              <div className='p-paragraph-field p-col-6'>\r\n                <label htmlFor=\"fio\">Фамилия, Имя, Отчество(при наличии)</label>\r\n                <PersonName personName={participant.person?.fio} submitted={false}\r\n                  onChange={(value: IPersonName)=>{                       \r\n                    participant.person.fio  = value\r\n                  }}  \r\n                />                   \r\n              </div>\r\n              <div className='p-paragraph-field p-col-5'>\r\n                <label htmlFor=\"description\">Кем приходится</label>\r\n                <InputText value={participant.description} \r\n                  placeholder=\"родств./пр-ль\"\r\n                  onChange={e=>participant.description = e.target.value}  \r\n                />                   \r\n              </div>\r\n              <div className='p-paragraph-field p-col-6'>\r\n                <label htmlFor=\"description\">Дата выдачи</label>\r\n                <Calendar id=\"dateBirth\" showIcon dateFormat='dd.mm.yy'\r\n                  locale='ru' mask='99.99.9999'                                          \r\n                  value={participant.receiptDate} \r\n                  onChange={(e)=>{\r\n                    if (e.target.value) participant.receiptDate = e.target.value as Date\r\n                  }}                         \r\n                />                   \r\n              </div>\r\n              <div className='p-paragraph-field p-col-4'> \r\n                <label htmlFor=\"snils\">СНИЛС</label> \r\n                <InputMask id=\"snils\"  \r\n                  type=\"text\" mask=\"999-999-999 99\"\r\n                  value={person?.SNILS} \r\n                  onChange={(e)=>{                     \r\n                    person.SNILS = e.value\r\n                  }}\r\n                />                             \r\n              </div>              \r\n            </div>           \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">              \r\n              <div className='p-paragraph-field p-mr-2 p-mb-2'>\r\n                <NullFlavorWrapper\r\n                  checked={docChecked} setCheck={(e: CheckboxChangeParams) => {\r\n                    if (e.checked) {\r\n                      participant.identity = new Identity({\r\n                      identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code,\r\n                    } as IIdentity)\r\n                    } else participant.identity = undefined\r\n                    setDocChecked(e.checked)\r\n                    } \r\n                  }\r\n                  label={<label htmlFor=\"identity_card_type\">Иной документ, удостоверяющей личность: </label>}\r\n                  field={<Dropdown id=\"identity_card_type\" value={dulValue}\r\n                    autoFocus options={ID_CARD_TYPES} optionLabel='name'\r\n                    onChange={(e) => {\r\n                      if (identity) identity.identityCardType = e.value.code\r\n                      else participant.identity = new Identity({ identity_card_type_id: e.value.code } as IIdentity)\r\n                      setDulValue(ID_CARD_TYPES.find((item) => item.code === e.value.code))\r\n                    }} />\r\n                  } \r\n                  options={[NULL_FLAVORS[NA]]}  value={NA}       \r\n                />             \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`ser_${docChecked}`} \r\n                style={{marginLeft:'1.5rem'}}>\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"series\">Серия</label>}\r\n                  checked={docChecked && \r\n                    participant.identity?.nullFlavors.findIndex(nf=>nf.parent_attr==='series')===-1} \r\n                  setCheck={(e:CheckboxChangeParams)=>{\r\n                    if (e.checked && participant.identity) participant.identity.series = ''\r\n                    else if (participant.identity) participant.identity.series = undefined                                    \r\n                  }}                 \r\n                  field={seriesField}\r\n                  field_name='series'\r\n                  options={[NULL_FLAVORS[NA]]} value={NA}                  \r\n                  lincked={!docChecked}                                   \r\n                />  \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`num_${docChecked}`}\r\n                style={{marginLeft:'1.5rem'}} >\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"docNumber\">Номер</label>}\r\n                  checked={docChecked}                 \r\n                  field={numberField}\r\n                  options={[NULL_FLAVORS[NA]]} value={NA} \r\n                  lincked                                      \r\n                />                    \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-3 p-mb-2\" key={`org_${docChecked}`} style={{marginLeft:'1.5rem'}} >\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"issueOrgName\">Кем выдан</label>}\r\n                  checked={docChecked}                   \r\n                  field={\r\n                    <InputTextarea id=\"issueOrgName\" value={identity?.issueOrgName} \r\n                      cols={65} rows={2}  \r\n                      onChange={(e)=>{if (identity) identity.issueOrgName = e.target.value }}\r\n                    />}\r\n                  options={[NULL_FLAVORS[NA]]} value={NA} \r\n                  lincked                                      \r\n                />                    \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{marginLeft:'1.5rem'}} key={`pdiv5_${docChecked}`}>\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"issueDate\">Когда выдан</label>}\r\n                  checked={docChecked}                   \r\n                  field={<Calendar  id=\"issueDate\" className=\"p-mr-2\" \r\n                    dateFormat={\"dd.mm.yy\"} \r\n                    locale=\"ru\" mask=\"99.99.9999\"                    \r\n                    value={identity?.issueOrgDate}\r\n                    onChange={(e)=>{if (identity) identity.issueOrgDate = e.target.value as Date | undefined}}\r\n                    showIcon />\r\n                  }                  \r\n                  options={[NULL_FLAVORS[NA]]} value={NA} \r\n                  lincked                                       \r\n                /> \r\n              </div>  \r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" \r\n                key={`code_${docChecked}`} style={{marginLeft:'1.5rem'}}> \r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"depCode\">Код подразделения</label>}\r\n                  checked={docChecked} \r\n                  setCheck={(e:CheckboxChangeParams)=>{\r\n                    if (e.checked && participant.identity) participant.identity.issueOrgCode = ''\r\n                    else if (participant.identity) participant.identity.issueOrgCode = undefined                                  \r\n                  }}                   \r\n                  field={depCodeField}\r\n                  options={[NULL_FLAVORS[NA]]} value={NA}                   \r\n                  lincked={!docChecked}\r\n                  field_name=\"issueOrgCode\"                                     \r\n                />                    \r\n              </div> \r\n              <Button type=\"button\" label=\"ВЫДАТЬ\" style={{height:'2.4rem'}}\r\n                className=\"p-button-raised p-button-success\"\r\n                disabled={buttonDisabled}\r\n                onClick={()=>{\r\n                  certificate.participant = participant\r\n                  certificate.issueDate = participant.receiptDate\r\n                  layoutStore.message = { severity: 'success', summary: 'Успешно', detail: 'Данные получателя введены, сохраните изменения, после чего будет возможна печать.', life: 3000 }\r\n                }}   \r\n              />             \r\n            </div>           \r\n           </div>           \r\n          </Card>\r\n        </>)\r\n\r\n}\r\nexport default observer(Section10)    ","import { Card } from 'primereact/card'\r\nimport { Column } from 'primereact/column'\r\nimport { DataTable } from 'primereact/datatable'\r\n\r\nimport '../styles/components/Calendar.css'\r\nimport '../styles/components/Divider.css'\r\nimport '../styles/components/Button.css'\r\nimport '../styles/pages/CertificatePage.css'\r\n\r\nimport { useContext, FC, useEffect, useRef, useState } from 'react'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { CERTIFICATE_ROUTE } from '../utils/consts'\r\nimport { Avatar } from 'primereact/avatar'\r\nimport { Badge } from 'primereact/badge'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport Section0 from '../components/c_sections/section_0'\r\nimport Section1 from '../components/c_sections/section_1'\r\nimport Section2 from '../components/c_sections/section_2'\r\nimport Section3 from '../components/c_sections/section_3'\r\nimport Section5 from '../components/c_sections/section_5'\r\nimport Section6 from '../components/c_sections/section_6'\r\nimport Section7 from '../components/c_sections/section_7'\r\nimport Section8 from '../components/c_sections/section_8'\r\nimport Section9 from '../components/c_sections/section_9'\r\nimport Section10 from '../components/c_sections/section_10'\r\nimport { Context } from '..'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { ISuggestions } from '../models/ISuggestions'\r\nimport { Toast, ToastMessageType } from 'primereact/toast'\r\nimport { CERT_TYPE_SUG, DEFAULT_ERROR_TOAST, PERSON_NAME_SUG } from '../utils/defaults'\r\nimport { ICertificate } from '../models/responses/ICertificate'\r\n\r\n\r\ninterface IMatch extends IRouteMatch {  \r\n  params: {id: string}\r\n}\r\ninterface CertificatePageProps extends IRouteProps { \r\n    match: IMatch  \r\n}\r\n\r\nconst CertificatePage: FC<CertificatePageProps> = (props: CertificatePageProps) => {  \r\n  const { certificateStore, userStore, layoutStore, suggestionsStore } = useContext(Context)     \r\n  const [certID, setCertID] = useState(Number.parseInt(props.match.params.id))\r\n  const [message, setMessage] = useState<ToastMessageType | null>(null)\r\n  useEffect(()=>{\r\n    if (!!message) {\r\n      layoutStore.message = message\r\n      setMessage(null)\r\n    }\r\n  },[layoutStore, message])\r\n  useEffect(()=>{    \r\n    //if (certID ===-1 && toast!==null && toast.current!==null) toast.current.show()\r\n    if (certID === certificateStore.cert.id || certID===-1) {\r\n      layoutStore.isLoading = false\r\n      return\r\n    }  \r\n    let _idx = -1\r\n    const cArray = certificateStore.certs   \r\n    if (cArray.length>0){            \r\n      _idx = cArray.findIndex(el=>el.id === certID)      \r\n    }\r\n    if (_idx>-1) { \r\n      certificateStore.select(_idx)\r\n      layoutStore.isLoading = false\r\n    } else {      \r\n      certificateStore.findById(certID, ()=>{layoutStore.isLoading = false})\r\n    }  \r\n  },[certID, certificateStore, layoutStore, certificateStore.cert.id])\r\n  useEffect(()=>{\r\n    if (!layoutStore.isLoading && !!layoutStore.message && !!toast.current) { \r\n      toast.current.show(layoutStore.message)\r\n      layoutStore.message = null\r\n    }\r\n  },[layoutStore, layoutStore.isLoading, layoutStore.message])\r\n  const toast = useRef<Toast>(null)  \r\n  const secton_router = ()=>{\r\n    switch (props.location.search) {\r\n      case \"?q=0\": return <Section0 />\r\n      case \"?q=1\": return <Section1 />\r\n      case \"?q=2\": return <Section2 />\r\n      case \"?q=3\": return <Section3 />      \r\n      case \"?q=5\": return <Section5 />\r\n      case \"?q=6\": return <Section6 />\r\n      case \"?q=7\": return <Section7 />\r\n      case \"?q=8\": return <Section8 />\r\n      case \"?q=9\": return <Section9 />\r\n      case \"?q=10\": return <Section10 />\r\n      default: return <Section0 /> \r\n    } \r\n  }    \r\n  const items = [        \r\n        {\r\n            label: 'Назад',\r\n            icon: 'pi pi-chevron-left',\r\n            command: () => {\r\n              let section = Number.parseInt(props.location.search[props.location.search.length-1])-1             \r\n              if (section===4) section--\r\n                if (section > -1) {               \r\n                userStore.history().push(`${CERTIFICATE_ROUTE}/${certificateStore.cert.id}?q=${section}`)\r\n              }\r\n            }\r\n        },\r\n        {\r\n            label: 'Удалить',\r\n            icon: 'pi pi-trash p-danger',\r\n            command: () => {\r\n              layoutStore.isLoading = true\r\n              const result = certificateStore.delete()\r\n              if (!result) {\r\n                layoutStore.isLoading = false\r\n              } else {\r\n                result.then(response=>{\r\n                  layoutStore.isLoading = false\r\n                  certificateStore.clean() \r\n                  setCertID(certificateStore.cert.id)                 \r\n                  setMessage({ severity: 'success', summary: 'Успешно', detail: 'Запись удалена', life: 3000 })                                 \r\n                })\r\n                .catch(reason=>{\r\n                  layoutStore.isLoading = false\r\n                  console.log(reason)\r\n                  setMessage((DEFAULT_ERROR_TOAST))\r\n                })                \r\n              }\r\n            }\r\n        },\r\n        {\r\n            label: 'Сохранить',\r\n            icon: 'pi pi-save p-success',\r\n            command: () => { \r\n              if (!suggestionsStore.suggestions[CERT_TYPE_SUG].done || !suggestionsStore.suggestions[PERSON_NAME_SUG].done ) {\r\n                 setMessage({severity:'warn', summary:'ОТКЛОНЕНО', detail:'Внесите минимальный набор данных: вид свидетельства, ФИО умершего(для идентифицированых)', life: 6000})\r\n                 return\r\n               }\r\n              layoutStore.isLoading = true\r\n              const result = certificateStore.save((data:ICertificate)=>{                                \r\n                  setMessage({ severity: 'success', summary: 'Успешно', detail: 'Изменения сохранены', life: 3000 })\r\n                  setCertID(data.id)                   \r\n              }, (message:string)=>{                         \r\n                setMessage(DEFAULT_ERROR_TOAST)\r\n                console.log(message)\r\n              }, userStore.userInfo?.organization.sm_code)\r\n              if (!result) {\r\n                console.log('нет юзера')\r\n                layoutStore.isLoading = false\r\n              } else result.finally(()=>{layoutStore.isLoading = false})               \r\n            }\r\n        },    \r\n        {\r\n            label: 'Создать',\r\n            icon: 'pi pi-plus',\r\n            command: () => { \r\n              try {\r\n                certificateStore.createNew()\r\n                setCertID(-1)      \r\n                setMessage({ severity: 'success', summary: 'Пустое  свидетельство создано!', detail: 'Внесите минимальные изменения и сохраните, чтоб получить номер', life: 3000 })                   \r\n              } catch { \r\n                setMessage(DEFAULT_ERROR_TOAST)\r\n              }\r\n            }  \r\n        },\r\n        {\r\n            label: 'Заменить',\r\n            icon: 'pi pi-sync',            \r\n            command: () => { \r\n              if (certificateStore.cert.id < 0 || !certificateStore.cert.issueDate) {\r\n                setMessage({severity:'warn', summary:'ОТКЛОНЕНО', detail:'Замена возможна только для выданных свидетельств'})\r\n              return  \r\n              }\r\n              try {\r\n                certificateStore.replace()\r\n                setCertID(-1) \r\n                setMessage({ severity: 'success', summary: 'Cвидетельство заменено!', detail: 'Проверьте вид и сохраните, чтоб получить номер', life: 3000 })                        \r\n              } catch { \r\n                setMessage(DEFAULT_ERROR_TOAST)\r\n              }\r\n            }  \r\n        },\r\n        {\r\n            label: 'Далее',\r\n            icon: 'pi pi-chevron-right',\r\n            command: () => {\r\n              let section = Number.parseInt(props.location.search[props.location.search.length-1])+1              \r\n              if (section===4) section++\r\n              if (section > -1) {\r\n                userStore.history().push(`${CERTIFICATE_ROUTE}/${certificateStore.cert.id}?q=${section}`)\r\n              } \r\n            }\r\n        },        \r\n        \r\n\r\n    ]\r\n  const doneBodyTemplate = (rowData:any) => {\r\n        return rowData.done ? <Avatar icon=\"pi pi-check\" shape=\"circle\" style={{ color: 'rgb(104 159 56)'}}/>\r\n        : ''\r\n  }  \r\n  const rowClass = (data:any) => {\r\n    return {\r\n      'p-suggestion-actual': !data.done\r\n    }\r\n  } \r\n  const sugCount = suggestionsStore.redSuggestionsCount() \r\n  const suggestionHeader = () => {    \r\n    const avatar = sugCount === 0 ? <Avatar icon=\"pi pi-check\" shape=\"circle\" style={{ height:'1.5rem', width: '1.5rem',backgroundColor: 'rgb(104 159 56)', color: 'white'}}/> : <Badge value={sugCount}  style={{ backgroundColor: 'rgb(204, 0, 0)', color: 'white', marginLeft: '4px'}}/>\r\n    return <><span>Контроль заполнения</span>{avatar}</>\r\n  }\r\n  const suggestions = suggestionsStore.suggestions\r\n    .filter((item:ISuggestions) =>\r\n    item.section === props.location.search.slice(3))\r\n  \r\n  const layoutParams = {\r\n    title: 'Медицинское свидетельство о смерти',     \r\n    url: `${CERTIFICATE_ROUTE}/${certID}${props.location.search}`,\r\n    content:(<>      \r\n      <div className=\"p-d-flex p-jc-center\" >        \r\n        {secton_router()}        \r\n        <Card className=\"p-mr-2 p-mb-2 p-suggestion\"\r\n         key={`p_sug_${sugCount}`} header={suggestionHeader}>                        \r\n            <DataTable className=\"p-datatable-sm\" rowClassName={rowClass} \r\n            value={suggestions} responsiveLayout=\"scroll\">\r\n              <Column field=\"code\" header=\"Код\"></Column>\r\n              <Column field=\"suggestion\" header=\"Проверка\"></Column>\r\n              <Column body={doneBodyTemplate}></Column>\r\n            </DataTable> \r\n        </Card>\r\n      </div>   \r\n      <Toast ref={toast} />   \r\n    </>),\r\n    actionItems: items\r\n  } \r\n  return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}\r\nexport default observer(CertificatePage) ","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IDoctor } from \"../IDoctor\"\r\nimport { IReferenceId } from \"../IReference\"\r\nimport { IDoctorR } from \"../requests/IDoctorR\"\r\nimport Person from \"./Person\"\r\n\r\nexport default class Doctor implements ISerializable {\r\n  private _id?: number\r\n  private _person: Person\r\n  private _position?: IReferenceId | undefined\r\n  private _organization?: IReferenceId | undefined\r\n  private _guid: string\r\n  constructor(props = {} as IDoctor) {\r\n    this._id = props.id\r\n    this._guid = props.guid || uuidv4()\r\n    this._person = props.person ? new Person(props.person) : new Person()\r\n    this._organization = props.organization || undefined\r\n    this._position = props.position || undefined\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes(): IDoctorR {\r\n    let _doctor = { guid: this._guid } as IDoctorR\r\n    if (this._id) _doctor.id = this._id\r\n    if (this._person) _doctor.person_attributes = this._person.getAttributes()\r\n    if (this._organization) _doctor.organization_id = this._organization.id\r\n    if (this._position) _doctor.position_id = this._position.id\r\n    return _doctor\r\n  }\r\n  get id() {\r\n    return this._id\r\n  }\r\n  set id(id: number | undefined) {\r\n    this._id = id\r\n  }\r\n  get person() {\r\n    return this._person\r\n  }\r\n\r\n  get guid() {\r\n    return this._guid\r\n  }\r\n  get position(): IReferenceId | undefined {\r\n    return this._position\r\n  }\r\n  set position(value: IReferenceId | undefined) {\r\n    this._position = value\r\n  }\r\n  get organization(): IReferenceId | undefined {\r\n    return this._organization\r\n  }\r\n  set organization(value: IReferenceId | undefined) {\r\n    this._organization = value\r\n  }\r\n}\r\n","\r\nimport React, { useState, useEffect, useRef, useContext, FC } from 'react'\r\nimport { classNames } from 'primereact/utils'\r\nimport { DataTable } from 'primereact/datatable'\r\nimport { Column } from 'primereact/column'\r\nimport { Toast } from 'primereact/toast'\r\nimport { Button } from 'primereact/button'\r\nimport { Toolbar } from 'primereact/toolbar'\r\nimport { Dialog } from 'primereact/dialog'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { Context } from '..'\r\nimport { IDoctor } from '../models/IDoctor'\r\nimport DoctorService from \"../services/DoctorService\"\r\nimport '../styles/components/Toolbar.css'\r\nimport '../styles/components/Dialog.css'\r\nimport '../styles/components/Toast.css'\r\nimport '../styles/components/AutoComplete.css'\r\nimport { InputMask } from 'primereact/inputmask'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { DESTROY_OPTION, DOCTORS_ROUTE } from '../utils/consts'\r\nimport { IContact } from '../models/IContact'\r\nimport { IReferenceId } from '../models/IReference'\r\nimport { AutoComplete } from 'primereact/autocomplete'\r\nimport { DEFAULT_ERROR_TOAST } from '../utils/defaults'\r\nimport Address from '../models/FormsData/Address'\r\nimport { IPerson } from '../models/IPerson'\r\nimport { genUpdateDoctorRequest } from '../models/FormsData/DoctorRequest'\r\nimport InputAddress from '../components/inputs/InputAddress'\r\nimport AddressDialog from '../components/dialogs/AddressDialog'\r\nimport Doctor from '../models/FormsData/Doctor'\r\nimport { DEFAULT_ADDRESS, IAddressR } from '../models/requests/IAddressR'\r\nimport { getOneLinePersonName, IPersonName } from '../models/IPersonName'\r\nimport { PersonName } from '../components/inputs/PersonName'\r\n\r\nconst DoctorsPage: FC = () => {    \r\n    const {addressStore, userStore} = useContext(Context)\r\n    let emptyDoctor = {\r\n        organization: userStore.userInfo?.organization,\r\n        guid: uuidv4(),       \r\n        person: { person_name: {family:'Тестов', given_1:'Тест'}, \r\n          contacts:[] as IContact[],\r\n          SNILS: '456-145-154 25'\r\n          } as IPerson        \r\n    } as IDoctor\r\n    const [doctor, setDoctor] = useState(new Doctor(emptyDoctor))\r\n    const [doctors, setDoctors] = useState<IDoctor[]>([])\r\n    const [doctorDialog, setDoctorDialog] = useState(false)\r\n    const [deleteDoctorDialog, setDeleteDoctorDialog] = useState(false)\r\n    const [deleteDoctorsDialog, setDeleteDoctorsDialog] = useState(false)    \r\n    const [selectedDoctors, setSelectedDoctors] = useState<IDoctor[]>([])\r\n    const [submitted, setSubmitted] = useState(false)   \r\n    const [email, setEmail] = useState<IContact>({telcom_value:'', main:false} as IContact) \r\n    const [phone, setPhone] = useState<IContact>({telcom_value:'', main:true} as IContact)\r\n    const [position, setPosition] = useState('')\r\n    const [positions, setPositions] = useState<IReferenceId[]>([])\r\n    const toast = useRef<Toast>(null)\r\n    const dt = useRef(null)\r\n     \r\n\r\n    useEffect(() => {      \r\n      if (userStore && userStore.userInfo) \r\n      DoctorService.getDoctors({       \r\n        q:{organization_id_eq: userStore.userInfo.organization.id}        \r\n      })\r\n      .then(data => {        \r\n        setDoctors(data.data)\r\n      })\r\n      .catch(()=>setDoctors([]))\r\n    }, [userStore.userInfo]) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    const  getPositions = (event: { query: string })=>{\r\n        const option = {} as any\r\n        if (event.query.trim().length>0) option.name_cont = event.query.trim()      \r\n        DoctorService.getPositions(option).then(response=>{\r\n            if (response.data.length>0) setPositions(response.data)\r\n            else setPositions([])        \r\n        }).catch((reason)=>console.log(reason))    \r\n    }\r\n\r\n    const openNew = () => {        \r\n        if (doctor.id) setDoctor(new Doctor(emptyDoctor))\r\n        addressStore.address = new Address(DEFAULT_ADDRESS)\r\n        setSubmitted(false)\r\n        setDoctorDialog(true)\r\n        setEmail({telcom_value:'', main:false} as IContact)\r\n        setPhone({telcom_value:'', main:true} as IContact)\r\n        setPosition('')\r\n    }\r\n\r\n    const hideDialog = () => {\r\n        setSubmitted(false);\r\n        setDoctorDialog(false);\r\n    }\r\n\r\n    const hideDeleteDoctorDialog = () => {\r\n        setDeleteDoctorDialog(false)\r\n    }\r\n\r\n    const hideDeleteDoctorsDialog = () => {\r\n        setDeleteDoctorsDialog(false)\r\n    }\r\n\r\n    const saveDoctor = () => {\r\n        setSubmitted(true)\r\n        console.log('doctor2',doctor)\r\n        if (doctor.person?.fio?.family.trim() && doctor.person?.SNILS && doctor.position) {\r\n            let _doctors = [...doctors]\r\n            onContactChange(phone)\r\n            onContactChange(email)  \r\n            if (doctor.id) { \r\n              const index = findIndexById(doctor.id)\r\n              const request = genUpdateDoctorRequest(_doctors[index], doctor)\r\n              if (request) DoctorService.updateDoctor(request).then((response)=>{                \r\n                _doctors[index] = response.data\r\n                setDoctorDialog(false)\r\n                setDoctors(_doctors)\r\n                if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Успешно', detail: 'Запись обновлена', life: 3000 })\r\n              }).catch((reason)=>{\r\n                console.log('reason',reason)\r\n                setDoctorDialog(false)\r\n                if (toast!==null && toast.current!==null) \r\n                  toast.current.show(DEFAULT_ERROR_TOAST)\r\n              })\r\n              else {\r\n                if (toast!==null && toast.current!==null) toast.current.show({ severity: 'info', summary: 'Отклонено', detail: 'Изменения отсутствуют', life: 3000 })\r\n                setDoctorDialog(false)\r\n              }\r\n            } else {               \r\n              DoctorService.addDoctor(doctor.getAttributes()).then((response)=>{\r\n                if (response.data) {                  \r\n                  _doctors.push(response.data)\r\n                  setDoctors(_doctors)\r\n                  setDoctorDialog(false)                            \r\n                  setEmail({telcom_value:'', main:false} as IContact)\r\n                  setPhone({telcom_value:'', main:true} as IContact)\r\n                  setPosition('')\r\n                  if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Успешно', detail: 'Запись добавлена', life: 3000 })\r\n                }  \r\n              }).catch((reason)=>{\r\n                console.log('reason',reason)\r\n                setDoctorDialog(false)\r\n                if (toast!==null && toast.current!==null) \r\n                  toast.current.show(DEFAULT_ERROR_TOAST)\r\n              })\r\n            }\r\n          \r\n        }\r\n    }\r\n\r\n    const editDoctor = (_doctor: IDoctor) => {        \r\n        setPhone({telcom_value:'', main:true} as IContact)\r\n        setEmail({telcom_value:'', main:false} as IContact)        \r\n        if (_doctor.id !== doctor.id) setDoctor(new Doctor(_doctor))\r\n        doctor.person.contacts?.forEach((item)=>{if (item.main) setPhone({...item})\r\n        else setEmail({...item, telcom_value: item.telcom_value.replace('mailto:','')})})        \r\n        //addressStore.address = new Address(doctor.person.address || DEFAULT_ADDRESS)         \r\n        setPosition(doctor.position?.name || '')\r\n        setDoctorDialog(true)        \r\n    }\r\n\r\n    const confirmDeleteDoctor = (_doctor: IDoctor) => {\r\n        if (_doctor.id !== doctor.id) setDoctor(new Doctor(_doctor))\r\n        setDeleteDoctorDialog(true)\r\n    }\r\n\r\n    const deleteDoctor = () => {\r\n        if (doctor.id) DoctorService.removeDoctor(doctor.id).then(response=>{\r\n          let _doctors = doctors.filter(val => val.id !== doctor.id)\r\n          setDoctors(_doctors)\r\n          setDeleteDoctorDialog(false)\r\n          setDoctor(new Doctor(emptyDoctor))\r\n          if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Успешно', detail: 'Запись удалена', life: 3000 })\r\n        }).catch(reason=>{\r\n          console.log('reason',reason)\r\n          if (toast!==null && toast.current!==null) \r\n                  toast.current.show(DEFAULT_ERROR_TOAST)\r\n        })        \r\n    }\r\n    const findIndexById = (id:number | undefined) => {        \r\n        return doctors.findIndex((element)=>element.id === id)\r\n    }    \r\n\r\n    const confirmDeleteSelected = () => {\r\n        setDeleteDoctorsDialog(true);\r\n    }\r\n\r\n    const deleteSelectedDoctors = () => {\r\n        let _doctors = doctors.filter(val => !selectedDoctors.includes(val))\r\n        setDoctors(_doctors);\r\n        setDeleteDoctorsDialog(false);\r\n        setSelectedDoctors([]);\r\n        if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Удачно', detail: 'Записи удалены', life: 3000 });\r\n    }      \r\n\r\n    // Обработчик изменения контактов      \r\n    const onContactChange = (contact: IContact) => {   \r\n      let _contact = contact.telcom_value==='' ?\r\n      (contact.id ? {...contact,...DESTROY_OPTION} : {...contact}) :    \r\n      (contact.id ? {id:contact.id, parent_guid: contact.parent_guid, telcom_use: contact.telcom_use, telcom_value: contact.telcom_value, main: contact.main} : {...contact}) \r\n      if (doctor.person.contacts === undefined) doctor.person.contacts = []\r\n      if (_contact.id) {        \r\n          const idx = doctor.person.contacts.findIndex(item=>item.id===_contact.id)  \r\n          if (idx>-1) doctor.person.contacts[idx] = _contact        \r\n      } else doctor.person.contacts.push(_contact)       \r\n    } \r\n\r\n    const rightToolbarTemplate = () => {\r\n      return (\r\n        <React.Fragment>                \r\n          <Button  icon=\"pi pi-plus\" label=\"ДОБАВИТЬ\" className=\"p-button-success p-mr-2\" onClick={openNew} />\r\n          <Button  icon=\"pi pi-trash\" label=\"УДАЛИТЬ\" className=\"p-button-danger\" onClick={confirmDeleteSelected} disabled={!selectedDoctors || !selectedDoctors.length} />\r\n        </React.Fragment>\r\n      )\r\n    }\r\n\r\n    const actionBodyTemplate = (rowData: IDoctor) => {\r\n        return (\r\n            <React.Fragment>\r\n                <Button icon=\"pi pi-pencil\" className=\"p-button-rounded p-button-success p-mr-2\" onClick={() => editDoctor(rowData)} />\r\n                <Button icon=\"pi pi-trash\" className=\"p-button-rounded p-button-warning\" onClick={() => confirmDeleteDoctor(rowData)} />\r\n            </React.Fragment>\r\n        )\r\n    }\r\n    \r\n    const doctorDialogFooter = (\r\n        <React.Fragment>\r\n            <Button label=\"ОТМЕНА\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDialog} />\r\n            <Button label=\"ВНЕСТИ\" icon=\"pi pi-check\" className=\"p-button-text p-button-success\" onClick={saveDoctor} />\r\n        </React.Fragment>\r\n    )\r\n    const deleteDoctorDialogFooter = (\r\n        <React.Fragment>\r\n            <Button label=\"НЕТ\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDeleteDoctorDialog} />\r\n            <Button label=\"ДА\" icon=\"pi pi-check\" className=\"p-button-text p-button-warning\" onClick={deleteDoctor} />\r\n        </React.Fragment>\r\n    )\r\n    const deleteDoctorsDialogFooter = (\r\n        <React.Fragment>\r\n            <Button label=\"НЕТ\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDeleteDoctorsDialog} />\r\n            <Button label=\"ДА\" icon=\"pi pi-check\" className=\"p-button-text p-button-warning\" onClick={deleteSelectedDoctors} />\r\n        </React.Fragment>\r\n    )\r\n    const fioBodyTemplate = (row: IDoctor)=>{\r\n      const fio = row.person?.person_name      \r\n      const result = getOneLinePersonName(fio)\r\n      return <>{result}</>\r\n    }  \r\n    const layoutParams = {\r\n        title: 'Врачи',     \r\n        url: DOCTORS_ROUTE,\r\n        content:\r\n        <div>\r\n            <Toast ref={toast} />\r\n            <div className=\"card\">\r\n                <Toolbar className=\"p-mb-4\" right={rightToolbarTemplate}></Toolbar>\r\n                <DataTable ref={dt} value={doctors} selection={selectedDoctors} onSelectionChange={(e) => setSelectedDoctors(e.value)} responsiveLayout=\"scroll\"\r\n                    dataKey=\"id\" >\r\n                    <Column selectionMode=\"multiple\" headerStyle={{ width: '3rem' }} exportable={false}></Column>                    \r\n                    <Column  header=\"ФИО\" body={fioBodyTemplate}  style={{ minWidth: '10rem' }}></Column>\r\n                    <Column field=\"position.name\" header=\"Должность\" ></Column>\r\n                    <Column field=\"person.SNILS\" header=\"СНИЛС\" ></Column>                    \r\n                    <Column body={actionBodyTemplate} exportable={false} style={{ minWidth: '8rem' }}></Column>\r\n                </DataTable>\r\n            </div>\r\n\r\n            <Dialog visible={doctorDialog} style={{ width: '800px' }} header=\"Данные врача\" modal \r\n             footer={doctorDialogFooter} onHide={hideDialog} >   \r\n               <div className='p-fluid p-formgrid p-grid'> \r\n                <div className=\"p-field p-col-12 p-md-6\">\r\n                    <label htmlFor=\"fio\">Фамилия, Имя, Отчество(при наличии)</label>\r\n                    <PersonName personName={doctor.person?.fio} submitted={submitted}\r\n                      onChange={(value: IPersonName)=>{                       \r\n                        if (doctor.person) doctor.person.fio  = value\r\n                      }}  \r\n                    />                   \r\n                </div>                \r\n                <div className=\"p-field  p-col-12 p-md-3\">\r\n                    <label htmlFor=\"snils\">СНИЛС</label>\r\n                    <InputMask id=\"snils\"  \r\n                      type=\"text\" mask=\"999-999-999 99\"\r\n                      value={doctor.person.SNILS} \r\n                      onChange={(e)=>{ \r\n                        doctor.person.SNILS = e.target.value  \r\n                        }} \r\n                      required className={classNames({ 'p-invalid': submitted && !doctor.person?.SNILS})}\r\n                    />\r\n                    {submitted && !doctor.person?.SNILS && <small className=\"p-error\">СНИЛС некорректен.</small>}\r\n                </div>\r\n                <div className=\"p-field  p-col-12 p-md-4\">\r\n                    <label htmlFor=\"position\">Должность</label>\r\n                    <AutoComplete id=\"position\" suggestions={positions} field=\"name\"\r\n                      value={doctor.position || position } delay={1000} dropdown \r\n                      completeMethod={getPositions}\r\n                      onChange={(e)=>{ \r\n                        console.log('e.value',e.value)\r\n                        if (e.value.name) { \r\n                          doctor.position = e.value\r\n                          setPosition(e.value.name) \r\n                        } else setPosition(e.value)   \r\n                       }}  \r\n                        className={classNames({ 'p-invalid': submitted && !doctor.position})}\r\n                    />\r\n                    {submitted && !doctor.position && <small className=\"p-error\">Должность должна быть указана.</small>}\r\n                </div>\r\n                <div className=\"p-field  p-col-12 p-md-4\">\r\n                    <label htmlFor=\"phone\">телефон</label>\r\n                    <InputMask id=\"phone\"  \r\n                      type=\"text\" mask=\"tel:+79999999999\"\r\n                      value={phone.telcom_value} \r\n                      onChange={(e)=>{setPhone({...phone, telcom_value: e.target.value})  \r\n                        }} required className={classNames({ 'p-invalid': submitted && !/tel:\\+?[-0-9().]+/i.test(phone.telcom_value)})}\r\n                    />\r\n                    {submitted && !/tel:\\+?[-0-9().]+/i.test(phone.telcom_value) && <small className=\"p-error\">тел.номер некорректен!</small>}\r\n                </div>\r\n                <div className=\"p-field  p-col-12 p-md-4\">\r\n                    <label htmlFor=\"email\">email</label>\r\n                    <InputText id=\"email\" type=\"text\" \r\n                      value={email.telcom_value} \r\n                      onChange={(e)=>{  \r\n                        setEmail({...email, telcom_value:e.target.value})  \r\n                        }} className={classNames({ 'p-invalid': submitted && !(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='')})}\r\n                    />\r\n                    {submitted && !(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='') && <small className=\"p-error\">Неверный email</small>}\r\n                </div>\r\n                <InputAddress className=\"p-col-12\" submitted={submitted} \r\n                  label='Адрес проживания'\r\n                  value={doctor.person.address || DEFAULT_ADDRESS} strictly \r\n                  onClear={(value: IAddressR)=>{\r\n                    doctor.person.address = {...value}                    \r\n                  }}\r\n                  onChange={()=>doctor.person.address = {...addressStore.addressProps()}} \r\n                />    \r\n               </div>               \r\n            </Dialog>\r\n            <AddressDialog />\r\n            <Dialog visible={deleteDoctorDialog} style={{ width: '450px' }} header=\"Подтвердите\" modal footer={deleteDoctorDialogFooter} onHide={hideDeleteDoctorDialog}>\r\n                <div className=\"confirmation-content\">\r\n                    <i className=\"pi pi-exclamation-triangle p-mr-3\" style={{ fontSize: '2rem'}} />\r\n                    {doctor && <span>Вы действительно хотите удалить <b>{fioBodyTemplate}</b>?</span>}\r\n                </div>\r\n            </Dialog>\r\n\r\n            <Dialog visible={deleteDoctorsDialog} style={{ width: '450px' }} header=\"Подтвердите\" modal footer={deleteDoctorsDialogFooter} onHide={hideDeleteDoctorsDialog}>\r\n                <div className=\"confirmation-content\">\r\n                    <i className=\"pi pi-exclamation-triangle p-mr-3\" style={{ fontSize: '2rem'}} />\r\n                    {doctor && <span>Вы действительно хотите удалить выбранные записи?</span>}\r\n                </div>\r\n            </Dialog>\r\n        </div>\r\n    }\r\n    return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}\r\nexport default observer(DoctorsPage)               ","//Пол пациента\r\n//OID: 1.2.643.5.1.13.13.11.1040 Версия: 2.1\r\nexport const GENDERS = [\r\n  { code: 1, name: \"Мужской\" },\r\n  { code: 2, name: \"Женский\" },\r\n]\r\n","import $api, { API_URL } from \"../http\"\r\nimport { AxiosResponse } from \"axios\"\r\nimport { IReferenceId } from \"../models/IReference\"\r\nimport { IOrganization } from \"../models/IOrganization\"\r\n\r\nconst ORGANIZATION_RENDER_OPTIONS = {\r\n  render_options: { except: [\"updated_at\", \"old_oid\"], include: [\"address\", \"contacts\"] },\r\n  includes: [\"address\", \"contacts\"],\r\n  address: { except: [\"updated_at\", \"created_at\"], include: [\"null_flavors\"] },\r\n}\r\nexport default class OrganizationService {\r\n  // GET from public endpoint /auth/organizations/\r\n  static async getOrganizations(): Promise<AxiosResponse<{ organizations: IReferenceId[] }>> {\r\n    return $api.get(`${API_URL}auth/organizations/`)\r\n  }\r\n\r\n  // POST /show/model/Organization/:id from UEC endpoint\r\n  static async getOrganization(id: string): Promise<AxiosResponse<IOrganization>> {\r\n    return $api.post(`${API_URL}/show/model/Organization/${id}`, ORGANIZATION_RENDER_OPTIONS)\r\n  }\r\n  //PUT request for update Doctor /REST_API/v1/model/Doctor/:id\r\n  static async updateOrganization(request: any): Promise<AxiosResponse<IOrganization>> {\r\n    return $api.put(`${API_URL}model/Organization/${request.Organization.id}`, {\r\n      ...request,\r\n      ...ORGANIZATION_RENDER_OPTIONS,\r\n    })\r\n  }\r\n}\r\n","import { observer } from 'mobx-react-lite'\r\nimport { Context } from '..'\r\nimport { MultiSelect } from 'primereact/multiselect'\r\nimport { Column} from 'primereact/column'\r\nimport { DataTable, DataTableFilterMatchModeType, DataTableFilterMeta, DataTableSortParams } from 'primereact/datatable'\r\nimport { Toast } from 'primereact/toast'\r\nimport { FC, useContext, useEffect, useMemo, useRef, useState } from 'react'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { CERTIFICATE_ROUTE, DIRECTION, LIST_ROUTE, RunsackFilterMatchMode } from '../utils/consts'\r\nimport { ICertificate } from '../models/responses/ICertificate'\r\nimport React from 'react'\r\nimport { Button } from 'primereact/button'\r\nimport { GENDERS } from '../NSI/1.2.643.5.1.13.13.11.1040'\r\nimport { DEAD_PLACE_TYPES } from '../NSI/1.2.643.5.1.13.13.99.2.20'\r\nimport { BASIS_DERMINING } from '../NSI/1.2.643.5.1.13.13.99.2.23'\r\nimport '../styles/components/DataTable.css'\r\nimport '../styles/components/MultiSelect.css'\r\nimport { CERT_TYPES } from '../NSI/1.2.643.5.1.13.13.99.2.19'\r\nimport { getOneLinePersonName } from '../models/IPersonName'\r\nimport  PrimeReact, {FilterMatchMode}  from 'primereact/api'\r\nimport { IReference, IReferenceId } from '../models/IReference'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport OrganizationService from '../services/OrganizationService'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\n\r\n\r\n\r\nconst ListPage: FC<IRouteProps> = (props: IRouteProps) => {\r\n  const {certificateStore, userStore} = useContext(Context)  \r\n  const [lazyLoading, setLazyLoading] = useState(false)\r\n  const [sortField, setSortField] = useState<string>('')\r\n  const [sortOrder, setSortOrder] = useState<-1 | 0 | 1>(0)\r\n  const [filters, setFilters] = useState<DataTableFilterMeta | undefined>()\r\n  const [propsFilters, setPropsFilters] = useState<any | false | undefined>()\r\n\r\n  const [organizations, setOrganizations] = useState<IReferenceId[] | null>(null)\r\n  const isSuperUser = userStore.userInfo?.roles.includes('MIAC') || userStore.userInfo?.roles.includes('ADMIN')\r\n  \r\n  useEffect(()=>{\r\n    if (organizations===null && isSuperUser) OrganizationService.getOrganizations().then(response=>\r\n      setOrganizations(response.data.organizations)\r\n    ).catch(()=>{\r\n      setOrganizations([])      \r\n    })},[isSuperUser, organizations])\r\n\r\n  useMemo(()=>{\r\n    if (propsFilters === undefined) {\r\n      if (props.location.search){\r\n        const _params = props.location.search.replace(\"?\",\"\").split(\"&\") \r\n        let _filters = {} as any\r\n        _params.forEach(param=>{\r\n          const pair = param.split(\"=\")\r\n          _filters[pair[0]]=pair[1]\r\n        })        \r\n        certificateStore.filters = {..._filters}\r\n        setPropsFilters({..._filters})            \r\n      } else {        \r\n        if (Object.keys(certificateStore.filters).length !== 0) {\r\n          certificateStore.filters = {}          \r\n        }  \r\n        setPropsFilters({})\r\n      }        \r\n    }    \r\n  },[certificateStore, props, propsFilters])  \r\n    \r\n  PrimeReact.locale = 'ru'\r\n  const toast = useRef<Toast>(null)\r\n  const dt = useRef(null)  \r\n\r\n  const [selected, setSelected] = useState<ICertificate | undefined>()\r\n\r\n  const initFilters = () => {\r\n        setFilters({\r\n        'basis_determining': { value: null, matchMode: FilterMatchMode.IN },  \r\n        'custodian_id': { value: null, matchMode: FilterMatchMode.IN },            \r\n        'number': { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.STARTS_WITH }]}, \r\n        'patient_fio': { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.CONTAINS }]},\r\n        'primory_reason' : { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.GREATER_THAN_OR_EQUAL_TO},{ value: null, matchMode: FilterMatchMode.LESS_THAN_OR_EQUAL_TO}]},\r\n        'patient_birth_date' : { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.DATE_AFTER},{ value: null, matchMode: FilterMatchMode.DATE_BEFORE}]},\r\n        'patient_death_date' : { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.DATE_AFTER},{ value: null, matchMode: FilterMatchMode.DATE_BEFORE}]},\r\n        'issue_date': { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.DATE_AFTER},{ value: null, matchMode: FilterMatchMode.DATE_BEFORE}]},   \r\n        'death_place': { value: null, matchMode: FilterMatchMode.IN },        \r\n        })        \r\n    }   \r\n    useEffect(() => {            \r\n        initFilters()        \r\n    }, [])\r\n\r\n  const orderNumberBodyTemplate = (rowData: ICertificate)=>{    \r\n    return <i>{rowData.rowNumber}</i>\r\n  }\r\n  const seriesNumberBodyTemplate = (rowData: ICertificate)=>{   \r\n    const cert_type = CERT_TYPES.find(el=>el.code===rowData.cert_type) \r\n    return <>{rowData.series} {rowData.number} {cert_type?.s_name}</>\r\n  }\r\n  const reasonsBodyTemplate = (rowData: ICertificate)=>{\r\n    const acme = rowData.reason_ACME\r\n    const isACME = !!acme\r\n    const cr = rowData.c_reason?.diagnosis\r\n    const ar = rowData.a_reason?.diagnosis\r\n    const br = rowData.b_reason?.diagnosis\r\n    const dr = rowData.d_reason?.ext_diagnosis\r\n    let result = isACME && !!cr && acme === cr.ICD10 ? \r\n      `(ПП-${acme})${cr.s_name}; ` : !!cr ? `(В-${cr.ICD10})${cr.s_name}; ` : ''\r\n    result += (isACME && !!ar && acme === ar.ICD10 ? `(ПП-${acme})${ar.s_name}; ` : \r\n          !!ar ? `(А-${ar.ICD10})${ar.s_name}; ` : '')\r\n    result += (isACME && !!br && acme === br.ICD10 ? `(ПП-${acme})${br.s_name}; ` : \r\n          !!br ? `(Б-${br.ICD10})${br.s_name}; ` : '')\r\n    result += (isACME && !!dr && acme === dr.ICD10 ? `(ПП-${acme})${dr.s_name}; ` : \r\n          !!dr ? `(Г-${dr.ICD10})${dr.s_name}; ` : '')\r\n    if (rowData.death_reasons && rowData.death_reasons.length>0) { \r\n      result +=\"Сопутствующие: \" \r\n      rowData.death_reasons.forEach(el=>{\r\n        result +=`(${el.diagnosis?.ICD10})${el.diagnosis?.s_name}; `\r\n      })          \r\n    }\r\n    return <span style={{fontSize:'smaller'}}>{result}</span>\r\n  }\r\n\r\n  const filterClearTemplate = (options:any) => {\r\n        return <Button type=\"button\" icon=\"pi pi-times\" onClick={options.filterClearCallback} className=\"p-button-secondary\"></Button>;\r\n    }\r\n   const filterApplyTemplate = (options:any) => {\r\n        return <Button type=\"button\" icon=\"pi pi-check\" \r\n        onClick={options.filterApplyCallback} className=\"p-button-success\"></Button>\r\n    }\r\n  const dbBodyTemplate = (rowData: ICertificate)=>{\r\n    let _result =''\r\n    const birth = rowData.patient?.birth_date\r\n    if (!!birth) _result = `${birth.slice(8,10)}.${birth.slice(5,7)}.${birth.slice(0,4)}`  \r\n    return _result\r\n  }  \r\n  const ddBodyTemplate = (rowData: ICertificate)=>{\r\n    let _result =''    \r\n    const death = !rowData.death_datetime ? !rowData.death_year ? false : rowData.death_year.toString() : rowData.death_datetime \r\n    if (death && death.length>4) {\r\n       _result = `${death?.slice(8,10)}.${death.slice(5,7)}.${death.slice(0,4)}`\r\n    } else if (death && death.length<5){\r\n       _result =death       \r\n    } \r\n    return _result\r\n  }  \r\n  const ageBodyTemplate = (rowData: ICertificate)=>{\r\n    if (!rowData.death_datetime || !rowData.patient?.birth_date) return ''   \r\n    const dd = new Date(rowData.death_datetime)\r\n    const db = new Date(rowData.patient?.birth_date)\r\n    let age = dd.getFullYear() - db.getFullYear()\r\n    if (age === 0) return 0\r\n    const m = dd.getMonth() - dd.getMonth()\r\n    if (m < 0 || (m === 0 && dd.getDate() < db.getDate())) age--    \r\n    return age\r\n  }\r\n\r\n  const genderBodyTemplate = (rowData: ICertificate)=>{\r\n    if (!rowData.patient?.gender) return ''\r\n    else return GENDERS[rowData.patient.gender-1].name.slice(0,1)\r\n  }\r\n\r\n  const fioBodyTemplate = (rowData: ICertificate)=>{\r\n      if (!rowData.patient) return \"\"\r\n      else if (!rowData.patient.person) return \"не иденти-фицирован\"          \r\n      const result = getOneLinePersonName(rowData.patient.person.person_name)\r\n      return <>{result}</>\r\n    }\r\n  const deathPlaceBodyTemplate = (rowData: ICertificate) => {\r\n    if (!rowData.death_place) return ''\r\n    else {\r\n     const place = DEAD_PLACE_TYPES.find(el=>el.code === rowData.death_place)\r\n     if (!place) return ''\r\n     else return <span style={{fontSize:'small'}}>{place.name}</span>\r\n    }      \r\n  }     \r\n  const basisDeterminingBodyTemplate = (rowData: ICertificate) => {\r\n    if (!rowData.basis_determining) return ''\r\n    else {\r\n     const basis = BASIS_DERMINING.find(el=>el.code === rowData.basis_determining)\r\n     if (!basis) return ''\r\n     else return <span style={{fontSize:'small'}}>{basis.name}</span>\r\n    }      \r\n  }\r\n  const custodianBodyTemplate = (rowData: ICertificate) => {\r\n    const cusName = rowData.custodian?.name\r\n    if (!cusName) return ''\r\n    else return <span style={{fontSize:'small'}}>{cusName}</span>\r\n  }  \r\n  const custodianFilterTemplate = (options: any) => {\r\n        return <MultiSelect value={options.value} options={organizations || []}  onChange={(e) => options.filterCallback(e.value)} optionLabel=\"name\" placeholder=\"не выбрано\" className=\"p-column-filter\" />;\r\n    }  \r\n  const custodian = isSuperUser ? \r\n    <Column  header=\"Мед. организация\" body={custodianBodyTemplate}          \r\n        filterField='custodian_id' showFilterMatchModes={false}\r\n                      filterClear={filterClearTemplate} filterApply={filterApplyTemplate}\r\n                      filter filterElement={custodianFilterTemplate}                    \r\n        style={{ flexGrow: 1, flexBasis: '120px' }}> </Column> :\r\n    <></>                  \r\n  const doctorBodyTemplate = (rowData: ICertificate) => {\r\n    if (!rowData.author) return ''\r\n    else {       \r\n      const result = getOneLinePersonName(rowData.author.doctor.person_name)\r\n      return  <span style={{fontSize:'small'}}>{result}</span>\r\n    }      \r\n  }\r\n  const positionBodyTemplate = (rowData: ICertificate) => {\r\n    if (!rowData.author?.doctor.position ) return ''\r\n    else return  <span style={{fontSize:'small'}}>{rowData.author.doctor.position.name}</span>         \r\n  }  \r\n  const issueDateBodyTemplate = (rowData: ICertificate) => {\r\n    const iDate = rowData.issue_date\r\n    if (!iDate ) return ''    \r\n    else return  <span style={{fontSize:'small'}}>{`${iDate.slice(8,10)}.${iDate.slice(5,7)}.${iDate.slice(0,4)}`}</span>         \r\n  }\r\n\r\n  const actionBodyTemplate = (rowData: ICertificate) => {       \r\n        return rowData.id && (\r\n            <React.Fragment>\r\n                <Button icon=\"pi pi-pencil\" className=\"p-button-rounded p-button-success p-mr-2\" onClick={()=>userStore.history().push(`${CERTIFICATE_ROUTE}/${rowData.id}?q=0`)} />                \r\n            </React.Fragment>\r\n        )\r\n    }\r\n  const loadCertificatesLazy = (event: {first:number, last:number}) => {\r\n    //console.log(\"loadCertificatesLazy first, last\", event.first, event.last)      \r\n      setLazyLoading(true)         \r\n      certificateStore.getList(()=>{setLazyLoading(false)}, event.first, event.last < certificateStore.count ?  event.last : certificateStore.count-1)      \r\n  }   \r\n  const sortLazy = (e: DataTableSortParams) => {    \r\n    setLazyLoading(true) \r\n    const order =  e.sortOrder ? DIRECTION[e.sortOrder] : DIRECTION[0]    \r\n    if (e.sortField && e.sortField !=='rowNumber') {\r\n      certificateStore.sorts = [`${e.sortField} ${order}`]  \r\n      certificateStore.getList(()=>{setLazyLoading(false)})    \r\n    }  \r\n    if (e.sortOrder) setSortOrder(e.sortOrder)   \r\n    if (e.sortField) setSortField(e.sortField)\r\n    \r\n  }  \r\n  const basisDeterminingFilterTemplate = (options: any) => {\r\n        return <MultiSelect value={options.value} options={BASIS_DERMINING}  onChange={(e) => options.filterCallback(e.value)} optionLabel=\"name\" placeholder=\"не выбрано\" className=\"p-column-filter\" />;\r\n    }\r\n  const deathPlaceFilterTemplate = (options: any) => {\r\n        return <MultiSelect value={options.value} options={DEAD_PLACE_TYPES}  onChange={(e) => options.filterCallback(e.value)} optionLabel=\"name\" placeholder=\"не выбрано\" className=\"p-column-filter\" />;\r\n    }   \r\n    \r\n  const fioFilterTemplate = (options: any) => {\r\n        return <InputText value={options.value}  onChange={(e) => options.filterCallback(e.target.value)}  placeholder=\"строка поиска\" className=\"p-column-filter\" />\r\n    }  \r\n  \r\n  const footer = `Всего ${ certificateStore.count } свидетельств(а).`  \r\n  const layoutParams = {\r\n        title: 'СПИСОК СВИДЕТЕЛЬСТВ',     \r\n        url: LIST_ROUTE,\r\n        content:\r\n        <>\r\n          <Toast ref={toast} />\r\n          <div id='tableDiv' className='p-card' >             \r\n              <DataTable ref={dt} value={certificateStore.certs}  responsiveLayout=\"scroll\" scrollDirection=\"both\"\r\n                emptyMessage=\"нет данных, удовлетворяющих запросу\" scrollable scrollHeight=\"72vh\" \r\n                selectionMode=\"single\" selection={selected}  dataKey=\"id\" size=\"small\"\r\n                footer={footer} loading={lazyLoading} rows={certificateStore.count}\r\n                onSelectionChange={e =>{\r\n                  if ( e.value.id ) {\r\n                    certificateStore.select(certificateStore.certs.findIndex(el=>el.id === e.value.id))\r\n                    setSelected(e.value)\r\n                  }\r\n                }} filterDisplay=\"menu\" \r\n                onFilter={e=>{\r\n                  console.log('e',e)\r\n                  let _filters = {...propsFilters} as any                  \r\n                  let _constraint: any = e.filters['issue_date'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`issue_date${RunsackFilterMatchMode[_constraint.constraints[0].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value                  \r\n                  if (_constraint && _constraint.constraints[1] && _constraint.constraints[1].value) \r\n                    _filters[`issue_date${RunsackFilterMatchMode[_constraint.constraints[1].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[1].value\r\n                    _constraint = e.filters['primory_reason'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`reason_ACME${RunsackFilterMatchMode[_constraint.constraints[0].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value                  \r\n                  if (_constraint && _constraint.constraints[1] && _constraint.constraints[1].value) \r\n                    _filters[`reason_ACME${RunsackFilterMatchMode[_constraint.constraints[1].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[1].value  \r\n                   _constraint = e.filters['patient_birth_date'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`patient_birth_date${RunsackFilterMatchMode[_constraint.constraints[0].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value                  \r\n                  if (_constraint && _constraint.constraints[1] && _constraint.constraints[1].value) \r\n                    _filters[`patient_birth_date${RunsackFilterMatchMode[_constraint.constraints[1].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[1].value  \r\n                  _constraint = e.filters['patient_death_date'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`death_datetime${RunsackFilterMatchMode[_constraint.constraints[0].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value                  \r\n                  if (_constraint && _constraint.constraints[1] && _constraint.constraints[1].value) \r\n                    _filters[`death_datetime${RunsackFilterMatchMode[_constraint.constraints[1].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[1].value     \r\n                  _constraint = e.filters['number'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`number${RunsackFilterMatchMode[_constraint.constraints[0].matchMode as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value\r\n                  _constraint = e.filters['patient_fio'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`patient_fio${RunsackFilterMatchMode[_constraint.constraints[0].matchMode as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value  \r\n                  _constraint = e.filters['basis_determining']   \r\n                  if (_constraint && _constraint.value) {\r\n                    const values = _constraint.value as IReference[]\r\n                    let _codes = [] as string[]\r\n                    values.map(item=> _codes.push(item.code)) \r\n                    _filters.basis_determining_in = _codes   \r\n                  }\r\n                  _constraint = e.filters['death_place']   \r\n                  if (_constraint && _constraint.value) {\r\n                    const values = _constraint.value as IReference[]\r\n                    let _codes = [] as string[]\r\n                    values.map(item=> _codes.push(item.code)) \r\n                    _filters.death_place_in = _codes   \r\n                  }\r\n                  _constraint = e.filters['custodian_id']   \r\n                  if (_constraint && _constraint.value) {\r\n                    const values = _constraint.value as IReferenceId[]\r\n                    let _codes = [] as number[]\r\n                    values.map(item=> _codes.push(item.id)) \r\n                    _filters.custodian_id_in = _codes   \r\n                  }\r\n                  certificateStore.filters = _filters\r\n                  //setLazyLoading(true)\r\n                  //certificateStore.getList(()=>{setLazyLoading(false)})  \r\n                }}                \r\n                virtualScrollerOptions={{ lazy: true, onLazyLoad: loadCertificatesLazy, itemSize: 6, delay: 200}} filters={filters} filterLocale={'ru'}\r\n                onRowDoubleClick={()=>userStore.history().push(`${CERTIFICATE_ROUTE}/${certificateStore.cert.id}?q=0`)}\r\n                onSort={sortLazy} sortField={sortField} sortOrder={sortOrder}\r\n                >  \r\n                    <Column header=\"№ п.п\"  body={orderNumberBodyTemplate} sortable\r\n                      sortField='rowNumber'\r\n                      style={{ flexGrow: 1, flexBasis: '58px' }} frozen></Column>                                   \r\n                    <Column header=\"Серия Номер Вид\" body={seriesNumberBodyTemplate} filterField='number'\r\n                      filter filterPlaceholder=\"Поиск по номеру\" dataType='text' showFilterOperator ={false}                                           \r\n                      filterClear={filterClearTemplate} filterApply={filterApplyTemplate} sortField='number' sortable style={{ flexGrow: 1, flexBasis: '110px' }} frozen></Column>\r\n                    <Column header=\"Причины смерти и соп. патологии\" showFilterOperator ={false}                     \r\n                     filterField='primory_reason'  filterPlaceholder=\"код ПП\" filter dataType='numeric'\r\n                     filterClear={filterClearTemplate} filterApply={filterApplyTemplate}  \r\n                      style={{ flexGrow: 1, flexBasis: '250px' }} body={reasonsBodyTemplate}></Column>\r\n                    <Column  header=\"ФИО\" body={fioBodyTemplate} \r\n                      sortField='patient.person.person_name.family'\r\n                      dataType='text' showFilterOperator ={false}\r\n                      filter filterField='patient_fio' filterClear={filterClearTemplate} filterApply={filterApplyTemplate}  filterElement={fioFilterTemplate}\r\n                      sortable style={{ flexGrow: 1, flexBasis: '140px' }}></Column>                    \r\n                    <Column  header=\"ДР\" body={dbBodyTemplate} filter sortable\r\n                       showFilterOperator={false} dataType='date' filterPlaceholder=\"дата рождения\"\r\n                     filterField='patient_birth_date' sortField='patient.birth_date' \r\n                     filterClear={filterClearTemplate} filterApply={filterApplyTemplate}  \r\n                       style={{ flexGrow: 1, flexBasis: '110px' }}> </Column>\r\n                    <Column  header=\"ДС\" body={ddBodyTemplate} filter sortable\r\n                       showFilterOperator={false} dataType='date' filterPlaceholder=\"дата смерти\"\r\n                     filterField='patient_death_date' sortField='death_datetime' \r\n                     filterClear={filterClearTemplate} filterApply={filterApplyTemplate}  \r\n                       style={{ flexGrow: 1, flexBasis: '110px' }}> </Column>\r\n                    <Column  header=\"Лет\" body={ageBodyTemplate} \r\n                      style={{ flexGrow: 1, flexBasis: '46px' }}> </Column>\r\n                    <Column  header=\"Пол\" body={genderBodyTemplate} sortField='patient.gender'\r\n                      sortable style={{ flexGrow: 1, flexBasis: '56px' }}> </Column>    \r\n                    <Column  header=\"Адрес проживания\" sortable \r\n                      field='patient.person.address.streetAddressLine'\r\n                      style={{ flexGrow: 1, flexBasis: '200px' }}> </Column>  \r\n                    <Column  header=\"Адрес смерти\" sortable\r\n                      field='death_addr.streetAddressLine'\r\n                      style={{ flexGrow: 1, flexBasis: '200px' }}> </Column>                     \r\n                    <Column  header=\"Смерть наступила\" body={deathPlaceBodyTemplate}\r\n                      showFilterMatchModes={false} filterElement={deathPlaceFilterTemplate}\r\n                      filterClear={filterClearTemplate} filterApply={filterApplyTemplate} \r\n                      filter filterField='death_place' sortField='death_place' sortable \r\n                      style={{ flexGrow: 1, flexBasis: '140px' }}> </Column>  \r\n                    <Column  header=\"Основание заключения\" body={basisDeterminingBodyTemplate}\r\n                      sortField='basis_determining' sortable\r\n                      filterField='basis_determining' showFilterMatchModes={false}\r\n                      filterClear={filterClearTemplate} filterApply={filterApplyTemplate}\r\n                      filter filterElement={basisDeterminingFilterTemplate} \r\n                      style={{ flexGrow: 1, flexBasis: '140px' }}> </Column>\r\n                    {custodian}\r\n                    <Column  header=\"Специалист\" body={doctorBodyTemplate}\r\n                      style={{ flexGrow: 1, flexBasis: '120px' }}> </Column>\r\n                    <Column  header=\"Должность\" body={positionBodyTemplate}\r\n                      style={{ flexGrow: 1, flexBasis: '130px' }}> </Column>  \r\n                    <Column  header=\"Выдано\" body={issueDateBodyTemplate} \r\n                     showFilterOperator={false} dataType='date' \r\n                     filterField='issue_date' sortField='issue_date' filterPlaceholder=\"дата выпуска\"\r\n                     filterClear={filterClearTemplate} filterApply={filterApplyTemplate}                       \r\n                     filter sortable style={{ flexGrow: 1, flexBasis: '100px' }}> </Column>                \r\n                    <Column body={actionBodyTemplate} exportable={false} \r\n                      style={{ flexGrow: 1, flexBasis: '100px' }}></Column>\r\n                </DataTable>\r\n          </div>  \r\n        </>\r\n    }\r\n\r\n return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n )  \r\n}\r\nexport default observer(ListPage)","export default __webpack_public_path__ + \"static/media/security.f40a12e4.png\";","const LoginImageDiv = () => {\r\n  return (\r\n    <div className='login-image'>\r\n      <div className='login-image-content'>\r\n        <h1>Медицинское</h1>\r\n        <h1>свидетельство</h1>\r\n        <h1>о смерти</h1>\r\n        <h3>версия 3.0</h3>\r\n        <h3>(с учетом требований CDA_R2 уровня 3)</h3>\r\n      </div>\r\n      <div className='login-footer'>\r\n        <p>2022 © АО \"АМИАЦ\"</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default LoginImageDiv\r\n","import { observer } from 'mobx-react-lite'\r\nimport { useContext, useState } from 'react'\r\nimport { FC } from 'react'\r\nimport { Link} from 'react-router-dom'\r\nimport { Context } from '..'\r\nimport logo from \"../images/security.png\"\r\nimport '../styles/login.css'\r\nimport  '../styles/components/Inputtext.css'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport {Password} from 'primereact/password'\r\nimport { Button } from 'primereact/button'\r\nimport { Field, Form } from 'react-final-form'\r\nimport { classNames } from 'primereact/utils'\r\nimport LoginImageDiv from '../static/LoginImageDiv'\r\n\r\ninterface IAuth {\r\n  email: string\r\n  password: string\r\n}\r\nconst LoginPage: FC = () => {    \r\n  const [email, setEmail] = useState<string>('')\r\n  const {userStore} = useContext(Context)   \r\n  \r\n  const validate = (data: IAuth) => {\r\n    let errors: any = {}        \r\n        if (!data.email) {\r\n            errors.email = 'Поле <Email> обязательно'\r\n        } else if (/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(data.email)){\r\n          setEmail(data.email)\r\n        }\r\n        if (!data.password) {\r\n            errors.password = 'Поле <Пароль> обязательно'\r\n        }        \r\n        return errors\r\n  }\r\n  const onSubmit = async (data: IAuth, form: any) => {          \r\n    userStore.login(data.email, data.password)        \r\n  }\r\n  const onPassordRecovery = async () => {          \r\n    userStore.renew_link(email)        \r\n  }\r\n  const isFormFieldValid = (meta: any) => !!(meta.touched && meta.error)\r\n  const getFormErrorMessage = (meta: any) => {\r\n    return (isFormFieldValid(meta) && <small className=\"p-error\">{meta.error}</small>)\r\n  }    \r\n  return (\r\n  <>\r\n    <div className=\"login-body\">\r\n      <div className=\"login-wrapper\">\r\n        <div className=\"login-panel\">\r\n          <img src={logo} className='logo' alt=\"logo\"></img>\r\n          <div id=\"clickForm\" className=\"login-form\" >\r\n            <h2>Авторизация</h2>\r\n            <p>Нет учетной записи? <Link to=\"/registration\">Регистрация</Link></p>\r\n            <Form onSubmit={onSubmit} initialValues={{email: '', password: '' }} \r\n              validate={validate} \r\n              render={({ handleSubmit }) => (\r\n              <form  onSubmit={handleSubmit}  className=\"p-fluid\">\r\n                <Field name=\"email\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <i className=\"pi pi-envelope\" />\r\n                        <InputText id=\"email\"  autoFocus {...input} className={classNames({ 'p-invalid': isFormFieldValid(meta) })} />\r\n                        <label htmlFor=\"email\" \r\n                        className={classNames({ 'p-error': isFormFieldValid(meta) })}>Email*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"password\"  render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password\" autoComplete='off' {...input} toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n              <Button type=\"submit\" label=\"ВОЙТИ\" style={{marginBottom:\"1rem\"}}/>   \r\n              <Button type=\"button\" onClick={onPassordRecovery} label=\"не помню пароль\" className=\"p-button-link\"  /> \r\n            </form>)}/>            \r\n          </div>\r\n        </div>  \r\n        <LoginImageDiv/>      \r\n      </div>\r\n    </div>\r\n  </>\r\n)}\r\nexport default observer(LoginPage)","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useEffect } from 'react'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { CERTIFICATE_ROUTE, HOME_ROUTE, LIST_ROUTE, MO_SETTINGS_ROUTE } from '../utils/consts'\r\nimport { Button } from 'primereact/button'\r\nimport { Card } from 'primereact/card'\r\nimport { DataTable } from 'primereact/datatable'\r\nimport { Column } from 'primereact/column'\r\nimport { Divider } from 'primereact/divider'\r\nimport { Context } from '..'\r\nimport { ProgressSpinner } from 'primereact/progressspinner'\r\n\r\ntype MainPageProps = {}\r\n\r\nconst MainPage: FC<MainPageProps> = (props: MainPageProps) => {\r\n  const {userStore, certificateStore, layoutStore} = useContext(Context)\r\n  useEffect(()=>{\r\n    if (userStore.userInfo) certificateStore.userInfo = userStore.userInfo\r\n    if (certificateStore.certs.length===0) {\r\n      layoutStore.isLoading = true\r\n      certificateStore.getList(()=>{layoutStore.isLoading = false})      \r\n    }            \r\n  },[certificateStore, layoutStore, userStore.userInfo])\r\n  \r\n  const news =[{version:\"3.005\",record:\"Уведомления об активности (колокольчик) теперь работают; Улучшена работа списка свидетельств; исправлена ошибка ввода дат с точностью до года.\"},{version:\"3.004\",record:\"Улучшена работа вкладки ввода причин; исправлена ошибка выбора жд_ст населенных пунктов при вводе адреса.\"},{version:\"3.003\",record:\"Улучшена работа списка. Фильтрация по датам рождения, первопричинам, МО в списке\"},{version:\"3.002\",record:\"Фильтрация по датам смерти в списке\"},\r\n  {version:\"3.001\",record:\"Исправлена ошибка нумерации в списке\"},\r\n  {version:\"3.000\",record:\"с учетом требований CDA_R2 уровня 3\"}]\r\n  const layoutParams= {\r\n    title: 'Главная',     \r\n    url: HOME_ROUTE,\r\n    content: userStore ? ( \r\n      <>     \r\n        <div className=\"p-d-flex p-flex-column p-jc-around p-flex-md-row p-flex-wrap\">\r\n          <Button style={{minWidth:'243px'}} className=\"p-mr-2 p-mb-2 p-shadow-3\" label=\"Ввод свидетельства\"  title=\"Форма ввода свидетельства\" \r\n          onClick={(e)=>{userStore.history().push(`${CERTIFICATE_ROUTE}/${certificateStore.cert.id}?q=0`)}}/>\r\n            <Button style={{minWidth:'243px'}} className=\"p-button-secondary p-mr-2 p-mb-2 p-shadow-3\" label=\"Настройки\" title=\"Настройки учетной записи\" onClick={(e)=>{userStore.history().push(`${MO_SETTINGS_ROUTE}/${userStore.userInfo?.organization.id}`)}}/>\r\n            <Button style={{minWidth:'243px'}} className=\"p-button-secondary p-mr-2 p-mb-2 p-shadow-3\" id=\"reports\" label=\"Отчеты\" title=\"Формирование отчетов\" />\r\n            <Button style={{minWidth:'243px'}} className=\"p-mr-2 p-mb-2 p-shadow-3\" label=\"Перинатальное свидетельство\" /> \r\n            <Button className=\"p-button-secondary p-mr-2 p-mb-2 p-shadow-3\" \r\n            id=\"repBt\" style={{minWidth:'243px'}} label=\"ЖУРНАЛ\" title=\"Журнал выданных свидетельств и копий\" />                     \r\n            <Button style={{minWidth:'243px'}} className=\"p-button-success p-mr-2 p-mb-2 p-shadow-3\" label=\"Список свидетельств\" title=\"Список введеных свидетельств\" onClick={(e)=>{userStore.history().push(LIST_ROUTE)}}/>            \r\n        </div> \r\n        <Divider style={{marginTop:'1rem', marginBottom:'1rem'}}/>\r\n        <div className=\"p-d-flex p-flex-column p-jc-around p-flex-md-row p-flex-wrap\">\r\n          <Card className=\"p-mr-2 p-mb-2\" title=\"Последние изменения\" >\r\n            <DataTable className=\"p-datatable-sm\" value={news} responsiveLayout='scroll'>\r\n              <Column field=\"version\" header=\"Версия\"></Column>\r\n              <Column field=\"record\" header=\"Что нового\"></Column>\r\n            </DataTable> \r\n          </Card>\r\n        </div>                  \r\n      </>\r\n    ) : (<ProgressSpinner/>)   \r\n  }  \r\n  return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}\r\nexport default observer(MainPage)","export default __webpack_public_path__ + \"static/media/ava.ec8d39a0.jpg\";","export default __webpack_public_path__ + \"static/media/hospital.0e4a3324.jpg\";","import { FC, useContext, useEffect, useRef, useState } from 'react'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport ava from '../images/hospital.jpg'\r\nimport '../styles/pages/ProfilePage.css'\r\nimport '../styles/components/AutoComplete.css'\r\nimport { DESTROY_OPTION, MO_SETTINGS_ROUTE} from '../utils/consts'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport OrganizationService from '../services/OrganizationService'\r\nimport { IOrganization } from '../models/IOrganization'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { ProgressSpinner } from 'primereact/progressspinner'\r\nimport { IAudit } from '../models/IAudit'\r\nimport { classNames } from 'primereact/utils'\r\nimport { InputMask } from 'primereact/inputmask'\r\nimport { IContact } from '../models/IContact'\r\nimport { Button } from 'primereact/button'\r\nimport { Toast } from 'primereact/toast'\r\nimport { DEFAULT_ERROR_TOAST } from '../utils/defaults'\r\nimport { Context } from '..'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { IReferenceId } from '../models/IReference'\r\nimport AddressDialog from '../components/dialogs/AddressDialog'\r\nimport { observer } from 'mobx-react-lite'\r\nimport AddressFC2 from '../components/inputs/InputAddress'\r\nimport { IAddressR } from '../models/requests/IAddressR'\r\n\r\n// страница настроек профиля организации\r\n// Organization profile page\r\n\r\n// используем роут с параметром id для загрузки с API\r\ninterface IMatch extends IRouteMatch {  \r\n  params: {id: string}\r\n}\r\ninterface SettingsPageProps extends IRouteProps { \r\n    match: IMatch  \r\n}\r\n\r\n\r\nconst SettingsPage: FC<SettingsPageProps> = (props: SettingsPageProps) =>{ \r\n  const {userStore, addressStore} = useContext(Context)\r\n  const [audits, setAudits] = useState<IAudit[]>([])\r\n  const [submitted, setSubmitted] = useState(false)\r\n  const [email, setEmail] = useState<IContact>({telcom_value:'', main:false} as IContact) \r\n  const [phone, setPhone] = useState<IContact>({telcom_value:'', main:true} as IContact)\r\n  const [organization, setOrganization] = useState<IOrganization | null>(null)\r\n  const [ID, setID] = useState<number | null>(null)\r\n  const toast = useRef<Toast>(null) \r\n  useEffect(()=>{\r\n    if (organization!==null && organization.id !== ID) {\r\n      setPhone({telcom_value:'', main:true} as IContact)\r\n      setEmail({telcom_value:'', main:false} as IContact)          \r\n      organization.contacts.forEach((item)=>{if (item.main) setPhone({...item})\r\n        else setEmail({...item, telcom_value: item.telcom_value.replace('mailto:','')})})\r\n      setID(organization.id)      \r\n    }\r\n  },[organization, ID])\r\n\r\n  useEffect(()=>{\r\n    if (organization===null && props.match.params.id) {\r\n        OrganizationService.getOrganization(props.match.params.id)\r\n        .then(response=>{        \r\n          setOrganization(response.data)        \r\n        })\r\n        .catch((reason=>{console.log(reason)\r\n          if (toast!==null && toast.current!==null) toast.current.show(DEFAULT_ERROR_TOAST)\r\n        }))      \r\n    }\r\n  },[organization, props.match.params.id, userStore.userInfo])\r\n  const [organizations, setOrganizations] = useState<IReferenceId[] | null>(null)\r\n  useEffect(()=>{\r\n    if (organizations===null && userStore.userInfo\r\n       && userStore.userInfo.roles.includes('ADMIN')) \r\n    OrganizationService.getOrganizations().then(response=>\r\n      setOrganizations(response.data.organizations)\r\n    ).catch(()=>{\r\n      setOrganizations([])\r\n      if (toast!==null && toast.current!==null) toast.current.show(DEFAULT_ERROR_TOAST)\r\n    })},[organizations, userStore.userInfo])\r\n  const changesAudit = (fieldName: string, field: string, oldValue: string, newValue: string) => {\r\n    if (organization ===null) return\r\n    let _audits = audits\r\n    const audit = _audits.find(element=>element.field === field) || {field, before: oldValue} as IAudit\r\n    if (audit.after === undefined) _audits.push(audit)    \r\n    audit.after = newValue   \r\n    audit.detail = `${fieldName}: ${audit.before} -> ${audit.after}`     \r\n    setAudits(_audits)\r\n  }\r\n  \r\n\r\n  // Обработчик изменения контактов      \r\n  const onContactChange = (contact: IContact) => { \r\n      if (organization === null) return  \r\n      let _contact = contact.telcom_value==='' ?\r\n      (contact.id ? {...contact,...DESTROY_OPTION} : {...contact}) :    \r\n      (contact.id ? {id:contact.id, parent_guid: contact.parent_guid, telcom_use: contact.telcom_use, telcom_value: contact.telcom_value, main: contact.main} : {...contact}) \r\n      if (organization.contacts === undefined) organization.contacts = []\r\n      if (_contact.id) {        \r\n          const idx = organization.contacts.findIndex(item=>item.id===_contact.id)  \r\n          if (idx>-1) organization.contacts[idx] = _contact        \r\n      } else organization.contacts.push(_contact)       \r\n  }\r\n\r\n  // проверка возможности сохранения\r\n  const isSaveAvaible = () : boolean => {\r\n    if (organization === null) return false    \r\n    let _result = audits.length > 0    \r\n    _result = _result && /tel:\\+?[-0-9().]+/i.test(phone.telcom_value)    \r\n    _result = _result && (/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='')    \r\n    _result = _result && !(!organization.name || (!organization.name && organization.name.length > 100))\r\n    _result = _result && !!organization.name_full    \r\n    //_result = _result && !(!organization.address || !organization.address.houseGUID)\r\n   \r\n    return  _result\r\n  }  \r\n  const saveOrganization = () => {\r\n    if (organization===null) return    \r\n    setSubmitted(true)\r\n    if (isSaveAvaible()) {\r\n      onContactChange(phone)\r\n      onContactChange(email)\r\n      let _organization = { id: organization.id,                               \r\n                            name: organization.name,\r\n                            name_full: organization.name_full,\r\n                            license: organization.license || null,\r\n                            license_data: organization.license_data || null,\r\n                            okpo: organization.okpo || null,\r\n                            sm_code: organization.sm_code || '00',\r\n                            contacts_attributes: organization.contacts,\r\n                            address_attributes: organization.address\r\n                           } as any                                                     \r\n      OrganizationService.updateOrganization({Organization: _organization, audits: audits})\r\n        .then(response=>{          \r\n          setAudits([])\r\n          setSubmitted(false)\r\n          setOrganization(response.data)\r\n          //console.log('response.data',response.data)\r\n          if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Успешно', detail: 'Изменения применены', life:3000 })\r\n        })\r\n        .catch((reason=>{console.log(reason)\r\n          if (toast!==null && toast.current!==null) toast.current.show(DEFAULT_ERROR_TOAST)\r\n        }))    \r\n    } else if (toast!==null && toast.current!==null) toast.current.show({ severity: 'info', summary: 'Отклонено', detail: 'Изменения отсутствуют или неприменимы', life:3000 })   \r\n  } \r\n  \r\n  const adminOpportunities = ()=>{    \r\n    return (userStore.userInfo && userStore.userInfo.roles.includes('ADMIN')) ? \r\n    (<>\r\n      <div className=\"p-field p-col-12\">\r\n        <label htmlFor=\"organization\" >Выбрать медорганизацию</label>\r\n        <Dropdown id=\"organization\"  options={organizations || []}\r\n          onChange={(e)=>{            \r\n            if (e.value.id) {\r\n              const history = userStore.history()\r\n              let link = `${MO_SETTINGS_ROUTE}/${e.value.id}`\r\n              setOrganization(null)              \r\n              history.push(link)              \r\n            }  \r\n          }}\r\n          filter showClear optionLabel=\"name\" />\r\n      </div>\r\n    </>) \r\n    : (<></>)     \r\n  }\r\n  const layoutParams = {\r\n    title: 'Профиль медорганизации',     \r\n    url: MO_SETTINGS_ROUTE,\r\n    content: organization ? (<>    \r\n    <div className=\"card widget-user-card\" key={props.match.params.id}>\r\n      <div className=\"user-card-header\">\r\n        <img src={ava} alt=\"\" className=\"user-card-avatar\" />\r\n      </div>\r\n      <div className=\"user-card-body\">  \r\n      <div className=\"user-card-title\">\r\n        {organization.name || ''}\r\n      </div>             \r\n      <div className=\"user-card-subtext\">{organization.oid}</div>\r\n      <div className=\"p-grid user-card-stats\">\r\n        <div className=\"p-col-4\">\r\n          <i className=\"pi pi-users\"></i>\r\n          <div>14 Создано</div>\r\n        </div>\r\n        <div className=\"p-col-4\">\r\n          <i className=\"pi pi-bookmark\"></i>\r\n          <div>2 Выданно</div>\r\n        </div>\r\n        <div className=\"p-col-4\">\r\n          <i className=\"pi pi-check-square\"></i>\r\n          <div>6 Отправленно</div>\r\n        </div>\r\n      </div>        \r\n    </div>\r\n    <div className='card' style={{textAlign: 'left'}} >      \r\n        <div className='p-fluid p-formgrid p-grid'>\r\n          <div className=\"p-field p-col-12 p-md-5 \">\r\n            <label htmlFor=\"name\">Наименование</label>\r\n            <InputText id=\"name\" required value={organization.name || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"Наименование\", \"name\", _organization.name || '', e.target.value || '')\r\n                   _organization.name = e.target.value\r\n                  setOrganization(_organization) \r\n              }}\r\n              autoFocus className={classNames({ 'p-invalid': submitted && organization.name && organization.name?.length > 100})}\r\n            />\r\n            {submitted && (!organization.name || (organization.name && organization.name.length > 100)) && <small className=\"p-error\">Краткое наименование более 100 знаков или отсутствует</small>}\r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-7\">\r\n            <label htmlFor=\"name_full\">Полное наименование</label>\r\n            <InputText id=\"name_full\" value={organization.name_full || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}                  \r\n                  changesAudit(\"Полное наименование\", \"name_full\", _organization.name || '', e.target.value || '')\r\n                  _organization.name_full = e.target.value\r\n                  setOrganization(_organization) \r\n              }}\r\n              required className={classNames({ 'p-invalid': submitted && !organization.name_full})}\r\n            />\r\n            {submitted && !organization.name_full && <small className=\"p-error\">Полное наименование обязательно</small>}\r\n          </div>\r\n          <div className=\"p-field p-col-12\">\r\n            <label htmlFor=\"license\">Cерия и номер лицензии на осуществление медицинской деятельности</label>\r\n            <InputText id=\"license\" value={organization.license || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"Cерия и номер лицензии\", \"license\", _organization.license || '', e.target.value || '')\r\n                   _organization.license = e.target.value\r\n                  setOrganization(_organization) \r\n              }}               \r\n            />            \r\n          </div>\r\n          <div className=\"p-field p-col-12\">\r\n            <label htmlFor=\"license_data\">указание на Федеральную службу по надзору в сфере здравоохранения и дату регистрации лицензии</label>\r\n            <InputText id=\"license_data\" value={organization.license_data || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"Данные лицензии\", \"license_data\", _organization.license_data || '', e.target.value || '')\r\n                   _organization.license_data = e.target.value\r\n                  setOrganization(_organization) \r\n              }}               \r\n            />            \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">\r\n            <label htmlFor=\"okpo\">ОКПО</label>\r\n            <InputText id=\"okpo\" value={organization.okpo || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"ОКПО\", \"okpo\", _organization.okpo || '', e.target.value || '')\r\n                  _organization.okpo = e.target.value\r\n                  setOrganization(_organization) \r\n              }}               \r\n            />            \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">\r\n            <label htmlFor=\"sm_code\">Последние две цифры кода в ТФОМС</label>\r\n            <div className=\"p-inputgroup\">\r\n              <span className=\"p-inputgroup-addon\">2800</span>\r\n              <InputMask mask=\"99\" id=\"sm_code\" value={organization.sm_code || ''} \r\n                onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"ТФОМС код\", \"sm_code\", _organization.sm_code || '', e.target.value || '')\r\n                  _organization.sm_code = e.value\r\n                  setOrganization(_organization) \r\n                }}               \r\n              />                            \r\n            </div>                        \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">\r\n            <label htmlFor=\"phone\">телефон</label>\r\n            <InputMask id=\"phone\" required \r\n              type=\"text\" mask=\"tel:+79999999999\"\r\n              value={phone.telcom_value} \r\n              onChange={(e)=>{\r\n                changesAudit(\"телефон\", \"phone\", phone.telcom_value || '', e.target.value || '')  \r\n                setPhone({...phone, telcom_value: e.target.value})                \r\n              }} \r\n              className={classNames({ 'p-invalid': submitted && !/tel:\\+?[-0-9().]+/i.test(phone.telcom_value)})}\r\n            />\r\n            {submitted && !/tel:\\+?[-0-9().]+/i.test(phone.telcom_value) && <small className=\"p-error\">тел.номер некорректен или отсутствует!</small>}            \r\n          </div>\r\n          <div className=\"p-field  p-col-12 p-md-6\">\r\n            <label htmlFor=\"email\">email</label>\r\n            <InputText id=\"email\" type=\"text\" \r\n              value={email.telcom_value} \r\n              onChange={(e)=>{ \r\n                changesAudit(\"email\", \"email\", email.telcom_value || '', e.target.value || '') \r\n                setEmail({...email, telcom_value:e.target.value})  \r\n              }} \r\n              className={classNames({ 'p-invalid': submitted && !(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='')})}\r\n                    />\r\n              {submitted && !(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='') && <small className=\"p-error\">Неверный email</small>}\r\n          </div>      \r\n          <AddressFC2 className=\"p-col-12\" submitted={submitted} \r\n            label='Адрес медорганизации'\r\n            value={organization.address} strictly \r\n            onClear={(value: IAddressR)=>setOrganization({...organization, address: {...value}})}\r\n            onChange={()=>{        \r\n              let _organization = {...organization, address: addressStore.addressProps()}                \r\n              changesAudit(\"Адрес\", \"address\", organization.address?.streetAddressLine || '', _organization.address?.streetAddressLine || '')                 \r\n              setOrganization(_organization)\r\n            }}  \r\n          />\r\n          <div className=\"p-field  p-col-12 p-md-6\">\r\n            <Button label=\"ПРИМЕНИТЬ\"  className=\"p-button-success\" \r\n              style={{marginTop: '22px'}} onClick={saveOrganization}  />\r\n          </div>   \r\n          {adminOpportunities()}          \r\n        </div>        \r\n      </div>             \r\n    </div>\r\n    <Toast ref={toast} /> \r\n    <AddressDialog />        \r\n  </>) : (<><Toast ref={toast} /><ProgressSpinner/></>)\r\n  }\r\n  return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}\r\nexport default observer(SettingsPage)","import { AdminPage } from \"./pages/AdminPage\"\r\nimport CertificatePage from \"./pages/CertificatePage\"\r\nimport DoctorsPage from \"./pages/DoctorsPage\"\r\nimport { ErrorPage } from \"./pages/ErrorPage\"\r\nimport ListPage from \"./pages/ListPage\"\r\nimport LoginPage from \"./pages/LoginPage\"\r\nimport MainPage from \"./pages/MainPage\"\r\nimport { MessagePage } from \"./pages/MessagePage\"\r\nimport { PassordRecoveryPage } from \"./pages/PasswordRecoveryPage\"\r\nimport { ProfilePage } from \"./pages/ProfilePage\"\r\nimport { RegistrationPage } from \"./pages/RegistrationPage\"\r\nimport SettingsPage from \"./pages/SettingsPage\"\r\nimport {\r\n  ADMIN_ROUTE,\r\n  CERTIFICATE_ROUTE,\r\n  ERROR_ROUTE,\r\n  HOME_ROUTE,\r\n  LIST_ROUTE,\r\n  LOGIN_ROUTE,\r\n  MESSAGE_ROUTE,\r\n  PWD_RECOVERY_ROUTE,\r\n  REGISTRATION_ROUTE,\r\n  USER_ROUTE,\r\n  DOCTORS_ROUTE,\r\n  MO_SETTINGS_ROUTE,\r\n} from \"./utils/consts\"\r\n\r\nexport const AUTH_ROUTES = [\r\n  { path: HOME_ROUTE, Component: MainPage },\r\n  { path: ADMIN_ROUTE, Component: AdminPage },\r\n  { path: LIST_ROUTE, Component: ListPage },\r\n  { path: CERTIFICATE_ROUTE + \"/:id\", Component: CertificatePage },\r\n  { path: DOCTORS_ROUTE, Component: DoctorsPage },\r\n  { path: USER_ROUTE + \"/:id\", Component: ProfilePage },\r\n  { path: MO_SETTINGS_ROUTE + \"/:id\", Component: SettingsPage },\r\n  { path: LOGIN_ROUTE, Component: MainPage },\r\n]\r\nexport const NON_AUTH_ROUTES = [\r\n  { path: LOGIN_ROUTE, Component: LoginPage },\r\n  { path: REGISTRATION_ROUTE, Component: RegistrationPage },\r\n  { path: PWD_RECOVERY_ROUTE + \"/:code\", Component: PassordRecoveryPage },\r\n  { path: HOME_ROUTE, Component: LoginPage },\r\n]\r\nexport const PUBLIC_ROUTES = [\r\n  { path: MESSAGE_ROUTE + \"/:message\", Component: MessagePage },\r\n  { path: ERROR_ROUTE + \"/:error\", Component: ErrorPage },\r\n]\r\n","//import React, { useEffect } from 'react';\r\nimport { FC } from 'react'\r\n\r\ntype AdminPageProps = {}\r\n\r\nexport const AdminPage: FC<AdminPageProps> = (props: AdminPageProps) => {\r\n  //const [state, setState] = useState();\r\n\r\n  //useEffect(() => {}, []);\r\n\r\n  return (\r\n    <>\r\n      <h1>AdminPage React TS FC Component</h1>\r\n      <div>List</div>\r\n    </>\r\n  );\r\n};","import { FC, useEffect, useState } from 'react'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport ava from '../images/ava.jpg'\r\nimport '../styles/pages/ProfilePage.css'\r\nimport { ROLES, USER_ROUTE } from '../utils/consts'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { IUserInfo } from '../models/responses/IUserInfo'\r\nimport UsersService from '../services/UsersService'\r\n\r\n// страница настроек профиля пользователя\r\n// User profile page\r\n\r\n// используем роут с параметром id для загрузки с API\r\ninterface IMatch extends IRouteMatch {  \r\n  params: {id: number}\r\n}\r\ninterface ProfilePageProps extends IRouteProps { \r\n    match: IMatch  \r\n}\r\n\r\n\r\nexport const ProfilePage: FC<ProfilePageProps> = (props: ProfilePageProps) =>{ \r\n  const [user, setUser] = useState<IUserInfo | null>(null)\r\n  useEffect(()=>{\r\n    if (user===null && props.match.params.id) UsersService.getUser(props.match.params.id)\r\n    .then(response=>setUser(response.data))\r\n    .catch(()=>console.log('Ошибка получения пользователя')) \r\n  })\r\n  const user_name = `${user?.person_name.family} ${user?.person_name.given_1}`\r\n  const user_team = `${user!==null && user.roles ? ROLES[user.roles.split(' ')[0]] : ''} ${user?.organization.name}`\r\n  const layoutParams = {\r\n    title: 'Профиль пользователя',     \r\n    url: USER_ROUTE,\r\n    content: (<>  \r\n    <div className=\"card widget-user-card\">\r\n      <div className=\"user-card-header\">\r\n        <img src={ava} alt=\"\" className=\"user-card-avatar\" />\r\n      </div>\r\n      <div className=\"user-card-body\">\r\n        <div className=\"user-card-title\">{user_name}</div>\r\n        <div className=\"user-card-subtext\">{user_team}</div>\r\n        <div className=\"p-grid user-card-stats\">\r\n          <div className=\"p-col-4\">\r\n            <i className=\"pi pi-users\"></i>\r\n            <div>14 Создано</div>\r\n          </div>\r\n          <div className=\"p-col-4\">\r\n            <i className=\"pi pi-bookmark\"></i>\r\n            <div>2 Выданно</div>\r\n          </div>\r\n          <div className=\"p-col-4\">\r\n            <i className=\"pi pi-check-square\"></i>\r\n            <div>6 Отправленно</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>      \r\n  </>)\r\n  }\r\n  return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}","import { useHistory} from 'react-router-dom'\r\nimport { Button } from 'primereact/button'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { Password } from 'primereact/password'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { InputMask } from 'primereact/inputmask'\r\nimport { classNames } from 'primereact/utils'\r\nimport  '../styles/components/Dropdown.css'\r\nimport  '../styles/components/Inputtext.css'\r\nimport React, { useContext, useState } from 'react'\r\nimport { FC } from 'react'\r\nimport { Field, Form } from 'react-final-form'\r\nimport { Context } from '..'\r\nimport logo from \"../images/security.png\"\r\nimport { IRegisterForm } from '../models/FormsData/IRegisterForm'\r\nimport { IRegistration } from '../models/requests/IRegistration'\r\nimport LoginImageDiv from '../static/LoginImageDiv'\r\nimport OrganizationService from '../services/OrganizationService'\r\nimport { useEffect } from 'react'\r\nimport { IReferenceId } from '../models/IReference'\r\n\r\nexport const RegistrationPage: FC = () =>{ \r\n  const history = useHistory()  \r\n  const [organizations, setOrganizations] = useState<IReferenceId[] | null>(null)\r\n  useEffect(()=>{\r\n    if (organizations===null) OrganizationService.getOrganizations().then(response=>\r\n      setOrganizations(response.data.organizations)\r\n    ).catch(()=>{\r\n      setOrganizations([])\r\n      history.push(\"/error/Ошибка API при получении списка МО\")\r\n    })},[organizations, history])\r\n  const {userStore} = useContext(Context)  \r\n  const validate = (data: IRegisterForm) => {\r\n    let errors: any = {} \r\n    if (!data.name || (data.name.trim().split(' ').length < 2)){             \r\n            errors.name = 'значение <ФИО> некорректно'\r\n    }       \r\n    if (!data.email) {\r\n       errors.email = 'Поле <Email> обязательно'\r\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(data.email)) {\r\n       errors.email = 'Неверный email Н.п. example@email.com'\r\n    }\r\n    if (!data.password) {\r\n       errors.password = 'Поле <Пароль> обязательно'\r\n    } else if (data.password && data.password!==data.password_confirmation) {\r\n       errors.password_confirmation = 'пароли не совпадают'\r\n    }     \r\n    if (data.organization == null ) {\r\n       errors.organization = 'Поле <Медорганизация> обязательно'       \r\n    }   \r\n    return errors\r\n  }\r\n    const onSubmit = async (data: IRegisterForm, form: any) => {\r\n    const request:IRegistration  = {} as IRegistration \r\n    try {\r\n        const names = data.name.trim().split(' ')\r\n        request.person_name_attributes = {family: names[0], given_1: names[1]}         \r\n        if (names.length>2)  request.person_name_attributes.given_2= names[2]  \r\n        if (data.phone_number) request.contacts_attributes={telcom_value: data.phone_number, main: true}        \r\n        request.email = data.email\r\n        request.password = data.password\r\n        request.password_confirmation = data.password_confirmation\r\n        request.organization_id = data.organization.id                  \r\n        userStore.registration(request)        \r\n    } catch (e:any){\r\n      history.push(\"/error/\"+e.message)      \r\n    }          \r\n  }\r\n  const isFormFieldValid = (meta: any) => !!(meta.touched && meta.error)\r\n  const getFormErrorMessage = (meta: any) => {\r\n    return (isFormFieldValid(meta) && <small className=\"p-error\">{meta.error}</small>)\r\n  } \r\n  if (organizations)\r\n  return (\r\n  <>\r\n    <div className=\"login-body\">\r\n      <div className=\"login-wrapper\">\r\n        <div className=\"login-panel\">\r\n          <img src={logo} className=\"logo_reg\" alt=\"logo\"></img>\r\n          <div className=\"login-form\">\r\n            <h2>Регистрация</h2>            \r\n            <Form onSubmit={onSubmit} initialValues={{name: '', email: '', password: '', password_confirmation: '', organization: null, phone_number: ''}} \r\n              validate={validate} \r\n              render={({ handleSubmit }) => (\r\n              <form onSubmit={handleSubmit} className=\"p-fluid\" >\r\n                <Field name=\"name\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                       <InputText id=\"name\" {...input} autoFocus className={classNames({ 'p-invalid': isFormFieldValid(meta) })} />\r\n                        <label htmlFor=\"name\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Фамилия имя отчество*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                )} />                \r\n                <Field name=\"email\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <i className=\"pi pi-envelope\" />\r\n                        <InputText id=\"email\" {...input} className={classNames({ 'p-invalid': isFormFieldValid(meta) })} />\r\n                        <label htmlFor=\"email\" \r\n                        className={classNames({ 'p-error': isFormFieldValid(meta) })}>Email*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"password\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password\" {...input} toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"password_confirmation\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password_confirmation\" {...input}  toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password_confirmation\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Еще раз пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"organization\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label\">\r\n                       <Dropdown id=\"organization\" {...input} options={organizations}\r\n                        filter showClear optionLabel=\"name\" className=\"p-inputwrapper p-inputwrapper-filled\"/>  \r\n                        <label htmlFor=\"organization\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Медорганизация*</label>                     \r\n                      </span>  \r\n                      {getFormErrorMessage(meta)}                    \r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"phone\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <i className=\"pi pi-phone\" />\r\n                       <InputMask id=\"phone\" {...input} mask=\"+7(999) 999-9999\"  className={classNames({ 'p-invalid': isFormFieldValid(meta) })} />\r\n                        <label htmlFor=\"phone\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Контактный номер</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                )} />\r\n              <Button type=\"submit\" label=\"ДАЛЕЕ\" />    \r\n            </form>)}/>            \r\n          </div>\r\n        </div>  \r\n        <LoginImageDiv/>      \r\n      </div>\r\n    </div>\r\n  </>)\r\n  else return <></>\r\n}","import { FC, useContext } from 'react'\r\nimport { Field, Form } from 'react-final-form'\r\nimport { Button } from 'primereact/button'\r\nimport { Password } from 'primereact/password'\r\nimport { classNames } from 'primereact/utils'\r\nimport { Context } from '..'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport LoginImageDiv from '../static/LoginImageDiv'\r\nimport logo from '../images/security.png'\r\nimport { IPassRenew } from '../models/requests/IPassRenew'\r\ninterface IParams {code: string}\r\ninterface IMatch extends IRouteMatch {  \r\n  params: IParams\r\n}\r\ninterface PasswordRecoveryPageProps extends IRouteProps {  \r\n  match: IMatch  \r\n}\r\nexport const PassordRecoveryPage: FC<PasswordRecoveryPageProps> = (props: PasswordRecoveryPageProps) =>{\r\n  const {userStore} = useContext(Context)\r\n  const validate = (data: IPassRenew) => {\r\n    let errors: any = {}        \r\n    if (!data.password) {\r\n       errors.password = 'Поле <Пароль> обязательно'\r\n    } else if (data.password && data.password!==data.password_confirmation) {\r\n       errors.password_confirmation = 'пароли не совпадают'\r\n    }      \r\n    return errors\r\n  }\r\n  const isFormFieldValid = (meta: any) => !!(meta.touched && meta.error)\r\n  const getFormErrorMessage = (meta: any) => {\r\n    return (isFormFieldValid(meta) && <small className=\"p-error\">{meta.error}</small>)\r\n  }\r\n  const onSubmit = (data: IPassRenew, form: any) => {          \r\n     userStore.pwd_renew(data)       \r\n  }   \r\n  return (\r\n  <>    \r\n    <div className=\"login-body\">\r\n      <div className=\"login-wrapper\">\r\n        <div className=\"login-panel\">\r\n          <img src={logo} className='logo' alt=\"logo\"></img>\r\n          <div  className=\"login-form\" >\r\n            <h2>Восстановить пароль</h2>            \r\n            <Form onSubmit={onSubmit} initialValues={{ activation_link: props.match.params.code,password: '', password_confirmation: '' }} \r\n              validate={validate} \r\n              render={({ handleSubmit }) => (\r\n              <form  onSubmit={handleSubmit}  className=\"p-fluid\">                \r\n                  <Field name=\"password\"  render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password\" autoComplete='off' {...input} toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Новый пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"password_confirmation\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password_confirmation\" {...input}  toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password_confirmation\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Еще раз пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n              <Button type=\"submit\" label=\"ИЗМЕНИТЬ\" />               \r\n            </form>)}/>            \r\n          </div>\r\n        </div>  \r\n        <LoginImageDiv/>      \r\n      </div>\r\n    </div>\r\n  </>)\r\n}","\r\nimport { FC } from 'react';\r\nimport { IRouteMatch } from '../models/IRouteMatch';\r\nimport { IRouteProps } from '../models/IRouteProps';\r\n\r\ninterface IParams {message: string}\r\ninterface IMatch extends IRouteMatch {  \r\n  params: IParams\r\n}\r\ninterface MessagePageProps extends IRouteProps {  \r\n  match: IMatch  \r\n}\r\n\r\n\r\nexport const MessagePage: FC<MessagePageProps> = (props: MessagePageProps) => {\r\n  return (\r\n    <>\r\n      <h1>Внимание:</h1>\r\n      <div>{props.match.params.message}!</div>\r\n    </>\r\n  )\r\n}","\r\nimport { FC } from 'react'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport '../styles/simplePage.css'\r\nimport '../styles/root.css'\r\n\r\n\r\ninterface IMatch extends IRouteMatch {  \r\n  params: {error: string}\r\n}\r\ninterface ErrorPageProps extends IRouteProps { \r\n    match: IMatch  \r\n}\r\n\r\nexport const ErrorPage: FC<ErrorPageProps> = (props: ErrorPageProps) => {\r\n  return (\r\n    <>\r\n      <div className=\"error-body\">\r\n        <div className=\"erpage-block\">\r\n          <h1>Ошибка!</h1>\r\n          <div>{props.match.params.error}</div>\r\n        </div>\r\n      </div>  \r\n    </>\r\n  )\r\n}","import { observer } from 'mobx-react-lite'\r\nimport { useEffect } from 'react'\r\nimport { useContext } from 'react'\r\nimport { FC } from 'react'\r\nimport { Route, Switch, useHistory } from 'react-router-dom'\r\nimport { Context } from '..'\r\nimport { NoMatchPage } from '../pages/NoMatchPage'\r\nimport { AUTH_ROUTES, NON_AUTH_ROUTES, PUBLIC_ROUTES } from '../routes'\r\n\r\nconst AppRouter: FC = observer(() => {  \r\n  const history = useHistory()\r\n  const {userStore} = useContext(Context) \r\n  const token =  userStore.token()\r\n  const isAuth =  userStore.isAuth()\r\n  userStore.setHistory(history)  \r\n  useEffect(()=>{\r\n    if (token.length>0 && !isAuth) {\r\n      userStore.checkAuth()\r\n    }   \r\n  },[token, userStore, isAuth])  \r\n  const chech_routes =  userStore.isAuth() || (token.length>0) ?  AUTH_ROUTES : NON_AUTH_ROUTES    \r\n  return (\r\n    <Switch> \r\n      { chech_routes.map(\r\n        ({path, Component})=><Route key={path} path={path} component={Component} exact/>)\r\n      }          \r\n      { PUBLIC_ROUTES.map(\r\n        ({path, Component})=><Route key={path} path={path} component={Component} exact/>)\r\n      }\r\n      <Route component={NoMatchPage} />                         \r\n    </Switch>     \r\n  )\r\n})\r\nexport default AppRouter\r\n","import {FC} from 'react'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport AppRouter  from './components/AppRouter'\r\nimport './styles/root.css'\r\nimport './styles/primereact.css'\r\nimport 'primeicons/primeicons.css'\r\nimport 'primeflex/primeflex.css'\r\n\r\n\r\nconst App: FC =() => {    \r\n  return (\r\n    <BrowserRouter>\r\n      <AppRouter/>\r\n    </BrowserRouter>  \r\n  )  \r\n}\r\n\r\nexport default App\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport Address from \"../models/FormsData/Address\"\r\nimport { checkFieldNullFlavor, INullFlavorR } from \"../models/INullFlavor\"\r\nimport { IReference } from \"../models/IReference\"\r\nimport { DEFAULT_ADDRESS, IAddressR } from \"../models/requests/IAddressR\"\r\nimport { IFiasItem } from \"../models/responses/IFiasItem\"\r\nimport FiasService from \"../services/FiasService\"\r\nimport { HOME_REGION_CODE } from \"../utils/defaults\"\r\nimport { removeEmpty } from \"../utils/functions\"\r\nexport default class AddressStore {\r\n  private _address: Address\r\n  private _isLoding: boolean\r\n  private _history: any\r\n  private _regionsOptions: IReference[] | undefined\r\n  private _fiasOptions: IFiasItem[] | undefined\r\n  private _dialogVisible: boolean\r\n  private _manualMode: boolean\r\n  private _onAddrComplete?: (() => void) | undefined\r\n\r\n  constructor() {\r\n    this._isLoding = false\r\n    this._address = new Address(DEFAULT_ADDRESS)\r\n    this._dialogVisible = false\r\n    this._manualMode = false\r\n    makeAutoObservable(this)\r\n  }\r\n\r\n  fetchRegionOptions() {\r\n    const _regions = localStorage.getItem(\"Regions\")\r\n    if (_regions) {\r\n      this._regionsOptions = JSON.parse(_regions) as IReference[]\r\n      this.defaultRegion()\r\n    } else\r\n      FiasService.getRegions()\r\n        .then((response) => {\r\n          this._regionsOptions = response.data.data.map((item) => {\r\n            return { code: item.code?.substr(0, 2), name: item.streetAddressLine } as IReference\r\n          })\r\n          localStorage.setItem(\"Regions\", JSON.stringify(this._regionsOptions))\r\n          this.defaultRegion()\r\n        })\r\n        .finally(() => (this._isLoding = false))\r\n  }\r\n\r\n  async searchBar(query: string, regionID = HOME_REGION_CODE as string) {\r\n    this._isLoding = true\r\n    try {\r\n      const response = await FiasService.searchBar(query, regionID)\r\n      if (response.data.data) this._fiasOptions = response.data.data\r\n      else this._fiasOptions = []\r\n      return this._fiasOptions\r\n    } catch (e) {\r\n      console.log(e)\r\n      return []\r\n    } finally {\r\n      this._isLoding = false\r\n    }\r\n  }\r\n  defaultRegion() {\r\n    return this._regionsOptions?.find((item) => item.code === HOME_REGION_CODE)\r\n  }\r\n  async getChildItems(parent: string, level: string, query = \"\") {\r\n    this._isLoding = true\r\n    try {\r\n      const response = await FiasService.getChildItems(parent, level, query)\r\n      if (response.data.data)\r\n        this._fiasOptions = response.data.data.map((item) => {\r\n          if (item.level !== \"building\") item.name = `${item.name} ${item.shortname}`\r\n          return item\r\n        })\r\n      else this._fiasOptions = []\r\n      return this._fiasOptions\r\n    } finally {\r\n      this._isLoding = false\r\n    }\r\n  }\r\n\r\n  // Returned full streetAddressLine include flat and postal code to save in IAddress\r\n  // Возвращает полный строковый адрес, включая квартиру и почтовы код,\r\n  // обычно не используемые в строке поиска, для сохранения в POJO\r\n\r\n  streetAddressLine(): string {\r\n    const addr = this._address\r\n    return `${addr.streetAddressLine}${addr.flat ? \", \" + addr.flat : \"\"}${\r\n      addr.postalCode ? \", \" + addr.postalCode : \"\"\r\n    }`\r\n  }\r\n  createNullFlavors(): INullFlavorR[] {\r\n    const addr = this._address\r\n    //check postalcode\r\n    checkFieldNullFlavor(\"postalCode\", addr.postalCode, addr.nullFlavors)\r\n    //check aoGUID\r\n    checkFieldNullFlavor(\"aoGUID\", addr.aoGUID, addr.nullFlavors)\r\n    //check houseGUID\r\n    checkFieldNullFlavor(\"houseGUID\", addr.houseGUID, addr.nullFlavors)\r\n    return addr.null_flavors_attributes()\r\n  }\r\n  // Check address for FIAS requarens\r\n  isNotStrictly(): boolean {\r\n    const addr = this._address\r\n    return !addr.aoGUID || !addr.houseGUID || !addr.postalCode\r\n  }\r\n  // Returned POJO address data\r\n  // Возвращает POJO объект адреса\r\n  addressProps(): IAddressR {\r\n    const addr = this._address\r\n    const _result = {\r\n      id: addr.id,\r\n      state: addr.state?.code,\r\n      streetAddressLine: this.streetAddressLine(),\r\n      aoGUID: addr.aoGUID,\r\n      houseGUID: addr.houseGUID,\r\n      postalCode: addr.postalCode,\r\n      house_number: addr.housenum,\r\n      struct_number: addr.strucnum,\r\n      building_number: addr.buildnum,\r\n      flat_number: addr.flat,\r\n      parent_guid: addr.parent,\r\n      null_flavors_attributes: [...this.createNullFlavors()],\r\n    } as IAddressR\r\n    return removeEmpty(_result)\r\n  }\r\n\r\n  set history(history: any) {\r\n    this._history = history\r\n  }\r\n  get history() {\r\n    return this._history\r\n  }\r\n\r\n  set isLoading(isLoding: boolean) {\r\n    this._isLoding = isLoding\r\n  }\r\n  get isLoading() {\r\n    return this._isLoding\r\n  }\r\n  get address() {\r\n    return this._address\r\n  }\r\n  set address(value: Address) {\r\n    this._address = value\r\n  }\r\n  get regionsOptions() {\r\n    return this._regionsOptions\r\n  }\r\n  get fiasOptions() {\r\n    return this._fiasOptions\r\n  }\r\n  clear() {\r\n    if (this._address === undefined) return\r\n    this._address.postalCode = undefined\r\n    this._address.district = undefined\r\n    this._address.city = undefined\r\n    this._address.houseGUID = undefined\r\n    this._address.aoGUID = undefined\r\n    this._address.street = undefined\r\n    this._address.town = undefined\r\n    this._address.housenum = undefined\r\n    this._address.buildnum = undefined\r\n    this._address.strucnum = undefined\r\n    this._address.streetAddressLine = this._address.state?.name + \", \" || \"\"\r\n  }\r\n  get dialogVisible(): boolean {\r\n    return this._dialogVisible\r\n  }\r\n  set dialogVisible(value: boolean) {\r\n    this._dialogVisible = value\r\n  }\r\n\r\n  get manualMode(): boolean {\r\n    return this._manualMode\r\n  }\r\n  set manualMode(value: boolean) {\r\n    this._manualMode = value\r\n  }\r\n\r\n  get onAddrComplete(): (() => void) | undefined {\r\n    return this._onAddrComplete\r\n  }\r\n  set onAddrComplete(value: (() => void) | undefined) {\r\n    this._onAddrComplete = value\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IPatient } from \"../IPatient\"\r\nimport IIdentityR from \"../requests/IIdentityR\"\r\nimport { IPatientR } from \"../requests/IPatientR\"\r\nimport Identity from \"./Identity\"\r\nimport Person from \"./Person\"\r\nexport const MAIN_REGISTRATION_ADDRESS = 1\r\nexport default class Patient implements ISerializable {\r\n  private _id?: string | undefined\r\n  private _person?: Person\r\n  private _gender?: number | undefined\r\n  private _birth_date: Date | undefined\r\n  private _birth_year?: number\r\n  private _provider_organization?: number\r\n  private _addrType?: number\r\n  private _guid: string\r\n  private _identity?: Identity\r\n  private _nullFlavors: INullFlavorR[]\r\n  private _oldOne?: IPatient\r\n  constructor(props = {} as IPatient) {\r\n    this._guid = props.guid || uuidv4()\r\n    this._oldOne = { ...props }\r\n    if (props.person) this._person = new Person(props.person)\r\n    this._provider_organization = props.organization_id\r\n    if (props.gender) this._gender = props.gender\r\n    this._addrType = props.addr_type || MAIN_REGISTRATION_ADDRESS\r\n    if (props.birth_date) this._birth_date = new Date(props.birth_date)\r\n    if (props.id) this._id = props.id\r\n    if (props.birth_year) this._birth_year = props.birth_year\r\n    if (props.identity) this._identity = new Identity(props.identity)\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes(): IPatientR {\r\n    let _patient = { guid: this._guid } as IPatientR\r\n    if (this._id) _patient.id = this.id\r\n    if (this._addrType) _patient.addr_type = this._addrType\r\n    if (this._birth_date) _patient.birth_date = this._birth_date.toDateString()\r\n    if (this._birth_year) _patient.birth_year = this._birth_year\r\n    if (this._gender) _patient.gender = this._gender\r\n    if (this._identity) _patient.identity_attributes = this._identity.getAttributes()\r\n    else if (this._oldOne?.identity?.id)\r\n      _patient.identity_attributes = { id: this._oldOne.identity.id, _destroy: \"1\" } as IIdentityR\r\n    if (this._provider_organization) _patient.organization_id = this._provider_organization\r\n    if (this._person) _patient.person_attributes = this._person.getAttributes()\r\n    else _patient.person_id = null\r\n    if (this.nullFlavors.length > 0) _patient.null_flavors_attributes = this.null_flavors_attributes()\r\n    return _patient\r\n  }\r\n  get id() {\r\n    return this._id\r\n  }\r\n  set id(id: string | undefined) {\r\n    this._id = id\r\n  }\r\n  get person() {\r\n    return this._person\r\n  }\r\n\r\n  set person(value: Person | undefined) {\r\n    this._person = value\r\n  }\r\n\r\n  get gender() {\r\n    return this._gender\r\n  }\r\n  set gender(gender: number | undefined) {\r\n    this._gender = gender\r\n  }\r\n  get birth_date() {\r\n    return this._birth_date\r\n  }\r\n  set birth_date(birth_date: Date | undefined) {\r\n    this._birth_date = birth_date\r\n  }\r\n  get guid() {\r\n    return this._guid\r\n  }\r\n\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  get addr_type() {\r\n    return this._addrType\r\n  }\r\n  set addr_type(addr_type: number | undefined) {\r\n    this._addrType = addr_type\r\n  }\r\n  get provider_organization() {\r\n    return this._provider_organization\r\n  }\r\n  set provider_organization(provider_organization: number | undefined) {\r\n    this._provider_organization = provider_organization\r\n  }\r\n  get birth_year() {\r\n    return this._birth_year\r\n  }\r\n  set birth_year(birth_year: number | undefined) {\r\n    this._birth_year = birth_year\r\n  }\r\n  get identity() {\r\n    return this._identity\r\n  }\r\n  set identity(identity: Identity | undefined) {\r\n    this._identity = identity\r\n  }\r\n\r\n  setBirthDay(value: Date | undefined, isYear: boolean) {\r\n    if (value && !isYear) {\r\n      if (this._birth_date === undefined)\r\n        this.nullFlavors = this.nullFlavors.filter((element) => element.parent_attr !== \"birth_date\")\r\n      this.birth_date = value\r\n      this.birth_year = undefined\r\n    } else if (value && isYear) {\r\n      if (this.birth_date === undefined)\r\n        this.nullFlavors = this.nullFlavors.filter((element) => element.parent_attr !== \"birth_date\")\r\n      this.birth_date = value\r\n      this.birth_year = (this.birth_date as Date).getFullYear()\r\n    } else {\r\n      this.birth_date = undefined\r\n      this.birth_year = undefined\r\n    }\r\n  }\r\n}\r\n","import { autorun, makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NA, NULL_FLAVOR_IDX, REGION_OKATO } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IAudit } from \"../IAudit\"\r\nimport { checkFieldNullFlavor, INullFlavorR } from \"../INullFlavor\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { ICertificateR } from \"../requests/ICertificateR\"\r\nimport { IChildInfoR } from \"../requests/IChildInfoR\"\r\nimport { IDeathReasonR } from \"../requests/IDeathReasonR\"\r\nimport { ICertificate } from \"../responses/ICertificate\"\r\nimport { IDeathReason } from \"../responses/IDeathReason\"\r\nimport Authenticator from \"./Authenticator\"\r\nimport { ChildInfo } from \"./ChildInfo\"\r\nimport { DeathReason } from \"./DeathReason\"\r\nimport Participant from \"./Participant\"\r\nimport Patient from \"./Patient\"\r\n\r\nexport default class Certificate implements ISerializable {\r\n  private _id: number\r\n  private _series?: string\r\n  private _number?: string\r\n  private _issueDate?: Date\r\n  private _certType?: number\r\n  private _seriesPrev?: string\r\n  private _numberPrev?: string\r\n  private _effTimePrev?: Date\r\n  private _patient: Patient\r\n  private _lifeAreaType?: number\r\n  private _deathAreaType?: number\r\n  private _deathDatetime?: Date\r\n  private _deathYear?: number\r\n  private _deathMonth?: number | undefined\r\n  private _deathPlace?: number | undefined\r\n  private _maritalStatus?: number | undefined\r\n  private _educationLevel?: number | undefined\r\n  private _socialStatus?: number | undefined\r\n  private _deathKind?: number | undefined\r\n  private _extReasonTime?: Date | undefined\r\n  private _extReasonDescription?: string | undefined\r\n  private _reasonA?: DeathReason | undefined\r\n  private _reasonB?: DeathReason\r\n  private _reasonC?: DeathReason\r\n  private _reasonD?: DeathReason\r\n  private _deathReasons: DeathReason[]\r\n  private _reasonACME?: DeathReason | undefined\r\n  private _deathAddr?: IAddressR\r\n  private _guid?: string\r\n  private _policyOMS?: string | undefined\r\n  private _childInfo?: ChildInfo | undefined\r\n  private _establishedMedic?: number | undefined\r\n  private _basisDetermining?: number | undefined\r\n  private _trafficAccident?: number | undefined\r\n  private _pregnancyConnection?: number | undefined\r\n  private _author?: Authenticator | undefined\r\n  private _audithor?: Authenticator | undefined\r\n  private _legalAuthenticator?: Authenticator | undefined\r\n  private _nullFlavors: INullFlavorR[]\r\n  private _audits: IAudit[]\r\n  private _custodian_id?: number\r\n  private _participant?: Participant | undefined\r\n  private _oldOne?: ICertificate | undefined\r\n  private _latestOne?: ICertificate | undefined\r\n  disposers: (() => void)[]\r\n\r\n  constructor(props: ICertificate) {\r\n    if (props.null_flavors && props.null_flavors.length > 0)\r\n      this._nullFlavors = props.null_flavors.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      })\r\n    else this._nullFlavors = []\r\n    this._oldOne = { ...props }\r\n    this._latestOne = props.latest_one\r\n    this._audits = []\r\n    this._id = props.id || -1\r\n    this._guid = props.guid || uuidv4()\r\n    this._custodian_id = props.custodian?.id || props.patient?.organization_id\r\n    this._patient = props.patient ? new Patient(props.patient) : new Patient()\r\n    if (props.issue_date) this._issueDate = new Date(props.issue_date)\r\n    this._certType = props.cert_type\r\n    this._series = props.series || REGION_OKATO\r\n    this._number = props.number\r\n    if (!!props.death_datetime) this._deathDatetime = new Date(props.death_datetime)\r\n    this._deathYear = props.death_year\r\n    this._numberPrev = props.number_prev\r\n    this._seriesPrev = props.series_prev\r\n    this._policyOMS = props.policy_OMS\r\n    this._lifeAreaType = props.life_area_type\r\n    this._deathAreaType = props.death_area_type\r\n    this._deathAddr = {\r\n      ...props.death_addr,\r\n      null_flavors_attributes:\r\n        props.death_addr?.null_flavors?.map((item) => {\r\n          return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n        }) || [],\r\n    } as IAddressR\r\n    this._deathPlace = props.death_place\r\n    this._deathKind = props.death_kind\r\n    this._educationLevel = props.education_level\r\n    this._maritalStatus = props.marital_status\r\n    this._socialStatus = props.social_status\r\n    if (props.eff_time_prev) this._effTimePrev = new Date(props.eff_time_prev)\r\n    if (props.child_info) this._childInfo = new ChildInfo(props.child_info)\r\n    if (props.author) this._author = new Authenticator(props.author)\r\n    if (props.audithor) this._audithor = new Authenticator(props.audithor)\r\n    if (props.legal_authenticator) this._legalAuthenticator = new Authenticator(props.legal_authenticator)\r\n    if (props.ext_reason_time) this._extReasonTime = new Date(props.ext_reason_time)\r\n    this._extReasonDescription = props.ext_reason_description\r\n    this._establishedMedic = props.established_medic\r\n    this._basisDetermining = props.basis_determining\r\n    this._trafficAccident = props.traffic_accident\r\n    this._pregnancyConnection = props.pregnancy_connection\r\n\r\n    if (props.a_reason) this._reasonA = new DeathReason(props.a_reason)\r\n    else this._reasonA = new DeathReason({} as IDeathReason)\r\n    if (props.b_reason) this._reasonB = new DeathReason(props.b_reason)\r\n    if (props.c_reason) this._reasonC = new DeathReason(props.c_reason)\r\n    if (props.reason_ACME) this.changeReasonACME(props.reason_ACME)\r\n\r\n    if (props.d_reason) this._reasonD = new DeathReason(props.d_reason)\r\n    if (props.death_reasons) this._deathReasons = props.death_reasons.map((reason) => new DeathReason(reason))\r\n    else this._deathReasons = []\r\n    if (props.participant) this._participant = new Participant(props.participant)\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n    this.disposers = []\r\n    this.disposers[0] = autorun(() => checkFieldNullFlavor(\"b_reason\", this.reasonB, this._nullFlavors, NA))\r\n    this.disposers[1] = autorun(() => checkFieldNullFlavor(\"c_reason\", this._reasonC, this._nullFlavors, NA))\r\n    this.disposers[2] = autorun(() => checkFieldNullFlavor(\"d_reason\", this.reasonD, this._nullFlavors, NA))\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  changeReasonACME(value: string | undefined) {\r\n    if (!value || \"\" === value) this._reasonACME = undefined\r\n    else {\r\n      if (value === this._reasonA?.diagnosis?.ICD10) this._reasonACME = this._reasonA\r\n      else if (value === this._reasonB?.diagnosis?.ICD10) this._reasonACME = this._reasonB\r\n      else if (value === this._reasonC?.diagnosis?.ICD10) this._reasonACME = this._reasonC\r\n      else this._reasonACME = undefined\r\n    }\r\n  }\r\n  milisecAge() {\r\n    // Discard the time-zone information.\r\n    const a = this._patient.birth_date as Date\r\n    if (a === undefined) return false\r\n    const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate(), a.getHours(), a.getMinutes())\r\n    const b = this._deathDatetime as Date\r\n    if (b === undefined) return false\r\n    const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate(), b.getHours(), b.getMinutes())\r\n    return utc2 - utc1\r\n  }\r\n  hoursAge() {\r\n    const _MS_PER_HOUR = 1000 * 60 * 60\r\n    const ms = this.milisecAge()\r\n    if (ms) return Math.floor(ms / _MS_PER_HOUR)\r\n    else return false\r\n  }\r\n  daysAge() {\r\n    const _MS_PER_DAY = 1000 * 60 * 60 * 24\r\n    const ms = this.milisecAge()\r\n    if (ms) return Math.floor(ms / _MS_PER_DAY)\r\n    else return false\r\n  }\r\n  yearsAge() {\r\n    const dd = this._deathDatetime as Date\r\n    const db = this._patient.birth_date as Date\r\n    if (!!dd && !!db) return dd.getFullYear() - db.getFullYear()\r\n    else return false\r\n  }\r\n  setDeathDay(value: Date | undefined, isYear: boolean) {\r\n    if (value && !isYear) {\r\n      this.deathDatetime = value\r\n      this.deathYear = undefined\r\n    } else if (value && isYear) {\r\n      this.deathDatetime = value\r\n      this.deathYear = (this.deathDatetime as Date).getFullYear()\r\n    } else {\r\n      this.deathDatetime = undefined\r\n      this.deathYear = undefined\r\n    }\r\n  }\r\n\r\n  saveReasonEffTime(reason: DeathReason) {\r\n    if (!this._deathDatetime) return false\r\n    let result = new Date(this._deathDatetime)\r\n    if (reason.minutes) result.setMinutes(result.getMinutes() - reason.minutes)\r\n    if (reason.hours) result.setHours(result.getHours() - reason.hours)\r\n    if (reason.days) result.setDate(result.getDate() - reason.days)\r\n    if (reason.weeks) result.setDate(result.getDate() - reason.weeks * 7)\r\n    if (reason.months) result.setMonth(result.getMonth() - reason.months)\r\n    if (reason.years) result.setFullYear(result.getFullYear() - reason.years)\r\n    reason.effectiveTime = result\r\n    return true\r\n  }\r\n\r\n  getAttributes(): ICertificateR {\r\n    let _cert = { guid: this._guid } as ICertificateR\r\n    if (this._id > -1) _cert.id = this._id\r\n    if (this._issueDate) _cert.issue_date = this._issueDate.toDateString()\r\n    _cert.number_prev = this._numberPrev\r\n    _cert.series_prev = this._seriesPrev\r\n    _cert.eff_time_prev = this._effTimePrev?.toDateString()\r\n    if (this._audithor) {\r\n      _cert.audithor_attributes = this._audithor.getAttributes()\r\n      if (!_cert.audithor_attributes.id && !!this._oldOne?.audithor?.id)\r\n        _cert.audithor_attributes.id = this._oldOne.audithor.id\r\n    } else if (this._oldOne && this._oldOne.audithor)\r\n      _cert.audithor_attributes = { id: this._oldOne.audithor.id, _destroy: \"1\" }\r\n    if (this._author) {\r\n      _cert.author_attributes = this._author.getAttributes()\r\n      if (!_cert.author_attributes.id && !!this._oldOne?.author?.id) _cert.author_attributes.id = this._oldOne.author.id\r\n    } else if (this._oldOne && this._oldOne.author)\r\n      _cert.author_attributes = { id: this._oldOne.author.id, _destroy: \"1\" }\r\n    if (this._legalAuthenticator) {\r\n      _cert.legal_authenticator_attributes = this._legalAuthenticator.getAttributes()\r\n      if (!_cert.legal_authenticator_attributes.id && !!this._oldOne?.legal_authenticator?.id)\r\n        _cert.legal_authenticator_attributes.id = this._oldOne.legal_authenticator.id\r\n    } else if (this._oldOne && this._oldOne.legal_authenticator)\r\n      _cert.legal_authenticator_attributes = { id: this._oldOne.legal_authenticator.id, _destroy: \"1\" }\r\n    if (this._basisDetermining) _cert.basis_determining = this._basisDetermining\r\n    if (this._certType) _cert.cert_type = this._certType\r\n    if (this._childInfo) _cert.child_info_attributes = this._childInfo.getAttributes()\r\n    else if (this._oldOne && this._oldOne.child_info) _cert.child_info_attributes = { _destroy: \"1\" } as IChildInfoR\r\n    if (this._deathAddr && !!this._deathAddr.state && !!this._deathAddr.streetAddressLine)\r\n      _cert.death_addr_attributes = { ...this._deathAddr } as IAddressR\r\n    else if (this._oldOne && this._oldOne.death_addr)\r\n      _cert.death_addr_attributes = { id: this._oldOne.death_addr.id, _destroy: \"1\" } as IAddressR\r\n    if (this._deathAreaType || this._oldOne?.death_area_type) _cert.death_area_type = this._deathAreaType\r\n    if (this._deathDatetime || this._oldOne?.death_datetime) _cert.death_datetime = this._deathDatetime\r\n    if (this._deathYear || this._oldOne?.death_year) _cert.death_year = this._deathYear\r\n    if (this._deathKind || this._oldOne?.death_kind) _cert.death_kind = this._deathKind\r\n    if (this._deathPlace || this._oldOne?.death_place) _cert.death_place = this.deathPlace\r\n    if (this._deathReasons.length > 0)\r\n      _cert.death_reasons_attributes = this._deathReasons.map((item) => item.getAttributes())\r\n    if (this._oldOne?.death_reasons && this._oldOne.death_reasons.length > 0) {\r\n      let _temp = [] as IDeathReasonR[]\r\n      this._oldOne.death_reasons.forEach((item) => {\r\n        if (\r\n          !_cert.death_reasons_attributes ||\r\n          _cert.death_reasons_attributes.findIndex((el) => el.id === item.id) === -1\r\n        )\r\n          _temp.push({ id: item.id, _destroy: \"1\" } as IDeathReasonR)\r\n      })\r\n      if (_cert.death_reasons_attributes && _temp.length > 0)\r\n        _cert.death_reasons_attributes = _cert.death_reasons_attributes.concat(_temp)\r\n      else if (_temp.length > 0) _cert.death_reasons_attributes = _temp\r\n    }\r\n    if (this._educationLevel || this._oldOne?.education_level) _cert.education_level = this._educationLevel\r\n    if (this._establishedMedic || this._oldOne?.established_medic) _cert.established_medic = this._establishedMedic\r\n    if (this._extReasonDescription || this._oldOne?.ext_reason_description)\r\n      _cert.ext_reason_description = this.extReasonDescription\r\n    if (this._extReasonTime || this._oldOne?.ext_reason_time) _cert.ext_reason_time = this._extReasonTime\r\n    if (this._lifeAreaType || this._oldOne?.life_area_type) _cert.life_area_type = this._lifeAreaType\r\n    if (this._policyOMS || this._oldOne?.policy_OMS) _cert.policy_OMS = this._policyOMS\r\n    if (this._pregnancyConnection || this._oldOne?.pregnancy_connection)\r\n      _cert.pregnancy_connection = this.pregnancyConnection\r\n    if (this._maritalStatus || this._oldOne?.marital_status) _cert.marital_status = this._maritalStatus\r\n    if (this.nullFlavors.length > 0) _cert.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._reasonA && this._reasonA.diagnosis) _cert.a_reason_attributes = this._reasonA.getAttributes()\r\n    else if (this._oldOne && this._oldOne.a_reason)\r\n      _cert.a_reason_attributes = { id: this._oldOne.a_reason.id, _destroy: \"1\" } as IDeathReasonR\r\n    if (this._reasonACME) _cert.reason_ACME = this._reasonACME.diagnosis?.ICD10\r\n    if (this._reasonB && this._reasonB.diagnosis) _cert.b_reason_attributes = this._reasonB.getAttributes()\r\n    else if (this._oldOne && this._oldOne.b_reason)\r\n      _cert.b_reason_attributes = { id: this._oldOne.b_reason.id, _destroy: \"1\" } as IDeathReasonR\r\n    if (this._reasonC && this._reasonC.diagnosis) _cert.c_reason_attributes = this._reasonC.getAttributes()\r\n    else if (this._oldOne && this._oldOne.c_reason)\r\n      _cert.c_reason_attributes = { id: this._oldOne.c_reason.id, _destroy: \"1\" } as IDeathReasonR\r\n    if (this._reasonD && this._reasonD.diagnosis) _cert.d_reason_attributes = this._reasonD.getAttributes(true)\r\n    else if (this._oldOne && this._oldOne.d_reason)\r\n      _cert.d_reason_attributes = { id: this._oldOne.d_reason.id, _destroy: \"1\" } as IDeathReasonR\r\n    if (this._series) _cert.series = this._series\r\n    if (this._socialStatus || this._oldOne?.social_status) _cert.social_status = this._socialStatus\r\n    if (this._trafficAccident || this._oldOne?.traffic_accident) _cert.traffic_accident = this._trafficAccident\r\n    if (this._patient) _cert.patient_attributes = this._patient.getAttributes()\r\n    _cert.custodian_id = this._custodian_id || _cert.patient_attributes?.organization_id\r\n    if (this._participant) _cert.participant_attributes = this._participant.getAttributes()\r\n    console.log(\"_cert\", _cert)\r\n    return _cert\r\n  }\r\n  //#region Getters - Setters\r\n  get id() {\r\n    return this._id\r\n  }\r\n  set id(id: number) {\r\n    this._id = id\r\n  }\r\n  get series() {\r\n    return this._series\r\n  }\r\n  set series(series: string | undefined) {\r\n    this._series = series\r\n  }\r\n  get number() {\r\n    return this._number\r\n  }\r\n  set number(number: string | undefined) {\r\n    this._number = number\r\n  }\r\n  get issueDate() {\r\n    return this._issueDate\r\n  }\r\n  set issueDate(issueDate: Date | undefined) {\r\n    this._issueDate = issueDate\r\n  }\r\n  get deathDatetime() {\r\n    return this._deathDatetime\r\n  }\r\n  set deathDatetime(death_datetime: Date | undefined) {\r\n    this._deathDatetime = death_datetime\r\n  }\r\n  get certType() {\r\n    return this._certType\r\n  }\r\n  set certType(cert_type: number | undefined) {\r\n    this._certType = cert_type\r\n  }\r\n  get seriesPrev() {\r\n    return this._seriesPrev\r\n  }\r\n  set seriesPrev(series: string | undefined) {\r\n    this._seriesPrev = series\r\n  }\r\n  get numberPrev() {\r\n    return this._numberPrev\r\n  }\r\n  set numberPrev(number: string | undefined) {\r\n    this._numberPrev = number\r\n  }\r\n  get guid() {\r\n    return this._guid\r\n  }\r\n  get author(): Authenticator | undefined {\r\n    return this._author\r\n  }\r\n  set author(value: Authenticator | undefined) {\r\n    this._author = value\r\n  }\r\n  get authenticator(): Authenticator | undefined {\r\n    return this._audithor\r\n  }\r\n  set authenticator(value: Authenticator | undefined) {\r\n    this._audithor = value\r\n  }\r\n  get legalAuthenticator(): Authenticator | undefined {\r\n    return this._legalAuthenticator\r\n  }\r\n  set legalAuthenticator(value: Authenticator | undefined) {\r\n    this._legalAuthenticator = value\r\n  }\r\n\r\n  get extReasonTime(): Date | undefined {\r\n    return this._extReasonTime\r\n  }\r\n  set extReasonTime(value: Date | undefined) {\r\n    this._extReasonTime = value\r\n  }\r\n  get establishedMedic(): number | undefined {\r\n    return this._establishedMedic\r\n  }\r\n  set establishedMedic(value: number | undefined) {\r\n    this._establishedMedic = value\r\n  }\r\n  get basisDetermining(): number | undefined {\r\n    return this._basisDetermining\r\n  }\r\n  set basisDetermining(value: number | undefined) {\r\n    this._basisDetermining = value\r\n  }\r\n  get trafficAccident(): number | undefined {\r\n    return this._trafficAccident\r\n  }\r\n  set trafficAccident(value: number | undefined) {\r\n    this._trafficAccident = value\r\n  }\r\n  get pregnancyConnection(): number | undefined {\r\n    return this._pregnancyConnection\r\n  }\r\n  set pregnancyConnection(value: number | undefined) {\r\n    this._pregnancyConnection = value\r\n  }\r\n\r\n  get patient() {\r\n    return this._patient\r\n  }\r\n  get effTimePrev() {\r\n    return this._effTimePrev\r\n  }\r\n  set effTimePrev(eff_time: Date | undefined) {\r\n    this._effTimePrev = eff_time\r\n  }\r\n  get deathYear() {\r\n    return this._deathYear\r\n  }\r\n  set deathYear(death_year: number | undefined) {\r\n    this._deathYear = death_year\r\n  }\r\n\r\n  get policyOMS() {\r\n    return this._policyOMS || \"\"\r\n  }\r\n\r\n  set policyOMS(policyOMS: string | undefined) {\r\n    this._policyOMS = policyOMS\r\n  }\r\n\r\n  get lifeAreaType() {\r\n    return this._lifeAreaType\r\n  }\r\n  set lifeAreaType(lat: number | undefined) {\r\n    this._lifeAreaType = lat\r\n  }\r\n  get deathAreaType() {\r\n    return this._deathAreaType\r\n  }\r\n  set deathAreaType(dat: number | undefined) {\r\n    this._deathAreaType = dat\r\n  }\r\n\r\n  get deathAddr() {\r\n    return this._deathAddr\r\n  }\r\n  set deathAddr(value: IAddressR | undefined) {\r\n    this._deathAddr = value\r\n  }\r\n  get deathKind(): number | undefined {\r\n    return this._deathKind\r\n  }\r\n  set deathKind(value: number | undefined) {\r\n    this._deathKind = value\r\n  }\r\n  get socialStatus(): number | undefined {\r\n    return this._socialStatus\r\n  }\r\n  set socialStatus(value: number | undefined) {\r\n    this._socialStatus = value\r\n  }\r\n  get educationLevel(): number | undefined {\r\n    return this._educationLevel\r\n  }\r\n  set educationLevel(value: number | undefined) {\r\n    this._educationLevel = value\r\n  }\r\n  get maritalStatus(): number | undefined {\r\n    return this._maritalStatus\r\n  }\r\n  set maritalStatus(value: number | undefined) {\r\n    this._maritalStatus = value\r\n  }\r\n  get deathPlace(): number | undefined {\r\n    return this._deathPlace\r\n  }\r\n  set deathPlace(value: number | undefined) {\r\n    this._deathPlace = value\r\n  }\r\n  get deathMonth(): number | undefined {\r\n    return this._deathMonth\r\n  }\r\n  set deathMonth(value: number | undefined) {\r\n    this._deathMonth = value\r\n  }\r\n  get childInfo(): ChildInfo | undefined {\r\n    return this._childInfo\r\n  }\r\n  set childInfo(value: ChildInfo | undefined) {\r\n    this._childInfo = value\r\n  }\r\n  get extReasonDescription(): string | undefined {\r\n    return this._extReasonDescription\r\n  }\r\n  set extReasonDescription(value: string | undefined) {\r\n    this._extReasonDescription = value\r\n  }\r\n  get reasonA(): DeathReason | undefined {\r\n    return this._reasonA\r\n  }\r\n  set reasonA(value: DeathReason | undefined) {\r\n    this._reasonA = value\r\n  }\r\n  get reasonB(): DeathReason | undefined {\r\n    return this._reasonB\r\n  }\r\n  set reasonB(value: DeathReason | undefined) {\r\n    this._reasonB = value\r\n  }\r\n  get reasonC(): DeathReason | undefined {\r\n    return this._reasonC\r\n  }\r\n  set reasonC(value: DeathReason | undefined) {\r\n    this._reasonC = value\r\n  }\r\n  get reasonD(): DeathReason | undefined {\r\n    return this._reasonD\r\n  }\r\n  set reasonD(value: DeathReason | undefined) {\r\n    this._reasonD = value\r\n  }\r\n  get reasonACME(): DeathReason | undefined {\r\n    return this._reasonACME\r\n  }\r\n  set reasonACME(value: DeathReason | undefined) {\r\n    this._reasonACME = value\r\n  }\r\n  get deathReasons(): DeathReason[] {\r\n    return this._deathReasons\r\n  }\r\n  set deathReasons(value: DeathReason[]) {\r\n    this._deathReasons = value\r\n  }\r\n  get audits() {\r\n    return this._audits\r\n  }\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n\r\n  get participant(): Participant | undefined {\r\n    return this._participant\r\n  }\r\n  set participant(value: Participant | undefined) {\r\n    this._participant = value\r\n  }\r\n  get latestOne(): ICertificate | undefined {\r\n    return this._latestOne\r\n  }\r\n  set latestOne(value: ICertificate | undefined) {\r\n    this._latestOne = value\r\n  }\r\n\r\n  get oldOne(): ICertificate | undefined {\r\n    return this._oldOne\r\n  }\r\n\r\n  //#endregion\r\n\r\n  dispose() {\r\n    // So, to avoid subtle memory issues, always call the\r\n    // disposers when the reactions are no longer needed.\r\n    this.disposers.forEach((disposer) => disposer())\r\n  }\r\n}\r\n","export const DEFAULT_RENDER_OPTIONS = { except: [\"updated_at\", \"created_at\"] }\r\n","import { DEFAULT_RENDER_OPTIONS } from \"./default\"\r\n\r\nexport const NULLFLAVORABLE_RENDER_OPTIONS = {\r\n  ...DEFAULT_RENDER_OPTIONS,\r\n  include: [\"null_flavors\"],\r\n}\r\n","export const DEFAULT_AUTHENTICATOR_RENDER_OPTIONS = {\r\n  only: [\"id\", \"doctor\", \"time\"],\r\n  include: [\"doctor\"],\r\n}\r\n","export const LETTERED_DEATH_REASON_RENDER_OPTIONS = {\r\n  except: [\"diagnosis_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"diagnosis\", \"null_flavors\"],\r\n}\r\n","import { AxiosResponse } from \"axios\"\r\nimport $api, { API_URL } from \"../http\"\r\nimport { NULLFLAVORABLE_RENDER_OPTIONS } from \"../models/render_options/address\"\r\nimport { DEFAULT_AUTHENTICATOR_RENDER_OPTIONS } from \"../models/render_options/Authenticator\"\r\nimport { CHILD_INFO_RENDER_OPTIONS } from \"../models/render_options/child_info\"\r\nimport { DEFAULT_RENDER_OPTIONS } from \"../models/render_options/default\"\r\nimport { SHORT_DOCTOR_RENDER_OPTIONS } from \"../models/render_options/Doctor\"\r\nimport { EXTERNAL_DEATH_REASON_RENDER_OPTIONS } from \"../models/render_options/external_death_reason\"\r\nimport { LETTERED_DEATH_REASON_RENDER_OPTIONS } from \"../models/render_options/lettered_reason\"\r\nimport { OTHER_REASON_RENDER_OPTIONS } from \"../models/render_options/other_reason\"\r\nimport { PARTICIPANT_RENDER_OPTIONS } from \"../models/render_options/Participant\"\r\nimport { PATIENT_RENDER_OPTIONS } from \"../models/render_options/patient\"\r\nimport { PERSON_RENDER_OPTIONS } from \"../models/render_options/person\"\r\nimport { PROCEDURE_RENDER_OPTIONS } from \"../models/render_options/procedure\"\r\nimport { RELATED_SUBJECT_RENDER_OPTIONS } from \"../models/render_options/related_subject\"\r\nimport { ICertificateR } from \"../models/requests/ICertificateR\"\r\nimport { ICertificate } from \"../models/responses/ICertificate\"\r\n\r\nexport const CERTIFICATE_FULL_RENDER_OPTIONS = {\r\n  render_options: {\r\n    except: [\"custodian_id\", \"patient_id\", \"updated_at\"],\r\n    include: [\r\n      \"patient\",\r\n      \"author\",\r\n      \"legal_authenticator\",\r\n      \"audithor\",\r\n      \"a_reason\",\r\n      \"b_reason\",\r\n      \"c_reason\",\r\n      \"d_reason\",\r\n      \"death_addr\",\r\n      \"child_info\",\r\n      \"custodian\",\r\n      \"death_reasons\",\r\n      \"participant\",\r\n      \"null_flavors\",\r\n      \"latest_one\",\r\n    ],\r\n  },\r\n  includes: [\r\n    \"patient\",\r\n    \"participant\",\r\n    \"custodian\",\r\n    \"a_reason\",\r\n    \"b_reason\",\r\n    \"c_reason\",\r\n    \"d_reason\",\r\n    \"death_addr\",\r\n    \"child_info\",\r\n    \"death_reasons\",\r\n    \"latest_one\",\r\n  ],\r\n  death_addr: NULLFLAVORABLE_RENDER_OPTIONS,\r\n  patient: PATIENT_RENDER_OPTIONS,\r\n  identity: NULLFLAVORABLE_RENDER_OPTIONS,\r\n  address: NULLFLAVORABLE_RENDER_OPTIONS,\r\n  a_reason: LETTERED_DEATH_REASON_RENDER_OPTIONS,\r\n  b_reason: LETTERED_DEATH_REASON_RENDER_OPTIONS,\r\n  c_reason: LETTERED_DEATH_REASON_RENDER_OPTIONS,\r\n  d_reason: EXTERNAL_DEATH_REASON_RENDER_OPTIONS,\r\n  author: DEFAULT_AUTHENTICATOR_RENDER_OPTIONS,\r\n  legal_authenticator: DEFAULT_AUTHENTICATOR_RENDER_OPTIONS,\r\n  audithor: DEFAULT_AUTHENTICATOR_RENDER_OPTIONS,\r\n  death_reasons: OTHER_REASON_RENDER_OPTIONS,\r\n  procedures: PROCEDURE_RENDER_OPTIONS,\r\n  child_info: CHILD_INFO_RENDER_OPTIONS,\r\n  related_subject: RELATED_SUBJECT_RENDER_OPTIONS,\r\n  addr: NULLFLAVORABLE_RENDER_OPTIONS,\r\n  person: PERSON_RENDER_OPTIONS,\r\n  doctor: SHORT_DOCTOR_RENDER_OPTIONS,\r\n  participant: PARTICIPANT_RENDER_OPTIONS,\r\n  position: { only: [\"id\", \"name\"] },\r\n  custodian: { only: [\"id\", \"name\"] },\r\n  null_flavors: DEFAULT_RENDER_OPTIONS,\r\n}\r\n\r\nexport default class CertificateService {\r\n  //POST request for get Certificate's list\r\n  static async getCertificates(query: any, first = 0, last = first + 9): Promise<AxiosResponse<ICertificate[]>> {\r\n    console.log(\"query\", query, first, last)\r\n    return $api.post(`${API_URL}model/Certificate/`, {\r\n      ...query,\r\n      offset: first,\r\n      limit: last - first + 1,\r\n      ...CERTIFICATE_FULL_RENDER_OPTIONS,\r\n    })\r\n  }\r\n\r\n  // POST request for get Certificate's count\r\n  static async getCount(query: any): Promise<AxiosResponse<number>> {\r\n    return $api.post(`${API_URL}model/Certificate/`, { ...query, count: \"1\" })\r\n  }\r\n\r\n  //POST request for add  /REST_API/v1/model/Certificate/add\r\n  static async addCertificate(certificate: ICertificateR): Promise<AxiosResponse<ICertificate>> {\r\n    return $api.post(`${API_URL}model/Certificate/add`, {\r\n      Certificate: certificate,\r\n      ...CERTIFICATE_FULL_RENDER_OPTIONS,\r\n    })\r\n  }\r\n\r\n  //PUT request for update Certificate /REST_API/v1/model/Certificate/:id\r\n  static async updateCertificate(request: any): Promise<AxiosResponse<ICertificate>> {\r\n    return $api.put(`${API_URL}model/Certificate/${request.Certificate.id}`, {\r\n      ...request,\r\n      ...CERTIFICATE_FULL_RENDER_OPTIONS,\r\n    })\r\n  }\r\n  // DELETE request for remove Certificate /REST_API/v1/model/Certificate/:id\r\n  static async removeCertificate(certificate_id: number): Promise<AxiosResponse<ICertificate>> {\r\n    return $api.delete(`${API_URL}model/Certificate/${certificate_id}`)\r\n  }\r\n}\r\n","export const PATIENT_RENDER_OPTIONS = {\r\n  except: [\"person_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"person\", \"identity\", \"null_flavors\"],\r\n}\r\n","export const EXTERNAL_DEATH_REASON_RENDER_OPTIONS = {\r\n  except: [\"ext_diagnosis_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"ext_diagnosis\", \"null_flavors\"],\r\n}\r\n","export const OTHER_REASON_RENDER_OPTIONS = {\r\n  except: [\"diagnosis_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"diagnosis\", \"procedures\", \"null_flavors\"],\r\n}\r\n","export const PROCEDURE_RENDER_OPTIONS = {\r\n  except: [\"medical_serv_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"medical_serv\", \"null_flavors\"],\r\n}\r\n","export const CHILD_INFO_RENDER_OPTIONS = {\r\n  except: [\"related_subject_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"related_subject\", \"address\", \"null_flavors\"],\r\n}\r\n","export const RELATED_SUBJECT_RENDER_OPTIONS = {\r\n  except: [\"person_name_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"person_name\", \"addr\", \"null_flavors\"],\r\n}\r\n","export const PERSON_RENDER_OPTIONS = {\r\n  except: [\"created_at\", \"updated_at\"],\r\n  include: [\"person_name\", \"address\", \"null_flavors\"],\r\n}\r\n","export const SHORT_DOCTOR_RENDER_OPTIONS = {\r\n  only: [\"id\", \"person_name\", \"position\"],\r\n  include: [\"person_name\", \"position\"],\r\n}\r\n","export const PARTICIPANT_RENDER_OPTIONS = {\r\n  except: [\"person_id\", \"certificate_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"person\", \"identity\"],\r\n}\r\n","import { autorun, configure, makeAutoObservable } from \"mobx\"\r\nimport Certificate from \"../models/FormsData/Certificate\"\r\nimport { IPatient } from \"../models/IPatient\"\r\nimport { ICertificate } from \"../models/responses/ICertificate\"\r\nimport { IUserInfo } from \"../models/responses/IUserInfo\"\r\nimport CertificateService from \"../services/CertificateService\"\r\nimport { ID_CARD_TYPES, NULL_FLAVOR_IDX, PASSPORT_RF } from \"../utils/defaults\"\r\nimport { DeathReason } from \"../models/FormsData/DeathReason\"\r\nimport { IDeathReason } from \"../models/responses/IDeathReason\"\r\nimport { IAddressR } from \"../models/requests/IAddressR\"\r\nimport { INullFlavorR } from \"../models/INullFlavor\"\r\nconfigure({\r\n  enforceActions: \"never\",\r\n})\r\nexport default class CertificateStore {\r\n  private _cert: Certificate\r\n  private _submitted: boolean\r\n  private _userInfo?: IUserInfo | undefined\r\n  private _certs: ICertificate[]\r\n  private _selected: number\r\n  private _sorts: string[] | undefined\r\n  private _filters: any\r\n  private _first: number\r\n  private _last: number\r\n  private _rows: number\r\n  private _count: number\r\n  private _needFetch: boolean\r\n\r\n  disposers: (() => void)[]\r\n  constructor() {\r\n    this._submitted = false\r\n    this.disposers = []\r\n    this._certs = []\r\n    this._filters = {}\r\n    this._first = 0\r\n    this._last = 0\r\n    this._rows = 0\r\n    this._count = 0\r\n    this._needFetch = true\r\n    this._cert = new Certificate({\r\n      custodian: this._userInfo?.organization,\r\n      patient: {\r\n        organization_id: this._userInfo?.organization.id,\r\n        identity: {\r\n          identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code,\r\n        },\r\n        person: { person_name: { family: \"\", given_1: \"\", given_2: \"\" } },\r\n      } as IPatient,\r\n    } as ICertificate)\r\n    this._selected = 0\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n\r\n    // реакции на изменение данных\r\n    this.disposers[0] = autorun(() => {\r\n      let _q = { ...this._filters }\r\n      //console.log(\"фильтры\", this._filters)\r\n      if (this._userInfo && !this._userInfo.roles.includes(\"MIAC\")) _q.custodian_id_eq = this._userInfo?.organization.id\r\n      if (this._filters) {\r\n        this._needFetch = true\r\n        CertificateService.getCount({ q: _q })\r\n          .then((value) => {\r\n            this._count = value.data\r\n            CertificateService.getCertificates({ q: _q }, 0)\r\n              .then((response) => {\r\n                let _certs = Array.from<ICertificate>({ length: this._count })\r\n                const dataLength = response.data.length\r\n                let num = 0\r\n                Array.prototype.splice.apply(_certs, [\r\n                  0,\r\n                  dataLength,\r\n                  ...response.data.map((cert) => {\r\n                    return { ...cert, rowNumber: ++num }\r\n                  }),\r\n                ])\r\n                this._certs = _certs\r\n                if (dataLength > 0) {\r\n                  this._rows = this._certs.length\r\n                  this.select(!(this._selected < dataLength) ? dataLength - 1 : this._selected)\r\n                }\r\n                this._first = 0\r\n                this._last = dataLength - 1\r\n              })\r\n              .catch((err) => console.log(err))\r\n          })\r\n          .catch((reason) => console.log(reason))\r\n      }\r\n    })\r\n    this.disposers[1] = autorun(() => {\r\n      if (this._sorts) this._needFetch = true\r\n    })\r\n  }\r\n\r\n  //#region setters-getters\r\n  get cert() {\r\n    return this._cert\r\n  }\r\n  set cert(value: Certificate) {\r\n    this._cert = value\r\n  }\r\n\r\n  get submitted(): boolean {\r\n    return this._submitted\r\n  }\r\n  set submitted(value: boolean) {\r\n    this._submitted = value\r\n  }\r\n  get certs(): ICertificate[] {\r\n    return this._certs.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n  get userInfo(): IUserInfo | undefined {\r\n    return this._userInfo\r\n  }\r\n  set userInfo(value: IUserInfo | undefined) {\r\n    this._userInfo = value\r\n  }\r\n  get sorts(): string[] | undefined {\r\n    return this._sorts\r\n  }\r\n  set sorts(value: string[] | undefined) {\r\n    this._sorts = value\r\n  }\r\n  get filters(): any {\r\n    return this._filters\r\n  }\r\n  set filters(value: any) {\r\n    this._filters = value\r\n  }\r\n  get first(): number {\r\n    return this._first\r\n  }\r\n  set first(value: number) {\r\n    this._first = value\r\n  }\r\n  get rows(): number {\r\n    return this._rows\r\n  }\r\n  set rows(value: number) {\r\n    this._rows = value\r\n  }\r\n  get count(): number {\r\n    return this._count\r\n  }\r\n  set count(value: number) {\r\n    this._count = value\r\n  }\r\n  //#endregion\r\n  createNew(id = -1) {\r\n    this._cert = new Certificate({\r\n      id: id,\r\n      custodian: this._userInfo?.organization,\r\n      patient: {\r\n        organization_id: this._userInfo?.organization.id,\r\n        identity: {\r\n          identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code,\r\n        },\r\n        person: { person_name: { family: \"\", given_1: \"\", given_2: \"\" } },\r\n      } as IPatient,\r\n    } as ICertificate)\r\n  }\r\n  replace() {\r\n    const old = this._certs.find((cert) => cert.id === this._cert.id)\r\n    if (!old) return\r\n    this._cert = new Certificate({\r\n      id: -1,\r\n      custodian: old.custodian,\r\n      patient: old.patient,\r\n      basis_determining: old.basis_determining,\r\n      cert_type: old.cert_type === 1 ? 4 : 3,\r\n      death_area_type: old.death_area_type,\r\n      death_kind: old.death_kind,\r\n      death_datetime: old.death_datetime,\r\n      death_place: old.death_place,\r\n      death_year: old.death_year,\r\n      education_level: old.education_level,\r\n      eff_time_prev: old.issue_date,\r\n      established_medic: old.established_medic,\r\n      ext_reason_description: old.ext_reason_description,\r\n      ext_reason_time: old.ext_reason_time,\r\n      life_area_type: old.life_area_type,\r\n      marital_status: old.marital_status,\r\n      number_prev: old.number,\r\n      policy_OMS: old.policy_OMS,\r\n      pregnancy_connection: old.pregnancy_connection,\r\n      reason_ACME: old.reason_ACME,\r\n      series_prev: old.series,\r\n      social_status: old.social_status,\r\n      traffic_accident: old.traffic_accident,\r\n    } as ICertificate)\r\n    if (old.a_reason)\r\n      this._cert.reasonA = new DeathReason({\r\n        days: old.a_reason.days,\r\n        diagnosis: old.a_reason.diagnosis,\r\n        effective_time: old.a_reason.effective_time,\r\n        hours: old.a_reason.hours,\r\n        null_flavors: old.a_reason.null_flavors?.map((item) => {\r\n          return { code: item.code, parent_attr: item.parent_attr }\r\n        }),\r\n        minutes: old.a_reason.minutes,\r\n        months: old.a_reason.months,\r\n        years: old.a_reason.years,\r\n        weeks: old.a_reason.weeks,\r\n      } as IDeathReason)\r\n    else this._cert.reasonA = new DeathReason({} as IDeathReason)\r\n    if (old.b_reason)\r\n      this._cert.reasonB = new DeathReason({\r\n        days: old.b_reason.days,\r\n        diagnosis: old.b_reason.diagnosis,\r\n        effective_time: old.b_reason.effective_time,\r\n        hours: old.b_reason.hours,\r\n        null_flavors: old.b_reason.null_flavors?.map((item) => {\r\n          return { code: item.code, parent_attr: item.parent_attr }\r\n        }),\r\n        minutes: old.b_reason.minutes,\r\n        months: old.b_reason.months,\r\n        years: old.b_reason.years,\r\n        weeks: old.b_reason.weeks,\r\n      } as IDeathReason)\r\n    if (old.c_reason)\r\n      this._cert.reasonC = new DeathReason({\r\n        days: old.c_reason.days,\r\n        diagnosis: old.c_reason.diagnosis,\r\n        effective_time: old.c_reason.effective_time,\r\n        hours: old.c_reason.hours,\r\n        null_flavors: old.c_reason.null_flavors?.map((item) => {\r\n          return { code: item.code, parent_attr: item.parent_attr }\r\n        }),\r\n        minutes: old.c_reason.minutes,\r\n        months: old.c_reason.months,\r\n        years: old.c_reason.years,\r\n        weeks: old.c_reason.weeks,\r\n      } as IDeathReason)\r\n    if (old.d_reason)\r\n      this._cert.reasonD = new DeathReason({\r\n        days: old.d_reason.days,\r\n        diagnosis: old.d_reason.ext_diagnosis,\r\n        effective_time: old.d_reason.effective_time,\r\n        hours: old.d_reason.hours,\r\n        null_flavors: old.d_reason.null_flavors?.map((item) => {\r\n          return { code: item.code, parent_attr: item.parent_attr }\r\n        }),\r\n        minutes: old.d_reason.minutes,\r\n        months: old.d_reason.months,\r\n        years: old.d_reason.years,\r\n        weeks: old.d_reason.weeks,\r\n      } as IDeathReason)\r\n    if (old.death_reasons)\r\n      this._cert.deathReasons = old.death_reasons.map(\r\n        (reason) =>\r\n          new DeathReason({\r\n            days: reason.days,\r\n            diagnosis: reason.diagnosis,\r\n            effective_time: reason.effective_time,\r\n            hours: reason.hours,\r\n            null_flavors: reason.null_flavors?.map((item) => {\r\n              return { code: item.code, parent_attr: item.parent_attr }\r\n            }),\r\n            minutes: reason.minutes,\r\n            months: reason.months,\r\n            years: reason.years,\r\n            weeks: reason.weeks,\r\n            procedures: reason.procedures?.map((item) => {\r\n              return {\r\n                effective_time: item.effective_time,\r\n                medical_serv: item.medical_serv,\r\n                text_value: item.text_value,\r\n                null_flavors: item.null_flavors?.map((item) => {\r\n                  return { code: item.code, parent_attr: item.parent_attr }\r\n                }),\r\n              }\r\n            }),\r\n          } as IDeathReason)\r\n      )\r\n    else this._cert.deathReasons = []\r\n    if (old.death_addr)\r\n      this._cert.deathAddr = {\r\n        ...old.death_addr,\r\n        null_flavors_attributes:\r\n          old.death_addr?.null_flavors?.map((item) => {\r\n            return { parent_attr: item.parent_attr, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n          }) || [],\r\n        id: undefined,\r\n        parent_guid: undefined,\r\n        null_flavors: null,\r\n      } as IAddressR\r\n\r\n    old.latest_one = this._cert.oldOne\r\n  }\r\n\r\n  save(onSuccess?: (data: ICertificate) => void, onError?: (message: string) => void, sm_code?: string) {\r\n    if (!this._userInfo) return false\r\n    if (!this._cert.patient.provider_organization)\r\n      this._cert.patient.provider_organization = this.userInfo?.organization.id\r\n    const request = this._cert.getAttributes()\r\n    if (!request.id && sm_code) {\r\n      request.number = sm_code\r\n      if (request.patient_attributes?.id) {\r\n        request.patient_id = request.patient_attributes?.id\r\n        request.patient_attributes = undefined\r\n      }\r\n    }\r\n    //console.log(\"request\", request)\r\n    return !request.id\r\n      ? CertificateService.addCertificate(request)\r\n          .then((response) => {\r\n            const nCert = response.data\r\n            if (nCert) {\r\n              const idx = this._certs.length\r\n              this._certs.push(nCert)\r\n              this.select(idx)\r\n              if (onSuccess) onSuccess(nCert)\r\n              //console.log(\"nCert\", nCert)\r\n            } else {\r\n              if (onError)\r\n                onError(\"Cвидетельство сохранено, но сервер не вернул результат. Необходим повторный вход в систему\")\r\n            }\r\n          })\r\n          .catch((reason) => {\r\n            if (onError) onError(reason)\r\n          })\r\n      : CertificateService.updateCertificate({ Certificate: request })\r\n          .then((response) => {\r\n            const nCert = response.data\r\n            if (nCert) {\r\n              const idx = this._certs.findIndex((cert) => cert.id === nCert.id)\r\n              this._certs[idx] = nCert\r\n              //console.log(\"nCert\", nCert)\r\n              this.select(idx)\r\n              if (onSuccess) onSuccess(nCert)\r\n            } else {\r\n              if (onError)\r\n                onError(\"Свидетельство сохранено, но сервер не вернул результат. Необходим повторный вход в систему\")\r\n            }\r\n          })\r\n          .catch((reason) => {\r\n            if (onError) onError(reason)\r\n          })\r\n  }\r\n  delete() {\r\n    if (this._cert.id === -1) return false\r\n    else return CertificateService.removeCertificate(this._cert.id)\r\n  }\r\n\r\n  clean(num = this._selected) {\r\n    try {\r\n      this._certs.splice(num)\r\n      const dataLength = this._certs.length\r\n      if (dataLength > 0) {\r\n        this.select(this._selected > dataLength - 1 ? dataLength - 1 : this._selected)\r\n      } else {\r\n        this.createNew(-1)\r\n        this._selected = 0\r\n      }\r\n    } catch {\r\n      throw Error(\"Not valid certificate number\")\r\n    }\r\n  }\r\n\r\n  select(num: number) {\r\n    this._cert = new Certificate(this._certs[num])\r\n    this._selected = num\r\n  }\r\n\r\n  getList(doAfter?: () => void, first = this._first, last = this._last) {\r\n    //console.log(\"getList count, this._first, this._first\", this._count, this._first, this._last)\r\n    let _q = { ...this._filters, sorts: this._sorts }\r\n    if (this._userInfo && !this._userInfo.roles.includes(\"MIAC\")) _q.custodian_id_eq = this._userInfo?.organization.id\r\n    else if (!this._userInfo) return false\r\n    if (last < first || (!(first < this._first) && last < this._last)) {\r\n      // console.log(\"in return\", this._certs)\r\n      if (doAfter) doAfter()\r\n      return\r\n    }\r\n    CertificateService.getCertificates({ q: _q }, first, last)\r\n      .then((response) => {\r\n        let num = first\r\n        let _certs = Array.from<ICertificate>({ length: this._count })\r\n        const dataLength = response.data.length\r\n        Array.prototype.splice.apply(_certs, [\r\n          first,\r\n          dataLength,\r\n          ...response.data.map((cert) => {\r\n            return { ...cert, rowNumber: ++num }\r\n          }),\r\n        ])\r\n        this._certs = _certs\r\n        //console.log(\"dataLength\", dataLength)\r\n        if (dataLength > 0) {\r\n          this._rows = this._certs.length\r\n          this._needFetch = false\r\n          this.select(!(this._selected < dataLength) ? dataLength - 1 : this._selected)\r\n        }\r\n        this._first = first\r\n        this._last = last\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        if (doAfter) doAfter()\r\n      })\r\n  }\r\n\r\n  findById(certificate_id: number, doAfter?: () => void) {\r\n    if (!this._userInfo) return false\r\n    CertificateService.getCertificates({\r\n      q: { custodian_id_eq: this._userInfo.organization.id, id_eq: certificate_id },\r\n    })\r\n      .then((response) => {\r\n        if (response.data && response.data.length > 0) this._cert = new Certificate(response.data[0])\r\n        if (response.data) {\r\n          this.certs.push(response.data[0])\r\n          this.select(0)\r\n        }\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        if (doAfter) doAfter()\r\n      })\r\n  }\r\n  dispose() {\r\n    // So, to avoid subtle memory issues, always call the\r\n    // disposers when the reactions are no longer needed.\r\n    this.disposers.forEach((disposer) => disposer())\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { ToastMessageType } from \"primereact/toast\"\r\n\r\nexport default class LayoutStore {\r\n  private _isTabletOrMobile: boolean\r\n  private _isLayoutStaticInactive: boolean\r\n  private _isRightSidebarActive: boolean\r\n  private _isProfileMenuActive: boolean\r\n  private _isNotificationsMenuActive: boolean\r\n  private _isLoading: boolean\r\n  private _message: ToastMessageType | null\r\n\r\n  constructor() {\r\n    this._isTabletOrMobile = false\r\n    this._isLayoutStaticInactive = false\r\n    this._isRightSidebarActive = false\r\n    this._isProfileMenuActive = false\r\n    this._isNotificationsMenuActive = false\r\n    this._isLoading = false\r\n    this._message = null\r\n    makeAutoObservable(this)\r\n  }\r\n  setTabletOrMobile(visible: boolean) {\r\n    this._isTabletOrMobile = visible\r\n  }\r\n  tabletOrMobile() {\r\n    return this._isTabletOrMobile\r\n  }\r\n  sideBarToggle() {\r\n    this._isLayoutStaticInactive = !this._isLayoutStaticInactive\r\n  }\r\n  setLayoutStaticInactive(isLayoutStaticInactive: boolean) {\r\n    this._isLayoutStaticInactive = isLayoutStaticInactive\r\n  }\r\n  layoutStaticInactive() {\r\n    return this._isLayoutStaticInactive\r\n  }\r\n  rightSideBarActive() {\r\n    return this._isRightSidebarActive\r\n  }\r\n  setRightSideBarActive(rightSidebarActive: boolean) {\r\n    this._isRightSidebarActive = rightSidebarActive\r\n  }\r\n  profileMenuActive() {\r\n    return this._isProfileMenuActive\r\n  }\r\n  setProfileMenuActive(profileMenuActive: boolean) {\r\n    this._isProfileMenuActive = profileMenuActive\r\n  }\r\n  notificationsMenuActive() {\r\n    return this._isNotificationsMenuActive\r\n  }\r\n  setNotificationsMenuActive(notificationsMenuActive: boolean) {\r\n    this._isNotificationsMenuActive = notificationsMenuActive\r\n  }\r\n  get isLoading(): boolean {\r\n    return this._isLoading\r\n  }\r\n  set isLoading(value: boolean) {\r\n    this._isLoading = value\r\n  }\r\n\r\n  get message(): ToastMessageType | null {\r\n    return this._message\r\n  }\r\n  set message(value: ToastMessageType | null) {\r\n    this._message = value\r\n  }\r\n}\r\n","import { autorun, makeAutoObservable } from \"mobx\"\r\nimport { ISuggestions } from \"../models/ISuggestions\"\r\nimport { DISEASE_DEADTH_KIND } from \"../NSI/1.2.643.5.1.13.13.99.2.21\"\r\nimport {\r\n  AUTHENTICATOR_SUG,\r\n  AUTHOR_SUG,\r\n  BASIS_DERMINING_SUG,\r\n  CERT_DEATH_THIME_SUG,\r\n  CERT_TYPE_SUG,\r\n  CHILD_WEIGHT_SUG,\r\n  DEATH_AREA_SUG,\r\n  DEATH_KINDS_SUG,\r\n  DEATH_PLACE_SUG,\r\n  DEATH_PLACE_TYPE_SUG,\r\n  DEFAULT_CERT_SUGGESTIONS,\r\n  EDUCATION_LEVEL_SUG,\r\n  EST_MEDIC_SUG,\r\n  EXT_REASON_SUG,\r\n  EXT_REASON_TIME_SUG,\r\n  IDNUMBER_SUG,\r\n  IDSERIES_SUG,\r\n  IORGCODE_SUG,\r\n  IORGDATE_SUG,\r\n  IORGNAME_SUG,\r\n  KIND_DEATH_REASON_SUG,\r\n  LEGAL_AUTHENTICATOR_SUG,\r\n  LIFE_AREA_SUG,\r\n  LIFE_PLACE_SUG,\r\n  MARITAL_STATUS_SUG,\r\n  MOTHER_ADDRESS_SUG,\r\n  MOTHER_BIRTHDAY_SUG,\r\n  MOTHER_FIO_SUG,\r\n  NUMBER_PREGNANCY_SUG,\r\n  OMS_SUG,\r\n  PARTIPICIPANT_DATE_SUG,\r\n  PARTIPICIPANT_FIO_SUG,\r\n  PARTIPICIPANT_IDENTITY_SUG,\r\n  PATIENT_BIRTHDAY_SUG,\r\n  PATIENT_GENDER_SUG,\r\n  PERSON_NAME_SUG,\r\n  PREGNANCY_CONNECTION_SUG,\r\n  REASON_A_SUG,\r\n  REASON_A_TIME_SUG,\r\n  REASON_B_SUG,\r\n  REASON_B_TIME_SUG,\r\n  REASON_C_SUG,\r\n  REASON_C_TIME_SUG,\r\n  REASON_D_SUG,\r\n  REASON_D_TIME_SUG,\r\n  SNILS_SUG,\r\n  SOCIAL_STATUS_SUG,\r\n  TERMS_PREGNANCY_SUG,\r\n  TRAFFFIC_ACCIDENT_SUG,\r\n} from \"../utils/defaults\"\r\nimport CertificateStore from \"./certificateStore\"\r\n\r\nexport default class SuggestionsStore {\r\n  private _cStore: CertificateStore\r\n  private _suggestions: ISuggestions[]\r\n  private _identified: boolean\r\n  private _fromRelatives: boolean\r\n  disposers: (() => void)[]\r\n  constructor(cStore: CertificateStore) {\r\n    this._cStore = cStore\r\n    this.disposers = []\r\n    this._identified = true\r\n    this._fromRelatives = false\r\n    this._suggestions = DEFAULT_CERT_SUGGESTIONS\r\n    makeAutoObservable(this)\r\n    // проверки полноты заполнения свидетельства\r\n    // работают как реакции на изменение данных\r\n    this.disposers[0] = autorun(() => {\r\n      this._suggestions[CERT_TYPE_SUG].done = !!this._cStore.cert.certType\r\n    })\r\n\r\n    this.disposers[1] = autorun(() => {\r\n      this._suggestions[PATIENT_GENDER_SUG].done = !!this._cStore.cert.patient.gender\r\n    })\r\n    this.disposers[2] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const isBirthDay =\r\n        !patient.birth_date &&\r\n        patient.nullFlavors.findIndex((element) => {\r\n          return element.parent_attr === \"birth_date\" && !element._destroy\r\n        }) === -1\r\n      this._suggestions[PATIENT_BIRTHDAY_SUG].done = !isBirthDay\r\n    })\r\n    this.disposers[3] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const cert = this._cStore.cert\r\n      const isDeathDay =\r\n        !cert.deathDatetime && cert.nullFlavors.findIndex((element) => element.parent_attr === \"death_datetime\") === -1\r\n      this._suggestions[CERT_DEATH_THIME_SUG].done = !isDeathDay\r\n    })\r\n    this.disposers[4] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const person = this._cStore.cert.patient.person\r\n      const isSNILS =\r\n        (!person && this._identified) ||\r\n        (person &&\r\n          (!person.SNILS || person.SNILS.length < 14) &&\r\n          person.nullFlavors.findIndex((element) => element.parent_attr === \"SNILS\") === -1)\r\n      this._suggestions[SNILS_SUG].done = !isSNILS\r\n    })\r\n    this.disposers[5] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const oms = this._cStore.cert.policyOMS\r\n      const isOMS =\r\n        (!oms || oms.length < 7) &&\r\n        this._cStore.cert.nullFlavors.findIndex((element) => element.parent_attr === \"policy_OMS\") === -1\r\n      this._suggestions[OMS_SUG].done = !isOMS\r\n    })\r\n    this.disposers[6] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const identity = patient.identity\r\n      const code = identity?.issueOrgCode\r\n      const isCODE =\r\n        (!identity && patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\") === -1) ||\r\n        (identity &&\r\n          (!code || code.length < 1) &&\r\n          identity.nullFlavors.findIndex((element) => element.parent_attr === \"issueOrgCode\") === -1)\r\n      this._suggestions[IORGCODE_SUG].done = !isCODE\r\n    })\r\n    this.disposers[7] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const isIORGDate =\r\n        (!patient.identity && patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\") === -1) ||\r\n        (patient.identity && !patient.identity?.issueOrgDate)\r\n      this._suggestions[IORGDATE_SUG].done = !isIORGDate\r\n    })\r\n    this.disposers[8] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const isIORGName =\r\n        (!patient.identity && patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\") === -1) ||\r\n        (patient.identity && (!patient.identity?.issueOrgName || patient.identity.issueOrgName.length < 15))\r\n      this._suggestions[IORGNAME_SUG].done = !isIORGName\r\n    })\r\n    this.disposers[9] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const identity = patient.identity\r\n      const series = patient.identity?.series\r\n      const isIDSeries =\r\n        (!identity && patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\") === -1) ||\r\n        (identity &&\r\n          (!series || series.length < 1) &&\r\n          identity.nullFlavors.findIndex((element) => element.parent_attr === \"series\") === -1)\r\n      this._suggestions[IDSERIES_SUG].done = !isIDSeries\r\n    })\r\n    this.disposers[10] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const isIDNumber =\r\n        (!patient.identity &&\r\n          patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\" && !element._destroy) === -1) ||\r\n        (patient.identity && !patient.identity.number)\r\n      this._suggestions[IDNUMBER_SUG].done = !isIDNumber\r\n    })\r\n    this.disposers[11] = autorun(() => {\r\n      const person = this._cStore.cert.patient.person\r\n      const isLifeArea =\r\n        (!person && this._identified) ||\r\n        (person &&\r\n          (!person.address ||\r\n            !person.address.streetAddressLine ||\r\n            person.address.streetAddressLine.split(\",\").length < 3) &&\r\n          person.nullFlavors.findIndex((element) => element.parent_attr === \"address\") === -1)\r\n      this._suggestions[LIFE_PLACE_SUG].done = !isLifeArea\r\n    })\r\n    this.disposers[12] = autorun(() => {\r\n      const isDeathArea =\r\n        (!this._cStore.cert.deathAddr ||\r\n          !this._cStore.cert.deathAddr.streetAddressLine ||\r\n          this._cStore.cert.deathAddr.streetAddressLine.split(\",\").length < 3) &&\r\n        this._cStore.cert.nullFlavors.findIndex((element) => element.parent_attr === \"death_addr\") === -1\r\n      this._suggestions[DEATH_PLACE_SUG].done = !isDeathArea\r\n    })\r\n    this.disposers[13] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const isDeathAreaType =\r\n        this._cStore.cert.deathAreaType === undefined &&\r\n        this._cStore.cert.nullFlavors.findIndex((element) => element.parent_attr === \"death_area_type\") === -1\r\n      this._suggestions[DEATH_AREA_SUG].done = !isDeathAreaType\r\n    })\r\n    this.disposers[14] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const isLifeAreaType =\r\n        this._cStore.cert.lifeAreaType === undefined &&\r\n        this._cStore.cert.nullFlavors.findIndex((element) => element.parent_attr === \"life_area_type\") === -1\r\n      this._suggestions[LIFE_AREA_SUG].done = !isLifeAreaType\r\n    })\r\n    this.disposers[15] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[DEATH_PLACE_TYPE_SUG].done = this._cStore.cert.deathPlace !== undefined\r\n    })\r\n    this.disposers[16] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isTERMS_PREGNANCY =\r\n        childInfo === undefined ||\r\n        childInfo.termPregnancy !== undefined ||\r\n        childInfo.nullFlavors.findIndex((element) => element.parent_attr === \"term_pregnancy\") !== -1\r\n      this._suggestions[TERMS_PREGNANCY_SUG].done = isTERMS_PREGNANCY\r\n    })\r\n    this.disposers[17] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isCHILD_WEIGHT = childInfo === undefined || childInfo.weight !== undefined\r\n      this._suggestions[CHILD_WEIGHT_SUG].done = isCHILD_WEIGHT\r\n    })\r\n    this.disposers[18] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isNUMBER_PREGNANCY = !childInfo || !!childInfo.whichAccount\r\n      this._suggestions[NUMBER_PREGNANCY_SUG].done = isNUMBER_PREGNANCY\r\n    })\r\n    this.disposers[19] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isMOTHER_FIO =\r\n        !childInfo ||\r\n        (!!childInfo.relatedSubject &&\r\n          (childInfo.relatedSubject.nullFlavors.findIndex((item) => item.parent_attr === \"person_name\") !== -1 ||\r\n            !!childInfo.relatedSubject.fio))\r\n      this._suggestions[MOTHER_FIO_SUG].done = isMOTHER_FIO\r\n    })\r\n    this.disposers[20] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isMOTHER_BIRTHDAY =\r\n        !childInfo ||\r\n        (!!childInfo.relatedSubject &&\r\n          (childInfo.relatedSubject.nullFlavors.findIndex((item) => item.parent_attr === \"birthTime\") !== -1 ||\r\n            !!childInfo.relatedSubject.birthTime))\r\n      this._suggestions[MOTHER_BIRTHDAY_SUG].done = isMOTHER_BIRTHDAY\r\n    })\r\n    this.disposers[21] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isMOTHER_ADDRESS =\r\n        !childInfo ||\r\n        (!!childInfo.relatedSubject &&\r\n          (childInfo.relatedSubject.nullFlavors.findIndex((item) => item.parent_attr === \"addr\") !== -1 ||\r\n            (!!childInfo.relatedSubject.addr && !!childInfo.relatedSubject.addr.houseGUID)))\r\n      this._suggestions[MOTHER_ADDRESS_SUG].done = isMOTHER_ADDRESS\r\n    })\r\n    this.disposers[22] = autorun(() => {\r\n      this._suggestions[MARITAL_STATUS_SUG].done = !!this._cStore.cert && !!this._cStore.cert.maritalStatus\r\n    })\r\n    this.disposers[23] = autorun(() => {\r\n      this._suggestions[EDUCATION_LEVEL_SUG].done = !!this._cStore.cert && !!this._cStore.cert.educationLevel\r\n    })\r\n    this.disposers[24] = autorun(() => {\r\n      this._suggestions[SOCIAL_STATUS_SUG].done = !!this._cStore.cert && !!this._cStore.cert.socialStatus\r\n    })\r\n    this.disposers[25] = autorun(() => {\r\n      this._suggestions[DEATH_KINDS_SUG].done = !!this._cStore.cert && !!this._cStore.cert.deathKind\r\n    })\r\n    this.disposers[26] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[KIND_DEATH_REASON_SUG].done =\r\n        (!!this._cStore.cert.deathKind && this._cStore.cert.deathKind === DISEASE_DEADTH_KIND) ||\r\n        (!!this._cStore.cert.extReasonTime && !!this._cStore.cert.extReasonDescription)\r\n    })\r\n    this.disposers[27] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[EST_MEDIC_SUG].done = !!this._cStore.cert.establishedMedic\r\n    })\r\n    this.disposers[28] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[BASIS_DERMINING_SUG].done = !!this._cStore.cert.basisDetermining\r\n    })\r\n    this.disposers[29] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_A_SUG].done = !!this._cStore.cert.reasonA?.diagnosis\r\n    })\r\n    this.disposers[30] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_A_TIME_SUG].done =\r\n        !!this._cStore.cert.reasonA?.effectiveTime ||\r\n        this._cStore.cert.reasonA?.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"effective_time\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[31] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_B_SUG].done =\r\n        !!this._cStore.cert.reasonB?.diagnosis ||\r\n        this._cStore.cert.nullFlavors.findIndex((item) => item.parent_attr === \"b_reason\" && !item._destroy) !== -1\r\n    })\r\n    this.disposers[32] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_B_TIME_SUG].done =\r\n        !this._cStore.cert.reasonB ||\r\n        !!this._cStore.cert.reasonB.effectiveTime ||\r\n        this._cStore.cert.reasonB?.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"effective_time\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[33] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_C_SUG].done =\r\n        !!this._cStore.cert.reasonC?.diagnosis ||\r\n        this._cStore.cert.nullFlavors.findIndex((item) => item.parent_attr === \"c_reason\" && !item._destroy) !== -1\r\n    })\r\n    this.disposers[34] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_C_TIME_SUG].done =\r\n        !this._cStore.cert.reasonC ||\r\n        !!this._cStore.cert.reasonC.effectiveTime ||\r\n        this._cStore.cert.reasonC?.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"effective_time\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[35] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_D_SUG].done =\r\n        this._cStore.cert.reasonD?.diagnosis !== undefined ||\r\n        this._cStore.cert.nullFlavors.findIndex((item) => item.parent_attr === \"d_reason\" && !item._destroy) !== -1\r\n    })\r\n    this.disposers[36] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_D_TIME_SUG].done =\r\n        !this._cStore.cert.reasonD ||\r\n        !!this._cStore.cert.reasonD.effectiveTime ||\r\n        this._cStore.cert.reasonD?.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"effective_time\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[37] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[TRAFFFIC_ACCIDENT_SUG].done =\r\n        !!this._cStore.cert.trafficAccident ||\r\n        this._cStore.cert.nullFlavors.findIndex((item) => item.parent_attr === \"traffic_accident\" && !item._destroy) !==\r\n          -1\r\n    })\r\n    this.disposers[38] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[PREGNANCY_CONNECTION_SUG].done =\r\n        !!this._cStore.cert.pregnancyConnection ||\r\n        this._cStore.cert.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"pregnancy_connection\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[39] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[AUTHOR_SUG].done = !!this._cStore.cert.author\r\n    })\r\n    this.disposers[40] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[AUTHENTICATOR_SUG].done = !!this._cStore.cert.authenticator\r\n    })\r\n    this.disposers[41] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[LEGAL_AUTHENTICATOR_SUG].done = !!this._cStore.cert.legalAuthenticator\r\n    })\r\n    this.disposers[42] = autorun(() => {\r\n      this._identified =\r\n        !!this._cStore.cert.patient.person ||\r\n        this._cStore.cert.patient.nullFlavors.findIndex((el) => el.parent_attr === \"person\" && !el._destroy) === -1\r\n    })\r\n    this.disposers[43] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._fromRelatives = this._identified && this._cStore.cert.patient && !this._cStore.cert.patient.identity\r\n    })\r\n    this.disposers[44] = autorun(() => {\r\n      const person = this._cStore.cert.patient?.person\r\n      const fio = person?.fio\r\n      const isPersonNameSug =\r\n        (!person && this._identified) ||\r\n        (!!fio &&\r\n          (fio.family.trim().length === 0 ||\r\n            fio.given_1.trim().length === 0 ||\r\n            (!!fio.given_2 && fio.given_2.trim().length === 0)))\r\n      this._suggestions[PERSON_NAME_SUG].done = !isPersonNameSug\r\n    })\r\n  }\r\n  dispose() {\r\n    // So, to avoid subtle memory issues, always call the\r\n    // disposers when the reactions are no longer needed.\r\n    this.disposers.forEach((disposer) => disposer())\r\n  }\r\n  redSuggestionsCount() {\r\n    return this.suggestions.reduce((result, item, index) => {\r\n      if (\r\n        !(\r\n          item.done ||\r\n          index in\r\n            [\r\n              EXT_REASON_SUG,\r\n              EXT_REASON_TIME_SUG,\r\n              PARTIPICIPANT_FIO_SUG,\r\n              PARTIPICIPANT_DATE_SUG,\r\n              PARTIPICIPANT_IDENTITY_SUG,\r\n            ]\r\n        )\r\n      )\r\n        ++result\r\n      return result\r\n    }, 0)\r\n  }\r\n  get identified(): boolean {\r\n    return this._identified\r\n  }\r\n  set identified(value: boolean) {\r\n    this._identified = value\r\n  }\r\n  get fromRelatives(): boolean {\r\n    return this._fromRelatives\r\n  }\r\n  set fromRelatives(value: boolean) {\r\n    this._fromRelatives = value\r\n  }\r\n  get suggestions(): ISuggestions[] {\r\n    return this._suggestions\r\n  }\r\n}\r\n","export default class TemporaryIDStore {\r\n  private _lastCertificateID: number\r\n  private _lastDeathReasonID: number\r\n  private _lastProcedureID: number\r\n\r\n  constructor() {\r\n    this._lastCertificateID = -1\r\n    this._lastDeathReasonID = -1\r\n    this._lastProcedureID = -1\r\n  }\r\n  get lastCertificateID(): number {\r\n    return this._lastCertificateID--\r\n  }\r\n  get lastDeathReasonID(): number {\r\n    return this._lastDeathReasonID--\r\n  }\r\n  get lastProcedureID(): number {\r\n    return this._lastProcedureID--\r\n  }\r\n}\r\n","import $api from \"../http\"\r\nimport { AxiosResponse } from \"axios\"\r\nimport { AuthResponse } from \"../models/responses/AuthResponse\"\r\nimport { IRegistration } from \"../models/requests/IRegistration\"\r\nimport { IPassRenew } from \"../models/requests/IPassRenew\"\r\nexport default class AuthService {\r\n  static async login(email: string, password: string): Promise<AxiosResponse<AuthResponse>> {\r\n    return $api.post(\"auth/login\", { email, password })\r\n  }\r\n  static async registration(user: IRegistration): Promise<AxiosResponse<AuthResponse>> {\r\n    return $api.post(\"auth/registration\", { user })\r\n  }\r\n  static async renew_link(email: string): Promise<AxiosResponse<void>> {\r\n    return $api.post(\"auth/renew_link\", { email })\r\n  }\r\n  static async pwd_renew(user: IPassRenew): Promise<AxiosResponse<void>> {\r\n    return $api.post(\"auth/pwd_renew\", { ...user })\r\n  }\r\n  static async logout(): Promise<void> {\r\n    return $api.post(\"auth/logout\")\r\n  }\r\n}\r\n","import { createContext } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport AddressStore from './store/addressStore'\r\nimport CertificateStore from './store/certificateStore'\r\nimport LayoutStore from './store/layoutStore'\r\nimport SuggestionsStore from './store/suggestionsStore'\r\nimport TemporaryIDStore from './store/temporaryIDStore'\r\nimport UserStore from './store/userStore'\r\ninterface IState{\r\n  userStore: UserStore\r\n  layoutStore: LayoutStore\r\n  certificateStore: CertificateStore\r\n  suggestionsStore: SuggestionsStore\r\n  addressStore: AddressStore \r\n  temporaryIDStore: TemporaryIDStore \r\n}\r\nconst userStore = new UserStore()\r\nconst layoutStore = new LayoutStore()\r\nconst certificateStore = new CertificateStore()\r\nconst suggestionsStore = new SuggestionsStore(certificateStore)\r\nconst addressStore = new AddressStore()\r\nconst temporaryIDStore = new TemporaryIDStore()\r\naddressStore.fetchRegionOptions()\r\nexport const Context = createContext<IState>({userStore, layoutStore, addressStore, certificateStore, temporaryIDStore,suggestionsStore}) \r\nReactDOM.render(  \r\n  <Context.Provider value={{userStore, layoutStore, addressStore, certificateStore, temporaryIDStore, suggestionsStore}} >\r\n    <App />  \r\n  </Context.Provider> , \r\n  document.getElementById('root')\r\n)\r\n\r\n\r\n","import axios from \"axios\"\r\nimport { makeAutoObservable } from \"mobx\"\r\nimport { API_URL } from \"../http\"\r\nimport { IUser } from \"../models/IUser\"\r\nimport { IPassRenew } from \"../models/requests/IPassRenew\"\r\nimport { IRegistration } from \"../models/requests/IRegistration\"\r\nimport { AuthResponse } from \"../models/responses/AuthResponse\"\r\nimport { IUserInfo } from \"../models/responses/IUserInfo\"\r\nimport AuthService from \"../services/AuthService\"\r\nimport UsersService from \"../services/UsersService\"\r\nimport { HOME_ROUTE, LOGIN_ROUTE } from \"../utils/consts\"\r\n\r\nexport default class UserStore {\r\n  private _isAuth: boolean\r\n  private _user: IUser\r\n  private _isLoding: boolean\r\n  private _history: any\r\n  private _token: string\r\n  private _userInfo?: IUserInfo\r\n\r\n  constructor() {\r\n    this._user = {} as IUser\r\n    this._isLoding = false\r\n    this._token = localStorage.getItem(\"token\") || \"\"\r\n    this._isAuth = this._token !== \"\"\r\n    if (this._isAuth) this.checkAuth()\r\n    makeAutoObservable(this)\r\n  }\r\n\r\n  setAuth(isAuth: boolean) {\r\n    this._isAuth = isAuth\r\n  }\r\n  isAuth() {\r\n    return this._isAuth\r\n  }\r\n  setUser(user: IUser) {\r\n    this._user = user\r\n  }\r\n  user() {\r\n    return this._user\r\n  }\r\n  setLoading(isLoding: boolean) {\r\n    this._isLoding = isLoding\r\n  }\r\n  isLoading() {\r\n    return this._isLoding\r\n  }\r\n  setHistory(history: any) {\r\n    this._history = history\r\n  }\r\n\r\n  setToken(access_token: string) {\r\n    this._token = access_token\r\n  }\r\n  token() {\r\n    return this._token\r\n  }\r\n  async login(email: string, password: string) {\r\n    AuthService.login(email, password)\r\n      .then((response) => {\r\n        if (response.data) {\r\n          localStorage.setItem(\"token\", response.data.tokens.access)\r\n          this.setAuth(true)\r\n          this.setUser(response.data.user)\r\n          this._history.push(HOME_ROUTE)\r\n        } else {\r\n          this._history.push(\"/error/Ошибка авторизации: неверный ответ API-сервера\")\r\n        }\r\n      })\r\n      .catch((reason) => {\r\n        this._history.push(\"/error/Auth1:\" + reason.message)\r\n      })\r\n  }\r\n  async registration(user: IRegistration) {\r\n    try {\r\n      await AuthService.registration(user)\r\n      this._history.push(\r\n        \"/message/Ваша заявка направлена администратору ресурса для активации. Письмо с результатом, будет выслано на Ваш email\"\r\n      )\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/\" + e.message)\r\n    }\r\n  }\r\n  async pwd_renew(user: IPassRenew) {\r\n    try {\r\n      await AuthService.pwd_renew(user)\r\n      this._history.push(\"/message/Пароль был успешно изменен\")\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/\" + e.message)\r\n      return false\r\n    }\r\n  }\r\n  async renew_link(email: string) {\r\n    try {\r\n      await AuthService.renew_link(email)\r\n      this._history.push(\"/message/Вам в почту направлено письмо, со ссылкой на страницу изменения пароля\")\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/\" + e.message)\r\n      return false\r\n    }\r\n  }\r\n  async logout() {\r\n    try {\r\n      await AuthService.logout()\r\n      this.setAuth(false)\r\n      localStorage.removeItem(\"token\")\r\n      this.setToken(\"\")\r\n      this.setUser({} as IUser)\r\n      this._userInfo = undefined\r\n      this._history.push(LOGIN_ROUTE)\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/\" + e.message)\r\n    }\r\n  }\r\n  async checkAuth() {\r\n    try {\r\n      this.setLoading(true)\r\n      const response = await axios.get<AuthResponse>(`${API_URL}auth/refresh`, { withCredentials: true })\r\n      localStorage.setItem(\"token\", response.data.tokens.access)\r\n      this.setToken(response.data.tokens.access)\r\n      this.setAuth(true)\r\n      this.setUser(response.data.user)\r\n    } catch (e: any) {\r\n      if (e.message?.includes(\"401\")) {\r\n        this._isAuth = false\r\n        this._token = \"\"\r\n        localStorage.removeItem(\"token\")\r\n        this._user = {} as IUser\r\n        this._history.push(LOGIN_ROUTE)\r\n      } else this._history.push(\"/error/Auth2:\" + e.message)\r\n    } finally {\r\n      this.setLoading(false)\r\n    }\r\n  }\r\n  async getUserInfo(id: number) {\r\n    if (id === undefined) return false\r\n    try {\r\n      this.setLoading(true)\r\n      const response = await UsersService.getUser(id)\r\n      return response.data\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/Auth3:\" + e.message)\r\n    } finally {\r\n      this.setLoading(false)\r\n    }\r\n  }\r\n  history() {\r\n    return this._history\r\n  }\r\n  get userInfo() {\r\n    if (this._userInfo) return this._userInfo\r\n    else if (this._user.id)\r\n      this.getUserInfo(this._user.id).then((response) => {\r\n        if (response) this._userInfo = response\r\n        else this._userInfo = undefined\r\n      })\r\n    return null\r\n  }\r\n}\r\n"],"sourceRoot":""}