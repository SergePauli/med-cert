{"version":3,"sources":["pages/NoMatchPage.tsx","utils/consts.ts","components/layouts/FooterLayout.tsx","images/favicon.png","components/menus/SideBarMenu.tsx","http/index.ts","models/responses/ITimeEvent.ts","components/layouts/SideBarLayout.tsx","images/ava.png","components/menus/ProfileMenu.tsx","components/menus/NotificationsMenu.tsx","components/layouts/TopBarLayout.tsx","services/AuditService.ts","components/layouts/RightSideBarLayout.tsx","components/layouts/ActionButtonLayout.tsx","components/layouts/MainLayout.tsx","NSI/1.2.643.5.1.13.13.99.2.19.ts","components/c_sections/section_0.tsx","utils/defaults.ts","components/NullFlavorWrapper.tsx","models/INullFlavor.ts","models/FormsData/Identity.ts","models/FormsData/Person.ts","models/IPersonName.ts","components/inputs/PersonName.tsx","components/c_sections/section_1.tsx","components/inputs/inputsIdentity.tsx","components/c_sections/section_2.tsx","components/dialogs/AddressDialog.tsx","services/FiasService.ts","models/FormsData/Address.ts","models/requests/IAddressR.ts","components/inputs/InputAddress.tsx","components/inputs/AreaType.tsx","components/c_sections/section_3.tsx","NSI/1.2.643.5.1.13.13.99.2.20.ts","NSI/1.2.643.5.1.13.13.99.2.15.ts","NSI/1.2.643.5.1.13.13.99.2.16.ts","NSI/1.2.643.5.1.13.13.11.1038.ts","NSI/1.2.643.5.1.13.13.99.2.18.ts","models/FormsData/RelatedSubject.ts","models/FormsData/ChildInfo.ts","components/MotherInfo.tsx","components/c_sections/section_5.tsx","NSI/1.2.643.5.1.13.13.99.2.21.ts","NSI/1.2.643.5.1.13.13.99.2.22.ts","NSI/1.2.643.5.1.13.13.99.2.23.ts","components/c_sections/section_6.tsx","models/FormsData/Procedure.ts","models/FormsData/DeathReason.ts","services/DiagnosisService.ts","components/inputs/Reason.tsx","services/ACME_Service.ts","utils/acme.ts","components/c_sections/section_7.tsx","components/c_sections/section_8.tsx","NSI/1.2.643.5.1.13.13.99.2.24.ts","NSI/1.2.643.5.1.13.13.99.2.25.ts","utils/functions.ts","models/FormsData/DoctorRequest.ts","services/DoctorService.ts","models/FormsData/Authenticator.ts","components/c_sections/section_9.tsx","models/FormsData/Participant.ts","components/c_sections/section_10.tsx","pages/CertificatePage.tsx","models/FormsData/Doctor.ts","pages/DoctorsPage.tsx","NSI/1.2.643.5.1.13.13.11.1040.ts","services/OrganizationService.ts","pages/ListPage.tsx","images/security.png","static/LoginImageDiv.js","pages/LoginPage.tsx","pages/MainPage.tsx","images/ava.jpg","services/UsersService.ts","images/hospital.jpg","pages/SettingsPage.tsx","routes.js","pages/AdminPage.tsx","pages/ProfilePage.tsx","pages/RegistrationPage.tsx","pages/PasswordRecoveryPage.tsx","pages/MessagePage.tsx","pages/ErrorPage.tsx","components/AppRouter.tsx","App.tsx","store/addressStore.ts","models/FormsData/Patient.ts","models/FormsData/Certificate.ts","models/render_options/default.ts","models/render_options/address.ts","models/render_options/Authenticator.ts","models/render_options/lettered_reason.ts","services/CertificateService.ts","models/render_options/patient.ts","models/render_options/external_death_reason.ts","models/render_options/other_reason.ts","models/render_options/procedure.ts","models/render_options/child_info.ts","models/render_options/related_subject.ts","models/render_options/person.ts","models/render_options/Doctor.ts","models/render_options/Participant.ts","store/certificateStore.ts","store/layoutStore.ts","store/suggestionsStore.ts","store/temporaryIDStore.ts","services/AuthService.ts","index.tsx","store/userStore.ts"],"names":["NoMatchPage","className","href","HOME_ROUTE","LOGIN_ROUTE","LIST_ROUTE","CERTIFICATE_ROUTE","DOCTORS_ROUTE","USER_ROUTE","MO_SETTINGS_ROUTE","DIRECTION","ROLES","USER","ADMIN","STATS","RunsackFilterMatchMode","startsWith","contains","notContains","endsWith","equals","notEquals","in","lt","lte","gt","gte","between","dateIs","dateIsNot","dateBefore","dateAfter","custom","DESTROY_OPTION","_destroy","TIME_FORMAT","year","month","day","hour","minute","DATE_FORMAT","FooterLayout","props","orgName","userInfo","organization","name","profile","roles","split","SideBarMenu","userStore","useContext","Context","useState","activeItem","setActiveItem","onItemClick","event","item","disabled","preventDefault","url","history","push","command","originalEvent","classNames","id","style","menu","items","label","role","length","map","index","separator","renderSeparator","iconClassName","icon","linkClassName","undefined","submenuIcon","content","type","onClick","e","target","includes","submenu","UniqueComponentId","renderMenuItem","renderItem","renderMenu","model","API_URL","FIAS_URL","ACME_URL","$api","axios","create","withCredentials","baseURL","$fias","$acme","headers","Accept","interceptors","request","use","config","Authorization","localStorage","getItem","response","error","a","originalRequest","status","_isRetry","get","setItem","data","tokens","access","Error","errors","message","reduce","result","element","JSON","stringify","Severity","SideBarLayout","observer","certificateStore","cert_id","cert","toString","cert_route_id","issueDate","logout","activeUrl","findActive","isActive","forEach","to","src","avatar","alt","ProfileMenu","useHistory","NotificationsMenu","summary","detail","detail_templ","TopBarLayout","layoutStore","isTOM","useMediaQuery","query","profileMenuClassName","profileMenuActive","notificationsMenuClassName","notificationsMenuActive","notif_items","notif_amount","previtem","sum","userName","person_name","family","given_1","given_2","charAt","tabletOrMobile","setTabletOrMobile","sideBarToggle","title","setNotificationsMenuActive","setProfileMenuActive","ava","setRightSideBarActive","ACTIONS","Map","color","TIME_EVENT_OPTIONS","render_options","only","include","user","AuditService","post","rightSideBarActive","timeEvents","setTimeEvents","q","setQ","useEffect","sorts","user_organization_id_eq","getAudits","limit","then","catch","ACTION_ATTRIBUTES","action","timeStr","Date","created_at","toLocaleString","backgroundColor","email","ActionButtonLayout","position","radius","direction","layoutStaticInactive","wrapperClass","setUserInfo","userId","isLoading","addLocale","noFilter","clear","apply","matchAll","matchAny","addRule","removeRule","accept","reject","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","firstDay","isRTL","showMonthAfterYear","yearSuffix","week","timeOnlyTitle","timeText","hourText","minuteText","secondText","allDayText","actionItems","CERT_TYPES","code","s_name","header","htmlFor","value","series","placeholder","number","dateFormat","inputId","autoFocus","options","certType","filter","optionLabel","find","el","onChange","padding","fontWeight","numberPrev","seriesPrev","effTimePrev","borderLeft","borderLeftStyle","background","latestOne","HOME_REGION_CODE","DEFAULT_CERT_SUGGESTIONS","section","suggestion","done","NULL_FLAVORS","NULL_FLAVOR_IDX","NI","INV","DER","OTH","NINF","PINF","UNC","MSK","NA","UNK","ASKU","NAV","NASK","QS","TRC","ID_CARD_TYPES","s_mask","n_mask","c_mask","DEFAULT_ERROR_TOAST","severity","life","baseZIndex","NullFlavorWrapper","setValue","checked","setChecked","fieldStyle","paraNum","marginLeft","nullFlavors","field_name","parent_attr","nullFlavor","checkbox","lincked","setCheck","_nullFlavors","marginTop","checkboxLabel","dropdown","findIndex","idx","canNullFlavor","field","width","getCleanNullFlavor","old","_new","parent_guid","checkFieldNullFlavor","key","splice","Identity","_id","_identityCardType","_series","_number","_issueOrgName","_issueOrgCode","_issueOrgDate","_parentGUID","this","identity_card_type_id","issueOrgName","issueOrgCode","parentGUID","null_flavors","makeAutoObservable","deep","_identity","toDateString","null_flavors_attributes","ct","issueOrgDate","Person","_personName","_SNILS","_address","_contacts","_oldOne","SNILS","address","contacts","_person","state","streetAddressLine","address_attributes","contacts_attributes","person_name_attributes","fio","snils","getOneLinePersonName","trim","PersonName","personName","setFio","isErrorMessage","submitted","values","_result","suggestionsStore","certificate","patient","person","birth_year","yearBTChecked","setYearBTChecked","deathYear","yearDTChecked","setYearDTChecked","identified","optionCode","fromRelatives","isDeathTime","deathDatetime","identity","policyOMS","setBirthDay","birth_date","gender","locale","mask","showIcon","setDeathDay","timeOnly","hourFormat","inputsIdentity","dulValue","seriesProps","seriesField","numberProps","numberField","depCodeProps","docChecked","setDocChecked","identityCardType","setDulValue","nullFlavorOption","depCodeField","nf","cols","rows","paddingLeft","addressStore","regions","regionsOptions","searchStr","setSearchStr","region","setRegion","district","setDistrict","city","setCity","town","setTown","street","setStreet","housenum","house","setHouse","fiasOptions","addresses","setAddresses","toast","useRef","setAddress","parent","postalCode","aoGUID","AOGUID","houseGUID","HouseGUID","level","slice","buildnum","strucnum","fetchRegionOptions","onHide","dialogVisible","autocompleteOnChange","setter","getSuggestions","getChildItems","reason","current","show","footer","manualMode","isNotStrictly","oldOne","onAddrComplete","onCancel","visible","breakpoints","modal","suggestions","completeMethod","replace","searchBar","filterBy","forceSelection","maxWidth","flat","ref","FiasService","regionID","parentOpt","Address","_streetAddressLine","_state","_district","_city","_town","_street","_aoGUID","_houseGUID","_housenum","_buildnum","_strucnum","_flat","_postalCode","_parent","house_number","building_number","struct_number","flat_number","fetchAddressHierarchy","fiasItem","shortname","console","log","parseFiasItem","DEFAULT_ADDRESS","invalid","strictly","bt_id","_addr","onClear","AreaType","addressLife","setAddressLife","deathAddr","addressDeath","setAddressDeath","checkedLifeArea","checkedDeathArea","onAddressCopy","deathAreaType","lifeAreaType","addressProps","DEAD_PLACE_TYPES","MARITAL_STATUSES","EDUCATION_LEVELS","SOCIAL_STATUSES","TERMS_PREGNANCY","RelatedSubject","_guid","_familyConnection","_fio","_birthTime","guid","uuidv4","family_connection","birthTime","addr","_rs","addr_attributes","toLocaleDateString","ChildInfo","_termPregnancy","_weight","_whichAccount","_relatedSubject","term_pregnancy","weight","which_account","related_subject","_chInfo","related_subject_attributes","getAttributes","MotherInfo","childInfo","relatedSubject","max","min","whichAccount","temp","age","hoursAge","isChildInfo","yearsAge","isMonthChild","daysAge","termPregnancy","ddStyle","minWidth","dDivStyle","paddingTop","deathPlace","chInf","maritalStatus","educationLevel","socialStatus","DEATH_KINDS","MEDICS","BASIS_DERMINING","isExtReason","deathKind","extReasonTime","panelStyle","extReasonDescription","establishedMedic","basisDetermining","Procedure","_medicalServ","_textValue","_effectiveTime","medical_serv","text_value","effective_time","_pr","medical_serv_id","getHours","getMinutes","DeathReason","_diagnosis","_years","_months","_weeks","_days","_hours","_minutes","_procedures","diagnosis","ext_diagnosis","days","hours","minutes","months","weeks","years","procedures","proc","textValue","medicalServ","effectiveTime","isExt","_dr","diagnosis_id","Number","parseInt","ext_diagnosis_id","procedures_attributes","_temp","pr","concat","DiagnosisService","offset","CSS_classes","diagnoses","setDiagnoses","diagnosisText","setDiagnosisText","diagnosisCode","setDiagnosisCode","cleanEffectiveTime","deathReason","deathTime","setDeathReason","upButton","onUp","downButton","onDown","diagnosisOptionTemplate","option","marginRight","ICD10","effTime","onTimeChecked","saveReasonEffTime","onDiagnosisChecked","fieldName","delay","s_name_cont","ICD10_start","fetchExtDiagnoses","fetchDiagnoses","itemTemplate","ACMEService","input","data_AIN","ACME_AIN","withOtherReasons","deathDate","X1X4","X7X12","padStart","X14X17","X19X21","X22X23","X24X25","X26X29","birthDay","deathDay","XYMD","X39X41","_diff","getFullYear","getMonth","getDate","X42","X45","reasonD","lastIndexOf","substring","reasonA","padEnd","reasonB","reasonC","reasons","deathReasons","reasons_in","X171","X174","pregnancyConnection","X176X177","X178X179","X180X183","X188","X219","X220X231","reason_a","reason_b","reason_c","ext_reason","_part_2","codogram","parse_ACME_TIN","xACME","_sb","x45","x54","x51_53","spX45","spX54","spX51_53","mainCSSClass","isACME","reasonBckecked","reasonCckecked","reasonDckecked","reasonIDExchange","first","second","reasonACME","height","changeReasonACME","onSucccess","onError","strACMEAIN1","isReasonD","strACMEAIN2","runACME","TINs","data_TIN","_res","_alter","doACME","temporaryIDStore","checkReason","lastDeathReasonID","newReason","setNewReason","medicalServs","setMedicalServs","medservText","setMedservText","medservCode","setMedservCode","procedure","setProcedure","dateETChecked","setDateETChecked","diagnosChecked","setDiagnosChecked","selectedProcedures","setSelectedProcedures","selectedReasons","setSelectedReasons","setMedServValue","lastProcedureID","s_code","medServOptionTemplate","_reasons","val","name_cont","s_code_start","fetchMedicalServs","inputStyle","showTime","margin","selection","responsiveLayout","dataKey","emptyMessage","onSelectionChange","selectionMode","headerStyle","body","rowData","_resultStr","procNames","TRAFFIC_ACCIDENT","PREGNANCY_CONNECTION","removeEmpty","obj","candidat","Array","prototype","isPrototypeOf","newObj","Object","keys","DOCTOR_RENDER_OPTIONS","DoctorService","doctor","Doctor","put","doctor_id","delete","Authenticator","_time","_doctorID","time","_authenticator","doctors","setDoctors","getDoctors","organization_id_eq","err","isTrafficAccident","trafficAccident","isPregnancyConnection","nullFlavorDropdnStyle","customDropdnStyle","customParagraphFieldStyle","fontSize","author","doctorID","showClear","legalAuthenticator","authenticator","Participant","_receiptDate","_description","_original","receipt_date","description","original","person_attributes","identity_attributes","participant","receiptDate","buttonDisabled","match","params","certID","setCertID","setMessage","_idx","cArray","certs","select","findById","location","search","clean","save","sm_code","finally","createNew","sugCount","redSuggestionsCount","layoutParams","secton_router","shape","rowClassName","_position","_organization","_doctor","organization_id","position_id","emptyDoctor","setDoctor","doctorDialog","setDoctorDialog","deleteDoctorDialog","setDeleteDoctorDialog","deleteDoctorsDialog","setDeleteDoctorsDialog","selectedDoctors","setSelectedDoctors","setSubmitted","telcom_value","main","setEmail","phone","setPhone","setPosition","positions","setPositions","dt","openNew","hideDialog","hideDeleteDoctorDialog","hideDeleteDoctorsDialog","findIndexById","confirmDeleteSelected","onContactChange","contact","_contact","telcom_use","doctorDialogFooter","Fragment","_doctors","oldValue","newValue","_request","audits","createAudit","audit","_audits","before","after","_person_attributes","oldPerson","newPerson","_person_name_attributes","oldFIO","newFIO","oldAddress","newAddress","oldContacts","u","newContacts","oldNullFlavors","newNullFlavors","null_flavor_attributes","genUpdateDoctorRequest","updateDoctor","addDoctor","deleteDoctorDialogFooter","removeDoctor","deleteDoctorsDialogFooter","fioBodyTemplate","row","right","exportable","editDoctor","required","getPositions","test","GENDERS","ORGANIZATION_RENDER_OPTIONS","except","OrganizationService","Organization","lazyLoading","setLazyLoading","sortField","setSortField","sortOrder","setSortOrder","filters","setFilters","organizations","setOrganizations","isSuperUser","getOrganizations","PrimeReact","selected","setSelected","matchMode","FilterMatchMode","IN","operator","constraints","STARTS_WITH","CONTAINS","GREATER_THAN_OR_EQUAL_TO","LESS_THAN_OR_EQUAL_TO","DATE_AFTER","DATE_BEFORE","filterClearTemplate","filterClearCallback","filterApplyTemplate","filterApplyCallback","custodian","cusName","filterField","showFilterMatchModes","filterClear","filterApply","filterElement","filterCallback","flexGrow","flexBasis","count","scrollDirection","scrollable","scrollHeight","size","loading","filterDisplay","onFilter","_filters","_constraint","_codes","basis_determining_in","death_place_in","custodian_id_in","getList","virtualScrollerOptions","lazy","onLazyLoad","last","itemSize","filterLocale","onRowDoubleClick","onSort","order","rowNumber","sortable","frozen","cert_type","filterPlaceholder","dataType","showFilterOperator","acme","reason_ACME","cr","c_reason","ar","a_reason","br","b_reason","dr","d_reason","death_reasons","birth","death","death_datetime","death_year","dd","db","m","death_place","place","basis_determining","basis","iDate","issue_date","LoginImageDiv","onSubmit","form","login","password","onPassordRecovery","renew_link","isFormFieldValid","meta","touched","getFormErrorMessage","logo","initialValues","validate","render","handleSubmit","autoComplete","toggleMask","marginBottom","version","record","UsersService","setAudits","setOrganization","ID","setID","getOrganization","changesAudit","oid","textAlign","name_full","license","license_data","okpo","isSaveAvaible","updateOrganization","link","AUTH_ROUTES","path","Component","MainPage","ListPage","CertificatePage","DoctorsPage","setUser","getUser","user_name","user_team","SettingsPage","NON_AUTH_ROUTES","LoginPage","names","phone_number","password_confirmation","registration","PWD_RECOVERY_ROUTE","pwd_renew","activation_link","PUBLIC_ROUTES","MESSAGE_ROUTE","ERROR_ROUTE","AppRouter","token","isAuth","setHistory","checkAuth","chech_routes","component","exact","App","AddressStore","_isLoding","_history","_regionsOptions","_fiasOptions","_dialogVisible","_manualMode","_onAddrComplete","_regions","parse","defaultRegion","getRegions","substr","createNullFlavors","isLoding","Patient","_gender","_birth_date","_birth_year","_provider_organization","_addrType","addr_type","_patient","person_id","provider_organization","isYear","Certificate","_issueDate","_certType","_seriesPrev","_numberPrev","_effTimePrev","_lifeAreaType","_deathAreaType","_deathDatetime","_deathYear","_deathMonth","_deathPlace","_maritalStatus","_educationLevel","_socialStatus","_deathKind","_extReasonTime","_extReasonDescription","_reasonA","_reasonB","_reasonC","_reasonD","_deathReasons","_reasonACME","_deathAddr","_policyOMS","_childInfo","_establishedMedic","_basisDetermining","_trafficAccident","_pregnancyConnection","_author","_audithor","_legalAuthenticator","_custodian_id","_participant","_latestOne","disposers","latest_one","number_prev","series_prev","policy_OMS","life_area_type","death_area_type","death_addr","death_kind","education_level","marital_status","social_status","eff_time_prev","child_info","audithor","legal_authenticator","ext_reason_time","ext_reason_description","established_medic","traffic_accident","pregnancy_connection","autorun","utc1","UTC","b","ms","milisecAge","Math","floor","setMinutes","setHours","setDate","setMonth","setFullYear","_cert","audithor_attributes","author_attributes","legal_authenticator_attributes","child_info_attributes","death_addr_attributes","death_reasons_attributes","a_reason_attributes","b_reason_attributes","c_reason_attributes","d_reason_attributes","patient_attributes","custodian_id","participant_attributes","eff_time","lat","dat","disposer","DEFAULT_RENDER_OPTIONS","NULLFLAVORABLE_RENDER_OPTIONS","DEFAULT_AUTHENTICATOR_RENDER_OPTIONS","LETTERED_DEATH_REASON_RENDER_OPTIONS","CERTIFICATE_FULL_RENDER_OPTIONS","CertificateService","certificate_id","configure","enforceActions","CertificateStore","_submitted","_userInfo","_certs","_selected","_sorts","_first","_last","_rows","_count","_needFetch","_q","custodian_id_eq","getCount","onSuccess","patient_id","updateCertificate","nCert","addCertificate","removeCertificate","num","dataLength","doAfter","isAdd","getCertificates","id_eq","LayoutStore","_isTabletOrMobile","_isLayoutStaticInactive","_isRightSidebarActive","_isProfileMenuActive","_isNotificationsMenuActive","_isLoading","_message","isLayoutStaticInactive","rightSidebarActive","SuggestionsStore","cStore","_cStore","_suggestions","_identified","_fromRelatives","isBirthDay","isDeathDay","isSNILS","oms","isOMS","isCODE","isIORGDate","isIORGName","isIDSeries","isIDNumber","isLifeArea","isDeathArea","isDeathAreaType","isLifeAreaType","isTERMS_PREGNANCY","isCHILD_WEIGHT","isNUMBER_PREGNANCY","isMOTHER_FIO","isMOTHER_BIRTHDAY","isMOTHER_ADDRESS","isPersonNameSug","TemporaryIDStore","_lastCertificateID","_lastDeathReasonID","_lastProcedureID","AuthService","_isAuth","_user","_token","access_token","setAuth","removeItem","setToken","setLoading","getUserInfo","createContext","ReactDOM","Provider","document","getElementById"],"mappings":"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MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,WACN8B,WAAY,8YACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,WACN8B,WAAY,iYACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,WACN8B,WAAY,oZACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,4XACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,4XACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,uTACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,sZACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WAAY,wVACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WACE,+gBACFC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WAAY,iXACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WAAY,waACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WAAY,gcACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,sTACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,2QACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,+PACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,iTACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WACE,2pBACFC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,igBACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,wZACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,eACN8B,WAAY,2PACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,qBACN8B,WAAY,8eACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,oBACN8B,WAAY,wVACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,0BACN8B,WACE,ulBAC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","file":"static/js/main.aea486ad.chunk.js","sourcesContent":["\r\nimport { FC } from 'react'\r\nimport '../styles/simplePage.css'\r\nimport '../styles/root.css'\r\nexport const NoMatchPage: FC = () => {  \r\n\r\n  return (\r\n    <>\r\n      <div className=\"exception-body\">\r\n        <div className=\"nopage-block\">\r\n          <h1 className=\"nopage_h1\">Неверный адрес страницы</h1>\r\n          <div className=\"nopage_text\">Проверьте, правильно ли вы ввели его. Если данные верны, пожалуйста, сообщите нам об ошибке.</div>\r\n          <a className=\"nopage-button\" href=\"../\">На главную</a><a className=\"nopage-button\" href=\"../\">Сообщить об ошибке</a>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}","export interface IObjectKeys {\r\n  [key: string]: string | number | undefined\r\n}\r\nexport const HOME_ROUTE = \"/\"\r\nexport const LOGIN_ROUTE = \"/login\"\r\nexport const REGISTRATION_ROUTE = \"/registration\"\r\nexport const PWD_RECOVERY_ROUTE = \"/pwd_recovery\"\r\nexport const MESSAGE_ROUTE = \"/message\"\r\nexport const ERROR_ROUTE = \"/error\"\r\nexport const ADMIN_ROUTE = \"/admin\"\r\nexport const LIST_ROUTE = \"/list\"\r\nexport const CERTIFICATE_ROUTE = \"/cert\"\r\nexport const REPORT_ROUTE = \"/report\"\r\nexport const DOCTORS_ROUTE = \"/doctors\"\r\nexport const USER_ROUTE = \"/user\"\r\nexport const MO_SETTINGS_ROUTE = \"/organization\"\r\nexport const DIRECTION = [\"asc\", \"desc\"]\r\nexport const ROLES: IObjectKeys = {\r\n  USER: \"ПОЛЬЗОВАТЕЛЬ\",\r\n  ADMIN: \"АДМИНИСТРАТОР\",\r\n  STATS: \"СТАТИСТИК\",\r\n}\r\nexport const RunsackFilterMatchMode = {\r\n  startsWith: \"_start\",\r\n  contains: \"_cont\",\r\n  notContains: \"_not_cont\",\r\n  endsWith: \"_end\",\r\n  equals: \"_eq\",\r\n  notEquals: \"_not_eq\",\r\n  in: \"_in\",\r\n  lt: \"_lt\",\r\n  lte: \"lteq\",\r\n  gt: \"_gt\",\r\n  gte: \"_gteq\",\r\n  between: \"\",\r\n  dateIs: \"_eq\",\r\n  dateIsNot: \"_not_eq\",\r\n  dateBefore: \"_lt\",\r\n  dateAfter: \"_gt\",\r\n  custom: \"\",\r\n}\r\n// маркер удаления для использования в запросах на обновление\r\n// destroy-marker for using in nested_attributes\r\nexport const DESTROY_OPTION = { _destroy: \"1\" }\r\n\r\n//формат дата & время\r\nexport const TIME_FORMAT = {\r\n  year: \"2-digit\",\r\n  month: \"2-digit\",\r\n  day: \"2-digit\",\r\n  hour: \"2-digit\",\r\n  minute: \"2-digit\",\r\n} as Intl.DateTimeFormatOptions\r\n\r\n// формат даты\r\nexport const DATE_FORMAT = { year: \"2-digit\", month: \"short\", day: \"2-digit\" } as Intl.DateTimeFormatOptions\r\n","import { IUserInfo } from \"../../models/responses/IUserInfo\"\r\nimport {ROLES}  from \"../../utils/consts\"\r\n\r\ntype FooterLayoutProps = {userInfo: IUserInfo | null}\r\nconst FooterLayout = (props: FooterLayoutProps) => {\r\n  const orgName = props.userInfo!==null && props.userInfo.organization ? props.userInfo.organization.name : ''\r\n  const profile = props.userInfo!==null && props.userInfo.roles ? ROLES[props.userInfo.roles.split(' ')[0]]: ''  \r\n  return (\r\n    <div className=\"layout-footer\">\r\n      <div className=\"footer-logo-container\">\r\n        <span className=\"app-name\">{orgName}:</span>\r\n        <span className=\"app-profile\">{profile}</span>\r\n      </div>\r\n      <span className=\"copyright\">2022 © ГБУЗ АО \"АМИАЦ\"</span>\r\n    </div>       \r\n  )\r\n}\r\nexport default FooterLayout","export default __webpack_public_path__ + \"static/media/favicon.b5c775a4.png\";","import React, { FC,  useContext,  useState } from 'react'\r\nimport { MenuItem } from 'primereact/menuitem'\r\nimport { classNames, UniqueComponentId } from 'primereact/utils'\r\nimport { IMenuProps } from './IMenuProps'\r\nimport { HOME_ROUTE } from '../../utils/consts'\r\nimport { Context } from '../..'\r\n\r\n\r\nexport const SideBarMenu:FC<IMenuProps> = (props: IMenuProps) =>{ \r\n  const { userStore } = useContext(Context)\r\n  const [activeItem, setActiveItem] = useState<MenuItem>({})\r\n  const onItemClick = (event: React.MouseEvent, item:MenuItem)=> {\r\n        if (item.disabled) {\r\n            event.preventDefault()\r\n            return\r\n        }\r\n        if (!item.url) {\r\n           event.preventDefault()\r\n        } else if (item.url.startsWith(HOME_ROUTE)) {\r\n           userStore.history().push(item.url) \r\n           event.preventDefault()          \r\n        }\r\n        if (item.command) item.command({           \r\n              originalEvent: event,\r\n              item,\r\n            })        \r\n        if (item!==activeItem) {\r\n          if (activeItem.className) activeItem.className=''\r\n          item.className='active-menuitem'\r\n          setActiveItem(item)\r\n        } else {\r\n          item.className=''\r\n          setActiveItem({})\r\n        }\r\n  }\r\n\r\n  const className = classNames(\"layout-menu-container\", props.className)\r\n  const menu = (items: MenuItem[], label: string)=> {\r\n    const renderMenu = ()=> {\r\n      if (items.length>0) {\r\n        const renderItem = (item:MenuItem, index:number) => {\r\n          const renderSeparator = (index:number)=><li key={\"separator_\" + index} className='menu-separator' role='separator'></li>\r\n          const renderMenuItem =(item:MenuItem, index:number) => {\r\n          const submenuIconClassName = \"pi pi-fw pi-angle-down layout-submenu-toggler\"\r\n          const iconClassName = classNames(\"layout-menuitem-icon pi pi-fw\", item.icon)\r\n          const linkClassName = classNames(\"p-ripple\", { \"p-link\": item.url === undefined }, \r\n          { \"p-disabled\": item.disabled })\r\n          const submenuIcon = item.items && <span className={submenuIconClassName}></span>\r\n          const icon = item.icon && <span className={iconClassName}></span>\r\n          const label = item.label && <span className='layout-menuitem-text'>{item.label}</span>\r\n          const content = item.className || item.items ?             [\r\n              <button key={`bt_${item.label}_${index}`} type='button' onClick={(e:React.MouseEvent)=>onItemClick(e, item)} className=\"p-ripple p-link\">\r\n                {icon}\r\n                {label}\r\n                {submenuIcon}                                \r\n              </button>,              \r\n            ] :  [<a href={item.url} target={item.target}\r\n                    key={`a_${item.disabled ? label : index}`}  \r\n                    className={linkClassName} \r\n                    onClick={(e:React.MouseEvent)=>onItemClick(e, item)} \r\n                    aria-disabled={item.disabled}>\r\n                    {icon}{label}</a>,]\r\n            if (item.className?.includes('layout-root-menuitem')) \r\n               content.push(<div key={`dv_${item.label}_${index}`} className={item.className}><div className='layout-menuitem-root-text'>{item.label}</div></div>)\r\n            const submenu = (item.items && item.className) && menu(item.items, item.label || UniqueComponentId())      \r\n            return (\r\n              <li key={`li_${index}_${item.className}`} \r\n                className={item.className} style={item.style}       \r\n                role='menuitem'>\r\n                {content}\r\n                {submenu}\r\n              </li>\r\n            )\r\n          }\r\n          if (item.separator) return renderSeparator(index)\r\n          else return renderMenuItem(item, index) \r\n        }\r\n        return items.map((item, index) => {\r\n          return renderItem(item, index)\r\n        })\r\n      }\r\n      return null\r\n    }\r\n    \r\n    return (\r\n      <ul key={label} className=\"layout-menu\" role=\"menu\">\r\n        {renderMenu()}\r\n      </ul>\r\n    )\r\n  }  \r\n  return (\r\n    <div id={props.id || \"sidebar_menu\"} className={className} style={props.style}>\r\n      {menu(props.model || [], \"global\")}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n","import axios, { AxiosRequestConfig } from \"axios\"\r\nimport { AuthResponse } from \"../models/responses/AuthResponse\"\r\n\r\n// настройки на back-end\r\n//Main API service (Основной API) URL\r\nexport const API_URL = \"http://api-medss.int.amurzdrav.ru/REST_API/v1/\"\r\n//FIAS service (Сервис адресов ФИАС) URL\r\nexport const FIAS_URL = \"http://fias.int.amurzdrav.ru/fias\"\r\n//АСМЕ service (Сервис взаимодействия с АСМЕ) URL\r\nexport const ACME_URL = \"http://acme.int.amurzdrav.ru/\"\r\n\r\nconst $api = axios.create({\r\n  withCredentials: true,\r\n  baseURL: API_URL,\r\n})\r\n\r\nexport const $fias = axios.create({\r\n  baseURL: FIAS_URL,\r\n})\r\n\r\nexport const $acme = axios.create({\r\n  headers: {\r\n    Accept: \"application/json\",\r\n    \"Content-Type\": \"application/json; charset=utf-8\",\r\n    \"X-Requested-With\": \"XMLHttpRequest\",\r\n  },\r\n  baseURL: ACME_URL,\r\n})\r\n\r\n$api.interceptors.request.use((config: AxiosRequestConfig) => {\r\n  config.headers.Authorization = `Bearer ${localStorage.getItem(\"token\")}`\r\n  return config\r\n})\r\n\r\n$api.interceptors.response.use(\r\n  (config) => config,\r\n  async (error) => {\r\n    const originalRequest = error.config\r\n    if (error.response && error.response.status === 401 && error.config && !error.config._isRetry) {\r\n      originalRequest._isRetry = true\r\n      try {\r\n        const response = await axios.get<AuthResponse>(`${API_URL}auth/refresh`, { withCredentials: true })\r\n        localStorage.setItem(\"token\", response.data.tokens.access)\r\n        return $api.request(originalRequest)\r\n      } catch (e) {\r\n        throw new Error(\"API error 401, Сеанс не авторизован\")\r\n      }\r\n    } else if (error.response && [406, 422].includes(error.response.status)) {\r\n      if (error.response.data && error.response.data.errors) {\r\n        let message = error.response.data.errors.reduce((result: string, element: string) => {\r\n          result = `${result}, ${element}`\r\n          return result\r\n        }, `API error ${error.response.status}`)\r\n        throw new Error(message)\r\n      } else throw new Error(`API error ${JSON.stringify(error)}`)\r\n    }\r\n    throw error\r\n  }\r\n)\r\n\r\n$fias.interceptors.response.use(\r\n  (config) => config,\r\n  async (error) => {\r\n    if (error.response && error.response.status && [406, 422].includes(error.response.status)) {\r\n      if (error.response.data && error.response.data.errors) {\r\n        let message = error.response.data.errors.reduce((result: string, element: string) => {\r\n          result = `${result}, ${element}`\r\n          return result\r\n        }, `API error ${error.response.status}`)\r\n        throw new Error(message)\r\n      } else throw new Error(`API error ${error.response.status}`)\r\n    } else if (error.message.includes(\"Network Error\")) new Error(\"Ошибка сети: соединение не может быть установлено\")\r\n    throw error\r\n  }\r\n)\r\nexport default $api\r\n","import { IPersonName } from \"../IPersonName\"\r\n\r\nexport const ACTIONS = new Map<string, IActionAttribute>([\r\n  [\"added\", { title: \"Добавлено:\", icon: \"pi pi-plus\", color: \"rgb(104, 159, 56)\" }],\r\n  [\"updated\", { title: \"Изменено:\", icon: \"pi pi-pencil\", color: \"rgb(2, 136, 209)\" }],\r\n  [\"removed\", { title: \"Удалено:\", icon: \"pi pi-trash\", color: \"rgb(251, 192, 45)\" }],\r\n  [\"archived\", { title: \"Архивировано:\", icon: \"pi pi-inbox\", color: \"rgb(96, 125, 139)\" }],\r\n  [\"commented\", { title: \"Комментарий:\", icon: \"pi pi-comment\", color: \"rgb(96, 125, 139)\" }],\r\n  [\"imported\", { title: \"Импорт:\", icon: \"pi pi-download\", color: \"rgb(156, 39, 176)\" }],\r\n  [\"exported\", { title: \"Экспорт:\", icon: \"pi pi-upload\", color: \"rgb(156, 39, 176)\" }],\r\n  [\"signed_in\", { title: \"Подписано:\", icon: \"pi pi-user-edit\", color: \"rgb(104, 159, 56)\" }],\r\n  [\"signed_out\", { title: \"Отозвано:\", icon: \"pi pi-user-minus\", color: \"rgb(251, 192, 45)\" }],\r\n])\r\nexport enum Severity {\r\n  success,\r\n  info,\r\n  warning,\r\n  error,\r\n}\r\nexport interface IActionAttribute {\r\n  title: string\r\n  icon: string\r\n  color: string\r\n}\r\n\r\nexport interface ITimeEvent {\r\n  id: number\r\n  action: string\r\n  severity: Severity\r\n  detail: string\r\n  table?: string\r\n  summary?: string\r\n  user: { id: number; email: string; person_name: IPersonName }\r\n  organization: { id: number; name: string }\r\n  created_at: string\r\n}\r\n","import avatar from \"../../images/favicon.png\"\r\nimport { useContext } from \"react\"\r\nimport { observer } from \"mobx-react-lite\"\r\nimport { Context } from \"../..\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { CERTIFICATE_ROUTE, HOME_ROUTE, LIST_ROUTE } from \"../../utils/consts\"\r\nimport { SideBarMenu } from \"../menus/SideBarMenu\"\r\nimport { MenuItem } from \"primereact/menuitem\"\r\nimport { API_URL } from \"../../http\"\r\ntype SideBarLayoutProps = {activeUrl: string}\r\nconst SideBarLayout = observer((props: SideBarLayoutProps) => {\r\n   const {userStore, certificateStore} = useContext(Context)\r\n   const cert_id =  certificateStore.cert.id?.toString() || 'new'\r\n   const cert_route_id = `${CERTIFICATE_ROUTE}/${cert_id}`\r\n   const items:MenuItem[] = [    \r\n      { label: \"Свидетельство\", className: \"layout-root-menuitem\",     \r\n        items:[{label:\"Секции\", icon:\"pi-file\", items:[\r\n          {label:\"Сведения о документе\", \r\n          url:`${cert_route_id}?q=0`}, \r\n          {label:\"Начало(п.1-3,7)\", url:`${cert_route_id}?q=1`},{label:\"Документы(п.4-6)\", url:`${cert_route_id}?q=2`},{label:\"Адреса.(п.8-11)\", url:`${cert_route_id}?q=3`},{label:\"п.12-17\", url:`${cert_route_id}?q=5`},{label:\"п.18-21\", url:`${cert_route_id}?q=6`},{label:\"Причины (п.22 I)\", url:`${cert_route_id}?q=7`},{label:\"Прочие (п.22 II)\", url:`${cert_route_id}?q=8`},{label:\"п.23-26\", url:`${cert_route_id}?q=9`},{label:\"Получатель\", url:`${cert_route_id}?q=10`}]},\r\n        { label: \"Печать\", disabled: !certificateStore.cert.issueDate,  icon:\"pi-print\", items: [{label:\"Лицевая\", icon:\"pi-file\", target:\"_blank\", url:`${API_URL}print/face/${cert_id}`},{ label:\"Оборотная\", icon:\"pi-file\", target:\"_blank\", url:`${API_URL}print/back/${cert_id}`}]},  \r\n        { label: \"Списки\",  icon:\"pi-list\", items: [{label:\"Свидетельства\", icon:\"pi-id-card\", url:LIST_ROUTE},{label:\"Журнал\", icon:\"pi-align-left\", url:\"/#\"}]},]}, \r\n      {separator: true},\r\n      { label: \"Сеанс\", className: \"layout-root-menuitem\",      \r\n        items: [{label:\"Главная\", icon:\"pi-home\", url:HOME_ROUTE},{label:\"Свидетельства\", icon:\"pi-list\", url:LIST_ROUTE},{label:\"Выход\", icon:\"pi-sign-out\", command:()=>{userStore.logout()}}]     \r\n      },     \r\n   ]   \r\n  const url = props.activeUrl\r\n  const findActive = (items: MenuItem[])=>{\r\n    let isActive = false    \r\n    items.forEach((item)=>{        \r\n      if (item.url === url)  { \r\n        item.className='active-menuitem' \r\n        isActive = true \r\n      }\r\n      if (isActive) return true\r\n      if (item.items) {         \r\n        if (findActive(item.items)) { \r\n          item.className = item.className || 'active-menuitem'\r\n          isActive = true  \r\n        }  \r\n      } \r\n    })      \r\n    return isActive\r\n  }\r\n  findActive(items)  \r\n  return (\r\n    <div className='layout-sidebar'>      \r\n        <Link className='logo' to='#/'>\r\n          <img id='app-logo' className='logo-image' src={avatar} alt='РРМСС V3.0' />\r\n          <span className='app-name'>МедСС</span>\r\n        </Link>       \r\n        <SideBarMenu model={items} />  \r\n    </div>      \r\n  )\r\n})\r\nexport default SideBarLayout","export default __webpack_public_path__ + \"static/media/ava.0f62058a.png\";","import { MenuItem } from 'primereact/menuitem'\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { HOME_ROUTE } from '../../utils/consts'\r\nimport { IMenuProps } from './IMenuProps'\r\n\r\nexport const ProfileMenu: FC<IMenuProps> = (props: IMenuProps)=> { \r\n  const history = useHistory()  \r\n  const onItemClick = (event: React.MouseEvent, item:MenuItem)=> {\r\n    if (item.disabled) {\r\n      event.preventDefault()\r\n      return\r\n    }\r\n    if (!item.url) {\r\n      event.preventDefault()\r\n    } else if (item.url.startsWith(HOME_ROUTE)) {\r\n      history.push(item.url)\r\n      event.preventDefault()\r\n    }\r\n    if (item.command) item.command({           \r\n      originalEvent: event,\r\n      item,\r\n    })  \r\n  }\r\n  const className = \"profile-menu fade-in-up\"\r\n  const renderMenu = (items:MenuItem[]) => {\r\n    const renderItem = (item:MenuItem, index:number) => {\r\n        const renderSeparator = (index:number)=><li key={\"separator_\" + index} className='menu-separator' role='separator'></li>\r\n        const renderMenuItem =(item:MenuItem, index:number) => {          \r\n          const iconClassName = classNames(\"pi\", item.icon)          \r\n          const icon = item.icon && <i className={iconClassName}></i>\r\n          const label = item.label && <span>{item.label}</span>\r\n          const content = <button key={`bt_${item.label}_${index}`} \r\n              type='button' \r\n              onClick={(e:React.MouseEvent)=>onItemClick(e, item)} \r\n              className=\"p-link\">\r\n                {icon}\r\n                {label}                                                \r\n            </button> \r\n          return <li key={`pfi_${index}`}>{content}</li> \r\n            \r\n        }\r\n        if (item.separator) return renderSeparator(index)\r\n        else return renderMenuItem(item, index) \r\n      }\r\n    if (items.length > 0) {\r\n      return items.map((item, index) => {\r\n          return renderItem(item, index)\r\n      })\r\n    } else return null\r\n  }\r\n  return (\r\n    <ul className={className}>\r\n        {renderMenu(props.model || [])}\r\n    </ul>\r\n  )\r\n}","\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { HOME_ROUTE } from '../../utils/consts'\r\nimport { ExtMenuItem, INotificationMenuProps } from './IMenuProps'\r\n\r\nexport const NotificationsMenu: FC<INotificationMenuProps> = (props: INotificationMenuProps)=> {\r\n  const history = useHistory()   \r\n  const onItemClick = (event: React.MouseEvent, item:ExtMenuItem)=> {\r\n    if (item.disabled) {\r\n      event.preventDefault()\r\n      return\r\n    }\r\n    if (!item.url) {\r\n      event.preventDefault()\r\n    } else if (item.url.startsWith(HOME_ROUTE)) {\r\n      history.push(item.url)\r\n      event.preventDefault()\r\n    }\r\n    if (item.command) item.command({           \r\n      originalEvent: event,\r\n      item,\r\n    })  \r\n  }\r\n  const className = \"notifications-menu fade-in-up\"\r\n  const renderMenu = (items:ExtMenuItem[]) => {\r\n    const renderItem = (item:ExtMenuItem, index:number) => {\r\n        const renderSeparator = (index:number)=><li key={\"separator_\" + index} className='menu-separator' role='separator'></li>\r\n        const renderMenuItem =(item:ExtMenuItem, index:number) => { \r\n          const className =  classNames(\"notification-item\", item.className)                           \r\n          const iconClassName = classNames(\"pi\", item.icon, item.className)          \r\n          const icon = item.icon && <i className={iconClassName}></i>\r\n          const summary = item.summary && <div className=\"notification-summary\">{item.summary}</div>\r\n          const label = (item.label && item.label.split('detail'))||[\"\",\"\"]\r\n          const content = <button key={`bt_${item.summary}_${index}`} \r\n              type='button' className=\"p-link\" \r\n              onClick={(e:React.MouseEvent)=>onItemClick(e, item)}>\r\n                {icon}\r\n              <div className={className}>\r\n                {summary}\r\n                <div className=\"notification-detail\">\r\n                  {label[0]} <b>{item.detail}</b> {label[1]}  \r\n                </div>\r\n              </div>                                                               \r\n            </button> \r\n          return <li key={`nmi_${index}`}>{content}</li> \r\n            \r\n        }\r\n        if (item.separator) return renderSeparator(index)\r\n        else return renderMenuItem(item, index) \r\n      }\r\n    if (items.length > 0) {\r\n      return items.map((item, index) => {\r\n          return renderItem(item, index)\r\n      })\r\n    } else return null\r\n  }\r\n  return (\r\n    <ul className={className}>\r\n        {renderMenu(props.model || [])}\r\n    </ul>\r\n  )\r\n}","import { observer } from 'mobx-react-lite'\r\nimport { useContext } from 'react'\r\nimport { Context } from '../..'\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport ava from \"../../images/ava.png\"\r\nimport { classNames } from 'primereact/utils'\r\nimport { MenuItem } from 'primereact/menuitem'\r\nimport { ProfileMenu } from '../menus/ProfileMenu'\r\nimport { ExtMenuItem } from '../menus/IMenuProps'\r\nimport { NotificationsMenu } from '../menus/NotificationsMenu'\r\nimport { IUserInfo } from '../../models/responses/IUserInfo'\r\nimport { DOCTORS_ROUTE, MO_SETTINGS_ROUTE, USER_ROUTE } from '../../utils/consts'\r\ntype TopBarLayoutProps = {title: string,  userInfo: IUserInfo | null }\r\nconst detail_templ =\"detail\"\r\nexport const TopBarLayout = observer((props: TopBarLayoutProps) =>{\r\n  const {layoutStore, userStore} = useContext(Context)\r\n  const isTOM = useMediaQuery({ query: \"(max-width: 991px)\" })\r\n  const profileMenuClassName = classNames(\"profile-item\",{\"active-menuitem fadeInDown\":layoutStore.profileMenuActive()})\r\n  const notificationsMenuClassName = classNames(\"notifications-item\", {\"active-menuitem\":layoutStore.notificationsMenuActive()})\r\n  const menuToggle=()=>{    \r\n    if (isTOM && layoutStore.tabletOrMobile()) layoutStore.setTabletOrMobile(false) \r\n    else if (isTOM && !layoutStore.tabletOrMobile()) layoutStore.setTabletOrMobile(true)\r\n    else layoutStore.sideBarToggle()          \r\n  } \r\n  const items:MenuItem[] = [    \r\n      {label:\"Пользователь\", icon:\"pi-user\", url:`${USER_ROUTE}/${userStore.userInfo?.id}`},\r\n      {label:\"Медорганизация\", icon:\"pi-building\", url:`${MO_SETTINGS_ROUTE}/${userStore.userInfo?.organization.id}`}, \r\n      {label:\"Врачи\", icon:\"pi-users\", url:`${DOCTORS_ROUTE}`},     \r\n      {label:\"Выход\", icon:\"pi-power-off\", command:()=>{userStore.logout()}},       \r\n   ]\r\n  const notif_items:ExtMenuItem[] = [    \r\n      {label:`Создано ${detail_templ} свидетельств`, summary:\"Новых\", className:'p-success', icon:\"pi-user\", detail:3, url:\"/#\"},\r\n      {label:`Заменено ${detail_templ} свидетельств`, summary:\"Замены\", className:'p-info', icon:\"pi-cog\", detail:2, url:\"/#\"},      \r\n      {label:`Выданы родственникам ${detail_templ} свидетельств`, summary:\"Выданно\", icon:\"pi-cog\", detail:5, url:\"/#\"}, \r\n      {label:`С замечаниями ${detail_templ} свидетельств`, className:'p-danger', summary:\"Замечаний\", icon:\"pi-cog\", detail:1, url:\"/#\"},\r\n      {label:`Проверены ${detail_templ} свидетельств`, summary:\"Проверенно\",  className:'p-success', icon:\"pi-cog\", detail:3, url:\"/#\"},  \r\n      {label:`Отправлены в ФРМСИ ${detail_templ}`, summary:\"Отправлено\", className:'p-success', icon:\"pi-cog\", detail:2, url:\"/#\"},\r\n   ]\r\n   const notif_amount = notif_items.reduce((previtem, item, sum)=>{\r\n    return sum += item.detail\r\n   },0)\r\n   \r\n   const userName = props.userInfo!==null && props.userInfo.person_name ? \r\n   `${props.userInfo.person_name?.family} ${props.userInfo.person_name?.given_1[0]} ${props.userInfo.person_name?.given_2?.charAt(0) ||''}` : ''     \r\n  return (\r\n    <div className=\"layout-topbar\">\r\n      <div className=\"topbar-left\">\r\n        <button type=\"button\" className=\"menu-button p-link\" onClick={()=>menuToggle()}>\r\n          <i className=\"pi pi-chevron-left\"> </i>\r\n        </button>\r\n        <span className=\"topbar-separator\"></span>\r\n        <div className=\"layout-breadcrumb viewname\">\r\n          <span>{props.title}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"topbar-right\">\r\n        <ul className=\"topbar-menu\">          \r\n          <li className={notificationsMenuClassName}>\r\n            <button type=\"button\" className=\"p-link\"\r\n            onClick={()=>layoutStore.setNotificationsMenuActive(true)}>\r\n              <i className=\"pi pi-bell\"></i>\r\n              <span className=\"topbar-badge\">{notif_amount}</span>\r\n            </button>\r\n            <NotificationsMenu model={notif_items}/>\r\n          </li>\r\n          <li className={profileMenuClassName}>\r\n            <button type=\"button\" className=\"p-link\" onClick={()=>layoutStore.setProfileMenuActive(true)}>\r\n              <img src={ava} alt=\"\" className=\"profile-image\"/>\r\n              <span className=\"profile-name\">{userName}</span>\r\n            </button>\r\n            <ProfileMenu model={items}/>\r\n          </li> \r\n          <li className=\"right-sidebar-item\">\r\n            <button type=\"button\" className=\"p-link\" onClick={()=>layoutStore.setRightSideBarActive(true)}>\r\n              <i className=\"pi pi-align-right\"></i>\r\n            </button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n})","import { AxiosResponse } from \"axios\"\r\nimport $api, { API_URL } from \"../http\"\r\nimport { ITimeEvent } from \"../models/responses/ITimeEvent\"\r\n\r\n//Стандартные настройки JSON рендеринга модели timeEvent\r\nexport const TIME_EVENT_OPTIONS = {\r\n  render_options: {\r\n    only: [\"id\", \"summary\", \"table\", \"action\", \"detail\", \"created_at\"],\r\n    include: [\"user\", \"organization\"],\r\n  },\r\n  includes: [\"user\", \"organization\"],\r\n  user: { only: [\"id\", \"email\"], include: [\"person_name\"] },\r\n  organization: { only: [\"id\", \"name\"] },\r\n}\r\nexport default class AuditService {\r\n  //POST request for get audit's list\r\n  static async getAudits(query: any): Promise<AxiosResponse<ITimeEvent[]>> {\r\n    return $api.post(`${API_URL}model/Audit/`, { ...query, ...TIME_EVENT_OPTIONS })\r\n  }\r\n}\r\n","import { observer } from 'mobx-react-lite'\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC, useContext, useEffect, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { ACTIONS,  ITimeEvent } from '../../models/responses/ITimeEvent'\r\nimport {  TIME_FORMAT } from '../../utils/consts'\r\nimport AuditService from '../../services/AuditService'\r\n\r\n\r\ntype RightSideBarLayoutProps = {}\r\n\r\nconst RightSideBarLayout: FC<RightSideBarLayoutProps> = (props: RightSideBarLayoutProps) =>{ \r\n  const {layoutStore, userStore} = useContext(Context)\r\n  const className = classNames(\"layout-sidebar-right\", {\"layout-sidebar-right-active\": layoutStore.rightSideBarActive() }) \r\n  const [timeEvents, setTimeEvents] = useState<ITimeEvent[] | null>(null)\r\n  const [q , setQ] = useState<any | null>(null) \r\n  useEffect(()=>{\r\n    if (q === null && userStore.userInfo) {      \r\n      if (userStore.userInfo.roles.includes('ADMIN'))\r\n        setQ({ sorts: [ 'created_at desc']})\r\n      else \r\n        setQ({user_organization_id_eq: userStore.userInfo?.organization.id, sorts: [ 'created_at desc']})\r\n    }  \r\n  }, [q, userStore.userInfo, userStore.userInfo?.organization] ) \r\n  \r\n  useEffect(()=>{\r\n    if (timeEvents===null && q!==null) AuditService.getAudits({q:q, limit: 200})\r\n    .then(response=>setTimeEvents(response.data))\r\n    .catch(()=>setTimeEvents([]))\r\n  },[timeEvents, q]) \r\n    \r\n   \r\n  return (  \r\n  <div className={className}>\r\n    <h5>Активность</h5>\r\n    <div className=\"widget-timeline\">\r\n      { timeEvents===null || timeEvents.length===0 ? 'Событий не найдено' : timeEvents.map(item=>{        \r\n        const ACTION_ATTRIBUTES = ACTIONS.get(item.action)\r\n        if (ACTION_ATTRIBUTES === undefined) throw Error('неверный action')\r\n        const timeStr = new Date(item.created_at).toLocaleString(\r\n      \"ru\", TIME_FORMAT)\r\n        return (\r\n      <div className=\"timeline-event\" key={item.id}>\r\n        <span className=\"timeline-event-icon\" style={{ backgroundColor: ACTION_ATTRIBUTES.color }}>\r\n                <i className={ACTION_ATTRIBUTES.icon}></i>\r\n        </span>\r\n        <div className='timeline-event-title'>{timeStr} {ACTION_ATTRIBUTES.title}</div>\r\n        <div className='timeline-event-detail'>\r\n          {item.summary ? <><b>где: </b> <em>{item.summary}</em></> : ''}\r\n          {item.detail ? <p><b>что: </b>{item.detail}</p> : ''}          \r\n          <b>кем: </b> <em>{item.user.email}</em>         \r\n        </div>\r\n      </div>)})}\r\n    </div> \r\n        \r\n  </div>\r\n)}\r\nexport default observer(RightSideBarLayout)\r\n\r\n","\r\nimport  { FC } from 'react'\r\nimport '../../styles/components/ActionButtonLayout.css'\r\nimport '../../styles/components/Tooltip.css'\r\nimport { SpeedDial } from 'primereact/speeddial'\r\nimport { Tooltip } from 'primereact/tooltip'\r\n\r\nexport interface IActionItem {\r\n  label: string\r\n  icon: string\r\n  command: ()=>void\r\n}\r\n\r\ntype ActionButtonLayoutProps = {items?: IActionItem[]}\r\n\r\nexport const ActionButtonLayout: FC<ActionButtonLayoutProps> = (props: ActionButtonLayoutProps) =>{   \r\n  if (props.items)\r\n  return (\r\n  <div className=\"layout-action\"> \r\n    <Tooltip target=\".layout-action .p-speeddial-semi-circle.p-speeddial-direction-left .p-speeddial-action\" position=\"left\"  />   \r\n    <SpeedDial model={props.items} radius={80}  direction=\"left\" type=\"semi-circle\" />\r\n  </div>)\r\n  else return<></> \r\n}","import React, { FC, useContext, useEffect, useState } from 'react'\r\nimport '../../styles/layout.css'\r\nimport { Context } from '../..'\r\nimport FooterLayout from './FooterLayout'\r\nimport SideBarLayout from './SideBarLayout'\r\nimport { TopBarLayout } from './TopBarLayout'\r\nimport { classNames } from 'primereact/utils'\r\nimport { observer } from 'mobx-react-lite'\r\nimport RightSideBarLayout  from './RightSideBarLayout'\r\nimport { IUserInfo } from '../../models/responses/IUserInfo'\r\nimport { ActionButtonLayout, IActionItem } from './ActionButtonLayout'\r\nimport { ProgressSpinner } from 'primereact/progressspinner'\r\nimport { addLocale } from 'primereact/api'\r\ntype MainLayoutProps = {\r\n  title: string,\r\n  url:string, \r\n  content:React.ReactElement\r\n  actionItems?: IActionItem[]\r\n }\r\n\r\nconst MainLayout: FC<MainLayoutProps>=(props: MainLayoutProps) => { \r\n  const {layoutStore, userStore} = useContext(Context)\r\n  const rightSideBarActive = layoutStore.rightSideBarActive()\r\n  const layoutStaticInactive = layoutStore.layoutStaticInactive()\r\n  const profileMenuActive = layoutStore.profileMenuActive()\r\n  const notificationsMenuActive = layoutStore.notificationsMenuActive()  \r\n  const onClickOutside = ()=>{\r\n    if (rightSideBarActive) layoutStore.setRightSideBarActive(false)\r\n    else if (profileMenuActive) layoutStore.setProfileMenuActive(false)\r\n    else if (notificationsMenuActive) layoutStore.setNotificationsMenuActive(false)\r\n  } \r\n  const wrapperClass = classNames(\"layout-wrapper layout-static p-ripple layout-sidebar-indigo\",{\"layout-static-inactive\": layoutStaticInactive}, {\"layout-mobile-active\": layoutStore.tabletOrMobile()})\r\n  const [userInfo, setUserInfo] = useState<IUserInfo | null>(null)   \r\n  const userId = userStore.user().id   \r\n  useEffect(()=>{ \r\n     if (userId!== undefined && userInfo === null) \r\n     setUserInfo(userStore.userInfo)     \r\n    },[userId, userInfo, userStore.userInfo]\r\n  )\r\n  const content =  layoutStore.isLoading ? <ProgressSpinner/> : props.content \r\n  addLocale('ru', {\r\n    startsWith: 'Начинается с',\r\n    contains: 'Содержит',\r\n    notContains: 'Не содержит',\r\n    endsWith: 'Оканчивается на',\r\n    equals: 'Равно',\r\n    notEquals: 'Не равно',\r\n    noFilter: 'Любое',\r\n    lt: 'Меньше чем',\r\n    lte: 'Меньше или равно',\r\n    gt: 'Больше',\r\n    gte: 'Больше либо равно',\r\n    dateIs: 'Равна',\r\n    dateIsNot: 'Не равна',\r\n    dateBefore: 'Ранее чем',\r\n    dateAfter: 'Позже чем',\r\n    custom: 'Свое',\r\n    clear: 'Очистить',\r\n    apply: 'Применить',\r\n    matchAll: 'условия (И)',\r\n    matchAny: 'условия (ИЛИ)' ,\r\n    addRule: '+ условие',\r\n    removeRule: ' - условие',\r\n    accept: 'ДА',\r\n    reject: 'НЕТ',\r\n    closeText: 'закрыть',\r\n    prevText: 'назад',\r\n    nextText: 'вперед',\r\n    currentText: 'текущий',\r\n    monthNames: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь',\r\n        'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'],\r\n    monthNamesShort: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн',\r\n        'Июл', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек'],\r\n    dayNames: ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'],\r\n    dayNamesShort: ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'],\r\n    dayNamesMin: ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'],\r\n    weekHeader: 'Нед',\r\n    firstDay: 1,\r\n    isRTL: false,\r\n    showMonthAfterYear: false,\r\n    yearSuffix: '',\r\n    month: 'Мес',\r\n    week: 'Неделя',\r\n    day: 'День',\r\n    timeOnlyTitle: 'Выбор времени',\r\n    timeText: 'Время',\r\n    hourText: 'Часы',\r\n    minuteText: 'Минуты',\r\n    secondText: 'Секунды',\r\n    allDayText: 'Полный день',      \r\n  })\r\n  return (\r\n  <div className={wrapperClass} data-theme='light'>    \r\n    <div className='layout-content-wrapper' onClick={()=>onClickOutside()}>  \r\n      <TopBarLayout  title = {props.title}  userInfo={userInfo} />        \r\n      <div className='layout-content'>{content}\r\n        <ActionButtonLayout items={props.actionItems}/>\r\n      </div>\r\n      <FooterLayout userInfo={userInfo} />\r\n    </div>\r\n    <SideBarLayout  activeUrl={props.url} /> \r\n    <RightSideBarLayout />     \r\n    <div className=\"layout-search\"></div>        \r\n    <div className='layout-mask modal-in' onClick={()=>{layoutStore.setTabletOrMobile(false)}}></div>\r\n  </div>  \r\n  ) \r\n}\r\nexport default observer(MainLayout)\r\n\r\n","//\"Вид медицинского свидетельства о смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.19 Версия: 1.1\r\nexport const CERT_TYPES = [\r\n  { code: 1, name: \"окончательное\", s_name: \"ОКН\" },\r\n  { code: 2, name: \"предварительное\", s_name: \"ПРВ\" },\r\n  { code: 3, name: \"взамен предварительного\", s_name: \"ВП\" },\r\n  { code: 4, name: \"взамен окончательного\", s_name: \"ВO\" },\r\n]\r\n","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext } from 'react'\r\nimport { Context } from '../..'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { Divider } from 'primereact/divider'\r\nimport { Card } from 'primereact/card'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport { CERT_TYPES } from '../../NSI/1.2.643.5.1.13.13.99.2.19'\r\nimport { DATE_FORMAT } from '../../utils/consts'\r\n const Section0: FC = () => {\r\n   const { certificateStore } = useContext(Context)\r\n   const cert =  certificateStore.cert  \r\n   const header = () => {\r\n      return <span>Сведения о документе</span>\r\n    }\r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header} key={certificateStore.cert.id}>\r\n        <div className=\"p-fluid p-formgrid p-grid\">\r\n          <div className=\"p-field p-col-6 p-md-2\">\r\n            <label htmlFor=\"series\">Серия</label>\r\n            <InputText id=\"series\" value={cert.series} type=\"text\" \r\n              placeholder='Заполняется автоматически' disabled/>\r\n          </div>\r\n          <div className=\"p-field p-col-6 p-md-4\">\r\n            <label htmlFor=\"number\">Номер</label>\r\n            <InputText id=\"number\" value={cert.number} disabled type=\"text\" placeholder='Заполняется автоматически'/>\r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">                    \r\n            <label htmlFor=\"icon\">Дата</label>\r\n            <Calendar id=\"icon\"  dateFormat=\"dd.mm.yy\" value={cert.issueDate} disabled />\r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">\r\n            <label htmlFor=\"cert_type\">Вид свидетельства</label>\r\n            <Dropdown inputId=\"cert_type\"  placeholder=\"Выбрать\" autoFocus \r\n              options={cert.certType ? ([3, 4].includes(cert.certType) ? CERT_TYPES.filter((item)=>[4,3,1].includes(item.code)) : CERT_TYPES) : CERT_TYPES.filter((item)=>[1,2].includes(item.code)) } optionLabel=\"name\"\r\n              value={CERT_TYPES.find(el=>el.code===cert.certType)} onChange={(e) =>certificateStore.cert.certType = e.value.code} disabled={cert.id > -1} />\r\n          </div>\r\n          \r\n        </div>\r\n        <Divider/>\r\n        <div className=\"p-grid p-mt-2\">              \r\n          <div className=\"p-col-6 p-d-flex p-flex-column p-jc-left p-ai-center p-flex-md-row p-flex-wrap\">\r\n            <div className=\"overview-number p-mr-1 p-mb-1\" style={{padding:'0.1rem'}}>РАНЕЕ ВЫДАННОГО:</div>\r\n             <div className=\"overview-subtext p-mr-1 p-mb-1\" style={{fontWeight:600,padding:'0.2rem'}}>{!!cert.numberPrev ? `${cert.seriesPrev} ${cert.numberPrev} от ${cert.effTimePrev?.toLocaleString('ru', DATE_FORMAT)}` : 'НЕТ'}</div>\r\n          </div>\r\n          <div className=\"p-col-6 p-d-flex p-flex-column p-jc-left p-ai-center p-flex-md-row p-flex-wrap\"\r\n            style={{borderLeft:'1px #dee2e6', borderLeftStyle:'solid'}}>\r\n            <div className=\"overview-number p-mr-1 p-mb-1\" style={{padding:'0.1rem'}}>Статус:</div>\r\n            <div className=\"overview-subtext p-mr-1 p-mb-1\"style={{fontWeight:600,background: cert.latestOne ? 'rgb(211 47 47 / 22%)': '#c8e6c9', color: cert.latestOne ? 'rgb(211 47 47)' : '#256029', padding:'0.2rem'}}>{cert.latestOne ? 'ЗАМЕНЕНО' : 'АКТУАЛЬНОЕ'}</div>\r\n          </div>              \r\n        </div>\r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section0) ","export const HOME_REGION_CODE = \"28\"\r\nexport const DEFAULT_CERT_SUGGESTIONS = [\r\n  { section: \"0\", code: \"0\", suggestion: \"Необходимо выбрать тип свидетельства\", done: false },\r\n  {\r\n    section: \"1\",\r\n    code: \"п.1\",\r\n    suggestion: \"Поля ФИО должны быть заполнены, если умерший идентифицирован\",\r\n    done: false,\r\n  },\r\n  { section: \"1\", code: \"п.2\", suggestion: \"Указание пола умершего является обязательным для заполнения\", done: false },\r\n  {\r\n    section: \"1\",\r\n    code: \"п.3\",\r\n    suggestion: \"Указание даты рождения или причины ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"1\",\r\n    code: \"п.7\",\r\n    suggestion: \"Указание даты смерти или причины ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.1\",\r\n    suggestion: \"Указание серии ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.2\",\r\n    suggestion: \"Указание номера ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.3\",\r\n    suggestion: \"Указание органа выдавшего ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.4\",\r\n    suggestion: \"Указание даты выдачи ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.5\",\r\n    suggestion: \"Указание кода подразделения ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.5\",\r\n    suggestion: \"Указание SNILS умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.6\",\r\n    suggestion: \"Указание полиса ОМС или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"3\",\r\n    code: \"п.8\",\r\n    suggestion: \"Место жительства или причина его отсутствия - обязательны для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"3\",\r\n    code: \"п.9\",\r\n    suggestion: \"Вид места жительства или причина его отсутствия - обязательны для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"3\",\r\n    code: \"п.10\",\r\n    suggestion: \"Вид места смерти или причина его отсутствия - обязательны для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"3\",\r\n    code: \"п.11\",\r\n    suggestion: \"Вид места смерти или причина его отсутствия - обязательны для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.12\",\r\n    suggestion: \"Выбор места наступления смерти - обязателен для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.13\",\r\n    suggestion: \"Выбор срока береммености для детей от 168 ч до 1месяца  - обязателен для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.1\",\r\n    suggestion: \"Внесение весса для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.2\",\r\n    suggestion:\r\n      \"Внесение порядкового номера беременности матери для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.3\",\r\n    suggestion: \"Внесение ФИО матери для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.4\",\r\n    suggestion: \"Внесение даты рождения матери для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.5\",\r\n    suggestion: \"Внесение адреса жительства матери для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.15\",\r\n    suggestion: \"Указание семейного положения - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.16\",\r\n    suggestion: \"Указание образования - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.17\",\r\n    suggestion: \"Указание занятости - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"6\",\r\n    code: \"п.18\",\r\n    suggestion: \"Указание рода причины смерти - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"6\",\r\n    code: \"п.19\",\r\n    suggestion:\r\n      \"Указание указать дату, время и обстоятельства травмы (отравления), в случае смерти не от заболевания - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"6\",\r\n    code: \"п.20\",\r\n    suggestion: \"Указание типа медицинского работника, установившего причины смерти - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"6\",\r\n    code: \"п.21\",\r\n    suggestion: \"Указание основание установления причины смерти - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.a)\",\r\n    suggestion: \"Указание причины а) - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.a)т\",\r\n    suggestion: \"Период времени между началом патол. состояния и смертью в причине а) - обязателен для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.б)\",\r\n    suggestion: \"Указание причины б) или ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.б)т\",\r\n    suggestion:\r\n      \"Период времени между началом патол. состояния и смертью в причине б) или его отсутствие - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.в)\",\r\n    suggestion: \"Указание причины в) или ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.в)т\",\r\n    suggestion:\r\n      \"Период времени между началом патол. состояния и смертью в причине в) или его отсутствие - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.г)\",\r\n    suggestion: \"Указание причины г) или ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.г)т\",\r\n    suggestion:\r\n      \"Период времени между началом патол. состояния и смертью в причине г) или его отсутствие - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"8\",\r\n    code: \"п.22.II.1\",\r\n    suggestion: \"Указание кода прочего состояния или причины его отсутствия - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"8\",\r\n    code: \"п.22.II.2\",\r\n    suggestion:\r\n      \"Указание периода времени между началом патол. состояния и смертью или причины его отсутствия - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.23\",\r\n    suggestion: \"Указание периода наступления смерти в случае ДТП  - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.24\",\r\n    suggestion: \"Указание срока в случае наступления смерти при беременности  - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.25.1\",\r\n    suggestion:\r\n      \"Указание данных о враче (судебно-медицинском эксперте, фельдшере, акушерке), заполнившем свидетельство - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.25.2\",\r\n    suggestion: \"Указание данных о руководителе медицинской организации - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.26\",\r\n    suggestion:\r\n      \"Указание данных об ответственном за проверку медицинских свидетельств лице - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"10\",\r\n    code: \"*A\",\r\n    suggestion: \"Указание ФИО получателя - обязательно для печати\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"10\",\r\n    code: \"*B\",\r\n    suggestion: \"Указание даты выдачи - обязательно для печати\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"10\",\r\n    code: \"*С\",\r\n    suggestion: \"Указание СНИЛС или иного документа удостоверения личности - обязательно для печати\",\r\n    done: false,\r\n  },\r\n]\r\nexport const CERT_TYPE_SUG = 0\r\nexport const PERSON_NAME_SUG = 1\r\nexport const PATIENT_GENDER_SUG = 2\r\nexport const PATIENT_BIRTHDAY_SUG = 3\r\nexport const CERT_DEATH_THIME_SUG = 4\r\nexport const IDSERIES_SUG = 5\r\nexport const IDNUMBER_SUG = 6\r\nexport const IORGNAME_SUG = 7\r\nexport const IORGDATE_SUG = 8\r\nexport const IORGCODE_SUG = 9\r\nexport const SNILS_SUG = 10\r\nexport const OMS_SUG = 11\r\nexport const LIFE_AREA_SUG = 13\r\nexport const LIFE_PLACE_SUG = 12\r\nexport const DEATH_PLACE_SUG = 14\r\nexport const DEATH_AREA_SUG = 15\r\nexport const DEATH_PLACE_TYPE_SUG = 16\r\nexport const TERMS_PREGNANCY_SUG = 17\r\nexport const CHILD_WEIGHT_SUG = 18\r\nexport const NUMBER_PREGNANCY_SUG = 19\r\nexport const MOTHER_FIO_SUG = 20\r\nexport const MOTHER_BIRTHDAY_SUG = 21\r\nexport const MOTHER_ADDRESS_SUG = 22\r\nexport const MARITAL_STATUS_SUG = 23\r\nexport const EDUCATION_LEVEL_SUG = 24\r\nexport const SOCIAL_STATUS_SUG = 25\r\nexport const DEATH_KINDS_SUG = 26\r\nexport const KIND_DEATH_REASON_SUG = 27\r\nexport const EST_MEDIC_SUG = 28\r\nexport const BASIS_DERMINING_SUG = 29\r\nexport const REASON_A_SUG = 30\r\nexport const REASON_A_TIME_SUG = 31\r\nexport const REASON_B_SUG = 32\r\nexport const REASON_B_TIME_SUG = 33\r\nexport const REASON_C_SUG = 34\r\nexport const REASON_C_TIME_SUG = 35\r\nexport const REASON_D_SUG = 36\r\nexport const REASON_D_TIME_SUG = 37\r\nexport const EXT_REASON_SUG = 38\r\nexport const EXT_REASON_TIME_SUG = 39\r\nexport const TRAFFFIC_ACCIDENT_SUG = 40\r\nexport const PREGNANCY_CONNECTION_SUG = 41\r\nexport const AUTHOR_SUG = 42\r\nexport const AUTHENTICATOR_SUG = 44\r\nexport const LEGAL_AUTHENTICATOR_SUG = 43\r\nexport const PARTIPICIPANT_FIO_SUG = 45\r\nexport const PARTIPICIPANT_DATE_SUG = 46\r\nexport const PARTIPICIPANT_IDENTITY_SUG = 47\r\n\r\nexport const changeSuggestion = (code: string, suggestions: any[], done: boolean) => {\r\n  const suggestion = suggestions.find((item) => item.code === code)\r\n  if (suggestion) suggestion.done = done\r\n}\r\n\r\nexport const NULL_FLAVORS = [\r\n  { code: \"NI\", name: \"Нет информации\" },\r\n  { code: \"INV\", name: \"Недопустимое значение\" },\r\n  { code: \"DER\", name: \"Извлекаемое значение\" },\r\n  { code: \"OTH\", name: \"Другое\" },\r\n  { code: \"NINF\", name: \"Минус бесконечность\" },\r\n  { code: \"PINF\", name: \"Плюс бесконечность\" },\r\n  { code: \"UNC\", name: \"Кодирование не проводилось\" },\r\n  { code: \"MSK\", name: \"Скрыто\" },\r\n  { code: \"NA\", name: \"Неприменимо\" },\r\n  { code: \"UNK\", name: \"Неизвестно\" },\r\n  { code: \"ASKU\", name: \"Запрошено, но неизвестно\" },\r\n  { code: \"NAV\", name: \"Временно недоступно\" },\r\n  { code: \"NASK\", name: \"Не запрашивалось\" },\r\n  { code: \"QS\", name: \"Достаточное количество\" },\r\n  { code: \"TRC\", name: \"Трудноразличимо\" },\r\n]\r\nexport type NULL_FLAVOR_CODES =\r\n  | \"NI\"\r\n  | \"INV\"\r\n  | \"DER\"\r\n  | \"OTH\"\r\n  | \"NINF\"\r\n  | \"PINF\"\r\n  | \"UNC\"\r\n  | \"MSK\"\r\n  | \"NA\"\r\n  | \"UNK\"\r\n  | \"ASKU\"\r\n  | \"NAV\"\r\n  | \"NASK\"\r\n  | \"QS\"\r\n  | \"TRC\"\r\n\r\nexport type INullFlavorIdx = {\r\n  [index in NULL_FLAVOR_CODES]: number\r\n}\r\nexport const NULL_FLAVOR_IDX: INullFlavorIdx = {\r\n  NI: 0,\r\n  INV: 1,\r\n  DER: 2,\r\n  OTH: 3,\r\n  NINF: 4,\r\n  PINF: 5,\r\n  UNC: 6,\r\n  MSK: 7,\r\n  NA: 8,\r\n  UNK: 9,\r\n  ASKU: 10,\r\n  NAV: 11,\r\n  NASK: 12,\r\n  QS: 13,\r\n  TRC: 14,\r\n}\r\nexport const ASKU = 10\r\nexport const NA = 8\r\nexport const UNK = 9\r\n\r\nexport const MALE = 1\r\nexport const FEMALE = 2\r\nexport const NOGENDER = 4\r\n\r\nexport const URBAN_AREA_TYPE = 1\r\nexport const VILAGE_AREA_TYPE = 2\r\nexport interface ID_CARD_TYPE {\r\n  code: number\r\n  name: string\r\n  s_mask?: string\r\n  n_mask?: string\r\n  c_mask?: string\r\n}\r\nexport const ID_CARD_TYPES: Array<ID_CARD_TYPE> = [\r\n  { code: 1, name: \"Паспорт гр. РФ\", s_mask: \"99 99\", n_mask: \"999999\", c_mask: \"999-999\" },\r\n  { code: 2, name: \"Заграничный паспорт гр. РФ\", s_mask: \"99\", n_mask: \"9999999\", c_mask: \"ФМС 99999\" },\r\n  { code: 3, name: \"Служебный паспорт\" },\r\n  { code: 4, name: \"Врем. уд. личности(форма № 2П)\" },\r\n  { code: 6, name: \"Свидетельство о рождении\", n_mask: \"999999\" },\r\n  { code: 8, name: \"Удостоверение личности военнослужащего\" },\r\n  { code: 9, name: \"Военный билет\" },\r\n  { code: 10, name: \"Паспорт иностранного гражданина\" },\r\n  { code: 11, name: \"Вид на жительство\" },\r\n  { code: 17, name: \"Разрешение на временное проживание в РФ\" },\r\n  { code: 25, name: \"Справка об освобождении из места лишения свободы\" },\r\n  { code: 36, name: \"Водительское удостоверение\" },\r\n  { code: 38, name: \"Охотничий билет\" },\r\n]\r\n\r\nexport const PASSPORT_RF = 0\r\nexport const REGION = { code: \"28\", name: \"Амурская область\" }\r\nexport const REGION_OKATO = \"10\"\r\nexport const DEFAULT_ERROR_TOAST = {\r\n  severity: \"error\",\r\n  summary: \"Сбой\",\r\n  detail: \"Что-то пошло не так, по-пробуйте позднее\",\r\n  life: 3000,\r\n  baseZIndex: 999,\r\n}\r\n","import React, {FC} from 'react'\r\nimport { IReference } from '../models/IReference'\r\nimport { Checkbox, CheckboxChangeParams } from \"primereact/checkbox\"\r\nimport { Dropdown, DropdownChangeParams } from \"primereact/dropdown\"\r\nimport { useState } from 'react'\r\nimport { NULL_FLAVORS } from '../utils/defaults'\r\nimport { INullFlavorR } from '../models/INullFlavor'\r\nimport { useEffect } from 'react'\r\n\r\ntype NullFlavorWrapperProps = {\r\n  paraNum?: boolean,  \r\n  label: React.ReactElement,  \r\n  checked?: boolean, \r\n  setCheck?: ((e: CheckboxChangeParams, nullFlavors?: INullFlavorR[]) => void), \r\n  disabled?: boolean,\r\n  field: React.ReactElement,\r\n  field_name?: string,\r\n  options: IReference[],\r\n  nullFlavors?: INullFlavorR[], \r\n  value?: number,  \r\n  onChange?: ((e: IReference, nullFlavors: INullFlavorR[] | undefined) => void),\r\n  lincked?: boolean\r\n}\r\n\r\nconst NullFlavorWrapper: FC<NullFlavorWrapperProps>=(props: NullFlavorWrapperProps) => {   \r\n  const [value, setValue] = useState<IReference | null>(props.value? NULL_FLAVORS[props.value] : null)\r\n  const [checked, setChecked] = useState<boolean>(props.checked || false) \r\n  const fieldStyle = props.paraNum ? {marginLeft: '-0.76rem'} : {}\r\n  const ddStyle = {width: '200px'}\r\n  const nullFlavors = (props.nullFlavors && props.nullFlavors.length>0 && props.field_name ) ? props.nullFlavors.filter((element: INullFlavorR)=>element.parent_attr!==props.field_name) : []\r\n  const nullFlavor = (props.nullFlavors && props.nullFlavors.length>0 && props.field_name ) ? props.nullFlavors.find((element: INullFlavorR)=>element.parent_attr===props.field_name) : false\r\n  useEffect(()=>{   \r\n    if (props.nullFlavors) {\r\n      const nullFlavor = props.nullFlavors.find(item=>item.parent_attr===props.field_name && !item._destroy)\r\n      if (nullFlavor) {\r\n        setValue(NULL_FLAVORS[nullFlavor.code])\r\n        if (props.checked!==true) setChecked(false)\r\n      } else if (props.checked!==false) setChecked(true)\r\n    }    \r\n  },[props.nullFlavors, props.field_name, props.checked])   \r\n  \r\n  const checkbox  = !props.lincked && <Checkbox        \r\n        style={{ marginLeft: \"0.4rem\" }}\r\n        checked={checked}\r\n        disabled={props.disabled} \r\n        onChange={(e)=>{\r\n            setChecked(e.checked)\r\n            if (props.nullFlavors) {\r\n              if (props.setCheck && e.checked ) { \r\n                if (nullFlavor && nullFlavor.id) {\r\n                  props.nullFlavors.forEach(el=>{\r\n                    if (el.parent_attr===props.field_name) el._destroy=\"1\"\r\n                  })\r\n                  props.setCheck(e)\r\n                } else  props.setCheck(e, nullFlavors)\r\n              } else if (props.setCheck && props.value && props.field_name) { \r\n                let _nullFlavors = nullFlavors               \r\n                _nullFlavors.push({parent_attr: props.field_name, code: props.value })                                 \r\n                props.setCheck(e, _nullFlavors)                            \r\n              } else if (props.setCheck) props.setCheck(e)             \r\n            } else if (props.setCheck) props.setCheck(e)            \r\n          }\r\n        }        \r\n      />  \r\n       \r\n  const style =  props.lincked ? {marginTop:'0.4rem'} : {}  \r\n  const checkboxLabel = props.lincked && !props.checked ? (<></>) : (\r\n    <div className='p-checkbox-right p-field-checkbox'\r\n     key={`nf_${props.checked}_${props.paraNum}`} style={style}>            \r\n      {props.label}     \r\n      {checkbox}\r\n     </div>\r\n  )\r\n  const dropdown = !props.lincked && <Dropdown       \r\n      id={\"p\" + props.field_name}       \r\n      key={`dd_${props.field_name}_${props.checked}`}\r\n      style={fieldStyle}\r\n      value={value}      \r\n      options={props.options}\r\n      onChange={(e: DropdownChangeParams)=>{   \r\n        setValue(e.value)                \r\n        if (props.onChange) { // for not in MobX nullflavors\r\n          const nullFlavor = {parent_attr: props.field_name, code: NULL_FLAVORS.findIndex((element)=>element.code===e.value.code)}\r\n          let _nullFlavors = nullFlavors\r\n          _nullFlavors.push(nullFlavor as INullFlavorR)\r\n          props.onChange(e.value, _nullFlavors)\r\n        } else if (!!props.nullFlavors) { //standart case nullFlavor\r\n            const idx = props.nullFlavors.findIndex(item=>item.parent_attr===props.field_name)\r\n            if (idx > -1) props.nullFlavors[idx].code = NULL_FLAVORS.findIndex((element)=>element.code===e.value.code)\r\n            else throw new Error(`Error change nullFlavor: invalid field name:  ${props.field_name}`)            \r\n        }                                    \r\n      }}\r\n      optionLabel='name'      \r\n      placeholder='Причина отсутствия'\r\n    />    \r\n  const canNullFlavor = checked ? (\r\n    <div style={fieldStyle}>{props.field}</div>\r\n  ) : (\r\n    <div style={ddStyle}>{dropdown}</div>\r\n  )  \r\n  return (<>{checkboxLabel}{canNullFlavor}</>)\r\n}\r\nexport default NullFlavorWrapper","import { NULL_FLAVOR_CODES, UNK } from \"../utils/defaults\"\r\nimport { IDestroyble } from \"./IDestroyble\"\r\nexport interface INullFlavor {\r\n  id?: number\r\n  parent_guid?: string\r\n  parent_attr: string\r\n  code: NULL_FLAVOR_CODES\r\n}\r\n\r\nexport interface INullFlavorR extends IDestroyble {\r\n  id?: number\r\n  parent_guid?: string\r\n  parent_attr: string\r\n  code: number\r\n}\r\n\r\n//получаем чистый NullFlavor без метки удаления\r\nexport const getCleanNullFlavor = (old: INullFlavorR): INullFlavorR | undefined => {\r\n  if (old === undefined) return\r\n  let _new = { code: old.code, parent_attr: old.parent_attr } as INullFlavorR\r\n  if (old.id) _new.id = old.id\r\n  if (old.parent_guid) _new.parent_guid = old.parent_guid\r\n  return _new\r\n}\r\n\r\n//генерируем заполнитель UNK автоматически,\r\n//проверяя значение field\r\n//и массив заполнителей до внесения изменений: original\r\nexport const checkFieldNullFlavor = (\r\n  key: string,\r\n  field: any | null | undefined,\r\n  nullFlavors: INullFlavorR[],\r\n  code = UNK\r\n) => {\r\n  let idx = nullFlavors.findIndex((item) => item.parent_attr === key)\r\n  if (field && idx !== -1 && nullFlavors[idx].id) {\r\n    do {\r\n      nullFlavors[idx]._destroy = \"1\"\r\n      idx = nullFlavors.findIndex((item) => item.parent_attr === key && !item._destroy && item.id)\r\n    } while (idx !== -1)\r\n  } else if (field && idx !== -1) nullFlavors.splice(idx, 1)\r\n  else if (!field && idx !== -1 && nullFlavors[idx]._destroy === \"1\") {\r\n    nullFlavors[idx] = { ...getCleanNullFlavor(nullFlavors[idx]) } as INullFlavorR\r\n  } else if (!field && idx === -1) nullFlavors.push({ code: code, parent_attr: key })\r\n}\r\n\r\n//генерируем заполнители UNK автоматически,\r\n//проверяя карту fields<имя поля, значение>\r\n//и массив заполнителей до внесения изменений: original\r\nexport const createNullFlavors = (fields: Map<string, any | null | undefined>, original: INullFlavorR[]) => {\r\n  fields.forEach((value, key) => {\r\n    checkFieldNullFlavor(key, value, original)\r\n  })\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport IIdentity from \"../IIdentity\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport IIdentityR from \"../requests/IIdentityR\"\r\n\r\nexport default class Identity implements ISerializable {\r\n  private _id?: string\r\n  private _identityCardType: number\r\n  private _series?: string\r\n  private _number: string | undefined\r\n  private _issueOrgName: string | undefined\r\n  private _issueOrgCode?: string | undefined\r\n  private _issueOrgDate: Date | undefined\r\n  private _parentGUID: string\r\n  private _nullFlavors: INullFlavorR[]\r\n  constructor(props: IIdentity) {\r\n    this._id = props.id\r\n    this._identityCardType = props.identity_card_type_id\r\n    if (props.series) this._series = props.series\r\n    this._number = props.number\r\n    this._issueOrgName = props.issueOrgName\r\n    if (props.issueOrgCode) this._issueOrgCode = props.issueOrgCode\r\n    if (props.issueDate) this._issueOrgDate = new Date(props.issueDate)\r\n    this._parentGUID = props.parentGUID\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes(): IIdentityR {\r\n    let _identity = {} as IIdentityR\r\n    if (this._id) _identity.id = this._id\r\n    if (this._identityCardType) _identity.identity_card_type_id = this._identityCardType\r\n    if (this._issueOrgCode) _identity.issueOrgCode = this._issueOrgCode\r\n    if (this._issueOrgDate) _identity.issueDate = this._issueOrgDate.toDateString()\r\n    if (this._issueOrgName) _identity.issueOrgName = this._issueOrgName\r\n    if (this._nullFlavors.length > 0) _identity.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._number) _identity.number = this._number\r\n    if (this._parentGUID) _identity.parentGUID = this._parentGUID\r\n    if (this._series) _identity.series = this._series\r\n    return _identity\r\n  }\r\n  get identityCardType() {\r\n    return this._identityCardType\r\n  }\r\n  set identityCardType(ct: number) {\r\n    this._identityCardType = ct\r\n  }\r\n  get series() {\r\n    return this._series ? this._series : \"\"\r\n  }\r\n  set series(series: string | undefined) {\r\n    this._series = series\r\n  }\r\n  get number() {\r\n    return this._number\r\n  }\r\n  set number(number: string | undefined) {\r\n    this._number = number\r\n  }\r\n  get issueOrgName() {\r\n    return this._issueOrgName\r\n  }\r\n  set issueOrgName(issueOrgName: string | undefined) {\r\n    this._issueOrgName = issueOrgName\r\n  }\r\n  get issueOrgDate() {\r\n    return this._issueOrgDate\r\n  }\r\n  set issueOrgDate(issueOrgDate: Date | undefined) {\r\n    this._issueOrgDate = issueOrgDate\r\n  }\r\n  get issueOrgCode() {\r\n    return this._issueOrgCode ? this._issueOrgCode : \"\"\r\n  }\r\n  set issueOrgCode(issueOrgCode: string | undefined) {\r\n    this._issueOrgCode = issueOrgCode\r\n  }\r\n  get parentGUID() {\r\n    return this._parentGUID\r\n  }\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IContact } from \"../IContact\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IPerson } from \"../IPerson\"\r\nimport { IPersonName } from \"../IPersonName\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { IPersonR } from \"../requests/IPersonR\"\r\n\r\nexport default class Person implements ISerializable {\r\n  private _id?: string\r\n  private _personName?: IPersonName\r\n  private _SNILS?: string | undefined\r\n  private _nullFlavors: INullFlavorR[]\r\n  private _address?: IAddressR | undefined\r\n  private _contacts: IContact[]\r\n  private _oldOne?: IPerson\r\n\r\n  constructor(props = {} as IPerson) {\r\n    this._oldOne = props\r\n    this._personName = props.person_name\r\n    this._SNILS = props.SNILS\r\n    this._id = props.id\r\n    this._address = {\r\n      ...props.address,\r\n      null_flavors_attributes:\r\n        props.address?.null_flavors?.map((item) => {\r\n          return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n        }) || [],\r\n    } as IAddressR\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    this._contacts = props.contacts || []\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n\r\n  getAttributes(): IPersonR {\r\n    let _person = {} as IPersonR\r\n    if (this._id) _person.id = this._id\r\n    if (this._SNILS) _person.SNILS = this._SNILS\r\n    if (this._address && !!this._address.state && !!this._address.streetAddressLine)\r\n      _person.address_attributes = { ...this._address }\r\n    else if (this._oldOne && this._oldOne.address?.id)\r\n      _person.address_attributes = { id: this._oldOne.address.id, _destroy: \"1\" } as IAddressR\r\n    if (this._contacts.length > 0) _person.contacts_attributes = [...this._contacts]\r\n    if (this._nullFlavors.length > 0) _person.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._personName) _person.person_name_attributes = { ...this._personName }\r\n    return _person\r\n  }\r\n\r\n  get fio() {\r\n    return this._personName\r\n  }\r\n\r\n  set fio(fio: IPersonName | undefined) {\r\n    this._personName = fio\r\n  }\r\n\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  get SNILS() {\r\n    return this._SNILS\r\n  }\r\n\r\n  set SNILS(snils: string | undefined) {\r\n    this._SNILS = snils\r\n  }\r\n\r\n  get id() {\r\n    return this._id\r\n  }\r\n  get address(): IAddressR | undefined {\r\n    return this._address\r\n  }\r\n  set address(value: IAddressR | undefined) {\r\n    this._address = value\r\n  }\r\n  get contacts(): IContact[] {\r\n    return this._contacts\r\n  }\r\n  set contacts(value: IContact[]) {\r\n    this._contacts = value\r\n  }\r\n\r\n  fullName(): string {\r\n    const fio = this._personName\r\n    return !!fio ? `${fio.family} ${fio.given_1} ${!!fio.given_2 ? fio.given_2 : \"\"}` : \"\"\r\n  }\r\n}\r\n","export interface IPersonName {\r\n  id?: number\r\n  family: string // фамилия\r\n  given_1: string // имя\r\n  given_2?: string // отчество\r\n}\r\nexport const getOneLinePersonName = (person_name: IPersonName | undefined | null): string => {\r\n  if (!person_name) return \"\"\r\n  else return `${person_name.family} ${person_name.given_1} ${person_name.given_2 ? person_name.given_2 : \"\"}`.trim()\r\n}\r\n","import { InputText } from 'primereact/inputtext'\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC, useState } from 'react'\r\nimport { getOneLinePersonName, IPersonName } from '../../models/IPersonName'\r\n\r\ntype PersonNameProps = {\r\n  personName?: IPersonName\r\n  submitted?:boolean\r\n  onChange:(personName: IPersonName)=>void\r\n}\r\nexport const PersonName:FC<PersonNameProps> = (props:PersonNameProps) =>{\r\n  const [fio, setFio] = useState(getOneLinePersonName(props.personName)) \r\n  const isErrorMessage = props.submitted && (!props.personName || !props.personName.family || !props.personName.given_1)\r\n  return (<>\r\n    <InputText  id=\"fio\" type=\"text\" \r\n      value={fio}                    \r\n      onChange={(e)=>{\r\n        setFio(e.target.value)               \r\n        const values = e.target.value.trim().split(\" \")\r\n        let _result = {} as IPersonName\r\n        if (props.personName?.id) _result.id = props.personName?.id\r\n        if (values && values.length > 1) {\r\n          _result = {..._result, family: values[0], given_1: values[1]} as IPersonName\r\n          if (values[2]) _result.given_2 = values[2]                      \r\n        } else  _result = {..._result, family: '', given_1: ''} as IPersonName\r\n        props.onChange(_result)                                      \r\n      }}\r\n      className={classNames({ 'p-invalid': isErrorMessage})}\r\n    />\r\n    {isErrorMessage && <small className=\"p-error\">Фамилия, имя обязательны</small>}\r\n  </>)\r\n} ","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { Checkbox, CheckboxChangeParams } from 'primereact/checkbox'\r\nimport { RadioButton } from 'primereact/radiobutton'\r\nimport '../../styles/components/RadioButton.css'\r\nimport '../../styles/components/Calendar.css'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { ASKU, FEMALE, ID_CARD_TYPES, MALE, NOGENDER, NULL_FLAVORS, PASSPORT_RF, UNK } from '../../utils/defaults'\r\nimport { IReference } from '../../models/IReference'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { checkFieldNullFlavor, INullFlavorR } from '../../models/INullFlavor'\r\nimport { IPersonName } from '../../models/IPersonName'\r\nimport IIdentity from '../../models/IIdentity'\r\nimport Identity from '../../models/FormsData/Identity'\r\nimport Person from '../../models/FormsData/Person'\r\nimport { PersonName } from '../inputs/PersonName'\r\n\r\n\r\n const Section1: FC = () => {   \r\n  const { certificateStore, suggestionsStore, layoutStore } = useContext(Context) \r\n  const certificate = certificateStore.cert   \r\n  const patient = certificate.patient\r\n  const person =  patient.person     \r\n  const [yearBTChecked, setYearBTChecked] = useState<boolean>(!!patient.birth_year)   \r\n  const [yearDTChecked, setYearDTChecked] = useState<boolean>(!!certificate.deathYear) \r\n  \r\n  const header = () => {\r\n      return <span>Данные умершего</span>\r\n    }\r\n    \r\n  const identified = suggestionsStore.identified   \r\n  const optionCode = suggestionsStore.fromRelatives ? 'ASKU' : 'NA UNK'\r\n  const isDeathTime = certificate.deathDatetime!==undefined \r\n        && certificate.nullFlavors.findIndex((item)=>item.parent_attr===\"death_time\")===-1\r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">\r\n            <div className=\"p-field-checkbox p-col-12 p-lg-6\">              \r\n              <Checkbox inputId=\"notIdentified\" checked={!suggestionsStore.identified} onChange={e =>{                \r\n                if (e.checked) {\r\n                  patient.person = undefined\r\n                  patient.identity = undefined\r\n                  certificate.policyOMS = undefined\r\n                } else { \r\n                  patient.person = new Person()\r\n                  if (yearBTChecked) { setYearBTChecked(false) \r\n                    patient.setBirthDay(patient.birth_date as Date | undefined, false)\r\n                  }      \r\n                }  \r\n                checkFieldNullFlavor('person', patient.person, patient.nullFlavors, UNK) \r\n                checkFieldNullFlavor('identity', patient.identity, patient.nullFlavors, UNK)  \r\n                checkFieldNullFlavor('policy_OMS', certificate.policyOMS, certificate.nullFlavors, UNK)           \r\n                suggestionsStore.identified = !e.checked  \r\n                }} \r\n              />\r\n              <label htmlFor=\"notIdentified\">Умерший не идентифицирован</label>\r\n            </div>\r\n            <div className=\"p-field-checkbox p-col-12 p-lg-6\">              \r\n              <Checkbox inputId=\"fromRelatives\" checked={suggestionsStore.fromRelatives} \r\n              onChange={e =>{       \r\n                suggestionsStore.fromRelatives = e.checked\r\n                if (e.checked) { \r\n                  if (!patient.person) {\r\n                    patient.person = new Person()\r\n                    checkFieldNullFlavor('person', patient.person, patient.nullFlavors)\r\n                  }  \r\n                  if (yearBTChecked) { \r\n                    setYearBTChecked(false) \r\n                    patient.setBirthDay(patient.birth_date as Date | undefined, false)\r\n                  }\r\n                  patient.identity = undefined  \r\n                  checkFieldNullFlavor('identity', patient.identity, patient.nullFlavors, ASKU)                                  \r\n                } else \r\n                  patient.identity = new Identity({identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code} as IIdentity)                \r\n                }}/>\r\n              <label htmlFor=\"fromRelatives\">Внесено со слов родственников</label>\r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'> 1. </div>\r\n              <div className='p-paragraph-field p-mr-2 p-mb-2' \r\n                key={`pdiv1_${identified}`} >\r\n                <NullFlavorWrapper \r\n                  disabled={!suggestionsStore.fromRelatives}               \r\n                  checked={identified} \r\n                  paraNum                                \r\n                  label={<label htmlFor=\"family\">Фамилия, имя, отчество(при наличии)</label>}\r\n                  field={<PersonName personName={person?.fio}                                     \r\n                    onChange={(value: IPersonName | undefined)=>{     \r\n                      if (!person) return                          \r\n                      if (value?.family !== \"\" && (!person.fio || person.fio.family ===\"\")) layoutStore.message = { severity: 'success', summary: 'Успешно', detail: 'ФИО умершего изменены, чтобы сохранить изменения, введите причину А в п.22', life: 3000 }                                        \r\n                      person.fio = value || {family:'',given_1:''}\r\n                      checkFieldNullFlavor('fio.given_2', person.fio.given_2, person.nullFlavors, UNK)     \r\n                                                  \r\n                  }}/>}                  \r\n                  options={NULL_FLAVORS.filter((item:IReference)=>optionCode.includes(item.code))} \r\n                  value={suggestionsStore.fromRelatives ? ASKU : UNK} \r\n                  nullFlavors={patient.nullFlavors}  \r\n                  field_name=\"person\"                                 \r\n                />             \r\n              </div>\r\n            </div>  \r\n            <div className=\"p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1' > 2. </div>\r\n              <div className='p-paragraph-field'>\r\n                <div className=\"p-formgroup-inline\">\r\n                  <div className='p-field-radiobutton p-radiobutton'>Пол</div>\r\n                  <div className='p-field-radiobutton'>                  \r\n                    <RadioButton name='undef' checked={patient.gender === NOGENDER}\r\n                      onChange={(e)=>{\r\n                        if (e.checked) patient.gender = NOGENDER  \r\n                        else patient.gender = undefined\r\n                      }}/>\r\n                    <label htmlFor='undef'> Неопределенный </label>\r\n                  </div>\r\n                  <div className='p-field-radiobutton'>                  \r\n                    <RadioButton name='female' checked={patient.gender === FEMALE}\r\n                      onChange={(e)=>{\r\n                      if (e.checked) patient.gender = FEMALE  \r\n                      else patient.gender = undefined\r\n                      }}\r\n                    />\r\n                    <label htmlFor='female'> Женский</label>\r\n                  </div>                \r\n                  <div className='p-field-radiobutton'>                  \r\n                    <RadioButton name='male' checked={patient.gender === MALE}\r\n                      onChange={(e)=>{\r\n                        if (e.checked) patient.gender = MALE  \r\n                        else patient.gender = undefined\r\n                      }}\r\n                    />\r\n                    <label htmlFor='male'>Мужской</label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"p-field p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1'> 3. </div>\r\n              <div className='p-paragraph-field' key={`pdiv5_${identified}`}>                    \r\n                <NullFlavorWrapper paraNum\r\n                    disabled={suggestionsStore.identified}                    \r\n                    label={<label htmlFor=\"dateBirth\">Дата рождения</label>}\r\n                    checked={suggestionsStore.identified || yearBTChecked } setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) {                        \r\n                        patient.birth_date = undefined\r\n                        patient.birth_year = undefined \r\n                      } \r\n                      if (nullFlavors) patient.nullFlavors = nullFlavors \r\n                    }} \r\n                    onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) patient.nullFlavors = nullFlavors}}\r\n                    field={<div className=\"p-d-flex p-jc-start p-ai-center\">              \r\n                      <Calendar id=\"dateBirth\" className=\"p-mr-2\" locale=\"ru\"\r\n                        dateFormat={yearBTChecked ? \"yy\" : \"dd.mm.yy\"}  \r\n                        mask={yearBTChecked ? \"9999\" : \"99.99.9999\"}                         \r\n                        value={patient.birth_date} \r\n                        onChange={(e)=>patient.setBirthDay(e.target.value as Date | undefined, yearBTChecked)                          \r\n                        }\r\n                        showIcon />\r\n                      <div className=\"p-field-checkbox\">              \r\n                        <Checkbox checked={yearBTChecked} \r\n                          inputId=\"bd_year\" disabled={suggestionsStore.identified}\r\n                          onChange={e=>{\r\n                            setYearBTChecked(e.checked)\r\n                            patient.setBirthDay(patient.birth_date as Date | undefined, e.checked) }}/>\r\n                        <label htmlFor=\"bd_year\">Только год</label>\r\n                      </div>\r\n                    </div>}\r\n                    options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                    value={suggestionsStore.fromRelatives ? ASKU : UNK}\r\n                    field_name=\"birth_date\"\r\n                    nullFlavors={patient.nullFlavors}\r\n                />                               \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1'> 7. </div>\r\n              <div className='p-paragraph-field p-mr-3 p-mb-2'>\r\n                <NullFlavorWrapper paraNum                   \r\n                  label={<label htmlFor=\"dateDeath\">Дата смерти</label>}                  \r\n                  checked={certificate.deathDatetime!==undefined} setCheck={(e:CheckboxChangeParams, nullFlavors:      INullFlavorR[] | undefined)=>{                   \r\n                    if (!e.checked) certificate.setDeathDay(undefined, false)                      \r\n                    else certificate.setDeathDay(new Date(), false)                         \r\n                    if (nullFlavors) certificate.nullFlavors = nullFlavors  \r\n                  }} \r\n                  onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n                  field={<div className=\"p-d-flex p-jc-start p-ai-center\">              \r\n                      <Calendar id=\"dateDeath\" className=\"p-mr-2\" locale=\"ru\"\r\n                        dateFormat={yearDTChecked ? \"yy\" : \"dd.mm.yy\"} \r\n                        mask={yearDTChecked ? \"9999\" : \"99.99.9999\"}\r\n                        value={certificate.deathDatetime}\r\n                        onChange={(e)=>certificate.setDeathDay(e.target.value as Date | undefined, yearDTChecked) \r\n                        } \r\n                        showIcon />\r\n                      <div className=\"p-field-checkbox\">              \r\n                        <Checkbox checked={yearDTChecked} \r\n                          inputId=\"bd_year\" \r\n                          onChange={e=>{ setYearDTChecked(e.checked)\r\n                            certificate.setDeathDay(certificate.deathDatetime as Date | undefined, e.checked)}}/>\r\n                        <label htmlFor=\"bd_year\">Только год</label>\r\n                      </div>\r\n                    </div>}\r\n                    options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                    value={UNK}\r\n                    field_name=\"death_datetime\"                    \r\n                    nullFlavors={certificate.nullFlavors}\r\n                 />\r\n              </div>     \r\n              <div className='p-paragraph-field' key={`pdivdt_${yearDTChecked}_${isDeathTime}`}>                \r\n                <NullFlavorWrapper \r\n                  disabled={yearDTChecked}                   \r\n                  label={<label htmlFor=\"timeDeath\">Время смерти</label>}\r\n                  checked={isDeathTime && !yearDTChecked} \r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                   \r\n                    if (nullFlavors) certificate.nullFlavors = nullFlavors  \r\n                  }}\r\n                  onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) certificate.nullFlavors = nullFlavors}} \r\n                  field={ <Calendar id=\"timeDeath\"  \r\n                    timeOnly hourFormat=\"24\" locale=\"ru\"                                                   \r\n                    value={certificate.deathDatetime} \r\n                    showIcon />}\r\n                  options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                  value={UNK}\r\n                  field_name=\"death_time\"\r\n                  nullFlavors={certificate.nullFlavors}                  \r\n                />\r\n              </div>\r\n            </div>            \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section1) ","import { InputMask, InputMaskProps } from 'primereact/inputmask'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport Identity from '../../models/FormsData/Identity'\r\nimport { ID_CARD_TYPE } from '../../utils/defaults'\r\n\r\ntype InputsIdentityProps = {\r\n  dulValue?: ID_CARD_TYPE\r\n  identity?:Identity  \r\n}\r\nexport const inputsIdentity = (props:InputsIdentityProps) =>{\r\n  const identity = props.identity\r\n  const dulValue = props.dulValue\r\n  const seriesProps = {type:\"text\", id:\"series\", value:identity?.series,                  \r\n      onChange:(e:any)=>{if (identity) identity.series = e.target.value }}  \r\n  const seriesField = dulValue?.s_mask ? <InputMask {...{mask:dulValue?.s_mask,...seriesProps} as InputMaskProps }/>\r\n    : <InputText {...seriesProps}/>   \r\n  const numberProps = {type:\"text\", id:\"docNumber\", value:identity?.number,                  \r\n      onChange:(e:any)=>{if (identity) identity.number = e.target.value }}  \r\n  const numberField = dulValue?.n_mask ? <InputMask {...{mask:dulValue?.n_mask,...numberProps} as InputMaskProps }/>\r\n    : <InputText {...numberProps}/> \r\n  const depCodeProps = {type:\"text\", id:\"depCode\", value:identity?.issueOrgCode,                  \r\n      onChange:(e:any)=>{if (identity) identity.issueOrgCode = e.target.value}}  \r\n  const depCodeField = dulValue?.c_mask ? <InputMask {...{mask:dulValue?.c_mask,...depCodeProps} as InputMaskProps }/>\r\n    : <InputText {...depCodeProps}/> \r\n  return [seriesField, numberField,  depCodeField]\r\n}","import { observer } from 'mobx-react-lite'\r\nimport React, { FC, useContext, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { Card } from 'primereact/card'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport '../../styles/components/RadioButton.css'\r\nimport '../../styles/components/Calendar.css'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { ASKU, ID_CARD_TYPES, NA, NULL_FLAVORS, PASSPORT_RF, UNK } from '../../utils/defaults'\r\nimport { IReference } from '../../models/IReference'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { checkFieldNullFlavor, INullFlavorR } from '../../models/INullFlavor'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { InputMask } from 'primereact/inputmask'\r\nimport { InputTextarea } from 'primereact/inputtextarea'\r\nimport Identity from '../../models/FormsData/Identity'\r\nimport IIdentity from '../../models/IIdentity'\r\nimport { inputsIdentity } from '../inputs/inputsIdentity'\r\n\r\n\r\n\r\n const Section2: FC = () => {\r\n  const { certificateStore, suggestionsStore } = useContext(Context)   \r\n  const identified = suggestionsStore.identified  \r\n  const header = () => {\r\n      return <span>Документы умершего</span>\r\n    }    \r\n  const certificate = certificateStore.cert   \r\n  const patient = certificate.patient\r\n  const identity = patient.identity \r\n  const [docChecked, setDocChecked] = useState(identified && patient.nullFlavors.findIndex(item=>!item._destroy && item.parent_attr==='identity')===-1)    \r\n  const [dulValue, setDulValue]  = useState(ID_CARD_TYPES.find((item)=>item.code === identity?.identityCardType))\r\n  const person =  patient.person   \r\n  const nullFlavorOption =  docChecked ? \"UNK\" : \"UNK ASKU NA\" \r\n  const [seriesField, numberField, depCodeField] = inputsIdentity({dulValue, identity})    \r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">            \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>4. </div>\r\n              <div className='p-paragraph-field p-mr-2 p-mb-2'>\r\n                <NullFlavorWrapper \r\n                  disabled={!identified} paraNum                              \r\n                  checked={docChecked} setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>\r\n                    { if (e.checked) {\r\n                      patient.identity = new Identity({\r\n                        identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code,                                  \r\n                          } as IIdentity)\r\n                        if (!identified) suggestionsStore.identified = true\r\n                      } else patient.identity = undefined \r\n                      if (nullFlavors) patient.nullFlavors = nullFlavors\r\n                      setDocChecked(e.checked)\r\n                    }}\r\n                  nullFlavors={patient.nullFlavors}\r\n                  field_name=\"identity\"\r\n                  label={<label htmlFor=\"identity_card_type\">Документ, удостоверяющей личность умершего: </label>}\r\n                  field={<Dropdown  id=\"identity_card_type\" value={dulValue} \r\n                  autoFocus options={ID_CARD_TYPES} optionLabel='name'\r\n                  onChange={(e)=>{\r\n                    if (identity) identity.identityCardType = e.value.code\r\n                    else {\r\n                      patient.identity = new Identity({identity_card_type_id: e.value.code} as IIdentity)\r\n                      checkFieldNullFlavor(\"identity\", patient.identity, patient.nullFlavors)\r\n                    }  \r\n                    setDulValue(ID_CARD_TYPES.find((item)=>item.code === e.value.code))\r\n                  }}\r\n                  />}                  \r\n                  options={NULL_FLAVORS.filter((item:IReference)=>nullFlavorOption.includes(item.code))} \r\n                  value={docChecked ? UNK : ASKU}                                    \r\n                />             \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`ser_${docChecked}`} \r\n                style={{marginLeft:'1.5rem'}}>\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"series\">Серия</label>}\r\n                  checked={docChecked && patient.identity?.nullFlavors.findIndex(nf=>nf.parent_attr==='series')===-1} setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                    if (e.checked && patient.identity) patient.identity.series = ''\r\n                    else if (patient.identity) patient.identity.series = undefined                                    \r\n                  }}                 \r\n                  field={seriesField}\r\n                  field_name='series'\r\n                  options={identified ? [NULL_FLAVORS[NA]] : [NULL_FLAVORS[ASKU]]}\r\n                  value={NA}\r\n                  nullFlavors={patient.identity?.nullFlavors}\r\n                  lincked={!docChecked}                                   \r\n                />  \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`num_${docChecked}`}\r\n                style={{marginLeft:'1.5rem'}} >\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"docNumber\">Номер</label>}\r\n                  checked={docChecked}                 \r\n                  field={numberField}\r\n                  options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                  value={identified ? UNK : ASKU} \r\n                  lincked                                      \r\n                />                    \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-3 p-mb-2\" key={`org_${docChecked}`} style={{marginLeft:'1.5rem'}} >\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"issueOrgName\">Кем выдан</label>}\r\n                  checked={docChecked}                   \r\n                  field={\r\n                    <InputTextarea id=\"issueOrgName\" value={identity?.issueOrgName} \r\n                    cols={65} rows={2}   disabled={!identified}\r\n                    onChange={(e)=>{if (identity) identity.issueOrgName = e.target.value }}/>}\r\n                  options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                  value={identified ? UNK : ASKU} \r\n                  lincked                                      \r\n                />                    \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{marginLeft:'1.5rem'}} key={`pdiv5_${docChecked}`}>\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"issueDate\">Когда выдан</label>}\r\n                  checked={docChecked}                   \r\n                  field={<Calendar  id=\"issueDate\" className=\"p-mr-2\" \r\n                    dateFormat={\"dd.mm.yy\"} \r\n                    locale=\"ru\" mask=\"99.99.9999\"                    \r\n                    value={identity?.issueOrgDate}\r\n                    onChange={(e)=>{if (identity) identity.issueOrgDate = e.target.value as Date | undefined}}\r\n                    showIcon />\r\n                  }\r\n                  options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                  value={identified ? UNK : ASKU}\r\n                  field_name=\"issueDate\"\r\n                  lincked                                       \r\n                /> \r\n              </div>  \r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`code_${docChecked}`} style={{marginLeft:'1.5rem'}}> \r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"depCode\">Код подразделения</label>}\r\n                  checked={docChecked && patient.identity?.nullFlavors.findIndex(nf=>nf.parent_attr==='issueOrgCode')===-1} \r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                    if (e.checked && patient.identity) patient.identity.issueOrgCode = ''\r\n                    else if (patient.identity) patient.identity.issueOrgCode = undefined  \r\n                    if (nullFlavors && patient.identity) patient.identity.nullFlavors =  nullFlavors            \r\n                  }}                   \r\n                  field={depCodeField}\r\n                  options={identified ? [NULL_FLAVORS[NA]] : [NULL_FLAVORS[ASKU]]}\r\n                  value={identified ? NA : ASKU} \r\n                  nullFlavors={patient.identity?.nullFlavors} \r\n                  lincked={!docChecked}\r\n                  field_name=\"issueOrgCode\"                                     \r\n                />                    \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1'> 5. </div>\r\n              <div className='p-paragraph-field'>                    \r\n                <NullFlavorWrapper paraNum                    \r\n                    label={<label htmlFor=\"snils\">СНИЛС</label>}\r\n                    disabled={!identified} \r\n                    checked={person && person.nullFlavors.findIndex(item=>item.parent_attr === 'SNILS' && !item._destroy)===-1} setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                      if (!person) return\r\n                      if (nullFlavors) person.nullFlavors = nullFlavors\r\n                      if (!e.checked) person.SNILS = undefined                                       \r\n                    }}                    \r\n                    field={<InputMask id=\"snils\"  \r\n                      type=\"text\" mask=\"999-999-999 99\"\r\n                      value={person?.SNILS} \r\n                      onChange={(e)=>{\r\n                        if (!person) return\r\n                        person.SNILS = e.target.value}}/>            \r\n                    }\r\n                    options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK NA\".includes(item.code))} \r\n                    value={docChecked ? UNK : ASKU}\r\n                    field_name=\"SNILS\"\r\n                    nullFlavors={person?.nullFlavors}\r\n                />                               \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1'>6.* </div>\r\n              <div className='p-paragraph-field p-mr-3 p-mb-2'>\r\n                <NullFlavorWrapper  paraNum                   \r\n                    label={<label htmlFor=\"policyOMS\">Серия и номер полиса ОМС</label>}\r\n                    checked={identified && certificate.nullFlavors.findIndex(item=>item.parent_attr === 'policy_OMS' && !item._destroy)===-1} setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                      if (!e.checked) certificate.policyOMS = undefined                                           \r\n                    }}                     \r\n                    field={<InputText id=\"policyOMS\"  \r\n                      type=\"text\" \r\n                      value={certificate.policyOMS} \r\n                      onChange={(e)=>{certificate.policyOMS = e.target.value}}/>            \r\n                    }\r\n                    options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK NA\".includes(item.code))} \r\n                    value={docChecked ? UNK : ASKU}\r\n                    field_name=\"policy_OMS\"\r\n                    nullFlavors={certificate.nullFlavors}\r\n                />\r\n              </div>                   \r\n            </div>  \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%', paddingLeft:'0.5rem'}} >\r\n              <em>* В случае смерти ребенка до года заполняется в отношении матери</em>\r\n            </div>          \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section2) ","/*\r\n* ADDRESS SEARCH DIALOG COMPONENT\r\n* функционал ввода адреса посредством поиска в ФИАС\r\n* параметры:\r\n* ID - ID существующей записи адреса в СУБД \r\n* address - полное представление записи адреса в СУБД  \r\n*/\r\nimport { observer } from 'mobx-react-lite'\r\nimport { AutoComplete, AutoCompleteChangeParams } from 'primereact/autocomplete'\r\nimport { Button } from 'primereact/button'\r\nimport { Dialog } from 'primereact/dialog'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { Toast } from 'primereact/toast'\r\nimport { FC, useContext, useEffect, useRef, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { IReference } from '../../models/IReference'\r\nimport { IFiasItem } from '../../models/responses/IFiasItem'\r\nimport { DEFAULT_ERROR_TOAST, HOME_REGION_CODE } from '../../utils/defaults'\r\n\r\ntype AddressDialogProps = {  \r\n  onCancel?: ()=>void \r\n}\r\n\r\nconst AddressDialog: FC<AddressDialogProps> = (props: AddressDialogProps) =>{ \r\n  const { addressStore } = useContext(Context)  \r\n  const [isLoading] = useState(addressStore.isLoading)  \r\n  const value = addressStore.address  \r\n  const streetAddressLine = value.streetAddressLine\r\n  const regions = addressStore.regionsOptions\r\n  const [searchStr, setSearchStr] = useState<string>('')   \r\n  useEffect(()=>setSearchStr(streetAddressLine)    \r\n  , [streetAddressLine])  \r\n  const [region, setRegion] = useState<IReference>()\r\n  useEffect(()=>setRegion(regions?.find((item)=>item.code === value.state?.code))      \r\n   , [regions, value.state])   \r\n  const [district, setDistrict] = useState<string>('')\r\n  useEffect(()=>setDistrict(value.district?.name || ''), [value.district?.name])\r\n  const [city, setCity] = useState<string>(value.city?.name || '')\r\n  useEffect(()=>setCity(value.city?.name || ''), [value.city?.name])\r\n  const [town, setTown] = useState<string>(value.town?.name || '')\r\n  useEffect(()=>setTown(value.town?.name || ''), [value.town?.name])\r\n  const [street, setStreet] = useState<string>(value.street?.name || '')\r\n  useEffect(()=>setStreet(value.street?.name || ''), [value.street?.name])\r\n  const [house, setHouse] = useState<string>(value.housenum || '')\r\n  useEffect(()=>setHouse(value.housenum || ''), [value.housenum])\r\n  const [addresses, setAddresses] = useState(addressStore.fiasOptions)   \r\n  const toast = useRef<Toast>(null)\r\n  const setAddress = (e:IFiasItem)=>{ \r\n    if (e === null) return      \r\n    if (e.parent) setAddress(e.parent)\r\n    if (e.postalCode && e.postalCode.length>0) value.postalCode = e.postalCode\r\n    value.aoGUID = e.AOGUID\r\n    value.houseGUID = e.HouseGUID \r\n    value.streetAddressLine = e.streetAddressLine\r\n    switch (e.level) {\r\n      case 'Region' : if (e.code) value.state = {code: e.code.slice(0,2), name: e.name}      \r\n        setRegion(regions?.find((item)=>item.code === value.state?.code))\r\n        break\r\n      case 'City': value.city = {code: e.AOGUID, name: e.name}\r\n        setCity(e.name) \r\n        break\r\n      case 'District': value.district = {code: e.AOGUID, name: e.name}\r\n        setDistrict(e.name)\r\n        break\r\n      case \"RailWayObject\":  \r\n      case 'Town': value.town = {code: e.AOGUID, name: e.name}\r\n        setTown(e.name)\r\n        break\r\n      case 'building': value.housenum = e.housenum; \r\n        value.buildnum = e.buildnum;\r\n        value.strucnum = e.strucnum;\r\n      break\r\n      case 'Street': \r\n        setStreet(e.name)\r\n        value.street = {code: e.AOGUID, name: e.name}\r\n      break\r\n    }         \r\n  }  \r\n  useEffect( () => {     \r\n    if (regions===undefined) {\r\n      addressStore.fetchRegionOptions()          \r\n    } else if (value.state===undefined || value.state===null)  {      \r\n      setRegion(regions?.find((region)=>region.code===HOME_REGION_CODE)) \r\n      value.state = region\r\n    } else if (value.state?.code) {\r\n      setRegion(regions?.find((region)=>region.code===value.state?.code))\r\n    }    \r\n  }, [regions, value, addressStore, region])  \r\n  \r\n  \r\n  const onHide = ()=>{ \r\n    addressStore.dialogVisible = false\r\n  }\r\n\r\n  const autocompleteOnChange = (e: AutoCompleteChangeParams, setter: (value: string)=>void) => {\r\n    if(e.value && e.value?.AOGUID) { \r\n      addressStore.clear()                                        \r\n      setAddress(e.value)\r\n    } else setter(e.value)\r\n  }\r\n\r\n  const getSuggestions = (parent:string, level: string, query:string)=>{\r\n   addressStore.getChildItems(parent, level, query)\r\n    .then(response=>setAddresses(response))\r\n    .catch(reason => {  \r\n       if (toast.current) toast.current.show({...DEFAULT_ERROR_TOAST, detail:`ошибка запроса к ФИАС: ${reason.message}`})\r\n       setAddresses([])\r\n    })    \r\n  }\r\n\r\n  const cantSaveChanges = ()=> {    \r\n    if ((!addressStore.manualMode && addressStore.isNotStrictly()) \r\n      || addressStore.address.oldOne.streetAddressLine === addressStore.streetAddressLine()) return true\r\n    else  return false  \r\n  }\r\n  const footer = (\r\n    <div>\r\n      <Button label=\"Применить\" icon=\"pi pi-check\" disabled={cantSaveChanges()}\r\n        onClick={()=>{          \r\n          if (addressStore.isNotStrictly() && addressStore.manualMode) {  \r\n            value.housenum = house          \r\n            if (value.houseGUID === null && !!house ) \r\n              addressStore.address.streetAddressLine = `${searchStr}${value.housenum.length>0 ? ', '+value.housenum : ''}`\r\n            else addressStore.address.streetAddressLine = searchStr\r\n          }  \r\n          if (addressStore.onAddrComplete) addressStore.onAddrComplete()          \r\n          onHide()\r\n        }} className=\"p-button-text p-button-success\"/>        \r\n      <Button label=\"Отмена\" icon=\"pi pi-times\" onClick={()=>{\r\n        if (props.onCancel) props.onCancel()\r\n        onHide()}} className=\"p-button-text\"/>\r\n    </div>\r\n)\r\n  return (\r\n  <Dialog footer={footer} header='Ввод адреса посредством ФИАС' visible={addressStore.dialogVisible} onHide={onHide} \r\n    breakpoints={{'960px': '75vw', '640px': '100vw'}} \r\n    style={{width: '50vw'}} modal>\r\n    <div className=\"p-grid p-fluid\">  \r\n    <div className='p-field p-col-12'>        \r\n      <div className='p-inputgroup'>\r\n        <span className='p-inputgroup-addon'>Строка поиска:</span> \r\n        <AutoComplete id='searchFIAS' disabled={isLoading}  \r\n            value={searchStr} \r\n            suggestions={addresses}\r\n            completeMethod={(e) =>{\r\n              const query = value.state?.name ? e.query.replace(value.state?.name+',', '') : e.query\r\n              if (query.trim().length>1) { \r\n                addressStore.searchBar(query.trim(), value.state?.code)\r\n                setAddresses(addressStore.fiasOptions)\r\n              }\r\n            }}\r\n          field='streetAddressLine'\r\n          onChange={(e) => {                                  \r\n            if(e.value && e.value?.AOGUID) { \r\n              addressStore.clear()                                        \r\n              setAddress(e.value)\r\n              setSearchStr(e.value.streetAddressLine)\r\n            } else setSearchStr(e.target.value)\r\n          }}\r\n          placeholder='Регион, Город(Район),(Нас.пункт), Улица, Дом'\r\n        />\r\n      </div> \r\n    </div>       \r\n    <div className=\"p-field p-col-12 p-md-6\">      \r\n      <label htmlFor=\"region\">субъект Российской Федерации</label>\r\n      <Dropdown id='region' value={region} filter filterBy='name'\r\n          onChange={(e)=>{                \r\n            value.state = e.value \r\n            addressStore.clear() \r\n            setRegion(e.value)\r\n          }}\r\n          options={regions}\r\n          optionLabel='name'                                           \r\n      />\r\n    </div> \r\n    <div className=\"p-field p-col-12 p-md-6\">\r\n      <label htmlFor=\"district\">район</label>\r\n      <AutoComplete id='district' dropdown              \r\n          value={district}  forceSelection                    \r\n          field='name' disabled={isLoading}\r\n          onChange={e=>autocompleteOnChange(e, setDistrict)}                       \r\n          suggestions={addresses}\r\n          completeMethod={e=>{\r\n            if (value.state?.code) \r\n            getSuggestions(value.state?.code, 'district', e.query)\r\n          }}                                                           \r\n        />\r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-6\">\r\n        <label htmlFor=\"city\">город</label>         \r\n        <AutoComplete id='city' dropdown              \r\n          value={city}  forceSelection                    \r\n          field='name' \r\n          onChange={e=>autocompleteOnChange(e,setCity)}                       \r\n          suggestions={addresses}\r\n          completeMethod={e=>{                \r\n            if (value.state?.code) getSuggestions(value.state?.code,'city', e.query)\r\n          }}               \r\n        />              \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-6\">\r\n        <label htmlFor=\"town\">населенный пункт</label>\r\n        <AutoComplete id='town' dropdown value={town}  \r\n          forceSelection field='name' \r\n          onChange={e=>autocompleteOnChange(e, setTown)}                       \r\n          suggestions={addresses}\r\n          completeMethod={async (e) =>{\r\n            let parent = value.state?.code               \r\n            if (value.city?.code) parent = value.city?.code  \r\n            if (value.district?.code) parent = value.district?.code                \r\n            if (parent) getSuggestions(parent, 'town', e.query)                \r\n          }}                                                   \r\n        />        \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-6\">\r\n        <label htmlFor=\"street\">улица</label>\r\n        <AutoComplete id='street' forceSelection              \r\n          value={street} field='name' dropdown                 \r\n          onChange={e=>autocompleteOnChange(e, setStreet)}                       \r\n          suggestions={addresses}\r\n          completeMethod={async (e) =>{\r\n            let parent = value.state?.code \r\n            if (value.district?.code) parent = value.district?.code              \r\n            if (value.city?.code) parent = value.city?.code                 \r\n            if (value.town?.code) parent = value.town?.code               \r\n            if (parent) getSuggestions(parent, 'street', e.query)                 \r\n          }}                                                   \r\n        />\r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\" style={{ maxWidth:'7rem'}}>\r\n        <label htmlFor=\"housenum\">дом</label>\r\n        <AutoComplete id='housenum' dropdown value={house} field='name'            \r\n          onChange={(e)=>{\r\n            if(e.value && e.value?.AOGUID) { \r\n              addressStore.clear()                                        \r\n              setAddress(e.value)\r\n              setHouse(e.value.name)\r\n            } else {\r\n              setHouse(e.value)              \r\n              value.housenum = e.value                               \r\n              value.houseGUID = null\r\n            }\r\n          }}                       \r\n          suggestions={addresses}\r\n          completeMethod={async (e) =>{\r\n            let parent = value.state?.code \r\n            if (value.district?.code) parent = value.district?.code              \r\n            if (value.city?.code) parent = value.city?.code                 \r\n            if (value.town?.code) parent = value.town?.code\r\n            if (value.street?.code) parent = value.street?.code               \r\n            if (parent) getSuggestions(parent, 'building', e.query)                \r\n          }}                                                   \r\n        />         \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\" style={{ maxWidth:'7rem'}}> \r\n        <label htmlFor=\"strucnum\">стр.</label>\r\n        <InputText id='strucnum'              \r\n          value={value.strucnum || ''}                \r\n          onChange={(e)=>{\r\n            if (e.target.value.trim().length>0) value.strucnum=e.target.value\r\n          }}\r\n        />        \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\" style={{ maxWidth:'7rem'}}>\r\n        <label htmlFor=\"buildnum\">корп.</label>\r\n        <InputText id='buildnum' value={value.buildnum || ''}                \r\n          onChange={(e)=>{\r\n            if (e.target.value.trim().length>0) value.buildnum=e.target.value                \r\n          }}                  \r\n        />        \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\" style={{ maxWidth:'9rem'}}>\r\n        <label htmlFor=\"flat\">квартира(офис)</label>\r\n        <InputText id='flat' value={value.flat || ''}                  \r\n          onChange={(e)=>{\r\n            value.flat=e.target.value}\r\n          }                                               \r\n        />        \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\">\r\n        <label htmlFor=\"postalCode\">почтовый код</label>\r\n        <InputText id='postalCode' disabled={value.aoGUID!==undefined}              \r\n          value={value.postalCode || \"\"}                  \r\n            onChange={(e)=>{\r\n              value.postalCode=e.target.value                \r\n            }}                                               \r\n        />        \r\n      </div>\r\n      <Toast ref={toast} />      \r\n    </div>  \r\n  </Dialog>)\r\n}\r\nexport default observer(AddressDialog)","import { AxiosResponse } from \"axios\"\r\nimport { $fias, FIAS_URL } from \"../http\"\r\nimport { IFiasResponse } from \"../models/responses/IFiasResponse\"\r\nimport { HOME_REGION_CODE } from \"../utils/defaults\"\r\n\r\nexport default class FiasService {\r\n  static async getRegions(): Promise<AxiosResponse<IFiasResponse>> {\r\n    return $fias.get(`${FIAS_URL}?level=region&limit=120`)\r\n  }\r\n  static async searchBar(query: string, regionID = HOME_REGION_CODE as string): Promise<AxiosResponse<IFiasResponse>> {\r\n    return $fias.get(`${FIAS_URL}?searchBar=1&withParent=1&regionID=${regionID}&total_found=1&query=${query}`)\r\n  }\r\n  static async getChildItems(\r\n    parent: string,\r\n    level: string,\r\n    query = \"\",\r\n    limit = \"120\"\r\n  ): Promise<AxiosResponse<IFiasResponse>> {\r\n    const parentOpt = parent.length === 2 ? `regionID=${parent}` : `parent=${parent}`\r\n    return $fias.get(`${FIAS_URL}?${parentOpt}&withParent=1&level=${level}&query=${query}&limit=${limit}`)\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport FiasService from \"../../services/FiasService\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IReference } from \"../IReference\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { IFiasItem } from \"../responses/IFiasItem\"\r\n\r\nexport default class Address {\r\n  private _oldOne: IAddressR\r\n  private _id?: string\r\n  private _streetAddressLine: string\r\n  private _state?: IReference\r\n  private _district?: IReference\r\n  private _city?: IReference\r\n  private _town?: IReference\r\n  private _street?: IReference\r\n  private _aoGUID?: string | null\r\n  private _houseGUID?: string | null\r\n  private _housenum?: string | null\r\n  private _buildnum?: string | null\r\n  private _strucnum?: string | null\r\n  private _flat?: string | null\r\n  private _postalCode?: string\r\n  private _nullFlavors: INullFlavorR[]\r\n  private _parent?: string\r\n  constructor(props: IAddressR) {\r\n    this._nullFlavors =\r\n      !!props.null_flavors_attributes && props.null_flavors_attributes.length > 0\r\n        ? [...props.null_flavors_attributes]\r\n        : []\r\n    if (props.id) this._id = props.id\r\n    this._oldOne = props\r\n    this._streetAddressLine = props.streetAddressLine\r\n    this._aoGUID = props.aoGUID\r\n    this._houseGUID = props.houseGUID\r\n    this._postalCode = props.postalCode\r\n    this._housenum = props.house_number\r\n    this._buildnum = props.building_number\r\n    this._strucnum = props.struct_number\r\n    this._flat = props.flat_number\r\n    this._parent = props.parent_guid\r\n    this.fetchAddressHierarchy()\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n\r\n  get oldOne(): IAddressR {\r\n    return this._oldOne\r\n  }\r\n\r\n  get id() {\r\n    return this._id\r\n  }\r\n  set id(id: string | undefined) {\r\n    this._id = id\r\n  }\r\n  get streetAddressLine() {\r\n    return this._streetAddressLine\r\n  }\r\n  set streetAddressLine(value: string) {\r\n    this._streetAddressLine = value\r\n  }\r\n  get state() {\r\n    return this._state\r\n  }\r\n  set state(value: IReference | undefined) {\r\n    this._state = value\r\n  }\r\n  get flat() {\r\n    return this._flat\r\n  }\r\n  set flat(value: string | undefined | null) {\r\n    this._flat = value\r\n  }\r\n\r\n  get postalCode() {\r\n    return this._postalCode\r\n  }\r\n  set postalCode(value: string | undefined) {\r\n    this._postalCode = value\r\n  }\r\n  get housenum() {\r\n    return this._housenum\r\n  }\r\n  set housenum(value: string | undefined | null) {\r\n    this._housenum = value\r\n  }\r\n  get buildnum() {\r\n    return this._buildnum\r\n  }\r\n  set buildnum(value: string | undefined | null) {\r\n    this._buildnum = value\r\n  }\r\n  get strucnum() {\r\n    return this._strucnum\r\n  }\r\n  set strucnum(value: string | undefined | null) {\r\n    this._strucnum = value\r\n  }\r\n\r\n  set street(value: IReference | undefined) {\r\n    this._street = value\r\n  }\r\n  get street() {\r\n    return this._street\r\n  }\r\n  set town(value: IReference | undefined) {\r\n    this._town = value\r\n  }\r\n  get town() {\r\n    return this._town\r\n  }\r\n  set aoGUID(value: string | undefined | null) {\r\n    this._aoGUID = value\r\n  }\r\n  get aoGUID() {\r\n    return this._aoGUID\r\n  }\r\n  set houseGUID(value: string | undefined | null) {\r\n    this._houseGUID = value\r\n  }\r\n  get houseGUID() {\r\n    return this._houseGUID\r\n  }\r\n  set district(value: IReference | undefined) {\r\n    this._district = value\r\n  }\r\n  get district() {\r\n    return this._district\r\n  }\r\n  set city(value: IReference | undefined) {\r\n    this._city = value\r\n  }\r\n  get city() {\r\n    return this._city\r\n  }\r\n\r\n  get parent() {\r\n    return this._parent\r\n  }\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes(): INullFlavorR[] {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  //рекурсивный парсинг структуры адресного объекта\r\n  parseFiasItem(fiasItem: IFiasItem) {\r\n    switch (fiasItem.level) {\r\n      case \"building\":\r\n        this._streetAddressLine = fiasItem.streetAddressLine\r\n        break\r\n      case \"Street\":\r\n        this._street = { code: fiasItem.AOGUID, name: `${fiasItem.name} ${fiasItem.shortname}` }\r\n        break\r\n      case \"Town\":\r\n      case \"RailWayObject\":\r\n        this._town = { code: fiasItem.AOGUID, name: `${fiasItem.name} ${fiasItem.shortname}` }\r\n        break\r\n      case \"City\":\r\n        this._city = { code: fiasItem.AOGUID, name: `${fiasItem.name} ${fiasItem.shortname}` }\r\n        break\r\n      case \"District\":\r\n        this._district = { code: fiasItem.AOGUID, name: `${fiasItem.name} ${fiasItem.shortname}` }\r\n        break\r\n      case \"Region\":\r\n        if (fiasItem.code) {\r\n          const code = fiasItem.code.slice(0, 2)\r\n          this._state = { code: code, name: `${fiasItem.name}` }\r\n        }\r\n        break\r\n      default:\r\n        console.log(\"invalid fiasItem.level\", fiasItem)\r\n        break\r\n    }\r\n    if (fiasItem.parent) this.parseFiasItem(fiasItem.parent)\r\n  }\r\n  // Получить всю ФИАС структуру адресного объекта по AOGUID\r\n  fetchAddressHierarchy() {\r\n    if (!this._aoGUID) return\r\n    FiasService.getChildItems(this._aoGUID, this._houseGUID ? \"building\" : \"\", \"\", \"1\")\r\n      .then((response) => {\r\n        if (response.data.data)\r\n          response.data.data.forEach((item) => {\r\n            this.parseFiasItem(item)\r\n          })\r\n      })\r\n      .catch((reason) => console.log(reason))\r\n  }\r\n}\r\n","import { HOME_REGION_CODE } from \"../../utils/defaults\"\r\nimport { IDestroyble } from \"../IDestroyble\"\r\nimport { INullFlavorableR } from \"./INullFlavorableR\"\r\n\r\nexport interface IAddressR extends INullFlavorableR, IDestroyble {\r\n  id?: string\r\n  state: string\r\n  streetAddressLine: string\r\n  aoGUID?: string | null\r\n  houseGUID?: string | null\r\n  postalCode?: string\r\n  code?: string\r\n  parent_guid?: string\r\n  actual?: boolean\r\n  house_number?: string | null\r\n  struct_number?: string | null\r\n  building_number?: string | null\r\n  flat_number?: string | null\r\n}\r\nexport const DEFAULT_ADDRESS = { state: HOME_REGION_CODE, streetAddressLine: \"\" } as IAddressR\r\n","import { observer } from 'mobx-react-lite'\r\nimport { Button } from 'primereact/button'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC, useContext, useEffect } from 'react'\r\nimport { Context } from '../..'\r\nimport Address from '../../models/FormsData/Address'\r\nimport { DEFAULT_ADDRESS, IAddressR } from '../../models/requests/IAddressR'\r\n\r\n\r\ntype InputAddressProps = { \r\n  submitted: boolean // is it form submitted already\r\n  value: IAddressR // object, containing address\r\n  onClear: (value: IAddressR)=>void // setter to state value in the form>\r\n  onChange: ()=>void // setter to state new value from dialog to form \r\n  label?: string\r\n  strictly?: boolean // if address need to be all from FIAS\r\n  className?: string // styles for main div  \r\n  id?: string \r\n}\r\n\r\nconst InputAddress: FC<InputAddressProps> = (props: InputAddressProps) =>{ \r\n  const submitted = props.submitted\r\n  const value = props.value\r\n  const {addressStore} = useContext(Context)\r\n\r\n  const invalid = props.strictly ? !value || !value.houseGUID\r\n     : !value || (value.streetAddressLine && value.streetAddressLine.split(',').length < 3)\r\n  \r\n  const bt_id = `bt_addr_${props.id}`   \r\n  \r\n  //useEffect(()=>{addressStore.address = new Address(props.value || DEFAULT_ADDRESS)\r\n  //  console.log('props.value', props.value.streetAddressLine)\r\n  //},[addressStore, props.value])\r\n\r\n   useEffect(()=>{\r\n    if (addressStore.manualMode!== !props.strictly) {\r\n      addressStore.manualMode = !props.strictly \r\n    }\r\n  },[addressStore, props.strictly])\r\n\r\n  return (<div className={classNames({'p-field': !!props.label}, props.className)} >\r\n    {props.label && <label htmlFor={bt_id}>{props.label}</label>}\r\n    <div className='p-inputgroup'>\r\n      <Button id='bt_addr_dialog' label=\"Ввод\" onClick={()=>{\r\n        addressStore.address = new Address(props.value || DEFAULT_ADDRESS)\r\n        addressStore.dialogVisible = true\r\n        addressStore.onAddrComplete = props.onChange}} style={{width:'5rem'}}/>\r\n      <InputText \r\n        title={value?.streetAddressLine}\r\n        value={value?.streetAddressLine}\r\n        placeholder={'введите адрес вида: Амурская область, Н-ский район, село Тосево, улица Товарная, дом 13, кв. 9' } className={classNames({ 'p-invalid': submitted && invalid})} />\r\n      <Button icon=\"pi pi-times\" className=\"p-button-danger\" onClick={()=>{\r\n        if (!value) return        \r\n        let _addr = DEFAULT_ADDRESS\r\n        if (value.id) _addr.id = value.id\r\n        if (value.parent_guid) _addr.parent_guid = value.parent_guid\r\n        if (value.null_flavors_attributes) _addr.null_flavors_attributes = value.null_flavors_attributes       \r\n        props.onClear(_addr)\r\n        addressStore.address = new Address(_addr)}}\r\n      />\r\n    </div>\r\n    {submitted && invalid && <small className=\"p-error\">Адресс введен не полностью или отсутствует</small>}\r\n  </div>)  \r\n}\r\nexport default observer(InputAddress)","import { RadioButton } from \"primereact/radiobutton\"\r\nimport { useState } from \"react\"\r\nimport { URBAN_AREA_TYPE, VILAGE_AREA_TYPE } from \"../../utils/defaults\"\r\n\r\n\r\ntype AreaTypeProps = {\r\n  value: number | undefined\r\n  onChange: ((value: number | undefined)=>void)\r\n}\r\n\r\nexport const AreaType = (props: AreaTypeProps) =>{ \r\n  const [value, setValue] = useState<number | undefined>(props.value)\r\n  return (  \r\n  <div className=\"p-formgroup-inline\" key={`rbt_${value}`} style={{marginLeft: '-0.76rem'}}>              \r\n      <div className='p-field-radiobutton'>                  \r\n        <RadioButton name='urban' checked={value === URBAN_AREA_TYPE}\r\n          onChange={(e)=>{\r\n            if (e.checked) { \r\n              setValue(URBAN_AREA_TYPE) \r\n              props.onChange(URBAN_AREA_TYPE)\r\n            } else {\r\n              setValue(undefined)\r\n              props.onChange(undefined) \r\n            }\r\n          }}\r\n        />\r\n        <label htmlFor='undef'>Городская</label>\r\n      </div>\r\n      <div className='p-field-radiobutton'>                  \r\n        <RadioButton name='vilage' checked={value === VILAGE_AREA_TYPE}\r\n          onChange={(e)=>{\r\n            if (e.checked) { \r\n              setValue(VILAGE_AREA_TYPE) \r\n              props.onChange(VILAGE_AREA_TYPE)\r\n            } else {\r\n              setValue(undefined)\r\n              props.onChange(undefined) \r\n            }\r\n          }}/>\r\n        <label htmlFor='vilage'>Сельская</label>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { observer } from \"mobx-react-lite\"\r\nimport { Button } from \"primereact/button\"\r\nimport { Card } from \"primereact/card\"\r\nimport { CheckboxChangeParams } from \"primereact/checkbox\"\r\nimport { FC, useContext, useState} from \"react\"\r\nimport { Context } from \"../..\"\r\nimport { IReference } from \"../../models/IReference\"\r\nimport { ASKU, NULL_FLAVORS, UNK } from \"../../utils/defaults\"\r\nimport AddressDialog from \"../dialogs/AddressDialog\"\r\nimport InputAddress from \"../inputs/InputAddress\"\r\nimport { AreaType } from \"../inputs/AreaType\"\r\nimport NullFlavorWrapper from \"../NullFlavorWrapper\"\r\nimport { INullFlavorR } from \"../../models/INullFlavor\"\r\nimport { DEFAULT_ADDRESS, IAddressR } from \"../../models/requests/IAddressR\"\r\n\r\n\r\nconst Section3: FC = () => {\r\n  const { addressStore, certificateStore,suggestionsStore } = useContext(Context)\r\n  const certificate = certificateStore.cert  \r\n  const patient = certificate.patient\r\n  const [addressLife, setAddressLife] = useState(patient.person?.address) \r\n  const [addressDeath, setAddressDeath] = useState(certificate.deathAddr) \r\n  const identified = suggestionsStore.identified\r\n  const checkedLifeArea = !!patient.person && patient.person.nullFlavors.findIndex((item)=>item.parent_attr==='address' && !item._destroy)===-1\r\n  const checkedDeathArea = !!addressDeath || certificate.nullFlavors.findIndex((item)=>item.parent_attr==='death_addr')===-1  \r\n  const fromRelatives = suggestionsStore.fromRelatives\r\n  const submitted = certificateStore.submitted\r\n  \r\n  const header = () => {\r\n    return <><span>Адреса мест жительства и смерти</span><Button type=\"button\" onClick={onAddressCopy} label=\"СОВПАДАЮТ\" disabled={!checkedLifeArea} className=\"p-button-raised p-button-success\"  /></>\r\n  }\r\n\r\n  //copy info from life address to dead address objects\r\n  const onAddressCopy = () => {\r\n    if (!patient.person) return\r\n    certificate.deathAreaType = certificate.lifeAreaType    \r\n     \r\n    if (!patient.person.address) certificate.deathAddr = undefined      \r\n    else {\r\n      certificate.deathAddr = {\r\n        ...patient.person.address,\r\n        null_flavors_attributes:\r\n          patient.person.address?.null_flavors_attributes?.map((item) => {\r\n            return { parent_attr: item.parent_attr, code: item.code } as INullFlavorR\r\n          }) || [],\r\n        id: undefined,\r\n        parent_guid: undefined,\r\n      } as IAddressR              \r\n    }    \r\n    setAddressDeath(certificate.deathAddr)\r\n  }\r\n  return (<>    \r\n    <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n      <div className=\"p-fluid p-formgrid p-grid\">\r\n        <div className=\"p-field p-d-flex p-jc-start\" style={{width: '98%'}}>          \r\n          <div className='paragraph p-mr-1'>8.</div>          \r\n          <div className='p-paragraph-field' style={{width: '98%'}}>\r\n            <NullFlavorWrapper paraNum                     \r\n              label={<label htmlFor=\"addr\">Место постоянного жительства(регистрации)</label>}\r\n              checked={identified && checkedLifeArea}  \r\n              setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (!patient.person) return\r\n                if (nullFlavors) patient.person.nullFlavors = nullFlavors\r\n                if (!e.checked) patient.person.address = undefined                \r\n              }}               \r\n              field={<InputAddress  submitted={submitted} \r\n                      id='person_addr'            \r\n                      value={addressLife || DEFAULT_ADDRESS} \r\n                      onClear={(value: IAddressR)=>{  \r\n                        if (!patient.person) return                                             \r\n                        patient.person.address = value\r\n                        setAddressLife(patient.person.address)\r\n                      }}\r\n                      onChange={()=>{\r\n                        if (!patient.person) return\r\n                        patient.person.address = addressStore.addressProps()                        \r\n                        setAddressLife(patient.person.address)\r\n                      }}  \r\n                    />}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={fromRelatives ? ASKU : UNK}\r\n              field_name=\"address\"\r\n              nullFlavors={patient.person?.nullFlavors}\r\n            />                  \r\n          </div>\r\n        </div>\r\n        <div className=\"p-d-flex p-jc-center\">          \r\n          <div className='paragraph p-mr-1'>9.</div>          \r\n          <div className='p-paragraph-field'>\r\n            <NullFlavorWrapper                     \r\n              label={<label htmlFor=\"urban\">Местность</label>}\r\n              checked={identified && !!certificate.lifeAreaType}  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                if (!e.checked) certificate.lifeAreaType = undefined                \r\n              }} \r\n              onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n              field={<AreaType value={certificate.lifeAreaType} onChange={(value: number | undefined)=>{\r\n                certificate.lifeAreaType = value                \r\n              }}/>}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={fromRelatives ? ASKU : UNK}\r\n              field_name=\"life_area_type\"\r\n              nullFlavors={certificate.nullFlavors}\r\n            />                  \r\n          </div>\r\n        </div>\r\n        <div className=\"p-field p-d-flex p-jc-start\" style={{width: '98%'}}>          \r\n          <div className='paragraph p-mr-1'>10.</div>          \r\n          <div className='p-paragraph-field' style={{width: '98%'}}>\r\n            <NullFlavorWrapper paraNum                     \r\n              label={<label htmlFor=\"death_addr\">Адрес места смерти</label>}\r\n              checked={checkedDeathArea}  \r\n              setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                if (!e.checked) certificate.deathAddr = undefined                \r\n              }}               \r\n              field={<InputAddress  submitted={submitted} \r\n                      id='death_addr'            \r\n                      value={addressDeath || DEFAULT_ADDRESS} \r\n                      onClear={(value: IAddressR)=>{                                               \r\n                        certificate.deathAddr = value \r\n                        setAddressDeath(certificate.deathAddr)                       \r\n                      }}\r\n                      onChange={()=>{\r\n                        certificate.deathAddr = addressStore.addressProps()  \r\n                        setAddressDeath(certificate.deathAddr)                      \r\n                      }}  \r\n                    />}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={fromRelatives ? ASKU : UNK}\r\n              field_name=\"death_addr\"\r\n              nullFlavors={certificate.nullFlavors}\r\n            />                  \r\n          </div>\r\n        </div>\r\n        <div className=\"p-d-flex p-jc-center\">          \r\n          <div className='paragraph p-mr-1'>11.</div>          \r\n          <div className='p-paragraph-field' key={`dArea_${certificate.deathAreaType}`}>\r\n            <NullFlavorWrapper                     \r\n              label={<label htmlFor=\"urban\">Местность</label>}\r\n              checked={!!certificate.deathAreaType && certificate.nullFlavors.findIndex(item=>item.parent_attr==='death_area_type' && !item._destroy\r\n              )===-1}  \r\n              setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                if (!e.checked) certificate.deathAreaType = undefined\r\n              }} \r\n              onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n              field={<AreaType value={certificate.deathAreaType} onChange={(value: number | undefined)=>{\r\n                certificate.deathAreaType = value\r\n              }}/>}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={fromRelatives ? ASKU : UNK}\r\n              field_name=\"death_area_type\"\r\n              nullFlavors={certificate.nullFlavors}\r\n            />                  \r\n          </div>\r\n        </div>        \r\n      </div>\r\n    </Card>\r\n    <AddressDialog /> \r\n  </>)\r\n}\r\n export default observer(Section3)  ","//Типы мест наступления смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.20 Версия: 3.1\r\nexport const DEAD_PLACE_TYPES = [\r\n  { code: 1, name: \"на месте происшествия\" },\r\n  { code: 2, name: \"в машине скорой помощи\" },\r\n  { code: 3, name: \"в стационаре\" },\r\n  { code: 4, name: \"дома\" },\r\n  { code: 5, name: \"в другом месте\" },\r\n  { code: 7, name: \"в образовательной организации\" },\r\n]\r\n","//\"Семейное положение\"\r\n//OID: 1.2.643.5.1.13.13.99.2.15  Версия: 3.1\r\nexport const MARITAL_STATUSES = [\r\n  { code: 4, name: \"состоял(а) в зарегистрированном браке\" },\r\n  { code: 5, name: \" не состоял(а) в зарегистрированном браке\" },\r\n  { code: 3, name: \" неизвестно\" },\r\n]\r\n","//\"Классификатор образования для медицинских свидетельств\"\r\n// OID: 1.2.643.5.1.13.13.99.2.16 Версия: 2.1\r\nexport const EDUCATION_LEVELS = [\r\n  { code: 1, name: \"профессиональное: высшее\" },\r\n  { code: 2, name: \"профессиональное: неполное высшее\" },\r\n  { code: 3, name: \"профессиональное: среднее профессиональное\" },\r\n  { code: 5, name: \"общее: среднее\" },\r\n  { code: 6, name: \"общее: основное\" },\r\n  { code: 7, name: \"общее: начальное\" },\r\n  { code: 10, name: \"общее: дошкольное\" },\r\n  { code: 11, name: \"не имеет начального образования\" },\r\n  { code: 9, name: \"неизвестно\" },\r\n]\r\n","//Социальные группы населения в учетной медицинской документации\r\n//OID: 1.2.643.5.1.13.13.11.1038 Версия: 5.1\r\nexport const SOCIAL_STATUSES = [\r\n  { code: 5, name: \"Работал(а)\" },\r\n  { code: 6, name: \"Проходил(а) военную службу или приравненную к ней службу\" },\r\n  { code: 4, name: \"Студент(ка)\" },\r\n  { code: 7, name: \"Пенсионер(ка)\" },\r\n  { code: 8, name: \"Не работал(а)\" },\r\n  { code: 10, name: \"Прочие\" },\r\n  { code: 22, name: \"неизвестно\" },\r\n]\r\n","// \"Доношенность новорожденного\"\r\n// OID: 1.2.643.5.1.13.13.99.2.18 Версия: 1.1\r\nexport const TERMS_PREGNANCY = [\r\n  { code: 1, name: \" доношенный (37-41 недели)\" },\r\n  { code: 2, name: \" недоношенный (менее 37 недель)\" },\r\n  { code: 3, name: \" переношенный (42 недели и более)\" },\r\n]\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IPersonName } from \"../IPersonName\"\r\nimport { IRelatedSubject } from \"../IRelatedSubject\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { IRelatedSubjectR } from \"../requests/IRelatedSubjectR\"\r\n\r\nconst MATHER = 1\r\n\r\nexport default class RelatedSubject implements ISerializable {\r\n  private _id?: number\r\n  private _guid: string\r\n  private _familyConnection: number\r\n  private _addr?: IAddressR | undefined\r\n  private _fio?: IPersonName | undefined\r\n  private _birthTime?: Date | undefined\r\n  private _nullFlavors: INullFlavorR[]\r\n\r\n  constructor(props: IRelatedSubject) {\r\n    this._guid = props.guid || uuidv4()\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    this._id = props.id\r\n    this._familyConnection = props.family_connection || MATHER\r\n    this._fio = props.person_name\r\n    if (props.birthTime) this._birthTime = new Date(props.birthTime)\r\n    this._addr = {\r\n      ...props.addr,\r\n      null_flavors_attributes:\r\n        props.addr?.null_flavors?.map((item) => {\r\n          return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n        }) || [],\r\n    } as IAddressR\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n\r\n  get addr(): IAddressR | undefined {\r\n    return this._addr\r\n  }\r\n  set addr(value: IAddressR | undefined) {\r\n    this._addr = value\r\n  }\r\n  get fio(): IPersonName | undefined {\r\n    return this._fio\r\n  }\r\n  set fio(value: IPersonName | undefined) {\r\n    this._fio = value\r\n  }\r\n\r\n  get birthTime(): Date | undefined {\r\n    return this._birthTime\r\n  }\r\n  set birthTime(value: Date | undefined) {\r\n    this._birthTime = value\r\n  }\r\n  get nullFlavors(): INullFlavorR[] {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(value: INullFlavorR[]) {\r\n    this._nullFlavors = value\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  getAttributes(): IRelatedSubjectR {\r\n    let _rs = { family_connection: this._familyConnection, guid: this._guid } as IRelatedSubjectR\r\n    if (this._nullFlavors.length > 0) _rs.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._addr) _rs.addr_attributes = { ...this._addr }\r\n    if (this._birthTime) _rs.birthTime = this._birthTime.toLocaleDateString()\r\n    if (this._fio) _rs.person_name_attributes = { ...this._fio }\r\n    if (this._id) _rs.id = this._id\r\n    return _rs\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IChildInfo } from \"../IChildInfo\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { IChildInfoR } from \"../requests/IChildInfoR\"\r\nimport RelatedSubject from \"./RelatedSubject\"\r\n\r\nexport class ChildInfo implements ISerializable {\r\n  private _id?: number\r\n  private _guid: string\r\n  private _termPregnancy?: number | undefined\r\n  private _weight?: number | undefined\r\n  private _whichAccount?: number | undefined\r\n  private _relatedSubject?: RelatedSubject | undefined\r\n  private _address?: IAddressR | undefined\r\n  private _nullFlavors: INullFlavorR[]\r\n\r\n  constructor(props: IChildInfo | undefined = undefined) {\r\n    if (props) {\r\n      this._id = props.id\r\n      this._guid = props.guid || uuidv4()\r\n      this._termPregnancy = props.term_pregnancy\r\n      this._weight = props.weight\r\n      this._whichAccount = props.which_account\r\n      this._address = {\r\n        ...props.address,\r\n        null_flavors_attributes:\r\n          props.address?.null_flavors?.map((item) => {\r\n            return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n          }) || [],\r\n      } as IAddressR\r\n      if (props.null_flavors && props.null_flavors.length > 0)\r\n        this._nullFlavors = props.null_flavors.map((item) => {\r\n          return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n        })\r\n      else this._nullFlavors = []\r\n      if (props.related_subject) this._relatedSubject = new RelatedSubject(props.related_subject)\r\n    } else {\r\n      this._nullFlavors = []\r\n      this._guid = uuidv4()\r\n    }\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n\r\n  get termPregnancy(): number | undefined {\r\n    return this._termPregnancy\r\n  }\r\n  set termPregnancy(value: number | undefined) {\r\n    this._termPregnancy = value\r\n  }\r\n  get weight(): number | undefined {\r\n    return this._weight\r\n  }\r\n  set weight(value: number | undefined) {\r\n    this._weight = value\r\n  }\r\n  get whichAccount(): number | undefined {\r\n    return this._whichAccount\r\n  }\r\n  set whichAccount(value: number | undefined) {\r\n    this._whichAccount = value\r\n  }\r\n  get relatedSubject(): RelatedSubject | undefined {\r\n    return this._relatedSubject\r\n  }\r\n  set relatedSubject(value: RelatedSubject | undefined) {\r\n    this._relatedSubject = value\r\n  }\r\n  get nullFlavors(): INullFlavorR[] {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(value: INullFlavorR[]) {\r\n    this._nullFlavors = value\r\n  }\r\n  get address(): IAddressR | undefined {\r\n    return this._address\r\n  }\r\n  set address(value: IAddressR | undefined) {\r\n    this._address = value\r\n  }\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  getAttributes(): IChildInfoR {\r\n    let _chInfo = { guid: this._guid } as IChildInfoR\r\n    if (this._nullFlavors.length > 0) _chInfo.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._relatedSubject) _chInfo.related_subject_attributes = this._relatedSubject.getAttributes()\r\n    if (this._termPregnancy) _chInfo.term_pregnancy = this._termPregnancy\r\n    if (this._weight) _chInfo.weight = this._weight\r\n    if (this._whichAccount) _chInfo.which_account = this._whichAccount\r\n    if (this._id) _chInfo.id = this._id\r\n    if (this._address && !!this._address.state && !!this._address.streetAddressLine)\r\n      _chInfo.address_attributes = { ...this._address }\r\n    return _chInfo\r\n  }\r\n}\r\n","import { useContext, useEffect, useState } from 'react'\r\nimport { InputNumber } from 'primereact/inputnumber'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport NullFlavorWrapper from './NullFlavorWrapper'\r\nimport { ChildInfo } from '../models/FormsData/ChildInfo'\r\nimport RelatedSubject from '../models/FormsData/RelatedSubject'\r\nimport { IChildInfo } from '../models/IChildInfo'\r\nimport {  checkFieldNullFlavor, INullFlavorR } from '../models/INullFlavor'\r\nimport { IPersonName } from '../models/IPersonName'\r\nimport { IReference } from '../models/IReference'\r\nimport { IRelatedSubject } from '../models/IRelatedSubject'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { Context } from '..'\r\nimport AddressFC2 from './inputs/InputAddress'\r\nimport { NA, NULL_FLAVORS, UNK } from '../utils/defaults'\r\nimport AddressDialog from './dialogs/AddressDialog'\r\nimport { DEFAULT_ADDRESS, IAddressR } from '../models/requests/IAddressR'\r\n\r\ntype MotherInfoProps = {\r\n  childInfo?: ChildInfo\r\n  onChange: ((childInfo: ChildInfo) => void)  \r\n}\r\n\r\nexport const MotherInfo = (props: MotherInfoProps) => {\r\n  const { addressStore, certificateStore} = useContext(Context)  \r\n  const [fio, setFio] = useState('')\r\n  const submitted = certificateStore.submitted\r\n  const [childInfo] = useState(props.childInfo || new ChildInfo({} as IChildInfo))\r\n  const [relatedSubject] = useState(childInfo.relatedSubject || new RelatedSubject({} as IRelatedSubject))\r\n  const [address, setAddress] = useState(relatedSubject.addr)\r\n  useEffect(()=>{    \r\n      setFio(relatedSubject.fio ? `${relatedSubject.fio.family} ${relatedSubject.fio.given_1} ${relatedSubject.fio?.given_2}` : '')         \r\n      if (childInfo.relatedSubject!==relatedSubject) childInfo.relatedSubject = relatedSubject         \r\n      if (!props.childInfo) props.onChange(childInfo)   \r\n    },[props, childInfo, relatedSubject])         \r\n    const options = NULL_FLAVORS.filter((item:IReference)=>\"UNK\".includes(item.code))       \r\n    const checked = relatedSubject.nullFlavors.findIndex((item)=>item.parent_attr==='addr')===-1\r\n        \r\n    \r\n    return ( <>\r\n      <div className=\"p-field p-grid\" style={{width:'90%'}}>\r\n        <label htmlFor=\"weight\" \r\n          className=\"p-col-fixed\" style={{width:'85%'}} >масса тела ребенка при рождении (грамм)</label>\r\n        <div className=\"p-col\">\r\n          <InputNumber  id=\"weight\" value={childInfo.weight} max={9999} min={10} \r\n            onChange={(e)=>{              \r\n             if (!!e.value) childInfo.weight=e.value \r\n             else childInfo.weight= undefined             \r\n            }}\r\n          type=\"text\"/>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-field p-grid\" style={{width:'90%'}}>\r\n        <label htmlFor=\"which_account\" className=\"p-col-fixed\" style={{width:'85%'}} >каким по счету был ребенок у матери (считая умерших и не считая мертворожденных)</label>\r\n        <div className=\"p-col\">\r\n          <InputNumber  id=\"which_account\" max={99} min={1}\r\n            onChange={(e)=>{\r\n             if (!!e.value) childInfo.whichAccount=e.value    \r\n             else  childInfo.whichAccount=undefined         \r\n            }} \r\n            value={childInfo.whichAccount} type=\"text\"/>\r\n        </div>\r\n      </div> \r\n      <div className='p-paragraph-field p-mr-2 p-mb-2'>\r\n        <NullFlavorWrapper                           \r\n          setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>\r\n            { if (e.checked)  { \r\n              } else { \r\n                relatedSubject.fio = undefined                \r\n                props.onChange(childInfo) \r\n              }\r\n              if (nullFlavors) relatedSubject.nullFlavors = nullFlavors              \r\n            }}                 \r\n          label={<label htmlFor=\"fio\">Фамилия матери, имя, отчество(при наличии)</label>}\r\n          field={<InputText  id=\"fio\" type=\"text\" \r\n                  value={fio}                    \r\n                  onChange={(e)=>{     \r\n                    setFio(e.target.value)               \r\n                    const values = e.target.value.trim().split(\" \")\r\n                    if (values && values.length > 1) {\r\n                      const temp = {family: values[0], given_1: values[1]} as IPersonName\r\n                      if (values[2]) temp.given_2 = values[2]\r\n                      else checkFieldNullFlavor('given_2',temp.given_2,relatedSubject.nullFlavors, NA)\r\n                      relatedSubject.fio = temp\r\n                      props.onChange(childInfo)                     \r\n                    }                                        \r\n                  }}/>}                  \r\n          options={options} \r\n          value={UNK} \r\n          nullFlavors={relatedSubject.nullFlavors}  \r\n          field_name=\"person_name\"                                 \r\n        />             \r\n      </div>\r\n      <div className='p-paragraph-field p-mr-2 p-mb-2'>                     \r\n        <NullFlavorWrapper                                       \r\n          label={<label htmlFor=\"dateBirth\">Дата рождения матери</label>}\r\n          setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) {                        \r\n                        relatedSubject.birthTime = undefined                        \r\n                      } \r\n                      if (nullFlavors) relatedSubject.nullFlavors = nullFlavors\r\n                    }} \r\n          onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{\r\n            if (nullFlavors) relatedSubject.nullFlavors = nullFlavors}}\r\n          field={<Calendar id=\"dateBirth\" showIcon dateFormat='dd.mm.yy'\r\n                  locale='ru' mask='99.99.9999'                                          \r\n                  value={relatedSubject.birthTime} \r\n                  onChange={(e)=>{\r\n                    relatedSubject.birthTime = e.target.value as Date | undefined\r\n                  }}                         \r\n                />}\r\n          options={options} \r\n          value={UNK} \r\n          nullFlavors={relatedSubject.nullFlavors}  \r\n          field_name=\"birthTime\"\r\n        />                               \r\n      </div> \r\n      <div className=\"p-field\" style={{width: '98%'}}>\r\n        <NullFlavorWrapper                      \r\n              label={<label htmlFor=\"mother_addr\">Место жительства матери</label>}\r\n              checked={checked}  \r\n              setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (nullFlavors) relatedSubject.nullFlavors = nullFlavors\r\n                if (!e.checked) relatedSubject.addr = undefined                \r\n              }}               \r\n              field={<AddressFC2  submitted={submitted} \r\n                      id='mother_addr'            \r\n                      value={address || DEFAULT_ADDRESS} \r\n                      onClear={(value: IAddressR)=>{                                               \r\n                        relatedSubject.addr = value\r\n                        setAddress(relatedSubject.addr)\r\n                      }}\r\n                      onChange={()=>{\r\n                        relatedSubject.addr = addressStore.addressProps()\r\n                        setAddress(relatedSubject.addr)\r\n                      }}  \r\n                    />}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={UNK}\r\n              field_name=\"addr\"\r\n              nullFlavors={relatedSubject.nullFlavors}\r\n            />\r\n      </div>  \r\n      <AddressDialog />        \r\n    </>)\r\n}","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useEffect, useState} from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport '../../styles/components/RadioButton.css'\r\nimport '../../styles/components/Calendar.css'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { NA, NULL_FLAVORS } from '../../utils/defaults'\r\nimport { IReference } from '../../models/IReference'\r\n\r\nimport { Dropdown } from 'primereact/dropdown'\r\n\r\nimport { DEAD_PLACE_TYPES } from '../../NSI/1.2.643.5.1.13.13.99.2.20'\r\nimport { MARITAL_STATUSES } from '../../NSI/1.2.643.5.1.13.13.99.2.15'\r\nimport { EDUCATION_LEVELS } from '../../NSI/1.2.643.5.1.13.13.99.2.16'\r\nimport { SOCIAL_STATUSES } from '../../NSI/1.2.643.5.1.13.13.11.1038'\r\nimport { checkFieldNullFlavor, INullFlavorR } from '../../models/INullFlavor'\r\nimport { TERMS_PREGNANCY } from '../../NSI/1.2.643.5.1.13.13.99.2.18'\r\nimport { ChildInfo } from '../../models/FormsData/ChildInfo'\r\nimport { MotherInfo } from '../MotherInfo'\r\nimport InputAddress from '../inputs/InputAddress'\r\nimport { DEFAULT_ADDRESS, IAddressR } from '../../models/requests/IAddressR'\r\n\r\n const Section5: FC = () => {\r\n  const { certificateStore, addressStore } = useContext(Context)\r\n   \r\n  const optionCode = 'NA'\r\n  const options = NULL_FLAVORS.filter((item:IReference)=>optionCode.includes(item.code))  \r\n  const defaultCode = NA \r\n  const header = () => {\r\n      return <span>Прочие данные умершего</span>\r\n    }\r\n  const certificate = certificateStore.cert\r\n  const age = certificate.hoursAge()  \r\n  const isChildInfo = !!age && (age > 168) && certificate.yearsAge() < 1      \r\n  const isMonthChild = isChildInfo && certificate.daysAge() < 30 \r\n  const [address, setAddress] = useState(certificate.childInfo?.address)\r\n  \r\n  useEffect(()=>{\r\n    if (isChildInfo && certificate.childInfo===undefined) \r\n     certificate.childInfo = new ChildInfo()\r\n    else if (!isChildInfo && certificate.childInfo!==undefined) certificate.childInfo = undefined\r\n  },[isChildInfo, certificate]) \r\n  \r\n  const childInfo = certificate.childInfo \r\n  useEffect(()=>{    \r\n    if (!isMonthChild && childInfo) {\r\n        childInfo.termPregnancy = undefined\r\n        checkFieldNullFlavor('term_pregnancy',childInfo.termPregnancy, childInfo.nullFlavors, NA)\r\n    }    \r\n  },[isMonthChild, childInfo]) \r\n  useEffect(()=>{       \r\n    if (!isChildInfo && !!certificate.childInfo) {\r\n      certificate.childInfo = undefined\r\n      checkFieldNullFlavor('related_subject', certificate.childInfo, certificate.nullFlavors, NA)\r\n    }    \r\n  }, [ isChildInfo, certificate ])\r\n  const ddStyle = {minWidth:'210px', maxWidth:'500px', marginTop: '0.5rem', marginLeft: '-0.75rem'}\r\n  const dDivStyle = {paddingTop: '0.1rem'}\r\n      \r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">            \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>12. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"deathPlaceType\">Смерть наступила</label>\r\n                <Dropdown inputId=\"deathPlaceType\" style={ddStyle} placeholder=\"Выбрать\"  \r\n                  options={DEAD_PLACE_TYPES} optionLabel=\"name\" autoFocus\r\n                  value={DEAD_PLACE_TYPES.find((item)=>item.code === certificate.deathPlace)} \r\n                  onChange={(e) =>{\r\n                    certificate.deathPlace = e.value.code                    \r\n                  }} />\r\n              </div>  \r\n            </div> \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}}>\r\n              <div className='paragraph p-mr-1'>13.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{width: '90%'}}>\r\n                <NullFlavorWrapper  checked={isMonthChild}  key={`MonthChild_${isMonthChild}`} \r\n                  disabled\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                            if (nullFlavors && certificate.childInfo) certificate.childInfo.nullFlavors = nullFlavors                  \r\n                            if (!e.checked)  certificate.childInfo = undefined                              \r\n                            }}            \r\n                  label={<label htmlFor=\"MonthChild\">Для детей, умерших в возрасте от 168 час. до 1 месяца</label>}\r\n                  field={<Dropdown inputId=\"MonthChild\"  placeholder=\"Выбрать\" autoFocus \r\n                    style={{minWidth:'210px', maxWidth:'300px'}}        \r\n                    options={TERMS_PREGNANCY} optionLabel=\"name\"\r\n                    value={TERMS_PREGNANCY.find((item)=>item.code === certificate.childInfo?.termPregnancy)} \r\n                    onChange={(e) =>{                      \r\n                      if (certificate.childInfo) certificate.childInfo.termPregnancy = e.value.code                                          \r\n                    }} />}\r\n                  options={options} \r\n                  value={defaultCode} \r\n                  nullFlavors={certificate.childInfo?.nullFlavors}  \r\n                  field_name=\"term_pregnancy\" paraNum \r\n                />    \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>14.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{width: '90%'}}>\r\n                <NullFlavorWrapper  checked={isChildInfo}  key={`YearChild_${isChildInfo}`} \r\n                  disabled\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                            if (nullFlavors) certificate.nullFlavors = nullFlavors                  \r\n                              certificate.childInfo = undefined\r\n                            }}            \r\n                  label={<label htmlFor=\"YearChild\">Для детей, умерших в возрасте от 168 час. до 1 года</label>}\r\n                  field={<MotherInfo childInfo={childInfo} onChange={(chInf: ChildInfo)=>{\r\n                    if (certificate.childInfo !== chInf) certificate.childInfo = chInf  \r\n                  }} />}\r\n                  options={options} \r\n                  value={defaultCode} \r\n                  nullFlavors={certificate.nullFlavors}  \r\n                  field_name=\"related_subject\" paraNum \r\n                />    \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>8K.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{width: '90%'}}>\r\n                <NullFlavorWrapper  checked={isChildInfo}  key={`YearChild_BP_${isChildInfo}`} \r\n                  disabled\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                              if (!certificate.childInfo) return\r\n                              if (nullFlavors) certificate.childInfo.nullFlavors = nullFlavors\r\n                              if (!e.checked) certificate.childInfo.address = undefined  \r\n                            }}            \r\n                  label={<label htmlFor=\"child_birth_addr\">Место рождения ребенка</label>}\r\n                  field={<InputAddress submitted={false} \r\n                      id='child_birth_addr'            \r\n                      value={address || DEFAULT_ADDRESS} \r\n                      onClear={(value: IAddressR)=>{ \r\n                        if (!certificate.childInfo) return                                             \r\n                        certificate.childInfo.address = value\r\n                        setAddress(certificate.childInfo.address)\r\n                      }}\r\n                      onChange={()=>{\r\n                        if (!certificate.childInfo) return\r\n                        certificate.childInfo.address = addressStore.addressProps()\r\n                        setAddress(certificate.childInfo.address)\r\n                      }}  \r\n                    />}\r\n                  options={options} \r\n                  value={defaultCode} \r\n                  nullFlavors={certificate.childInfo?.nullFlavors}  \r\n                  field_name=\"address\" paraNum \r\n                />    \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>15.*</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"marital_status\">Семейное положение</label>\r\n                <Dropdown inputId=\"marital_status\" style={ddStyle}\r\n                  placeholder=\"Выбрать\" autoFocus \r\n                  options={MARITAL_STATUSES} optionLabel=\"name\"\r\n                  value={MARITAL_STATUSES.find((item)=>item.code === certificate.maritalStatus)} \r\n                  onChange={(e) =>{certificate.maritalStatus= e.value.code}} \r\n                />                    \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>16.* </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"education_level\">Образование</label>\r\n                <Dropdown inputId=\"education_level\" style={ddStyle}\r\n                  placeholder=\"Выбрать\" autoFocus \r\n                  options={EDUCATION_LEVELS} optionLabel=\"name\"\r\n                  value={EDUCATION_LEVELS.find((item)=>item.code === certificate.educationLevel)} \r\n                  onChange={(e) =>{certificate.educationLevel = e.value.code}} \r\n                />   \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>17.*</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"social_status\">Занятость</label>\r\n                <Dropdown inputId=\"social_status\" style={ddStyle}\r\n                  placeholder=\"Выбрать\" autoFocus \r\n                  options={SOCIAL_STATUSES} optionLabel=\"name\"\r\n                  value={SOCIAL_STATUSES.find((item)=>item.code === certificate.socialStatus)} \r\n                  onChange={(e) => {certificate.socialStatus = e.value.code}} \r\n                />    \r\n              </div>  \r\n            </div> \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%', paddingLeft:'0.5rem'}} >\r\n              <em>* В случае смерти ребенка до года заполняется в отношении матери</em>\r\n            </div>            \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section5) ","//Род причины смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.21 Версия: 2.1\r\nexport const DISEASE_DEADTH_KIND = 1\r\nexport const DEATH_KINDS = [\r\n  { code: 1, name: \"от заболевания\" },\r\n  { code: 2, name: \"от несчастного случая, не связанного с производством\" },\r\n  { code: 3, name: \"от несчастного случая, связанного с производством\" },\r\n  { code: 4, name: \"убийства\" },\r\n  { code: 5, name: \"самоубийства\" },\r\n  { code: 6, name: \"в ходе военных действий\" },\r\n  { code: 7, name: \"в ходе террористических действий\" },\r\n  { code: 8, name: \"род смерти не установлен\" },\r\n]\r\n","//Тип медицинского работника, установившего причины смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.22 Версия: 3.1\r\nexport const MEDICS = [\r\n  { code: 1, name: \"врач, только установивший смерть\" },\r\n  { code: 2, name: \"лечащий врач\" },\r\n  { code: 3, name: \"фельдшер, акушерка\" },\r\n  { code: 4, name: \"врач-патологоанатом\" },\r\n  { code: 5, name: \"врач-судебно-медицинский эксперт\" },\r\n]\r\n","//Основания для установления причины смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.23  Версия: 2.1\r\nexport const BASIS_DERMINING = [\r\n  { code: 1, name: \"осмотр трупа\" },\r\n  { code: 2, name: \"записи в медицинской документации\" },\r\n  { code: 3, name: \"предшествующее наблюдение за пациентом\" },\r\n  { code: 4, name: \"вскрытие\" },\r\n]\r\n","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext} from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport '../../styles/components/RadioButton.css'\r\nimport '../../styles/components/Calendar.css'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { NA, NULL_FLAVORS } from '../../utils/defaults'\r\nimport { IReference } from '../../models/IReference'\r\nimport { Dropdown } from 'primereact/dropdown'\r\n\r\nimport { INullFlavorR } from '../../models/INullFlavor'\r\nimport { DEATH_KINDS, DISEASE_DEADTH_KIND } from '../../NSI/1.2.643.5.1.13.13.99.2.21'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { InputTextarea } from 'primereact/inputtextarea'\r\nimport { MEDICS } from '../../NSI/1.2.643.5.1.13.13.99.2.22'\r\nimport { BASIS_DERMINING } from '../../NSI/1.2.643.5.1.13.13.99.2.23'\r\n\r\n const Section6: FC = () => {\r\n  const { certificateStore } = useContext(Context)\r\n   \r\n  const optionCode = 'NA'\r\n  const options = NULL_FLAVORS.filter((item:IReference)=>optionCode.includes(item.code))  \r\n  \r\n  const header = () => {\r\n      return <span>Характеристика причины смерти</span>\r\n    }\r\n  const certificate = certificateStore.cert  \r\n  const isExtReason = certificate.deathKind !== undefined && certificate.deathKind !== DISEASE_DEADTH_KIND \r\n  \r\n  \r\n  \r\n  const ddStyle = {minWidth:'210px', maxWidth:'500px', marginTop: '0.5rem', marginLeft: '-0.75rem'}\r\n  const dDivStyle = {paddingTop: '0.1rem'}\r\n      \r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">            \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>18. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"deathPlaceType\">Смерть произошла</label>\r\n                <Dropdown inputId=\"deathPlaceType\" style={ddStyle} placeholder=\"Выбрать\"  \r\n                  options={DEATH_KINDS} optionLabel=\"name\" autoFocus\r\n                  value={DEATH_KINDS.find((item)=>item.code === certificate.deathKind)} \r\n                  onChange={(e) =>{\r\n                    certificate.deathKind = e.value.code                    \r\n                  }} />\r\n              </div>  \r\n            </div>            \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>19.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`pdivdt_${isExtReason}`} style={{width: '90%'}}>                                  \r\n                <NullFlavorWrapper paraNum disabled checked={isExtReason}                                      \r\n                  label={<label htmlFor=\"extReasonTime\"> В случае смерти от несчастного случая, убийства, самоубийства, от военных и террористических действий, при неустановленном роде смерти - указать дату, время и обстоятельства травмы (отравления)</label>}\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) {                        \r\n                        certificate.extReasonTime = undefined                        \r\n                      } \r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                    }} \r\n                  onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{\r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n                  field={<div className=\"p-d-flex p-flex-wrap p-jc-start\">\r\n                          <Calendar id=\"extReasonTime\" showIcon className=\"p-mr-3 p-mb-2\"\r\n                            placeholder='дата' dateFormat={\"dd.mm.yy\"} \r\n                            locale=\"ru\" mask=\"99.99.9999\" panelStyle={{marginLeft:'12rem'}}                                         \r\n                            value={certificate.extReasonTime} \r\n                            onChange={(e)=>{\r\n                              certificate.extReasonTime = e.target.value as Date | undefined\r\n                            }}                         \r\n                          />\r\n                         <Calendar id=\"timereason\" className=\"p-mr-3 p-mb-2\" timeOnly \r\n                         hourFormat=\"24\" placeholder='время' locale=\"ru\"           \r\n                         value={certificate.extReasonTime}                            \r\n                            onChange={(e)=>{\r\n                              certificate.extReasonTime = e.target.value as Date | undefined\r\n                            }}\r\n                          showIcon /> \r\n                         <InputTextarea id=\"extReasonDescription\" value={certificate.extReasonDescription} \r\n                            cols={65} rows={2} placeholder='обстоятельства'  \r\n                            onChange={(e)=>{certificate.extReasonDescription = e.target.value }}\r\n                          /> \r\n                        </div> \r\n                  }\r\n                  options={options} \r\n                  value={NA} \r\n                  nullFlavors={certificate.nullFlavors}  \r\n                  field_name=\"ext_reason_time\"\r\n                />                               \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>20. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"establishedMedic\">Причины смерти установлены:</label>\r\n                <Dropdown inputId=\"establishedMedic\" style={ddStyle} placeholder=\"Выбрать\"  \r\n                  options={MEDICS} optionLabel=\"name\" autoFocus\r\n                  value={MEDICS.find((item)=>item.code === certificate.establishedMedic)} \r\n                  onChange={(e) =>{\r\n                    certificate.establishedMedic = e.value.code                    \r\n                  }} />\r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>21. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"basisDetermining\">На основании:</label>\r\n                <Dropdown inputId=\"basisDetermining\" style={ddStyle} placeholder=\"Выбрать\"  \r\n                  options={BASIS_DERMINING} optionLabel=\"name\" autoFocus\r\n                  value={BASIS_DERMINING.find((item)=>item.code === certificate.basisDetermining)} \r\n                  onChange={(e) =>{\r\n                    certificate.basisDetermining = e.value.code                    \r\n                  }} />\r\n              </div>  \r\n            </div>     \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section6) ","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { DATE_FORMAT, TIME_FORMAT } from \"../../utils/consts\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IProcedureR } from \"../requests/IProcedureR\"\r\nimport { IMedicalServs } from \"../responses/IMedservs\"\r\nimport { IProcedure } from \"../responses/IProcedure\"\r\n\r\nexport class Procedure implements ISerializable {\r\n  private _id?: number\r\n  private _medicalServ: IMedicalServs\r\n  private _guid: string\r\n  private _textValue?: string | undefined\r\n  private _effectiveTime?: Date\r\n  private _nullFlavors: INullFlavorR[]\r\n  constructor(props: IProcedure) {\r\n    this._id = props.id\r\n    this._guid = props.guid || uuidv4()\r\n    this._medicalServ = props.medical_serv\r\n    this._textValue = props.text_value\r\n    if (props.effective_time) this._effectiveTime = new Date(props.effective_time)\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes(): IProcedureR {\r\n    let _pr = { guid: this._guid } as IProcedureR\r\n    if (this._id && this._id > -1) _pr.id = this._id\r\n    if (this._effectiveTime) _pr.effective_time = this._effectiveTime.toLocaleString()\r\n    if (this._medicalServ) _pr.medical_serv_id = this._medicalServ.id\r\n    if (this._textValue) _pr.text_value = this._textValue\r\n    if (this._nullFlavors.length > 0) _pr.null_flavors_attributes = this.null_flavors_attributes()\r\n    return _pr\r\n  }\r\n  get id(): number | undefined {\r\n    return this._id\r\n  }\r\n  set id(value: number | undefined) {\r\n    this._id = value\r\n  }\r\n  get effectiveTime(): Date | undefined {\r\n    return this._effectiveTime\r\n  }\r\n  set effectiveTime(value: Date | undefined) {\r\n    this._effectiveTime = value\r\n  }\r\n  get textValue(): string | undefined {\r\n    return this._textValue\r\n  }\r\n  set textValue(value: string | undefined) {\r\n    this._textValue = value\r\n  }\r\n  get medicalServ(): IMedicalServs {\r\n    return this._medicalServ\r\n  }\r\n  set medicalServ(value: IMedicalServs) {\r\n    this._medicalServ = value\r\n  }\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  get guid(): string {\r\n    return this._guid\r\n  }\r\n\r\n  timeStr(): string {\r\n    if (this._effectiveTime === undefined) return \"\"\r\n    return this._effectiveTime?.toLocaleString(\r\n      \"ru\",\r\n      this._effectiveTime.getHours() === 0 && this._effectiveTime.getMinutes() === 0 ? DATE_FORMAT : TIME_FORMAT\r\n    )\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IDeathReason } from \"../responses/IDeathReason\"\r\nimport { IDiagnosis } from \"../responses/IDiagnosis\"\r\nimport { Procedure } from \"./Procedure\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { IDeathReasonR } from \"../requests/IDeathReasonR\"\r\nimport { IProcedureR } from \"../requests/IProcedureR\"\r\nexport class DeathReason implements ISerializable {\r\n  private _oldOne: IDeathReason\r\n  private _id?: number\r\n  private _diagnosis?: IDiagnosis | undefined\r\n  private _effectiveTime?: Date | null\r\n  private _years?: number | null\r\n  private _months?: number | null\r\n  private _weeks?: number | null\r\n  private _days?: number | null\r\n  private _hours?: number | null\r\n  private _minutes?: number | null\r\n  private _guid: string\r\n  private _procedures: Procedure[]\r\n  private _nullFlavors: INullFlavorR[]\r\n\r\n  constructor(props = {} as IDeathReason) {\r\n    this._oldOne = { ...props }\r\n    this._id = props.id\r\n    this._guid = props.guid || uuidv4()\r\n    this._diagnosis = props.diagnosis || props.ext_diagnosis\r\n    if (props.effective_time) this._effectiveTime = new Date(props.effective_time)\r\n    this._days = props.days\r\n    this._hours = props.hours\r\n    this._minutes = props.minutes\r\n    this._months = props.months\r\n    this._weeks = props.weeks\r\n    this._years = props.years\r\n    this._procedures = props.procedures?.map((proc) => new Procedure(proc)) || []\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  get id(): number | undefined {\r\n    return this._id\r\n  }\r\n\r\n  set id(id: number | undefined) {\r\n    this._id = id\r\n  }\r\n\r\n  get diagnosis(): IDiagnosis | undefined {\r\n    return this._diagnosis\r\n  }\r\n  set diagnosis(value: IDiagnosis | undefined) {\r\n    this._diagnosis = value\r\n  }\r\n  get effectiveTime(): Date | null | undefined {\r\n    return this._effectiveTime\r\n  }\r\n  set effectiveTime(value: Date | undefined | null) {\r\n    this._effectiveTime = value\r\n  }\r\n  get years(): number | undefined | null {\r\n    return this._years\r\n  }\r\n  set years(value: number | undefined | null) {\r\n    this._years = value\r\n  }\r\n  get months(): number | undefined | null {\r\n    return this._months\r\n  }\r\n  set months(value: number | undefined | null) {\r\n    this._months = value\r\n  }\r\n  get weeks(): number | undefined | null {\r\n    return this._weeks\r\n  }\r\n  set weeks(value: number | undefined | null) {\r\n    this._weeks = value\r\n  }\r\n  get days(): number | undefined | null {\r\n    return this._days\r\n  }\r\n  set days(value: number | undefined | null) {\r\n    this._days = value\r\n  }\r\n  get hours(): number | undefined | null {\r\n    return this._hours\r\n  }\r\n  set hours(value: number | undefined | null) {\r\n    this._hours = value\r\n  }\r\n  get minutes(): number | undefined | null {\r\n    return this._minutes\r\n  }\r\n  set minutes(value: number | undefined | null) {\r\n    this._minutes = value\r\n  }\r\n  get procedures(): Procedure[] {\r\n    return this._procedures\r\n  }\r\n  set procedures(value: Procedure[]) {\r\n    this._procedures = value\r\n  }\r\n  get nullFlavors(): INullFlavorR[] {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(value: INullFlavorR[]) {\r\n    this._nullFlavors = value\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    let _result = this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n    this._oldOne.null_flavors?.forEach((el) => {\r\n      if (_result.findIndex((nf) => nf.id === el.id) === -1)\r\n        _result.push({ id: el.id, parent_guid: el.parent_guid, _destroy: \"1\" } as INullFlavorR)\r\n    })\r\n    return _result\r\n  }\r\n  procNames(): string {\r\n    let _result = \"\"\r\n    this._procedures.forEach((proc) => {\r\n      _result += proc.textValue || proc.medicalServ.name\r\n      if (proc.effectiveTime) _result += \" от \" + proc.timeStr()\r\n      _result += \"; \"\r\n    })\r\n    return _result\r\n  }\r\n  getAttributes(isExt = false): IDeathReasonR {\r\n    let _dr = { guid: this._guid } as IDeathReasonR\r\n    if (this._id && this._id > -1) _dr.id = this._id\r\n    if (this._days || this._oldOne.days) _dr.days = this._days\r\n    if (this._hours || this._oldOne.hours) _dr.hours = this._hours\r\n    if (this._minutes || this._oldOne.minutes) _dr.minutes = this._minutes\r\n    if (this._months || this._oldOne.months) _dr.months = this._months\r\n    if (this._weeks || this._oldOne.weeks) _dr.weeks = this._weeks\r\n    if (this._years || this._oldOne.years) _dr.years = this._years\r\n    if (this._effectiveTime || this._oldOne.effective_time) _dr.effective_time = this._effectiveTime\r\n    if (this._diagnosis && !isExt) _dr.diagnosis_id = Number.parseInt(this._diagnosis.id)\r\n    else if (this._oldOne.diagnosis) _dr.diagnosis_id = null\r\n    if (this._diagnosis && isExt) _dr.ext_diagnosis_id = Number.parseInt(this._diagnosis.id)\r\n    else if (this._oldOne.diagnosis) _dr.ext_diagnosis_id = null\r\n    if (this._nullFlavors.length > 0) _dr.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._procedures.length > 0) _dr.procedures_attributes = this._procedures.map((item) => item.getAttributes())\r\n    if (this._oldOne.procedures && this._oldOne.procedures.length > 0) {\r\n      let _temp = [] as IProcedureR[]\r\n      this._oldOne.procedures.forEach((item) => {\r\n        if (!_dr.procedures_attributes || _dr.procedures_attributes.findIndex((pr) => pr.id === item.id) === -1)\r\n          _temp.push({ id: item.id, _destroy: \"1\" } as IProcedureR)\r\n      })\r\n      if (_dr.procedures_attributes && _temp.length > 0)\r\n        _dr.procedures_attributes = _dr.procedures_attributes.concat(_temp)\r\n      else if (_temp.length > 0) _dr.procedures_attributes = _temp\r\n    }\r\n    return _dr\r\n  }\r\n}\r\n","import { AxiosResponse } from \"axios\"\r\nimport $api, { API_URL } from \"../http\"\r\nimport { IDiagnosis } from \"../models/responses/IDiagnosis\"\r\nimport { IMedicalServs } from \"../models/responses/IMedservs\"\r\n\r\nexport default class DiagnosisService {\r\n  static async fetchDiagnoses(query: any): Promise<AxiosResponse<IDiagnosis[]>> {\r\n    return $api.post(`${API_URL}model/Diagnosis/`, { q: query, offset: 0, limit: 200 })\r\n  }\r\n  static async fetchExtDiagnoses(query: any): Promise<AxiosResponse<IDiagnosis[]>> {\r\n    return $api.post(`${API_URL}model/ExtDiagnosis/`, { q: query, offset: 0, limit: 200 })\r\n  }\r\n  static async fetchMedicalServs(query: any): Promise<AxiosResponse<IMedicalServs[]>> {\r\n    return $api.post(`${API_URL}model/MedicalServ/`, { q: query, offset: 0, limit: 200 })\r\n  }\r\n}\r\n","\r\n\r\nimport { observer } from 'mobx-react-lite'\r\nimport { AutoComplete } from 'primereact/autocomplete'\r\nimport { Button } from 'primereact/button'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { FC, useState } from 'react'\r\nimport Certificate from '../../models/FormsData/Certificate'\r\nimport { DeathReason } from '../../models/FormsData/DeathReason'\r\nimport { INullFlavorR } from '../../models/INullFlavor'\r\nimport { IReference } from '../../models/IReference'\r\nimport { IDiagnosis } from '../../models/responses/IDiagnosis'\r\nimport DiagnosisService from '../../services/DiagnosisService'\r\nimport { NA, NULL_FLAVORS, UNK } from '../../utils/defaults'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\n\r\ntype ReasonProps = {\r\n  disabled?:boolean\r\n  checked?:boolean\r\n  isExt?:boolean\r\n  deathReason?: DeathReason\r\n  label: string \r\n  certificate: Certificate\r\n  fieldName?: string\r\n  onChange: (reason: DeathReason | undefined)=>void\r\n  onUp?: ()=>void\r\n  onDown?: ()=>void\r\n  onTimeChecked?: (checked: boolean)=>void \r\n  onDiagnosisChecked?: (checked: boolean, nullFlavors: INullFlavorR[] | undefined)=>void\r\n}\r\n\r\nconst Reason: FC<ReasonProps> = (props: ReasonProps) => { \r\n  const options = NULL_FLAVORS.filter((item:IReference)=>\"ASKU NA UNK\".includes(item.code))\r\n  const style = {width:'86px'}\r\n  const CSS_classes = \"p-field p-inputgroup p-mr-1\"\r\n  const [checked, setChecked] = useState(props.checked || false)   \r\n  const [diagnoses, setDiagnoses] = useState<IDiagnosis[]>([]) \r\n  const [diagnosisText, setDiagnosisText] = useState('')\r\n  const [diagnosisCode, setDiagnosisCode] = useState('')\r\n  const cleanEffectiveTime = () => {\r\n    if (!deathReason) return\r\n    if (deathReason.days) deathReason.days =null \r\n    if (deathReason.effectiveTime) deathReason.effectiveTime = null\r\n    if (deathReason.hours) deathReason.hours =null \r\n    if (deathReason.minutes) deathReason.minutes = null\r\n    if (deathReason.months) deathReason.months = null\r\n    if (deathReason.weeks) deathReason.weeks = null\r\n    if (deathReason.years) deathReason.years = null\r\n  }\r\n  const  getDiagnoses = (event: { query: string })=>{\r\n  const option = {} as any\r\n  if (event.query.trim().length>0) option.s_name_cont = event.query.trim()\r\n  if (!!diagnosisCode && diagnosisCode.trim().length>0) option.ICD10_start =  diagnosisCode    \r\n  if (props.isExt) DiagnosisService.fetchExtDiagnoses(option).then(response=>{\r\n        if (response.data.length>0) setDiagnoses(response.data)\r\n        else setDiagnoses([])        \r\n      }).catch((reason)=>console.log(reason)) \r\n  else DiagnosisService.fetchDiagnoses(option).then(response=>{\r\n        if (response.data.length>0) setDiagnoses(response.data)\r\n        else setDiagnoses([])        \r\n      }).catch((reason)=>console.log(reason))    \r\n  }\r\n  const  getCodes = (event: { query: string })=>{    \r\n    if (event.query.trim().length>0) {\r\n      if (props.isExt) DiagnosisService.fetchExtDiagnoses({'ICD10_start': event.query.trim()}).then(response=>{        \r\n        if (response.data.length>0) setDiagnoses(response.data)\r\n        else setDiagnoses([])        \r\n      }).catch((reason)=>console.log(reason))\r\n      else DiagnosisService.fetchDiagnoses({'ICD10_start': event.query.trim()}).then(response=>{                \r\n        if (response.data.length>0) setDiagnoses(response.data)\r\n        else setDiagnoses([])        \r\n      }).catch((reason)=>console.log(reason)) \r\n    } \r\n  }\r\n  const deathTime = props.certificate.deathDatetime  \r\n  const [deathReason, setDeathReason] = useState<DeathReason | null | undefined>(props.deathReason)  \r\n  const upButton = props.onUp === undefined ? <></> : <Button icon=\"pi pi-angle-up\" onClick={props.onUp} className=\"p-button-rounded p-button-secondary p-mr-1\" />\r\n  const downButton = props.onDown === undefined ? <></> : <Button icon=\"pi pi-angle-down\" onClick={props.onDown} className=\"p-button-rounded p-button-secondary\" />\r\n  const diagnosisOptionTemplate = (option: IDiagnosis) => {\r\n        return (\r\n          <span>\r\n            <span style={{marginRight:'4px'}}>{option.ICD10}</span>\r\n            <span>{option.s_name}</span>\r\n          </span>\r\n        )\r\n    }\r\n  const effTime = checked && !!deathReason && !!deathTime ? (<NullFlavorWrapper  \r\n      checked={checked && (!!deathReason.effectiveTime || deathReason.nullFlavors.findIndex(el=>el.parent_attr==='effective_time')===-1)} \r\n      key={`et_${deathReason.effectiveTime}`} \r\n      label={<label>Период времени между началом патол. состояния и смертью</label>} \r\n      options={options}  paraNum value={UNK}\r\n      nullFlavors={deathReason.nullFlavors}\r\n      setCheck={(e: CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n        if (!e.checked) cleanEffectiveTime() \r\n        //console.log('deathReason.nullFlavors',deathReason.nullFlavors)\r\n        if (nullFlavors) deathReason.nullFlavors = nullFlavors\r\n        //console.log('nullFlavors', nullFlavors)\r\n        props.onChange(deathReason)\r\n        if (props.onTimeChecked) props.onTimeChecked(e.checked)\r\n      }}\r\n      onChange={(e: IReference, nullFlavors: INullFlavorR[] | undefined)=>{        \r\n        if (nullFlavors) deathReason.nullFlavors = nullFlavors}}\r\n      field_name=\"effective_time\"\r\n      field={\r\n        <div className=\"p-fluid p-formgrid p-grid\" style={{marginLeft:'0'}}>           \r\n          <div className={CSS_classes} style={style} key={`rt_${deathTime}`}>  \r\n            <span className=\"p-inputgroup-addon\">лет</span>          \r\n            <InputText id=\"year\" type=\"number\" min={0} max={99}\r\n                onChange={(e)=>{  \r\n                const value = Number.parseInt(e.target.value)                             \r\n                deathReason.years = value === 0 ? undefined : value\r\n                props.certificate.saveReasonEffTime(deathReason)\r\n                props.onChange(deathReason)              \r\n              }}\r\n             value={deathReason.years || ''} />         \r\n          </div>\r\n          <div className={CSS_classes} style={style}>\r\n            <span className=\"p-inputgroup-addon\">мес</span>            \r\n            <InputText id=\"month\" type=\"number\" \r\n              min={0} max={12} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value)  \r\n              deathReason.months = value === 0 ? undefined : value\r\n              props.certificate.saveReasonEffTime(deathReason) \r\n              props.onChange(deathReason)\r\n            }}\r\n            value={deathReason.months || ''}/>\r\n          </div>\r\n          <div className={CSS_classes} style={style}> \r\n            <span className=\"p-inputgroup-addon\">нед</span>           \r\n            <InputText id=\"ned\" type=\"number\" \r\n            min={0} max={4} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value)\r\n              deathReason.weeks = value === 0 ? undefined : value\r\n              props.certificate.saveReasonEffTime(deathReason)\r\n              props.onChange(deathReason)\r\n            }}\r\n            value={deathReason.weeks || ''}/>         \r\n          </div>\r\n          <div className={CSS_classes} style={style}>\r\n            <span className=\"p-inputgroup-addon\">сут</span>            \r\n            <InputText id=\"dne\" type=\"number\" \r\n            min={0} max={7} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value)\r\n              deathReason.days = value === 0 ? undefined : value\r\n              if (props.certificate.saveReasonEffTime(deathReason)) props.onChange(deathReason)\r\n            }}\r\n            value={deathReason.days || ''}/>\r\n          </div>\r\n          <div className={CSS_classes} style={style}>\r\n            <span className=\"p-inputgroup-addon\">час</span>            \r\n            <InputText id=\"hours\" type=\"number\"\r\n             min={0} max={23} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value) \r\n              deathReason.hours = value === 0 ? undefined : value\r\n              if (props.certificate.saveReasonEffTime(deathReason)) props.onChange(deathReason)\r\n            }}\r\n             value={deathReason.hours || ''}/>          \r\n          </div>\r\n          <div className={CSS_classes} style={style}>\r\n            <span className=\"p-inputgroup-addon\">мин</span>            \r\n            <InputText id=\"minut\" type=\"number\"\r\n              min={0} max={59} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value)  \r\n              deathReason.minutes = value === 0 ? undefined : value\r\n              props.certificate.saveReasonEffTime(deathReason) \r\n              props.onChange(deathReason)\r\n            }}\r\n             value={deathReason.minutes || ''}/>\r\n          </div>\r\n        </div>\r\n      }\r\n    />) : <></>        \r\n  return (<div className=\"p-paragraph-field\"  style={{width: '100%'}}>  \r\n    <NullFlavorWrapper disabled={props.disabled} checked={checked} key={`rs2_${deathReason?.id}_${deathReason?.diagnosis}`}\r\n      setCheck={(e: CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n        setChecked(e.checked)        \r\n        if (e.checked) {\r\n          const reason = new DeathReason()\r\n          props.onChange(reason)\r\n          setDeathReason(reason)\r\n        } else {           \r\n          if (!!deathReason) {             \r\n            deathReason.nullFlavors = []\r\n            cleanEffectiveTime()  \r\n            deathReason.diagnosis = undefined\r\n            deathReason.nullFlavors.push({parent_attr:'effective_time', code: NA} as INullFlavorR)   \r\n            deathReason.nullFlavors.push({parent_attr:'diagnosis', code: NA} as INullFlavorR)       \r\n          } \r\n          props.onChange(undefined)   \r\n        }\r\n        if (props.onDiagnosisChecked) props.onDiagnosisChecked(e.checked, nullFlavors)        \r\n      }}  \r\n      label={<label>{props.label}</label>} \r\n      options={options} \r\n      nullFlavors={!props.fieldName ? deathReason?.nullFlavors : props.certificate.nullFlavors}       \r\n      paraNum      \r\n      field_name={props.fieldName || 'diagnosis'}\r\n      value={NA}\r\n      field={\r\n        <div className=\"p-fluid p-formgrid p-grid\">     \r\n          <div className={`p-field p-col-12 ${props.isExt ? 'p-md-10' : 'p-md-8'}`}>             \r\n            <AutoComplete id=\"reason_text\" placeholder=\"Диагноз\"\r\n              suggestions={diagnoses} delay={1000} dropdown\r\n              completeMethod={getDiagnoses} itemTemplate={diagnosisOptionTemplate}\r\n              field=\"s_name\" onChange={(e) =>{ \r\n                if (!!deathReason && !!e.value.s_name) { \r\n                  deathReason.diagnosis = e.value\r\n                  if (!!deathReason.diagnosis) setDiagnosisCode(deathReason.diagnosis?.ICD10)\r\n                } else if(e.value) {\r\n                  if (!!deathReason) deathReason.diagnosis = undefined\r\n                  setDiagnosisText(e.value)                  \r\n                } else {\r\n                  if (deathReason) deathReason.diagnosis = undefined\r\n                  setDiagnosisText('')                  \r\n                }  \r\n                if (deathReason!=null) props.onChange(deathReason)\r\n              }}\r\n              value={props.deathReason?.diagnosis || diagnosisText}/>          \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-2\">\r\n            <AutoComplete id=\"reason_code\" placeholder=\"Код\"\r\n              suggestions={diagnoses} delay={1000} field=\"ICD10\"\r\n              itemTemplate={diagnosisOptionTemplate}\r\n              completeMethod={getCodes} onChange={(e) =>{ \r\n                if (!!deathReason && !!e.value.s_name) {\r\n                    deathReason.diagnosis = e.value\r\n                    if (!!deathReason.diagnosis) setDiagnosisCode(deathReason.diagnosis?.ICD10)\r\n                } else if(e.value) {\r\n                    if (!!deathReason) deathReason.diagnosis = undefined\r\n                  setDiagnosisCode(e.value)                \r\n                } else {\r\n                  if (!!deathReason) deathReason.diagnosis = undefined               \r\n                  setDiagnosisCode('')\r\n                }  \r\n                if (!!deathReason) props.onChange(deathReason)\r\n              }}\r\n              value={props.deathReason?.diagnosis || diagnosisCode}/>          \r\n          </div>\r\n          <div className={`p-field ${props.isExt ? '' : 'p-col-12 p-md-2'}`}>\r\n            {upButton}\r\n            {downButton}            \r\n          </div>\r\n        </div>\r\n      }\r\n    />  \r\n    {effTime}\r\n  </div>)\r\n}\r\nexport default observer(Reason)","import { AxiosResponse } from \"axios\"\r\nimport { $acme, ACME_URL } from \"../http\"\r\n\r\nexport default class ACMEService {\r\n  //POST request for run ACME and get result\r\n  static async runACME(input: string): Promise<AxiosResponse<string>> {\r\n    return $acme.post(`${ACME_URL}useACME`, { data_AIN: input })\r\n  }\r\n}\r\n","import Certificate from \"../models/FormsData/Certificate\"\r\nimport ACMEService from \"../services/ACME_Service\"\r\n\r\n/**\r\n * Преобразование массива причин в строку заданного формата: Позиции\r\n * соответствуют кодам МКБ-10 причин смерти, записанных без точки (4\r\n * знакоместа) и разделенные знаком / внутри раздела 1 пункта 22 нашего\r\n * свидетельства о смерти, знаком * между разделами, пробелом внутри раздела\r\n * 2 и с размещением кода внешней причины (первые 3 знака) в конце\r\n * кодограммы с добавленным знаком & впереди.\r\n *\r\n * @return результирующая строка\r\n */\r\nconst codogram = (\r\n  reason_a: string,\r\n  reason_b: string | undefined,\r\n  reason_c: string | undefined,\r\n  ext_reason: string | undefined,\r\n  reasons: Array<string | undefined>\r\n): string => {\r\n  let _result = \"\"\r\n  let _part_2 = \"\"\r\n  reasons.forEach((code) => {\r\n    if (!!code) _part_2 += \" \" + code\r\n  })\r\n  if (!reason_b && !ext_reason && !reasons[0]) {\r\n    _result = reason_a\r\n  } else if (!!reason_b && !reason_c && !ext_reason && !reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b\r\n  } else if (!!reason_b && !!reason_c && !ext_reason && !reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"/\" + reason_c\r\n  } else if (!reason_b && !ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"*\" + _part_2\r\n  } else if (!!reason_b && !reason_c && !ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"*\" + _part_2\r\n  } else if (!!reason_b && !!reason_c && !ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"/\" + reason_c + \"*\" + _part_2\r\n  } else if (!reason_b && !!ext_reason && !reasons[0]) {\r\n    _result = reason_a + \" \" + ext_reason\r\n  } else if (!!reason_b && !reason_c && !!ext_reason && !reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \" \" + ext_reason\r\n  } else if (!!reason_b && !!reason_c && !!ext_reason && !reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"/\" + reason_c + \" \" + ext_reason\r\n  } else if (!reason_b && !!ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"*\" + _part_2 + \" \" + ext_reason\r\n  } else if (!!reason_b && !reason_c && !!ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"*\" + _part_2 + \" \" + ext_reason\r\n  } else if (!!reason_b && !!reason_c && !!ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"/\" + reason_c + \"*\" + _part_2 + \" \" + ext_reason\r\n  }\r\n  return _result.padEnd(120, \" \")\r\n}\r\n\r\n/**\r\n * экспорт массива причин в строку\r\n *\r\n * @param withOtherReasons определяет есть ли прочие причины\r\n * @return входную кодограмму для внешнего модуля АСМЕ\r\n * (файл с расширением ain)\r\n */\r\nconst ACME_AIN = (withOtherReasons: boolean, certificate: Certificate) => {\r\n  const deathDatetime = certificate.deathDatetime?.toDateString()\r\n  const deathDate = certificate.deathDatetime?.toLocaleDateString()\r\n  //Позиции 1-4 соответствуют году смерти\r\n  const X1X4 = !deathDatetime ? \"0000\" : deathDatetime.slice(-4)\r\n  //Позиции 5-6 соответствуют месту смерти, которая обозначена NC\r\n\r\n  //Позиции 7-12 соответствуют номеру сертификата, вместо которого для\r\n  //идентификации записи после ее возврата от АСМЕ\r\n  //заполнены левой частью форматированного до 10 знаков незначащими нулями\r\n  //значения счетчика (6 знакомест)\r\n  const X7X12 = certificate.number?.slice(-4).padStart(6, \"0\") || \"000000\"\r\n\r\n  //Позиция 13 соответствует номеру кодировщика, который обозначен как 1\r\n\r\n  //Позиции 14-17 соответствуют лоту, вместо которого для идентификации записи после\r\n  //ее возврата от АСМЕ заполнены правой частью форматированного до 10 знаков\r\n  //незначащими нулями значения счетчика (4 знакоместа)\r\n  const X14X17 = withOtherReasons ? \"0000\" : \"0001\"\r\n\r\n  //Позиция 18 соответствует номеру секции, который обозначен как 1\r\n  //Позиции 19-21 соответствуют первым трем буквам месяца смерти\r\n  const X19X21 = !deathDatetime ? \"000\" : deathDatetime.slice(4, 7)\r\n  //Позиции 22-23 соответствуют месяцу смерти\r\n  const X22X23 = !deathDate ? \"  \" : deathDate.slice(3, 5)\r\n  //Позиции 24-25 соответствуют дню смерти\r\n  const X24X25 = !deathDate ? \"  \" : deathDate.slice(0, 2)\r\n  // Позиции 26-29 соответствуют Х26Х29 (году смерти), отсутствие заполняется пробелами\r\n  const X26X29 = !deathDate ? \"    \" : deathDate.slice(-4)\r\n  // Позиции 30-33 соответствуют году версии программы SuperMICAR\r\n  // Позиции 34-37 соответствуют году версии программы MICAR200\r\n  const birthDay = certificate.patient.birth_date\r\n  const deathDay = certificate.deathDatetime\r\n  //Позиция 38 соответствует: 1 - год, 2 - месяц, 4 - день\r\n  //Позиции 39 - 41 числу годов или месяцев или дней (в зависимости от позиции 38)\r\n  let XYMD = \"9\"\r\n  let X39X41 = \"999\"\r\n  if (deathDay && birthDay) {\r\n    let _diff = deathDay.getFullYear() - birthDay.getFullYear()\r\n    if (_diff > 1) {\r\n      XYMD = \"1\"\r\n      X39X41 = _diff.toString().padStart(3, \"0\")\r\n    } else if (_diff === 1) {\r\n      _diff = deathDay.getMonth() - birthDay.getMonth()\r\n      if (_diff > 0) {\r\n        XYMD = \"1\"\r\n        X39X41 = \"001\"\r\n      } else {\r\n        XYMD = \"2\"\r\n        _diff = deathDay.getMonth() + 12 - birthDay.getMonth()\r\n        X39X41 = _diff.toString().padStart(3, \"0\")\r\n      }\r\n    } else {\r\n      _diff = deathDay.getMonth() - birthDay.getMonth()\r\n      if (_diff > 1) {\r\n        XYMD = \"2\"\r\n        X39X41 = _diff.toString().padStart(3, \"0\")\r\n      } else if (_diff === 1) {\r\n        _diff = deathDay.getDate() - birthDay.getDate()\r\n        if (_diff > 0) {\r\n          XYMD = \"1\"\r\n          X39X41 = \"001\"\r\n        } else {\r\n          XYMD = \"3\"\r\n          _diff = deathDay.getDate() + 30 - birthDay.getDate()\r\n          X39X41 = _diff.toString().padStart(3, \"0\")\r\n        }\r\n      } else {\r\n        _diff = deathDay.getDate() - birthDay.getDate()\r\n        if (_diff > 0) {\r\n          XYMD = \"3\"\r\n          X39X41 = _diff.toString().padStart(3, \"0\")\r\n        } else {\r\n          XYMD = \"3\"\r\n          X39X41 = \"000\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //Позиция 42 соответствует пункту 14 нашего свидетельства: от чего умер.\r\n  //Значению deathKind=1 (заболевание) соответствует в АСМЕ код N\r\n  //Значению deathKind=2 или 3 (несчастный случай) соответствует в АСМЕ код A\r\n  //Значению deathKind=4 (убийство) соответствует в АСМЕ код H\r\n  //Значению deathKind=5 (самоубийство) соответствует в АСМЕ код S\r\n  //Значению deathKind=6 (в ходе военных действий) соответствует в АСМЕ код A\r\n  //Значению deathKind=7 (в ходе террористических действий) соответствует в АСМЕ код A\r\n  //Значению deathKind=8 (род смерти не установлен) соответствует в АСМЕ код C\r\n  let X42 = \" \"\r\n  if (!!certificate.deathKind && certificate.deathKind > 0)\r\n    X42 = [\"N\", \"A\", \"A\", \"H\", \"S\", \"A\", \"A\", \"C\"][certificate.deathKind - 1]\r\n  //Позиция 43 соответствует одному пробелу (\" \")\r\n  //Позиция 44 - кем отвергнута запись (принимается пробел, т.е. не отвергнута)\r\n\r\n  //X45 - четвертый знак кода четвертой строки при условии, что он\r\n  //находится в пределах W00-Y34.X, кроме Y06._ и Y07._\r\n  let X45 = certificate.reasonD?.diagnosis?.ICD10\r\n  X45 =\r\n    !X45 ||\r\n    !(X45 >= \"W00\" && X45 <= \"Y34.X\") ||\r\n    X45.lastIndexOf(\"X\") > 1 ||\r\n    X45.includes(\"Y06.\") ||\r\n    X45.includes(\"Y07.\") ||\r\n    X45.length < 4\r\n      ? \" \"\r\n      : X45.substring(4, 5)\r\n\r\n  //Позиции 51-170 соответствуют кодам МКБ-10 причин смерти, записанных\r\n  //без точки (4 знакоместа) и разделенные знаком / внутри раздела 1\r\n  //пункта 18 нашего свидетельства о смерти, знаком * между разделами,\r\n  //пробелом внутри раздела 2 и с размещением кода внешней причины (первые 3 знака) в конце\r\n  //кодограммы с добавленным знаком & впереди.\r\n  let reasonA = certificate.reasonA?.diagnosis?.ICD10\r\n  reasonA = reasonA && reasonA.replace(\".\", \"\").padEnd(4, \" \")\r\n  let reasonB = certificate.reasonB?.diagnosis?.ICD10\r\n  reasonB = reasonB && reasonB.replace(\".\", \"\").padEnd(4, \" \")\r\n  let reasonC = certificate.reasonC?.diagnosis?.ICD10\r\n  reasonC = reasonC && reasonC.replace(\".\", \"\").padEnd(4, \" \")\r\n  let reasonD = certificate.reasonD?.diagnosis?.ICD10\r\n  reasonD = reasonD && reasonD.replace(\".\", \"\")\r\n  if (X45 !== \" \" && !!reasonD) {\r\n    reasonD = \"&\" + reasonD\r\n    if (reasonD.length > 4) reasonD = reasonD.slice(0, 4)\r\n  } else if (!!reasonD && X45 === \" \") reasonD = (\"&\" + reasonD).padEnd(5, \" \")\r\n  if (reasonD && reasonD.length < 4) reasonD = reasonD.padEnd(4, \" \")\r\n  const reasons = []\r\n  reasons[0] =\r\n    certificate.deathReasons.length < 1 || !withOtherReasons\r\n      ? undefined\r\n      : certificate.deathReasons[0].diagnosis?.ICD10.replace(\".\", \"\").padEnd(4, \" \")\r\n  reasons[1] =\r\n    certificate.deathReasons.length < 2 || !withOtherReasons\r\n      ? undefined\r\n      : certificate.deathReasons[1].diagnosis?.ICD10.replace(\".\", \"\").padEnd(4, \" \")\r\n  reasons[2] =\r\n    certificate.deathReasons.length < 3 || !withOtherReasons\r\n      ? undefined\r\n      : certificate.deathReasons[2].diagnosis?.ICD10.replace(\".\", \"\").padEnd(4, \" \")\r\n  reasons[3] =\r\n    certificate.deathReasons.length < 4 || !withOtherReasons\r\n      ? undefined\r\n      : certificate.deathReasons[3].diagnosis?.ICD10.replace(\".\", \"\").padEnd(4, \" \")\r\n\r\n  reasonA = reasonA && reasonA.lastIndexOf(\"X\") > 1 ? reasonA.slice(0, 3) + \" \" : reasonA\r\n  reasonB = reasonB && reasonB.lastIndexOf(\"X\") > 1 ? reasonB.slice(0, 3) + \" \" : reasonB\r\n  reasonC = reasonC && reasonC.lastIndexOf(\"X\") > 1 ? reasonC.slice(0, 3) + \" \" : reasonC\r\n\r\n  const reasons_in = reasons.map((reason) => {\r\n    return reason && reason.lastIndexOf(\"X\") > 1 ? reason.substring(0, 3) + \" \" : reason\r\n  })\r\n\r\n  //Далее позиции 90 - 170 заняты пробелами, т.е. Space(81)\r\n\r\n  //Позиция 171 - вскрытие (Y - да, N - нет, U - поле не заполнено)\r\n  //В базе код вскрытия 4, а не 1!!!!!!\r\n\r\n  const X171 = !certificate.basisDetermining ? \"U\" : certificate.basisDetermining === 4 ? \"Y\" : \"N\"\r\n  //Позиции 172-173 заняты пробелами\r\n  //Позиция 174 в случае смерти беременной (21п.)\r\n  let X174 = \"3\"\r\n  if (certificate.pregnancyConnection) X174 = [\"9\", \"3\", \"4\", \"1\"][certificate.pregnancyConnection]\r\n\r\n  //Позиция 175 занята пробелом\r\n  //Позиции 176-177 - месяц даты травмы (пункт 15 нашего свитетельства), отсутствие обозначено 99\r\n  const extReasonTime = certificate.extReasonTime?.toLocaleString()\r\n  const X176X177 = !extReasonTime ? \"99\" : extReasonTime.substring(3, 5)\r\n  //Позиции 178-179 - день даты травмы (пункт 15 нашего свитетельства), отсутствие обозначено 99\r\n  const X178X179 = !extReasonTime ? \"99\" : extReasonTime.substring(0, 2)\r\n  //Позиции 180-183 - год даты травмы (пункт 15 нашего свитетельства), отсутствие обозначено 9999\r\n  const X180X183 = !extReasonTime ? \"9999\" : extReasonTime.substring(6, 10)\r\n\r\n  //Позиции 184-187 (время травмы) заполнены 9999\r\n  //Позиция 188 (смерть от травмирования)\r\n\r\n  const X188 = !certificate.deathKind || certificate.deathKind !== 3 ? \" \" : \"Y\"\r\n\r\n  //Позиции 189 - 218 заполнены 30 пробелами, т.е. Space(30)\r\n  //Позиция 219 соответствует пятому знаку кода внешней причины (не считая точки)\r\n  let X219 = certificate.reasonD?.diagnosis?.ICD10\r\n  X219 = X219 && X219.length > 5 ? X219.substring(5, 6) : \" \"\r\n  //Позиции 220 - 231 могут быть заполнены кодом территории (п.7 свидетельства - республика, область, край)\r\n  let X220X231 = certificate.patient.person?.address?.state\r\n  X220X231 = !X220X231 ? \"            \" : X220X231.padStart(12, \" \")\r\n\r\n  //Позиции 232 - 261 для дополнительной информации заполнены пробелами, т.е. Space(30) с буквой q на конце\r\n  //ACMEAIN - объединяющая строка, формирующая входную кодограмму для внешнего модуля АСМЕ (файл с расширением ain)\r\n  const ACMEAIN =\r\n    X1X4 +\r\n    \"NC\" +\r\n    X7X12 +\r\n    \"1\" +\r\n    X14X17 +\r\n    \"1\" +\r\n    X19X21 +\r\n    X22X23 +\r\n    X24X25 +\r\n    X26X29 +\r\n    \"20042004\" +\r\n    XYMD +\r\n    X39X41 +\r\n    X42 +\r\n    \"  \" +\r\n    X45 +\r\n    \"     \" +\r\n    codogram(reasonA || \"    \", reasonB, reasonC, reasonD, reasons_in) +\r\n    X171 +\r\n    \"  \" +\r\n    X174 +\r\n    \" \" +\r\n    X176X177 +\r\n    X178X179 +\r\n    X180X183 +\r\n    \"9999\" +\r\n    X188 +\r\n    \"                              \" +\r\n    X219 +\r\n    X220X231\r\n  return ACMEAIN.padEnd(260, \" \") + \"q\"\r\n}\r\n/**\r\n * Достаем первоначальную причину смерти из кодограммы ACME Во входной\r\n * кодограмме позиции 51-54 соответствуют первоначальной причине смерти, а\r\n * позиция 45 - четвертому знаку внешней причины. При отсутствии четвертого\r\n * знака добавляется знак Х.\r\n *\r\n * @param xACME - входная кодограмма из файла *.TIN\r\n * @return первоначальную причину смерти или пустую строку\r\n */\r\nconst parse_ACME_TIN = (xACME: string) => {\r\n  let _sb = \"\"\r\n  const x45 = xACME.substring(44, 45)\r\n  const x54 = xACME.substring(53, 54)\r\n  const x51_53 = xACME.substring(50, 53)\r\n  const spX45 = \" \" === x45\r\n  const spX54 = \" \" === x54\r\n  const spX51_53 = \"   \" === x51_53\r\n  if (spX45 && !spX54) _sb = `${x51_53}.${x54}`\r\n  else if (spX45 && spX54 && !spX51_53) _sb = `${x51_53}.X`\r\n  else if (!spX45 && !spX51_53 && \"V01\" < x51_53 && \"Y98.X\" >= x51_53) _sb = `${x51_53}.${x45}`\r\n  else if (!spX45 && !spX51_53 && \"V\" > x51_53) _sb = `${x51_53}.${x54}`\r\n  return _sb\r\n}\r\n\r\n/**\r\n * экспорт массива причин в строку АСМЕAIN запрос сервиса ACME\r\n * чтение парсинг результата АСМЕTIN и его обработка.\r\n *\r\n * @return код результата операции\r\n */\r\nexport const doACME = (\r\n  certificate: Certificate,\r\n  onSucccess: (result: string) => void,\r\n  onError: (message: string) => void\r\n) => {\r\n  let _result = -1\r\n  try {\r\n    // Получаем строку входных параметров для внешнего модуля АСМЕ\r\n    const strACMEAIN1 = ACME_AIN(true, certificate)\r\n    _result = -2\r\n    const isReasonD = !!certificate.reasonD && !!certificate.reasonD.diagnosis && !!certificate.reasonD.diagnosis.ICD10\r\n    // Получаем дополнительную строку входных параметров\r\n    // без прочих причин на входе, если внешняя причина определена\r\n    const strACMEAIN2 = isReasonD ? ACME_AIN(false, certificate) : \"\"\r\n    _result = -3\r\n    // делаем запрос к сервису АСМЕ\r\n    ACMEService.runACME(strACMEAIN1 + strACMEAIN2)\r\n      .then((response) => {\r\n        if (response.data && response.data.length < 120) {\r\n          //Длина менее 120, что-то пошло не так\r\n          onError(`Сбой операции: получен некорректный ответ от АСМЕ: ${response.data}`)\r\n        } else {\r\n          // сервис вернул корректный результат\r\n          const TINs = (response.data as any).data_TIN.split(\"\\r\\n\")\r\n          console.log(\"response.data\", response.data)\r\n          if (!isReasonD) onSucccess(parse_ACME_TIN(TINs[0]))\r\n          else {\r\n            let _res = \"\"\r\n            let _alter = \"\"\r\n            if (Number.parseInt(TINs[0].slice(6, 12) + TINs[0].slice(13, 17)) === 1) {\r\n              _res = parse_ACME_TIN(TINs[0])\r\n              _alter = parse_ACME_TIN(TINs[1])\r\n            } else {\r\n              _res = parse_ACME_TIN(TINs[1])\r\n              _alter = parse_ACME_TIN(TINs[0])\r\n            }\r\n            if (_res < \"V00\" || _res > \"Y99.X\") _res = \"\"\r\n            if (\"\" === _res) _res = _alter\r\n            onSucccess(_res)\r\n          }\r\n        }\r\n      })\r\n      .catch((reason) => {\r\n        onError(`Сбой операции: код завершения - 0, подробности: ${reason}`)\r\n      })\r\n    _result = 0\r\n  } catch (error) {\r\n    onError(`Сбой операции: код завершения ${_result}, подробности: ${error}`)\r\n  }\r\n}\r\n","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext} from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { DeathReason } from '../../models/FormsData/DeathReason'\r\nimport Reason from '../inputs/Reason'\r\nimport { Button } from 'primereact/button'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { doACME } from '../../utils/acme'\r\n\r\n\r\n const Section7: FC = () => {\r\n  const { certificateStore, layoutStore } = useContext(Context)   \r\n  \r\n  \r\n  const header = () => {\r\n      return <span> <span className='paragraph p-mr-1'>22(I).</span>  Причины смерти.</span>\r\n    }\r\n  const certificate = certificateStore.cert     \r\n  const mainCSSClass = (isACME: boolean) => isACME  ? \"p-fluid p-d-flex p-jc-start ACME-reason\" : \"p-fluid p-d-flex p-jc-start\"\r\n  const reasonBckecked = !!certificate.reasonB\r\n  const reasonCckecked = !!certificate.reasonC\r\n  const reasonDckecked = !!certificate.reasonD \r\n\r\n  const reasonIDExchange = (first: DeathReason, second: DeathReason) => {\r\n    if (!first.id && !second.id) return\r\n    let _id = first.id\r\n    first.id = second.id\r\n    second.id = _id      \r\n  }\r\n      \r\n  return (<>    \r\n    <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n      <div className={mainCSSClass(!!certificate.reasonA && certificate.reasonA===certificate.reasonACME)}\r\n       style={{width: '98%'}} key={`ra_${certificate.reasonA?.diagnosis?.ICD10}`}> \r\n        <div className='paragraph p-mr-1'>а) </div>           \r\n        <Reason label=\"Болезнь или состояние, непосредственно приведшее к смерти\" \r\n          deathReason={certificate.reasonA} certificate={certificate}\r\n           key={`ra2_${certificate.reasonA?.effectiveTime}`} \r\n          onChange={(reason: DeathReason | undefined)=>{ \r\n            if (reason!==certificate.reasonA ) { certificate.reasonA = reason\r\n            layoutStore.message = { severity: 'success', summary: 'Успешно', detail: 'Причина А изменена, рекомендуется сохранить изменения', life: 3000 }}\r\n           }}\r\n          disabled checked\r\n          fieldName='a_reason' \r\n          onDown={()=>{\r\n            if (!certificate.reasonA && !certificate.reasonB) return\r\n            reasonIDExchange(certificate.reasonA || new DeathReason(), \r\n            certificate.reasonB || new DeathReason())            \r\n            const reason = certificate.reasonA\r\n            certificate.reasonA = certificate.reasonB\r\n            certificate.reasonB = reason           \r\n          }}\r\n        />\r\n      </div>  \r\n      <div className={mainCSSClass(!!certificate.reasonB && certificate.reasonB===certificate.reasonACME)} style={{width: '98%'}} key={`rb_${certificate.reasonB?.diagnosis?.ICD10}`}>   \r\n        <div className='paragraph p-mr-1'>б) </div>\r\n        <Reason label=\"Патологическое состояние, которое привело к возникновению непос- редственной причины смерти\" \r\n          deathReason={certificate.reasonB} certificate={certificate}  key={`rb2_${certificate.reasonB?.id}`}\r\n          onChange={(reason: DeathReason | undefined)=>{ \r\n            if (reason!==certificate.reasonB ) \r\n            certificate.reasonB = reason \r\n          }}           \r\n          checked={reasonBckecked} \r\n          fieldName='b_reason' \r\n          onDown={()=>{\r\n            if (!certificate.reasonB && !certificate.reasonC) return\r\n            reasonIDExchange(certificate.reasonB || new DeathReason(), \r\n            certificate.reasonC || new DeathReason())\r\n            const reason = certificate.reasonB\r\n            certificate.reasonB = certificate.reasonC\r\n            certificate.reasonC = reason\r\n          }}  \r\n          onUp={()=>{\r\n            if (!certificate.reasonB && !certificate.reasonC) return\r\n            reasonIDExchange(certificate.reasonC || new DeathReason(),\r\n             certificate.reasonB || new DeathReason())\r\n            const reason = certificate.reasonB\r\n            certificate.reasonB = certificate.reasonA\r\n            certificate.reasonA = reason\r\n          }}            \r\n        />\r\n      </div>  \r\n      <div className={mainCSSClass(!!certificate.reasonC && certificate.reasonC===certificate.reasonACME)} \r\n      style={{width: '98%'}} key={`rc_${certificate.reasonC?.diagnosis?.ICD10}`}>  \r\n        <div className='paragraph p-mr-1'>в) </div>\r\n        <Reason label=\"Первоначальная причина смерти\" \r\n          deathReason={certificate.reasonC} certificate={certificate} \r\n          key={`rc2_${reasonCckecked}_${certificate.reasonC?.effectiveTime}`}\r\n          onChange={(reason: DeathReason | undefined)=>{ \r\n            if (reason !== certificate.reasonC) certificate.reasonC = reason            \r\n          }} fieldName='c_reason' checked={reasonCckecked}\r\n          onUp={()=>{\r\n            if (!certificate.reasonC && !certificate.reasonB) return\r\n            reasonIDExchange(certificate.reasonC || new DeathReason(),\r\n             certificate.reasonB || new DeathReason())\r\n            const reason = certificate.reasonC\r\n            certificate.reasonC = certificate.reasonB\r\n            certificate.reasonB = reason\r\n          }}        \r\n        />\r\n      </div>\r\n      <div className={mainCSSClass(false)}  style={{width: '98%'}} >  \r\n        <div className='paragraph p-mr-1'>г) </div>\r\n        <Reason label=\"Внешняя причина смерти при травмах и отравлениях\" \r\n          deathReason={certificate.reasonD} certificate={certificate} \r\n          key={`rd2_${reasonDckecked}_${certificate.reasonD?.effectiveTime}`}\r\n          onChange={(reason: DeathReason | undefined)=>{ if (reason!==certificate.reasonD ) certificate.reasonD = reason }} fieldName='d_reason'\r\n          checked={reasonDckecked}  \r\n          isExt       \r\n        />   \r\n      </div>  \r\n      <div className={mainCSSClass(false)+'p-fluid'}  style={{width: '98%',padding:'4px'}} >  \r\n        <Button type=\"button\" label=\"ACME\" \r\n          style={{width: '5rem', height: '2.4rem'}} \r\n          className='p-button-warning p-mr-2'\r\n          onClick={()=>{            \r\n            if (certificate.reasonA?.diagnosis?.ICD10) {\r\n              if (certificate.reasonC?.diagnosis?.ICD10 && certificate.reasonC.diagnosis.ICD10.includes('U07')) {\r\n                  certificate.changeReasonACME(certificate.reasonC.diagnosis.ICD10)\r\n                  layoutStore.message = { severity: 'success', summary: 'Успешно', detail: `${certificate.reasonC.diagnosis.ICD10}-первопричина определенная АСМЕ`, life: 3000 }\r\n              } else                 \r\n              doACME(certificate, result=>{\r\n                certificate.changeReasonACME(result)\r\n                layoutStore.message = { severity: 'success', summary: 'Успешно', detail: `${result}-первопричина определенная АСМЕ`, life: 3000 }           \r\n              },message=>{\r\n                layoutStore.message = { severity: 'error', summary: 'Сбой', detail: message, life: 7000 }\r\n              })\r\n            } else {\r\n              layoutStore.message = { severity: 'warn', summary: 'Oтклонено', detail: \"Причина а) отсутствует\", life: 7000 }\r\n            }\r\n          }}\r\n        />\r\n         <div className=\"p-field  p-grid\">       \r\n          <label htmlFor=\"ACME\" \r\n                 className=\"p-col-fixed\" \r\n                 style={{width:'226px'}}>Первоначальная причина по АСМЕ</label>   \r\n          <div className='p-col-12 p-md-2'>                  \r\n            <InputText id=\"ACME\" type=\"text\" \r\n              disabled value={certificate.reasonACME?.diagnosis?.ICD10 || ''}  \r\n            />\r\n          </div>\r\n         </div>            \r\n      </div>        \r\n    </Card>  \r\n  </>)\r\n  }\r\n  export default observer(Section7) ","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useEffect, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport '../../styles/components/Calendar.css'\r\nimport { DeathReason } from '../../models/FormsData/DeathReason'\r\nimport { IDeathReason } from '../../models/responses/IDeathReason'\r\nimport Reason from '../inputs/Reason'\r\nimport { Button } from 'primereact/button'\r\nimport { IMedicalServs } from '../../models/responses/IMedservs'\r\nimport DiagnosisService from '../../services/DiagnosisService'\r\nimport { AutoComplete } from 'primereact/autocomplete'\r\nimport { Procedure } from '../../models/FormsData/Procedure'\r\nimport { IProcedure } from '../../models/responses/IProcedure'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { Checkbox } from 'primereact/checkbox'\r\nimport { DataTable } from 'primereact/datatable'\r\nimport { Column } from 'primereact/column'\r\nimport { EXT_REASON_SUG, EXT_REASON_TIME_SUG } from '../../utils/defaults'\r\nimport { InputText } from 'primereact/inputtext'\r\n\r\n\r\n\r\n const Section8: FC = () => {\r\n  const { certificateStore, temporaryIDStore, suggestionsStore } = useContext(Context) \r\n  const checkReason = suggestionsStore.suggestions[EXT_REASON_SUG].done && suggestionsStore.suggestions[EXT_REASON_TIME_SUG].done\r\n  \r\n  \r\n  const certificate = certificateStore.cert   \r\n  const [newReason, setNewReason] = useState(new DeathReason({id: temporaryIDStore.lastDeathReasonID} as IDeathReason))\r\n  const [medicalServs, setMedicalServs] = useState<IMedicalServs[]>([]) \r\n  const [medservText, setMedservText] = useState('')  \r\n  const [medservCode, setMedservCode] = useState('')\r\n  const [procedure, setProcedure] = useState<Procedure | null>(null)  \r\n  const [dateETChecked, setDateETChecked] = useState(false)\r\n  const [diagnosChecked, setDiagnosChecked] = useState(true)\r\n  const [selectedProcedures, setSelectedProcedures] = useState<Procedure[]>([])\r\n  const [selectedReasons, setSelectedReasons] = useState<DeathReason[]>([])\r\n  useEffect(()=>{\r\n    suggestionsStore.suggestions[EXT_REASON_SUG].done = !(newReason.diagnosis === undefined && (newReason.nullFlavors.length===0 || newReason.nullFlavors.findIndex((item)=>item.parent_attr==='diagnosis')===-1))\r\n    suggestionsStore.suggestions[EXT_REASON_TIME_SUG].done = !(newReason.effectiveTime === undefined && newReason.nullFlavors.findIndex((item)=>item.parent_attr==='effective_time')===-1)\r\n  },[newReason.diagnosis, newReason.effectiveTime, suggestionsStore.suggestions, newReason.nullFlavors]) \r\n  const header = () => {\r\n      return <><span><span className='paragraph p-mr-1'>22(II).</span>Прочие состояния.</span> \r\n      <Button icon=\"pi pi-plus\" className=\"p-ml-auto p-mr-2 p-button-sm p-button-raised p-button-success\" label=\"Добавить состояние\" \r\n        disabled={!checkReason || (!newReason.diagnosis && newReason.procedures.length===0) || procedure!==null }\r\n        onClick={()=>{\r\n          if (!certificate.deathReasons.includes(newReason)) certificate.deathReasons.push(newReason)\r\n          setNewReason(new DeathReason({id: temporaryIDStore.lastDeathReasonID} as IDeathReason))                \r\n        }}\r\n      />\r\n      <Button icon=\"pi pi-minus\" className=\"p-button-sm p-button-raised p-button-danger\"  \r\n        title=\"Удалить состояние\" disabled={selectedReasons.length===0} \r\n        onClick={()=>{\r\n          let _reasons = certificate.deathReasons?.filter(val => !selectedReasons.includes(val));\r\n          certificate.deathReasons = _reasons\r\n          setSelectedReasons([])\r\n        }} />\r\n      </>\r\n    }\r\n    \r\n  const  getMedservs = (event: { query: string })=>{\r\n  const option = {} as any\r\n  if (event.query.trim().length>0) option.name_cont = event.query.trim()\r\n  if (medservCode.trim().length>0) option.s_code_start =  medservCode    \r\n  DiagnosisService.fetchMedicalServs(option).then(response=>{\r\n        if (response.data.length>0) setMedicalServs(response.data)\r\n        else setMedicalServs([])        \r\n      }).catch((reason)=>console.log(reason))    \r\n  }\r\n  const  getCodes = (event: { query: string })=>{    \r\n    if (event.query.trim().length>0) {\r\n      DiagnosisService.fetchMedicalServs({'s_code_start': event.query.trim()}).then(response=>{        \r\n        if (response.data.length>0) setMedicalServs(response.data)\r\n        else setMedicalServs([])        \r\n      }).catch((reason)=>console.log(reason))       \r\n    } \r\n  }\r\n\r\n  const setMedServValue = (e:any)=>{\r\n    if (procedure) procedure.medicalServ = e.value\r\n    else  setProcedure(new Procedure({id: temporaryIDStore.lastProcedureID, medical_serv: e.value} as IProcedure))    \r\n    setMedservText(e.value.name)\r\n    setMedservCode(e.value.s_code)              \r\n  } \r\n  const medServOptionTemplate = (option: IMedicalServs) => {\r\n        return (\r\n          <span>\r\n            <span style={{marginRight:'4px'}}>{option.s_code}</span>\r\n            <span>{option.name}</span>\r\n          </span>\r\n        )\r\n    }\r\n\r\n  const mainCSSClass = (isACME: boolean) => isACME  ? \"p-fluid p-d-flex p-jc-start ACME-reason\" : \"p-fluid p-d-flex p-jc-start\"\r\n  \r\n  const procTimeBodyTemplate = (rowData: Procedure) => {\r\n    return rowData.timeStr()\r\n  }\r\n  const reasonTimeBodyTemplate = (rowData: DeathReason) => {\r\n    let _resultStr = ''\r\n    if (rowData.effectiveTime === undefined) return _resultStr\r\n    if (rowData.years && rowData.years > 0) _resultStr += `лет:${rowData.years} `\r\n    if (rowData.months && rowData.months > 0) _resultStr += `мес: ${rowData.months}`\r\n    if (rowData.weeks && rowData.weeks > 0) _resultStr += `нед: ${rowData.weeks}`\r\n    if (rowData.days && rowData.days > 0) _resultStr += `дн: ${rowData.days}`\r\n    if (rowData.hours && rowData.hours > 0) _resultStr += `час: ${rowData.hours}`\r\n    if (rowData.minutes && rowData.minutes > 0) _resultStr += `мин: ${rowData.minutes}`\r\n    return _resultStr\r\n  }\r\n  \r\n  const reasonTextBodyTemplate = (rowData: DeathReason) => {\r\n    let _resultStr = ''\r\n    if (rowData.diagnosis) _resultStr = rowData.diagnosis.s_name+';'\r\n    if (rowData.procedures.length>0) _resultStr += rowData.procNames()\r\n    return _resultStr\r\n  }  \r\n  return (<>    \r\n    <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>\r\n      <div className={mainCSSClass(false)}\r\n       style={{width: '98%'}} key={`ra_${newReason.id}_${diagnosChecked}`}>      \r\n        <div className='paragraph p-mr-1'>*)</div>\r\n        <Reason label=\"способствовавшие смерти, но не связанные с болезнью или патологическим состоянием, приведшим к ней\" \r\n          deathReason={newReason} certificate={certificate}\r\n          key={`ra2_${newReason.effectiveTime}`}           \r\n          onChange={(reason: DeathReason | undefined)=>{  \r\n            if (reason) {              \r\n              if (reason!==newReason) {\r\n                if (!reason.id) reason.id = temporaryIDStore.lastDeathReasonID\r\n                setNewReason(reason)\r\n              }  \r\n            }           \r\n          }}\r\n          onDiagnosisChecked={(checked)=>setDiagnosChecked(checked)}\r\n          checked={diagnosChecked}                                   \r\n        />                   \r\n      </div>\r\n      <div className='p-fluid p-formgrid p-grid p-add-block' style={{marginLeft:'1rem'}}>   \r\n          <div className='p-field p-col-12 p-md-9'>             \r\n            <AutoComplete id=\"procedure_text\" placeholder=\"Наименование хирургической операции\"\r\n              suggestions={medicalServs} delay={1000} dropdown \r\n              completeMethod={getMedservs} itemTemplate={medServOptionTemplate}\r\n              field=\"name\" onChange={(e) =>{ \r\n                if (e.value.s_code) setMedServValue(e)\r\n                else setMedservText(e.value)\r\n              }}\r\n              value={medservText}/>          \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-3\">\r\n            <AutoComplete id=\"procedure_code\" placeholder=\"Код\"\r\n              suggestions={medicalServs} delay={1000} field=\"s_code\"\r\n              itemTemplate={medServOptionTemplate}\r\n              completeMethod={getCodes} onChange={(e) =>{ \r\n                 if (e.value.s_code) setMedServValue(e)\r\n                 else setMedservCode(e.value)               \r\n              }}\r\n              value={medservCode}/>          \r\n          </div>  \r\n          <div className=\"p-field p-col-12\">\r\n            <InputText id=\"procedure_alterText\" disabled={!procedure}\r\n            placeholder=\"Свое наименование, если оно отличается от официального\"\r\n               onChange={e =>{ \r\n                if (procedure) procedure.textValue = e.target.value               \r\n              }}\r\n              value={procedure?.textValue || ''}/>          \r\n          </div>       \r\n          <div className=\"p-field p-col-12  p-d-flex p-ai-center\">                          \r\n            <Calendar id=\"effectiveDate\" key={`effectiveDate${dateETChecked}`} className=\"p-mr-3\" inputStyle={{width:'12.5rem'}} \r\n              showTime={!dateETChecked} dateFormat=\"dd.mm.yy\" locale=\"ru\"\r\n              mask={dateETChecked ? '99.99.9999' : '99.99.9999 99:99'} panelStyle={{margin:'10rem'}}                           \r\n              value={procedure?.effectiveTime} \r\n              onChange={(e)=>{ \r\n                if (procedure===null) return \r\n                if (e.target.value) {                  \r\n                  procedure.effectiveTime = e.target.value as Date\r\n                } else procedure.effectiveTime =  undefined               \r\n               }}\r\n              showIcon \r\n            />            \r\n            <div className=\"p-field-checkbox\">              \r\n              <Checkbox checked={dateETChecked} \r\n                inputId=\"et_date\" \r\n                onChange={e=>{setDateETChecked(e.checked)}}\r\n              />\r\n              <label htmlFor=\"et_date\">Только дата</label>\r\n            </div>                       \r\n            <Button icon=\"pi pi-plus\" className=\"p-ml-auto p-mr-2 p-button-sm p-button-raised p-button-success\"  title=\"Добавить хир.операцию\" disabled={procedure===null || (procedure.medicalServ===undefined && procedure.textValue === undefined)} onClick={()=>{\r\n              if (procedure) { \r\n                if (newReason.procedures.findIndex(pr=>pr.guid === procedure.guid)===-1) newReason.procedures.push(procedure)\r\n                setProcedure(null) \r\n                setMedservCode('')\r\n                setMedservText('')               \r\n              }  \r\n            }} />   \r\n            <Button icon=\"pi pi-minus\" className=\"p-button-sm p-button-raised p-button-danger\"  title=\"Удалить  хир.операцию\" disabled={selectedProcedures.length===0} onClick={()=>{\r\n              let _procedures = newReason.procedures.filter(val => !selectedProcedures.includes(val));\r\n              newReason.procedures = _procedures\r\n              setSelectedProcedures([])\r\n            }} />                    \r\n          </div>\r\n          <div className=\"p-field p-col-12\">\r\n            <DataTable value={newReason.procedures} selection={selectedProcedures}\r\n              responsiveLayout=\"scroll\" dataKey={\"id\"}\r\n              className=\"p-datatable-sm\" emptyMessage=\"Операции отсутствуют\" style={{width:'100%'}} \r\n              onSelectionChange={e =>{\r\n                setSelectedProcedures(e.value)                \r\n                if (e.value && e.value.length>0) {\r\n                  const pr = e.value[0] as Procedure\r\n                  setProcedure(pr)\r\n                  setDateETChecked(pr.effectiveTime?.getHours() === 0 && pr.effectiveTime.getMinutes()=== 0)\r\n                  setMedservCode(pr.medicalServ.s_code)\r\n                  setMedservText(pr.medicalServ.name)\r\n                } else {\r\n                  setProcedure(null) \r\n                  setMedservCode('')\r\n                  setMedservText('') \r\n                }\r\n              }}  >\r\n              <Column selectionMode=\"multiple\" headerStyle={{width: '3em'}}></Column>\r\n              <Column field=\"medicalServ.name\" header=\"Наименование\"></Column>\r\n              <Column header=\"Время\" body={procTimeBodyTemplate}></Column>                            \r\n            </DataTable>\r\n          </div>  \r\n        </div> \r\n        <DataTable value={certificate.deathReasons} style={{marginTop:'8px', marginLeft:'10px'}} \r\n          className=\"p-datatable-sm\" emptyMessage=\"Состояния отсутствуют\" selection={selectedReasons}  \r\n          responsiveLayout=\"scroll\" dataKey={\"id\"} onSelectionChange={e=>{            \r\n            setSelectedReasons(e.value)            \r\n            if (e.value && e.value.length>0) setNewReason(e.value[0])\r\n            else {\r\n              setNewReason(new DeathReason({id: temporaryIDStore.lastDeathReasonID} as IDeathReason)) \r\n            }\r\n          }}>\r\n          <Column selectionMode=\"multiple\" headerStyle={{width: '3em'}}></Column>\r\n          <Column header=\"Состояние\" body={reasonTextBodyTemplate}></Column>\r\n          <Column header=\"Период времени\" body={reasonTimeBodyTemplate}></Column>\r\n          <Column field=\"diagnosis.ICD10\" header=\"Kод МКБ10\"></Column>              \r\n        </DataTable>            \r\n    </Card>  \r\n  </>)\r\n  }\r\n  export default observer(Section8) ","//Связь смерти с ДТП\r\n//OID: 1.2.643.5.1.13.13.99.2.24  Версия: 1.1\r\nexport const TRAFFIC_ACCIDENT = [\r\n  { code: 1, name: \"в течение 30 суток\" },\r\n  { code: 2, name: \"из них в течение 7 суток\" },\r\n]\r\n","//Связь смерти с беременностью\r\n//OID: 1.2.643.5.1.13.13.99.2.25  Версия: 1.2\r\nexport const PREGNANCY_CONNECTION = [\r\n  { code: 1, name: \"смерть беременной (независимо от срока и локализации)\" },\r\n  { code: 2, name: \"в процессе родов\" },\r\n  { code: 3, name: \"в течение 42 дней после окончания беременности\" },\r\n  { code: 4, name: \"в течение 43-365 дней после окончания беременности\" },\r\n]\r\n","const SEC_IN_WEEK = 604800\r\nconst SEC_IN_DAY = 86400\r\nexport interface ITimeDiff {\r\n  years: number | undefined\r\n  months: number | undefined\r\n  weeks: number | undefined\r\n  days: number | undefined\r\n  hours: number | undefined\r\n  minutes: number | undefined\r\n}\r\nexport const timeDiff = (d1: Date, d2: Date) => {\r\n  if (d2 < d1) throw Error(\"invalid dates d1 > d2\")\r\n  let latest = d2\r\n  let yearDiff = d2.getFullYear() - d1.getFullYear()\r\n  const years = yearDiff > 0 ? yearDiff : undefined\r\n  if (years) {\r\n    latest = new Date(d1.getFullYear(), latest.getMonth(), latest.getDate(), latest.getHours(), latest.getMinutes())\r\n    if (d1 > latest)\r\n      latest = new Date(\r\n        d1.getFullYear() + 1,\r\n        latest.getMonth(),\r\n        latest.getDate(),\r\n        latest.getHours(),\r\n        latest.getMinutes()\r\n      )\r\n  }\r\n\r\n  const months =\r\n    latest.getMonth() < d1.getMonth() ? 12 + latest.getMonth() - d1.getMonth() : latest.getMonth() - d1.getMonth()\r\n  if (months > 0) {\r\n    latest = new Date(d1.getFullYear(), d1.getMonth(), latest.getDate(), latest.getHours(), latest.getMinutes())\r\n    if (d1 > latest) {\r\n      if (d1.getMonth() === 12) {\r\n        latest = new Date(d1.getFullYear() + 1, 1, latest.getDate(), latest.getHours(), latest.getMinutes())\r\n      } else\r\n        latest = new Date(d1.getFullYear(), d1.getMonth() + 1, latest.getDate(), latest.getHours(), latest.getMinutes())\r\n    }\r\n  }\r\n  let diff = (latest.getTime() - d1.getTime()) / 1000\r\n  diff = Math.floor(diff)\r\n  const weeks = Math.floor(diff / SEC_IN_WEEK)\r\n  diff = diff - weeks * SEC_IN_WEEK\r\n  const days = Math.floor(diff / SEC_IN_DAY)\r\n  diff = diff - days * SEC_IN_DAY\r\n  const hours = Math.floor(diff / 3600)\r\n  diff = diff - hours * 3600\r\n  const minutes = Math.floor(diff / 60)\r\n  return {\r\n    years,\r\n    months,\r\n    weeks,\r\n    days,\r\n    hours,\r\n    minutes,\r\n  } as ITimeDiff\r\n}\r\n// for API request params objects\r\n// to remove the indefined items from nested objects as well, using a recursive\r\n// используем рекурсивную функцию очистки объектов от undefined свойств\r\nexport const removeEmpty = (obj: any) => {\r\n  let candidat = obj as Object\r\n  if (Array.prototype.isPrototypeOf(candidat)) {\r\n    return obj\r\n  }\r\n  let newObj = {} as any\r\n  Object.keys(obj).forEach((key) => {\r\n    if (obj[key] === Object(obj[key])) newObj[key] = removeEmpty(obj[key])\r\n    else if (obj[key] !== undefined) newObj[key] = obj[key]\r\n  })\r\n  return newObj\r\n}\r\n","import { removeEmpty } from \"../../utils/functions\"\r\nimport { IAudit } from \"../IAudit\"\r\nimport { IDoctor } from \"../IDoctor\"\r\nimport Doctor from \"./Doctor\"\r\n\r\n//генерит API запрос на добавление врача\r\nexport const genCreateDoctorRequest = (doctor: IDoctor) => {\r\n  let _doctor = {\r\n    id: doctor.id,\r\n    guid: doctor.guid,\r\n    position_id: doctor.position?.id,\r\n    organization_id: doctor.organization?.id,\r\n    person_attributes: {\r\n      id: doctor.person?.id,\r\n      person_name_attributes: { ...doctor.person?.person_name },\r\n      SNILS: doctor.person?.SNILS,\r\n      address_attributes: doctor.person?.address ? { ...doctor.person?.address } : undefined,\r\n      contacts_attributes:\r\n        doctor.person?.contacts && doctor.person?.contacts?.length > 0\r\n          ? doctor.person?.contacts.map((item) => item)\r\n          : undefined,\r\n    },\r\n    null_flavor_attributes:\r\n      doctor.null_flavors && doctor.null_flavors?.length > 0 ? doctor.null_flavors.map((item) => item) : undefined,\r\n  }\r\n  _doctor = removeEmpty(_doctor)\r\n  return _doctor\r\n}\r\n\r\n//Стандартные настройки JSON рендеринга модели врача\r\nexport const DOCTOR_RENDER_OPTIONS = {\r\n  render_options: { only: [\"id\", \"guid\"], include: [\"position\", \"person\", \"organization\"] },\r\n  includes: [\"position\", \"person\", \"organization\"],\r\n  organization: { only: [\"id\", \"name\"] },\r\n  position: { only: [\"id\", \"name\"] },\r\n  person: { only: [\"id\", \"SNILS\"], include: [\"person_name\", \"address\", \"contacts\"] },\r\n}\r\n\r\n//генерит API запрос на обновление врача\r\nexport const genUpdateDoctorRequest = (oldValue: IDoctor, newValue: Doctor) => {\r\n  if (oldValue.id !== newValue.id) return false\r\n  let _request = { Doctor: {}, audits: [] as IAudit[] } as any\r\n  const createAudit = (audit: IAudit) => {\r\n    let _audits = _request.audits.filter((item: IAudit) => item.field !== audit.field)\r\n    if (_audits) {\r\n      _audits.push(audit)\r\n      _request.audits = _audits\r\n    } else _request.audits.push(audit) // keep only uniq changes\r\n  }\r\n  if (oldValue.position?.id !== newValue.position?.id) {\r\n    _request.Doctor.position_id = newValue.position?.id\r\n    createAudit({\r\n      field: \"position\",\r\n      before: oldValue.position?.id + \"\",\r\n      after: newValue.position?.id + \"\",\r\n      detail: `должность: ${oldValue.position?.name} -> ${newValue.position?.name}`,\r\n    } as IAudit)\r\n  }\r\n  let _person_attributes = {} as any\r\n  const oldPerson = oldValue.person\r\n  const newPerson = newValue.person\r\n  if (oldPerson?.SNILS !== newPerson?.SNILS) {\r\n    _person_attributes.SNILS = newPerson?.SNILS\r\n    createAudit({\r\n      field: \"person.SNILS\",\r\n      before: oldPerson?.SNILS,\r\n      after: newPerson?.SNILS,\r\n      detail: `СНИЛС: ${oldPerson?.SNILS} -> ${newPerson?.SNILS}`,\r\n    } as IAudit)\r\n  }\r\n  let _person_name_attributes = {} as any\r\n  const oldFIO = oldPerson?.person_name\r\n  const newFIO = newValue.person?.fio\r\n  if (!!oldFIO && !!newFIO) {\r\n    if (oldFIO.family !== newFIO.family) {\r\n      _person_name_attributes.family = newFIO.family\r\n      createAudit({\r\n        field: \"person.person_name.family\",\r\n        before: oldFIO.family,\r\n        after: newFIO.family,\r\n        detail: `фамилия: ${oldFIO.family} -> ${newFIO.family}`,\r\n      } as IAudit)\r\n    }\r\n    if (oldFIO.given_1 !== newFIO.given_1) {\r\n      _person_name_attributes.given_1 = newFIO.given_1\r\n      createAudit({\r\n        field: \"person.person_name.given_1\",\r\n        before: oldFIO.given_1,\r\n        after: newFIO.given_1,\r\n        detail: `имя: ${oldFIO.given_1} -> ${newFIO.given_1}`,\r\n      } as IAudit)\r\n    }\r\n    if (oldFIO.given_2 !== newFIO.given_2) {\r\n      _person_name_attributes.given_2 = newFIO.given_2\r\n      createAudit({\r\n        field: \"person.person_name.given_2\",\r\n        before: oldFIO.given_2,\r\n        after: newFIO.given_2,\r\n        detail: `Отчество: ${oldFIO.given_2} -> ${newFIO.given_2}`,\r\n      } as IAudit)\r\n    }\r\n  }\r\n  if (Object.keys(_person_name_attributes).length > 0)\r\n    if (newValue.person.fio)\r\n      _person_attributes.person_name_attributes = { id: newValue.person.fio.id, ..._person_name_attributes }\r\n  const oldAddress = oldPerson.address?.streetAddressLine\r\n  const newAddress = newPerson.address?.streetAddressLine\r\n  if (oldAddress !== newAddress) {\r\n    _person_attributes.address_attributes = newPerson.address\r\n    createAudit({\r\n      field: \"person.address\",\r\n      before: oldAddress,\r\n      after: newAddress,\r\n      detail: `адрес: ${oldAddress} -> ${newAddress}`,\r\n    } as IAudit)\r\n  }\r\n  const oldContacts = oldPerson.contacts?.reduce<string>((u, item) => `${u} ${item.telcom_value}`, \"\").trim()\r\n  const newContacts = newPerson.contacts?.reduce<string>((u, item) => `${u} ${item.telcom_value}`, \"\").trim()\r\n  if (oldContacts !== newContacts) {\r\n    _person_attributes.contacts_attributes = newPerson.contacts\r\n    createAudit({\r\n      field: \"person.contacts\",\r\n      before: oldContacts,\r\n      after: newContacts,\r\n      detail: `контакты: ${oldContacts} -> ${newContacts}`,\r\n    } as IAudit)\r\n  }\r\n  const oldNullFlavors = oldPerson.null_flavors\r\n    ?.reduce<string>((u, item) => `${u} ${item.parent_attr}${item.code}`, \"\")\r\n    .trim()\r\n  const newNullFlavors = newPerson.nullFlavors\r\n    ?.reduce<string>((u, item) => `${u} ${item.parent_attr}${item.code}`, \"\")\r\n    .trim()\r\n  if (oldNullFlavors !== newNullFlavors) {\r\n    _person_attributes.null_flavor_attributes = newPerson.null_flavors_attributes()\r\n    createAudit({\r\n      field: \"person.nullFlavors\",\r\n      before: oldNullFlavors,\r\n      after: newNullFlavors,\r\n      detail: `изменены причины отсутствия информации`,\r\n    } as IAudit)\r\n  }\r\n\r\n  if (Object.keys(_person_attributes).length > 0)\r\n    _request.Doctor.person_attributes = { id: oldPerson.id, ..._person_attributes }\r\n  if (Object.keys(_request.Doctor).length > 0) {\r\n    _request.Doctor.id = newValue.id\r\n    return _request\r\n  } else return false\r\n}\r\n","//All interactions with the API for working with the doctors model\r\n//Все взаимодействия с API для работы с моделью  врачей\r\n\r\nimport { AxiosResponse } from \"axios\"\r\nimport $api, { API_URL } from \"../http\"\r\nimport { IDoctor } from \"../models/IDoctor\"\r\nimport { IReferenceId } from \"../models/IReference\"\r\nimport { DOCTOR_RENDER_OPTIONS } from \"../models/FormsData/DoctorRequest\"\r\nimport { IDoctorR } from \"../models/requests/IDoctorR\"\r\n\r\nexport default class DoctorService {\r\n  //POST request for get doctor's list\r\n  static async getDoctors(query: any): Promise<AxiosResponse<IDoctor[]>> {\r\n    return $api.post(`${API_URL}model/Doctor/`, { ...query, offset: 0, limit: 100, ...DOCTOR_RENDER_OPTIONS })\r\n  }\r\n  //POST request for get list of pasible values for Doctor.position field\r\n  static async getPositions(query: any): Promise<AxiosResponse<IReferenceId[]>> {\r\n    return $api.post(`${API_URL}model/Position/`, { q: query, offset: 0, limit: 200 })\r\n  }\r\n  //POST request for add Doctor /REST_API/v1/model/Doctor/add\r\n  static async addDoctor(doctor: IDoctorR): Promise<AxiosResponse<IDoctor>> {\r\n    return $api.post(`${API_URL}model/Doctor/add`, {\r\n      Doctor: doctor,\r\n      ...DOCTOR_RENDER_OPTIONS,\r\n    })\r\n  }\r\n\r\n  //PUT request for update Doctor /REST_API/v1/model/Doctor/:id\r\n  static async updateDoctor(request: any): Promise<AxiosResponse<IDoctor>> {\r\n    return $api.put(`${API_URL}model/Doctor/${request.Doctor.id}`, {\r\n      ...request,\r\n      ...DOCTOR_RENDER_OPTIONS,\r\n    })\r\n  }\r\n  // DELETE request for remove Doctor /REST_API/v1/model/Doctor/:id\r\n  static async removeDoctor(doctor_id: number): Promise<AxiosResponse<IDoctor>> {\r\n    return $api.delete(`${API_URL}model/Doctor/${doctor_id}`)\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IAuthenticatorR } from \"../requests/IAuthenticatorR\"\r\nimport { IAuthenticator } from \"../responses/IAuthenticator\"\r\n\r\nexport default class Authenticator implements ISerializable {\r\n  private _id?: number | undefined\r\n  private _time?: Date | undefined\r\n  private _doctorID?: number | undefined\r\n  constructor(props: IAuthenticator) {\r\n    this._id = props.id\r\n    this._doctorID = props.doctor.id\r\n    if (props.time) this._time = new Date(props.time)\r\n    else this._time = new Date()\r\n    makeAutoObservable(this)\r\n  }\r\n  get time(): Date | undefined {\r\n    return this._time\r\n  }\r\n  set time(value: Date | undefined) {\r\n    this._time = value\r\n  }\r\n  get doctorID(): number | undefined {\r\n    return this._doctorID\r\n  }\r\n  set doctorID(value: number | undefined) {\r\n    this._doctorID = value\r\n  }\r\n  get id(): number | undefined {\r\n    return this._id\r\n  }\r\n\r\n  getAttributes(): IAuthenticatorR {\r\n    let _authenticator = { time: this._time } as IAuthenticatorR\r\n    if (this._id) _authenticator.id = this._id\r\n    if (this._doctorID) _authenticator.doctor_id = this._doctorID\r\n    return _authenticator\r\n  }\r\n}\r\n","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useEffect, useState} from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { NA, NULL_FLAVORS } from '../../utils/defaults'\r\nimport { IReference, IReferenceId } from '../../models/IReference'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { INullFlavorR } from '../../models/INullFlavor'\r\nimport { TRAFFIC_ACCIDENT } from '../../NSI/1.2.643.5.1.13.13.99.2.24'\r\nimport { PREGNANCY_CONNECTION } from '../../NSI/1.2.643.5.1.13.13.99.2.25'\r\nimport DoctorService from '../../services/DoctorService'\r\nimport Authenticator from '../../models/FormsData/Authenticator'\r\nimport { IAuthenticator } from '../../models/responses/IAuthenticator'\r\n\r\n const Section9: FC = () => {\r\n  const { userStore, certificateStore, layoutStore } = useContext(Context)\r\n   const certificate = certificateStore.cert \r\n  const [doctors, setDoctors] = useState<IReferenceId[] | null>(null)  \r\n  useEffect(()=>{\r\n    if (doctors===null && userStore.userInfo) {\r\n      //layoutStore.isLoading = true\r\n      DoctorService.getDoctors({       \r\n        q:{organization_id_eq: userStore.userInfo.organization.id}        \r\n      }).then(response=>{\r\n        const data = response.data.map(doctor=>{\r\n          if (!doctor.person || !doctor.person.person_name) return {id: doctor.id, name: doctor.position?.name } as IReferenceId\r\n          return {id: doctor.id, name: `${doctor.person.person_name.family} ${doctor.person.person_name.given_1} ${doctor.person.person_name.given_2} ${doctor.position?.name}`} as IReferenceId})\r\n        if (data) setDoctors(data)\r\n      }).catch((err)=>console.log('ошибка загрузки списка врачей'))//.finally(()=>layoutStore.isLoading=false)\r\n    }\r\n  },[doctors, layoutStore, userStore.userInfo])\r\n   \r\n  const optionCode = 'NA'\r\n  const options = NULL_FLAVORS.filter((item:IReference)=>optionCode.includes(item.code))  \r\n  \r\n  const header = () => {\r\n      return <span>Прочие характеристики причины смерти</span>\r\n    }\r\n  \r\n  const isTrafficAccident = !!certificate.trafficAccident || certificate.nullFlavors.findIndex((item)=>item.parent_attr==='traffic_accident')===-1\r\n  const isPregnancyConnection = !!certificate.pregnancyConnection || certificate.nullFlavors.findIndex((item)=>item.parent_attr==='pregnancy_connection')===-1  \r\n  const nullFlavorDropdnStyle = {minWidth:'210px', maxWidth:'500px', marginTop: '0.5rem', marginLeft: '-0.75rem'}\r\n  const customDropdnStyle = {minWidth:'210px', maxWidth:'500px', marginTop: '0.5rem', marginLeft: '-1.25rem'}\r\n  const customParagraphFieldStyle = {paddingTop: '0.1rem', width: '80%'} \r\n     \r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>23.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{width: '90%'}}>                                  \r\n                <NullFlavorWrapper paraNum  checked={isTrafficAccident}                                      \r\n                  label={<label htmlFor=\"trafficAccident\">В случае смерти в результате ДТП: смерть наступила –</label>}\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) certificate.trafficAccident = undefined                        \r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                    }} \r\n                  field={\r\n                    <Dropdown inputId=\"trafficAccident\" style={nullFlavorDropdnStyle} placeholder=\"Выбрать\"  \r\n                      options={TRAFFIC_ACCIDENT} optionLabel=\"name\" \r\n                      value={TRAFFIC_ACCIDENT.find((item)=> item.code === certificate.trafficAccident)} \r\n                      onChange={(e) =>certificate.trafficAccident =  e.value.code}                       \r\n                    />             \r\n                  }\r\n                  options={options} \r\n                  value={NA} \r\n                  nullFlavors={certificate.nullFlavors}  \r\n                  field_name=\"traffic_accident\"\r\n                />                               \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>24.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\"  \r\n              style={{width: '90%'}}>                                  \r\n                <NullFlavorWrapper paraNum  checked={isPregnancyConnection}                                      \r\n                  label={<label htmlFor=\"pregnancyConnection\"> В случае смерти беременной (независимо от срока и локализации) </label>}\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) {                        \r\n                        certificate.pregnancyConnection = undefined                        \r\n                      } \r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                    }} \r\n                  onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{\r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n                  field={\r\n                    <Dropdown inputId=\"pregnancyConnection\" style={nullFlavorDropdnStyle} placeholder=\"Выбрать\"  \r\n                      options={PREGNANCY_CONNECTION} optionLabel=\"name\" \r\n                      value={PREGNANCY_CONNECTION.find((item)=> item.code === certificate.pregnancyConnection)} \r\n                      onChange={(e) =>{\r\n                        certificate.pregnancyConnection = e.value.code}\r\n                      } \r\n                    />             \r\n                  }\r\n                  options={options} \r\n                  value={NA} \r\n                  nullFlavors={certificate.nullFlavors}  \r\n                  field_name=\"pregnancy_connection\"\r\n                />                               \r\n              </div>              \r\n            </div> \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%', paddingLeft:'0.5rem',fontWeight:600, fontSize: 'larger'}} >\r\n              Подписи \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}}>\r\n              <div className='paragraph p-mr-1'>25. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={customParagraphFieldStyle}>\r\n                <label htmlFor=\"author\">Врач (фельдшер, акушерка), заполнивший Медицинское свидетельство о смерти *</label>\r\n                <Dropdown inputId=\"author\"  placeholder=\"Выбрать\" style={customDropdnStyle}                   \r\n                  optionLabel=\"name\" autoFocus className=\"p-mb-2\"  options={doctors || []} \r\n                  value={doctors?.find(item=>item.id === certificate.author?.doctorID)} showClear             \r\n                  onChange={(e) =>{\r\n                    if (e.value) { \r\n                      certificate.author = new Authenticator({doctor: e.value} as IAuthenticator)                     \r\n                    } else certificate.author = undefined                       \r\n                  }} />\r\n                <label htmlFor=\"legalAuthenticator\">Руководитель медицинской организации *</label>\r\n                <Dropdown inputId=\"legalAuthenticator\"  placeholder=\"Выбрать\" style={customDropdnStyle} \r\n                  optionLabel=\"name\" options={doctors || []} showClear\r\n                  value={doctors?.find(item=>item.id === certificate.legalAuthenticator?.doctorID)}                \r\n                  onChange={(e) =>{\r\n                    if (e.value) { \r\n                      certificate.legalAuthenticator =  new Authenticator({doctor: e.value} as IAuthenticator)                     \r\n                    } else certificate.legalAuthenticator = undefined                   \r\n                  }} />  \r\n              </div>               \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}}>\r\n              <div className='paragraph p-mr-1'>26. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={customParagraphFieldStyle}>\r\n                <label htmlFor=\"authenticator\">Свидетельство проверено ответственным *</label>\r\n                <Dropdown inputId=\"authenticator\" placeholder=\"Выбрать\" style={customDropdnStyle} \r\n                  optionLabel=\"name\"  options={doctors || []} showClear\r\n                  value={doctors?.find(item=>item.id===certificate.authenticator?.doctorID)}                \r\n                  onChange={e=>{\r\n                    if (e.value) {\r\n                      certificate.authenticator =  new Authenticator({doctor: e.value} as IAuthenticator)                      \r\n                    } else certificate.authenticator = undefined\r\n                  }} \r\n                />\r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%', paddingLeft:'0.5rem'}} >\r\n              <em>* Заполнить в день фактического подписания бумажного носителя</em>\r\n            </div>     \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section9) ","import { makeAutoObservable } from \"mobx\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IParticipantR } from \"../requests/IParticipintR\"\r\nimport { IParticipant } from \"../responses/IParticipant\"\r\nimport Identity from \"./Identity\"\r\nimport Person from \"./Person\"\r\n\r\nexport default class Participant implements ISerializable {\r\n  private _id?: number | undefined\r\n  private _person: Person\r\n  private _receiptDate: Date\r\n  private _description?: string | undefined\r\n  private _identity?: Identity | undefined\r\n  private _original: boolean\r\n  private _oldOne?: IParticipant | undefined\r\n\r\n  constructor(props = {} as IParticipant) {\r\n    this._oldOne = { ...props }\r\n    if (props.person) this._person = new Person(props.person)\r\n    else this._person = new Person()\r\n    if (props.receipt_date) this._receiptDate = new Date(props.receipt_date)\r\n    else this._receiptDate = new Date()\r\n    if (props.identity) this._identity = new Identity(props.identity)\r\n    this._id = props.id\r\n    this._description = props.description\r\n    this._original = props.original === undefined ? true : props.original\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes() {\r\n    const _pr = {} as IParticipantR\r\n    if (this._id) _pr.id = this._id\r\n    _pr.description = this._description\r\n    _pr.original = this._original\r\n    _pr.receipt_date = this._receiptDate?.toDateString()\r\n    if (this._person) _pr.person_attributes = this._person.getAttributes()\r\n    if (this._identity) _pr.identity_attributes = this._identity.getAttributes()\r\n    return _pr\r\n  }\r\n  get oldOne(): IParticipant | undefined {\r\n    return this._oldOne\r\n  }\r\n  get original(): boolean {\r\n    return this._original\r\n  }\r\n  set original(value: boolean) {\r\n    this._original = value\r\n  }\r\n  get identity(): Identity | undefined {\r\n    return this._identity\r\n  }\r\n  set identity(value: Identity | undefined) {\r\n    this._identity = value\r\n  }\r\n  get description(): string | undefined {\r\n    return this._description\r\n  }\r\n  set description(value: string | undefined) {\r\n    this._description = value\r\n  }\r\n  get receiptDate(): Date {\r\n    return this._receiptDate\r\n  }\r\n  set receiptDate(value: Date) {\r\n    this._receiptDate = value\r\n  }\r\n  get person(): Person {\r\n    return this._person\r\n  }\r\n  set person(value: Person) {\r\n    this._person = value\r\n  }\r\n  get id(): number | undefined {\r\n    return this._id\r\n  }\r\n}\r\n","import { observer } from \"mobx-react-lite\"\r\nimport { Button } from \"primereact/button\"\r\nimport { Calendar } from \"primereact/calendar\"\r\nimport { Card } from \"primereact/card\"\r\nimport { CheckboxChangeParams } from \"primereact/checkbox\"\r\nimport { Dropdown } from \"primereact/dropdown\"\r\nimport { InputMask } from \"primereact/inputmask\"\r\nimport { InputText } from \"primereact/inputtext\"\r\nimport { InputTextarea } from \"primereact/inputtextarea\"\r\nimport { FC, useContext, useEffect, useState } from \"react\"\r\nimport { Context } from \"../..\"\r\nimport Identity from \"../../models/FormsData/Identity\"\r\nimport Participant from \"../../models/FormsData/Participant\"\r\nimport IIdentity from \"../../models/IIdentity\"\r\nimport { IPersonName } from \"../../models/IPersonName\"\r\nimport { ID_CARD_TYPES, NA, NULL_FLAVORS, PARTIPICIPANT_DATE_SUG, PARTIPICIPANT_FIO_SUG, PARTIPICIPANT_IDENTITY_SUG, PASSPORT_RF } from \"../../utils/defaults\"\r\nimport { inputsIdentity } from \"../inputs/inputsIdentity\"\r\nimport { PersonName } from \"../inputs/PersonName\"\r\nimport NullFlavorWrapper from \"../NullFlavorWrapper\"\r\n\r\nconst Section10: FC = () => {\r\n  const { certificateStore, suggestionsStore, layoutStore } = useContext(Context)\r\n  const certificate = certificateStore.cert \r\n  const [participant] = useState(certificate.participant || new Participant())\r\n  const person = participant.person \r\n  const identity = participant.identity\r\n  const [docChecked, setDocChecked] = useState(!!participant.identity)\r\n  const [dulValue, setDulValue]  = useState(ID_CARD_TYPES.find((item)=>item.code === identity?.identityCardType))\r\n  const header = () => {\r\n      return <span>Данные получателя свидетельства</span>\r\n  }  \r\n  useEffect(()=>{\r\n    if (!!participant.person.fio?.family && !!participant.person.fio?.given_1) \r\n    suggestionsStore.suggestions[PARTIPICIPANT_FIO_SUG].done = true\r\n  },[participant.person.fio?.family, participant.person.fio?.given_1, suggestionsStore.suggestions])\r\n  useEffect(()=>{\r\n    if (!!participant.receiptDate) \r\n    suggestionsStore.suggestions[PARTIPICIPANT_DATE_SUG].done = true\r\n  },[participant.receiptDate, suggestionsStore.suggestions])\r\n  useEffect(()=>{\r\n    if (!!participant.person.SNILS || !!participant.identity) \r\n    suggestionsStore.suggestions[PARTIPICIPANT_IDENTITY_SUG].done = true\r\n  },[participant.identity, participant.person.SNILS, suggestionsStore.suggestions])\r\n\r\n  const [seriesField, numberField, depCodeField] = inputsIdentity({dulValue, identity})\r\n  const buttonDisabled = !!certificate.participant || !(suggestionsStore.suggestions[PARTIPICIPANT_IDENTITY_SUG].done \r\n      && suggestionsStore.suggestions[PARTIPICIPANT_DATE_SUG].done\r\n      && suggestionsStore.suggestions[PARTIPICIPANT_FIO_SUG].done)\r\n  \r\n\r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header} style={{paddingLeft:'1rem'}}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">   \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">              \r\n              <div className='p-paragraph-field p-col-6'>\r\n                <label htmlFor=\"fio\">Фамилия, Имя, Отчество(при наличии)</label>\r\n                <PersonName personName={participant.person?.fio} submitted={false}\r\n                  onChange={(value: IPersonName)=>{                       \r\n                    participant.person.fio  = value\r\n                  }}  \r\n                />                   \r\n              </div>\r\n              <div className='p-paragraph-field p-col-5'>\r\n                <label htmlFor=\"description\">Кем приходится</label>\r\n                <InputText value={participant.description} \r\n                  placeholder=\"родств./пр-ль\"\r\n                  onChange={e=>participant.description = e.target.value}  \r\n                />                   \r\n              </div>\r\n              <div className='p-paragraph-field p-col-6'>\r\n                <label htmlFor=\"description\">Дата выдачи</label>\r\n                <Calendar id=\"dateBirth\" showIcon dateFormat='dd.mm.yy'\r\n                  locale='ru' mask='99.99.9999'                                          \r\n                  value={participant.receiptDate} \r\n                  onChange={(e)=>{\r\n                    if (e.target.value) participant.receiptDate = e.target.value as Date\r\n                  }}                         \r\n                />                   \r\n              </div>\r\n              <div className='p-paragraph-field p-col-4'> \r\n                <label htmlFor=\"snils\">СНИЛС</label> \r\n                <InputMask id=\"snils\"  \r\n                  type=\"text\" mask=\"999-999-999 99\"\r\n                  value={person?.SNILS} \r\n                  onChange={(e)=>{                     \r\n                    person.SNILS = e.value\r\n                  }}\r\n                />                             \r\n              </div>              \r\n            </div>           \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">              \r\n              <div className='p-paragraph-field p-mr-2 p-mb-2'>\r\n                <NullFlavorWrapper\r\n                  checked={docChecked} setCheck={(e: CheckboxChangeParams) => {\r\n                    if (e.checked) {\r\n                      participant.identity = new Identity({\r\n                      identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code,\r\n                    } as IIdentity)\r\n                    } else participant.identity = undefined\r\n                    setDocChecked(e.checked)\r\n                    } \r\n                  }\r\n                  label={<label htmlFor=\"identity_card_type\">Иной документ, удостоверяющей личность: </label>}\r\n                  field={<Dropdown id=\"identity_card_type\" value={dulValue}\r\n                    autoFocus options={ID_CARD_TYPES} optionLabel='name'\r\n                    onChange={(e) => {\r\n                      if (identity) identity.identityCardType = e.value.code\r\n                      else participant.identity = new Identity({ identity_card_type_id: e.value.code } as IIdentity)\r\n                      setDulValue(ID_CARD_TYPES.find((item) => item.code === e.value.code))\r\n                    }} />\r\n                  } \r\n                  options={[NULL_FLAVORS[NA]]}  value={NA}       \r\n                />             \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`ser_${docChecked}`} \r\n                style={{marginLeft:'1.5rem'}}>\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"series\">Серия</label>}\r\n                  checked={docChecked && \r\n                    participant.identity?.nullFlavors.findIndex(nf=>nf.parent_attr==='series')===-1} \r\n                  setCheck={(e:CheckboxChangeParams)=>{\r\n                    if (e.checked && participant.identity) participant.identity.series = ''\r\n                    else if (participant.identity) participant.identity.series = undefined                                    \r\n                  }}                 \r\n                  field={seriesField}\r\n                  field_name='series'\r\n                  options={[NULL_FLAVORS[NA]]} value={NA}                  \r\n                  lincked={!docChecked}                                   \r\n                />  \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`num_${docChecked}`}\r\n                style={{marginLeft:'1.5rem'}} >\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"docNumber\">Номер</label>}\r\n                  checked={docChecked}                 \r\n                  field={numberField}\r\n                  options={[NULL_FLAVORS[NA]]} value={NA} \r\n                  lincked                                      \r\n                />                    \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-3 p-mb-2\" key={`org_${docChecked}`} style={{marginLeft:'1.5rem'}} >\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"issueOrgName\">Кем выдан</label>}\r\n                  checked={docChecked}                   \r\n                  field={\r\n                    <InputTextarea id=\"issueOrgName\" value={identity?.issueOrgName} \r\n                      cols={65} rows={2}  \r\n                      onChange={(e)=>{if (identity) identity.issueOrgName = e.target.value }}\r\n                    />}\r\n                  options={[NULL_FLAVORS[NA]]} value={NA} \r\n                  lincked                                      \r\n                />                    \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{marginLeft:'1.5rem'}} key={`pdiv5_${docChecked}`}>\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"issueDate\">Когда выдан</label>}\r\n                  checked={docChecked}                   \r\n                  field={<Calendar  id=\"issueDate\" className=\"p-mr-2\" \r\n                    dateFormat={\"dd.mm.yy\"} \r\n                    locale=\"ru\" mask=\"99.99.9999\"                    \r\n                    value={identity?.issueOrgDate}\r\n                    onChange={(e)=>{if (identity) identity.issueOrgDate = e.target.value as Date | undefined}}\r\n                    showIcon />\r\n                  }                  \r\n                  options={[NULL_FLAVORS[NA]]} value={NA} \r\n                  lincked                                       \r\n                /> \r\n              </div>  \r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" \r\n                key={`code_${docChecked}`} style={{marginLeft:'1.5rem'}}> \r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"depCode\">Код подразделения</label>}\r\n                  checked={docChecked} \r\n                  setCheck={(e:CheckboxChangeParams)=>{\r\n                    if (e.checked && participant.identity) participant.identity.issueOrgCode = ''\r\n                    else if (participant.identity) participant.identity.issueOrgCode = undefined                                  \r\n                  }}                   \r\n                  field={depCodeField}\r\n                  options={[NULL_FLAVORS[NA]]} value={NA}                   \r\n                  lincked={!docChecked}\r\n                  field_name=\"issueOrgCode\"                                     \r\n                />                    \r\n              </div> \r\n              <Button type=\"button\" label=\"ВЫДАТЬ\" style={{height:'2.4rem'}}\r\n                className=\"p-button-raised p-button-success\"\r\n                disabled={buttonDisabled}\r\n                onClick={()=>{\r\n                  certificate.participant = participant\r\n                  certificate.issueDate = participant.receiptDate\r\n                  layoutStore.message = { severity: 'success', summary: 'Успешно', detail: 'Данные получателя введены, сохраните изменения, после чего будет возможна печать.', life: 3000 }\r\n                }}   \r\n              />             \r\n            </div>           \r\n           </div>           \r\n          </Card>\r\n        </>)\r\n\r\n}\r\nexport default observer(Section10)    ","import { Card } from 'primereact/card'\r\nimport { Column } from 'primereact/column'\r\nimport { DataTable } from 'primereact/datatable'\r\n\r\nimport '../styles/components/Calendar.css'\r\nimport '../styles/components/Divider.css'\r\nimport '../styles/components/Button.css'\r\nimport '../styles/pages/CertificatePage.css'\r\n\r\nimport { useContext, FC, useEffect, useRef, useState } from 'react'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { CERTIFICATE_ROUTE } from '../utils/consts'\r\nimport { Avatar } from 'primereact/avatar'\r\nimport { Badge } from 'primereact/badge'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport Section0 from '../components/c_sections/section_0'\r\nimport Section1 from '../components/c_sections/section_1'\r\nimport Section2 from '../components/c_sections/section_2'\r\nimport Section3 from '../components/c_sections/section_3'\r\nimport Section5 from '../components/c_sections/section_5'\r\nimport Section6 from '../components/c_sections/section_6'\r\nimport Section7 from '../components/c_sections/section_7'\r\nimport Section8 from '../components/c_sections/section_8'\r\nimport Section9 from '../components/c_sections/section_9'\r\nimport Section10 from '../components/c_sections/section_10'\r\nimport { Context } from '..'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { ISuggestions } from '../models/ISuggestions'\r\nimport { Toast, ToastMessageType } from 'primereact/toast'\r\nimport { CERT_TYPE_SUG, DEFAULT_ERROR_TOAST, PERSON_NAME_SUG } from '../utils/defaults'\r\nimport { ICertificate } from '../models/responses/ICertificate'\r\n\r\n\r\ninterface IMatch extends IRouteMatch {  \r\n  params: {id: string}\r\n}\r\ninterface CertificatePageProps extends IRouteProps { \r\n    match: IMatch  \r\n}\r\n\r\nconst CertificatePage: FC<CertificatePageProps> = (props: CertificatePageProps) => {  \r\n  const { certificateStore, userStore, layoutStore, suggestionsStore } = useContext(Context)     \r\n  const [certID, setCertID] = useState(Number.parseInt(props.match.params.id))\r\n  const [message, setMessage] = useState<ToastMessageType | null>(null)\r\n  useEffect(()=>{\r\n    if (!!message) {\r\n      layoutStore.message = message\r\n      setMessage(null)\r\n    }\r\n  },[layoutStore, message])\r\n  useEffect(()=>{    \r\n    //if (certID ===-1 && toast!==null && toast.current!==null) toast.current.show()\r\n    if (certID === certificateStore.cert.id || certID===-1) {\r\n      layoutStore.isLoading = false\r\n      return\r\n    }  \r\n    let _idx = -1\r\n    const cArray = certificateStore.certs   \r\n    if (cArray.length>0){            \r\n      _idx = cArray.findIndex(el=>el.id === certID)      \r\n    }\r\n    if (_idx>-1) { \r\n      certificateStore.select(_idx)\r\n      layoutStore.isLoading = false\r\n    } else {      \r\n      certificateStore.findById(certID, ()=>{layoutStore.isLoading = false})\r\n    }  \r\n  },[certID, certificateStore, layoutStore, certificateStore.cert.id])\r\n  useEffect(()=>{\r\n    if (!layoutStore.isLoading && !!layoutStore.message && !!toast.current) { \r\n      toast.current.show(layoutStore.message)\r\n      layoutStore.message = null\r\n    }\r\n  },[layoutStore, layoutStore.isLoading, layoutStore.message])\r\n  const toast = useRef<Toast>(null)  \r\n  const secton_router = ()=>{\r\n    switch (props.location.search) {\r\n      case \"?q=0\": return <Section0 />\r\n      case \"?q=1\": return <Section1 />\r\n      case \"?q=2\": return <Section2 />\r\n      case \"?q=3\": return <Section3 />      \r\n      case \"?q=5\": return <Section5 />\r\n      case \"?q=6\": return <Section6 />\r\n      case \"?q=7\": return <Section7 />\r\n      case \"?q=8\": return <Section8 />\r\n      case \"?q=9\": return <Section9 />\r\n      case \"?q=10\": return <Section10 />\r\n      default: return <Section0 /> \r\n    } \r\n  }    \r\n  const items = [        \r\n        {\r\n            label: 'Назад',\r\n            icon: 'pi pi-chevron-left',\r\n            command: () => {\r\n              let section = Number.parseInt(props.location.search[props.location.search.length-1])-1             \r\n              if (section===4) section--\r\n                if (section > -1) {               \r\n                userStore.history().push(`${CERTIFICATE_ROUTE}/${certificateStore.cert.id}?q=${section}`)\r\n              }\r\n            }\r\n        },\r\n        {\r\n            label: 'Удалить',\r\n            icon: 'pi pi-trash p-danger',\r\n            command: () => {\r\n              layoutStore.isLoading = true\r\n              const result = certificateStore.delete()\r\n              if (!result) {\r\n                layoutStore.isLoading = false\r\n              } else {\r\n                result.then(response=>{\r\n                  layoutStore.isLoading = false\r\n                  certificateStore.clean() \r\n                  setCertID(certificateStore.cert.id)                 \r\n                  setMessage({ severity: 'success', summary: 'Успешно', detail: 'Запись удалена', life: 3000 })                                 \r\n                })\r\n                .catch(reason=>{\r\n                  layoutStore.isLoading = false\r\n                  console.log(reason)\r\n                  setMessage((DEFAULT_ERROR_TOAST))\r\n                })                \r\n              }\r\n            }\r\n        },\r\n        {\r\n            label: 'Сохранить',\r\n            icon: 'pi pi-save p-success',\r\n            command: () => { \r\n              if (!suggestionsStore.suggestions[CERT_TYPE_SUG].done || !suggestionsStore.suggestions[PERSON_NAME_SUG].done ) {\r\n                 setMessage({severity:'warn', summary:'ОТКЛОНЕНО', detail:'Внесите минимальный набор данных: вид свидетельства, ФИО умершего(для идентифицированых)', life: 6000})\r\n                 return\r\n               }\r\n              layoutStore.isLoading = true\r\n              const result = certificateStore.save((data:ICertificate)=>{                                \r\n                  setMessage({ severity: 'success', summary: 'Успешно', detail: 'Изменения сохранены', life: 3000 })\r\n                  setCertID(data.id)                   \r\n              }, (message:string)=>{                         \r\n                setMessage(DEFAULT_ERROR_TOAST)\r\n                console.log(message)\r\n              }, userStore.userInfo?.organization.sm_code)\r\n              if (!result) {\r\n                console.log('нет юзера')\r\n                layoutStore.isLoading = false\r\n              } else result.finally(()=>{layoutStore.isLoading = false})               \r\n            }\r\n        },    \r\n        {\r\n            label: 'Создать',\r\n            icon: 'pi pi-plus',\r\n            command: () => { \r\n              try {\r\n                certificateStore.createNew()\r\n                setCertID(-1)      \r\n                setMessage({ severity: 'success', summary: 'Пустое  свидетельство создано!', detail: 'Внесите минимальные изменения и сохраните, чтоб получить номер', life: 3000 })                   \r\n              } catch { \r\n                setMessage(DEFAULT_ERROR_TOAST)\r\n              }\r\n            }  \r\n        },\r\n        {\r\n            label: 'Заменить',\r\n            icon: 'pi pi-sync',            \r\n            command: () => { \r\n              if (certificateStore.cert.id < 0 || !certificateStore.cert.issueDate) {\r\n                setMessage({severity:'warn', summary:'ОТКЛОНЕНО', detail:'Замена возможна только для выданных свидетельств'})\r\n              return  \r\n              }\r\n              try {\r\n                certificateStore.replace()\r\n                setCertID(-1) \r\n                setMessage({ severity: 'success', summary: 'Cвидетельство заменено!', detail: 'Проверьте вид и сохраните, чтоб получить номер', life: 3000 })                        \r\n              } catch { \r\n                setMessage(DEFAULT_ERROR_TOAST)\r\n              }\r\n            }  \r\n        },\r\n        {\r\n            label: 'Далее',\r\n            icon: 'pi pi-chevron-right',\r\n            command: () => {\r\n              let section = Number.parseInt(props.location.search[props.location.search.length-1])+1              \r\n              if (section===4) section++\r\n              if (section > -1) {\r\n                userStore.history().push(`${CERTIFICATE_ROUTE}/${certificateStore.cert.id}?q=${section}`)\r\n              } \r\n            }\r\n        },        \r\n        \r\n\r\n    ]\r\n  const doneBodyTemplate = (rowData:any) => {\r\n        return rowData.done ? <Avatar icon=\"pi pi-check\" shape=\"circle\" style={{ color: 'rgb(104 159 56)'}}/>\r\n        : ''\r\n  }  \r\n  const rowClass = (data:any) => {\r\n    return {\r\n      'p-suggestion-actual': !data.done\r\n    }\r\n  } \r\n  const sugCount = suggestionsStore.redSuggestionsCount() \r\n  const suggestionHeader = () => {    \r\n    const avatar = sugCount === 0 ? <Avatar icon=\"pi pi-check\" shape=\"circle\" style={{ height:'1.5rem', width: '1.5rem',backgroundColor: 'rgb(104 159 56)', color: 'white'}}/> : <Badge value={sugCount}  style={{ backgroundColor: 'rgb(204, 0, 0)', color: 'white', marginLeft: '4px'}}/>\r\n    return <><span>Контроль заполнения</span>{avatar}</>\r\n  }\r\n  const suggestions = suggestionsStore.suggestions\r\n    .filter((item:ISuggestions) =>\r\n    item.section === props.location.search.slice(3))\r\n  \r\n  const layoutParams = {\r\n    title: 'Медицинское свидетельство о смерти',     \r\n    url: `${CERTIFICATE_ROUTE}/${certID}${props.location.search}`,\r\n    content:(<>      \r\n      <div className=\"p-d-flex p-jc-center\" >        \r\n        {secton_router()}        \r\n        <Card className=\"p-mr-2 p-mb-2 p-suggestion\"\r\n         key={`p_sug_${sugCount}`} header={suggestionHeader}>                        \r\n            <DataTable className=\"p-datatable-sm\" rowClassName={rowClass} \r\n            value={suggestions} responsiveLayout=\"scroll\">\r\n              <Column field=\"code\" header=\"Код\"></Column>\r\n              <Column field=\"suggestion\" header=\"Проверка\"></Column>\r\n              <Column body={doneBodyTemplate}></Column>\r\n            </DataTable> \r\n        </Card>\r\n      </div>   \r\n      <Toast ref={toast} />   \r\n    </>),\r\n    actionItems: items\r\n  } \r\n  return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}\r\nexport default observer(CertificatePage) ","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IDoctor } from \"../IDoctor\"\r\nimport { IReferenceId } from \"../IReference\"\r\nimport { IDoctorR } from \"../requests/IDoctorR\"\r\nimport Person from \"./Person\"\r\n\r\nexport default class Doctor implements ISerializable {\r\n  private _id?: number\r\n  private _person: Person\r\n  private _position?: IReferenceId | undefined\r\n  private _organization?: IReferenceId | undefined\r\n  private _guid: string\r\n  constructor(props = {} as IDoctor) {\r\n    this._id = props.id\r\n    this._guid = props.guid || uuidv4()\r\n    this._person = props.person ? new Person(props.person) : new Person()\r\n    this._organization = props.organization || undefined\r\n    this._position = props.position || undefined\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes(): IDoctorR {\r\n    let _doctor = { guid: this._guid } as IDoctorR\r\n    if (this._id) _doctor.id = this._id\r\n    if (this._person) _doctor.person_attributes = this._person.getAttributes()\r\n    if (this._organization) _doctor.organization_id = this._organization.id\r\n    if (this._position) _doctor.position_id = this._position.id\r\n    return _doctor\r\n  }\r\n  get id() {\r\n    return this._id\r\n  }\r\n  set id(id: number | undefined) {\r\n    this._id = id\r\n  }\r\n  get person() {\r\n    return this._person\r\n  }\r\n\r\n  get guid() {\r\n    return this._guid\r\n  }\r\n  get position(): IReferenceId | undefined {\r\n    return this._position\r\n  }\r\n  set position(value: IReferenceId | undefined) {\r\n    this._position = value\r\n  }\r\n  get organization(): IReferenceId | undefined {\r\n    return this._organization\r\n  }\r\n  set organization(value: IReferenceId | undefined) {\r\n    this._organization = value\r\n  }\r\n}\r\n","\r\nimport React, { useState, useEffect, useRef, useContext, FC } from 'react'\r\nimport { classNames } from 'primereact/utils'\r\nimport { DataTable } from 'primereact/datatable'\r\nimport { Column } from 'primereact/column'\r\nimport { Toast } from 'primereact/toast'\r\nimport { Button } from 'primereact/button'\r\nimport { Toolbar } from 'primereact/toolbar'\r\nimport { Dialog } from 'primereact/dialog'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { Context } from '..'\r\nimport { IDoctor } from '../models/IDoctor'\r\nimport DoctorService from \"../services/DoctorService\"\r\nimport '../styles/components/Toolbar.css'\r\nimport '../styles/components/Dialog.css'\r\nimport '../styles/components/Toast.css'\r\nimport '../styles/components/AutoComplete.css'\r\nimport { InputMask } from 'primereact/inputmask'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { DESTROY_OPTION, DOCTORS_ROUTE } from '../utils/consts'\r\nimport { IContact } from '../models/IContact'\r\nimport { IReferenceId } from '../models/IReference'\r\nimport { AutoComplete } from 'primereact/autocomplete'\r\nimport { DEFAULT_ERROR_TOAST } from '../utils/defaults'\r\nimport Address from '../models/FormsData/Address'\r\nimport { IPerson } from '../models/IPerson'\r\nimport { genUpdateDoctorRequest } from '../models/FormsData/DoctorRequest'\r\nimport InputAddress from '../components/inputs/InputAddress'\r\nimport AddressDialog from '../components/dialogs/AddressDialog'\r\nimport Doctor from '../models/FormsData/Doctor'\r\nimport { DEFAULT_ADDRESS, IAddressR } from '../models/requests/IAddressR'\r\nimport { getOneLinePersonName, IPersonName } from '../models/IPersonName'\r\nimport { PersonName } from '../components/inputs/PersonName'\r\n\r\nconst DoctorsPage: FC = () => {    \r\n    const {addressStore, userStore} = useContext(Context)\r\n    let emptyDoctor = {\r\n        organization: userStore.userInfo?.organization,\r\n        guid: uuidv4(),       \r\n        person: { person_name: {family:'Тестов', given_1:'Тест'}, \r\n          contacts:[] as IContact[],\r\n          SNILS: '456-145-154 25'\r\n          } as IPerson        \r\n    } as IDoctor\r\n    const [doctor, setDoctor] = useState(new Doctor(emptyDoctor))\r\n    const [doctors, setDoctors] = useState<IDoctor[]>([])\r\n    const [doctorDialog, setDoctorDialog] = useState(false)\r\n    const [deleteDoctorDialog, setDeleteDoctorDialog] = useState(false)\r\n    const [deleteDoctorsDialog, setDeleteDoctorsDialog] = useState(false)    \r\n    const [selectedDoctors, setSelectedDoctors] = useState<IDoctor[]>([])\r\n    const [submitted, setSubmitted] = useState(false)   \r\n    const [email, setEmail] = useState<IContact>({telcom_value:'', main:false} as IContact) \r\n    const [phone, setPhone] = useState<IContact>({telcom_value:'', main:true} as IContact)\r\n    const [position, setPosition] = useState('')\r\n    const [positions, setPositions] = useState<IReferenceId[]>([])\r\n    const toast = useRef<Toast>(null)\r\n    const dt = useRef(null)\r\n     \r\n\r\n    useEffect(() => {      \r\n      if (userStore && userStore.userInfo) \r\n      DoctorService.getDoctors({       \r\n        q:{organization_id_eq: userStore.userInfo.organization.id}        \r\n      })\r\n      .then(data => {        \r\n        setDoctors(data.data)\r\n      })\r\n      .catch(()=>setDoctors([]))\r\n    }, [userStore.userInfo]) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    const  getPositions = (event: { query: string })=>{\r\n        const option = {} as any\r\n        if (event.query.trim().length>0) option.name_cont = event.query.trim()      \r\n        DoctorService.getPositions(option).then(response=>{\r\n            if (response.data.length>0) setPositions(response.data)\r\n            else setPositions([])        \r\n        }).catch((reason)=>console.log(reason))    \r\n    }\r\n\r\n    const openNew = () => {        \r\n        if (doctor.id) setDoctor(new Doctor(emptyDoctor))\r\n        addressStore.address = new Address(DEFAULT_ADDRESS)\r\n        setSubmitted(false)\r\n        setDoctorDialog(true)\r\n        setEmail({telcom_value:'', main:false} as IContact)\r\n        setPhone({telcom_value:'', main:true} as IContact)\r\n        setPosition('')\r\n    }\r\n\r\n    const hideDialog = () => {\r\n        setSubmitted(false);\r\n        setDoctorDialog(false);\r\n    }\r\n\r\n    const hideDeleteDoctorDialog = () => {\r\n        setDeleteDoctorDialog(false)\r\n    }\r\n\r\n    const hideDeleteDoctorsDialog = () => {\r\n        setDeleteDoctorsDialog(false)\r\n    }\r\n\r\n    const saveDoctor = () => {\r\n        setSubmitted(true)\r\n        console.log('doctor2',doctor)\r\n        if (doctor.person?.fio?.family.trim() && doctor.person?.SNILS && doctor.position) {\r\n            let _doctors = [...doctors]\r\n            onContactChange(phone)\r\n            onContactChange(email)  \r\n            if (doctor.id) { \r\n              const index = findIndexById(doctor.id)\r\n              const request = genUpdateDoctorRequest(_doctors[index], doctor)\r\n              if (request) DoctorService.updateDoctor(request).then((response)=>{                \r\n                _doctors[index] = response.data\r\n                setDoctorDialog(false)\r\n                setDoctors(_doctors)\r\n                if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Успешно', detail: 'Запись обновлена', life: 3000 })\r\n              }).catch((reason)=>{\r\n                console.log('reason',reason)\r\n                setDoctorDialog(false)\r\n                if (toast!==null && toast.current!==null) \r\n                  toast.current.show(DEFAULT_ERROR_TOAST)\r\n              })\r\n              else {\r\n                if (toast!==null && toast.current!==null) toast.current.show({ severity: 'info', summary: 'Отклонено', detail: 'Изменения отсутствуют', life: 3000 })\r\n                setDoctorDialog(false)\r\n              }\r\n            } else {               \r\n              DoctorService.addDoctor(doctor.getAttributes()).then((response)=>{\r\n                if (response.data) {                  \r\n                  _doctors.push(response.data)\r\n                  setDoctors(_doctors)\r\n                  setDoctorDialog(false)                            \r\n                  setEmail({telcom_value:'', main:false} as IContact)\r\n                  setPhone({telcom_value:'', main:true} as IContact)\r\n                  setPosition('')\r\n                  if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Успешно', detail: 'Запись добавлена', life: 3000 })\r\n                }  \r\n              }).catch((reason)=>{\r\n                console.log('reason',reason)\r\n                setDoctorDialog(false)\r\n                if (toast!==null && toast.current!==null) \r\n                  toast.current.show(DEFAULT_ERROR_TOAST)\r\n              })\r\n            }\r\n          \r\n        }\r\n    }\r\n\r\n    const editDoctor = (_doctor: IDoctor) => {        \r\n        setPhone({telcom_value:'', main:true} as IContact)\r\n        setEmail({telcom_value:'', main:false} as IContact)        \r\n        if (_doctor.id !== doctor.id) setDoctor(new Doctor(_doctor))\r\n        doctor.person.contacts?.forEach((item)=>{if (item.main) setPhone({...item})\r\n        else setEmail({...item, telcom_value: item.telcom_value.replace('mailto:','')})})        \r\n        //addressStore.address = new Address(doctor.person.address || DEFAULT_ADDRESS)         \r\n        setPosition(doctor.position?.name || '')\r\n        setDoctorDialog(true)        \r\n    }\r\n\r\n    const confirmDeleteDoctor = (_doctor: IDoctor) => {\r\n        if (_doctor.id !== doctor.id) setDoctor(new Doctor(_doctor))\r\n        setDeleteDoctorDialog(true)\r\n    }\r\n\r\n    const deleteDoctor = () => {\r\n        if (doctor.id) DoctorService.removeDoctor(doctor.id).then(response=>{\r\n          let _doctors = doctors.filter(val => val.id !== doctor.id)\r\n          setDoctors(_doctors)\r\n          setDeleteDoctorDialog(false)\r\n          setDoctor(new Doctor(emptyDoctor))\r\n          if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Успешно', detail: 'Запись удалена', life: 3000 })\r\n        }).catch(reason=>{\r\n          console.log('reason',reason)\r\n          if (toast!==null && toast.current!==null) \r\n                  toast.current.show(DEFAULT_ERROR_TOAST)\r\n        })        \r\n    }\r\n    const findIndexById = (id:number | undefined) => {        \r\n        return doctors.findIndex((element)=>element.id === id)\r\n    }    \r\n\r\n    const confirmDeleteSelected = () => {\r\n        setDeleteDoctorsDialog(true);\r\n    }\r\n\r\n    const deleteSelectedDoctors = () => {\r\n        let _doctors = doctors.filter(val => !selectedDoctors.includes(val))\r\n        setDoctors(_doctors);\r\n        setDeleteDoctorsDialog(false);\r\n        setSelectedDoctors([]);\r\n        if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Удачно', detail: 'Записи удалены', life: 3000 });\r\n    }      \r\n\r\n    // Обработчик изменения контактов      \r\n    const onContactChange = (contact: IContact) => {   \r\n      let _contact = contact.telcom_value==='' ?\r\n      (contact.id ? {...contact,...DESTROY_OPTION} : {...contact}) :    \r\n      (contact.id ? {id:contact.id, parent_guid: contact.parent_guid, telcom_use: contact.telcom_use, telcom_value: contact.telcom_value, main: contact.main} : {...contact}) \r\n      if (doctor.person.contacts === undefined) doctor.person.contacts = []\r\n      if (_contact.id) {        \r\n          const idx = doctor.person.contacts.findIndex(item=>item.id===_contact.id)  \r\n          if (idx>-1) doctor.person.contacts[idx] = _contact        \r\n      } else doctor.person.contacts.push(_contact)       \r\n    } \r\n\r\n    const rightToolbarTemplate = () => {\r\n      return (\r\n        <React.Fragment>                \r\n          <Button  icon=\"pi pi-plus\" label=\"ДОБАВИТЬ\" className=\"p-button-success p-mr-2\" onClick={openNew} />\r\n          <Button  icon=\"pi pi-trash\" label=\"УДАЛИТЬ\" className=\"p-button-danger\" onClick={confirmDeleteSelected} disabled={!selectedDoctors || !selectedDoctors.length} />\r\n        </React.Fragment>\r\n      )\r\n    }\r\n\r\n    const actionBodyTemplate = (rowData: IDoctor) => {\r\n        return (\r\n            <React.Fragment>\r\n                <Button icon=\"pi pi-pencil\" className=\"p-button-rounded p-button-success p-mr-2\" onClick={() => editDoctor(rowData)} />\r\n                <Button icon=\"pi pi-trash\" className=\"p-button-rounded p-button-warning\" onClick={() => confirmDeleteDoctor(rowData)} />\r\n            </React.Fragment>\r\n        )\r\n    }\r\n    \r\n    const doctorDialogFooter = (\r\n        <React.Fragment>\r\n            <Button label=\"ОТМЕНА\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDialog} />\r\n            <Button label=\"ВНЕСТИ\" icon=\"pi pi-check\" className=\"p-button-text p-button-success\" onClick={saveDoctor} />\r\n        </React.Fragment>\r\n    )\r\n    const deleteDoctorDialogFooter = (\r\n        <React.Fragment>\r\n            <Button label=\"НЕТ\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDeleteDoctorDialog} />\r\n            <Button label=\"ДА\" icon=\"pi pi-check\" className=\"p-button-text p-button-warning\" onClick={deleteDoctor} />\r\n        </React.Fragment>\r\n    )\r\n    const deleteDoctorsDialogFooter = (\r\n        <React.Fragment>\r\n            <Button label=\"НЕТ\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDeleteDoctorsDialog} />\r\n            <Button label=\"ДА\" icon=\"pi pi-check\" className=\"p-button-text p-button-warning\" onClick={deleteSelectedDoctors} />\r\n        </React.Fragment>\r\n    )\r\n    const fioBodyTemplate = (row: IDoctor)=>{\r\n      const fio = row.person?.person_name      \r\n      const result = getOneLinePersonName(fio)\r\n      return <>{result}</>\r\n    }  \r\n    const layoutParams = {\r\n        title: 'Врачи',     \r\n        url: DOCTORS_ROUTE,\r\n        content:\r\n        <div>\r\n            <Toast ref={toast} />\r\n            <div className=\"card\">\r\n                <Toolbar className=\"p-mb-4\" right={rightToolbarTemplate}></Toolbar>\r\n                <DataTable ref={dt} value={doctors} selection={selectedDoctors} onSelectionChange={(e) => setSelectedDoctors(e.value)} responsiveLayout=\"scroll\"\r\n                    dataKey=\"id\" >\r\n                    <Column selectionMode=\"multiple\" headerStyle={{ width: '3rem' }} exportable={false}></Column>                    \r\n                    <Column  header=\"ФИО\" body={fioBodyTemplate}  style={{ minWidth: '10rem' }}></Column>\r\n                    <Column field=\"position.name\" header=\"Должность\" ></Column>\r\n                    <Column field=\"person.SNILS\" header=\"СНИЛС\" ></Column>                    \r\n                    <Column body={actionBodyTemplate} exportable={false} style={{ minWidth: '8rem' }}></Column>\r\n                </DataTable>\r\n            </div>\r\n\r\n            <Dialog visible={doctorDialog} style={{ width: '800px' }} header=\"Данные врача\" modal \r\n             footer={doctorDialogFooter} onHide={hideDialog} >   \r\n               <div className='p-fluid p-formgrid p-grid'> \r\n                <div className=\"p-field p-col-12 p-md-6\">\r\n                    <label htmlFor=\"fio\">Фамилия, Имя, Отчество(при наличии)</label>\r\n                    <PersonName personName={doctor.person?.fio} submitted={submitted}\r\n                      onChange={(value: IPersonName)=>{                       \r\n                        if (doctor.person) doctor.person.fio  = value\r\n                      }}  \r\n                    />                   \r\n                </div>                \r\n                <div className=\"p-field  p-col-12 p-md-3\">\r\n                    <label htmlFor=\"snils\">СНИЛС</label>\r\n                    <InputMask id=\"snils\"  \r\n                      type=\"text\" mask=\"999-999-999 99\"\r\n                      value={doctor.person.SNILS} \r\n                      onChange={(e)=>{ \r\n                        doctor.person.SNILS = e.target.value  \r\n                        }} \r\n                      required className={classNames({ 'p-invalid': submitted && !doctor.person?.SNILS})}\r\n                    />\r\n                    {submitted && !doctor.person?.SNILS && <small className=\"p-error\">СНИЛС некорректен.</small>}\r\n                </div>\r\n                <div className=\"p-field  p-col-12 p-md-4\">\r\n                    <label htmlFor=\"position\">Должность</label>\r\n                    <AutoComplete id=\"position\" suggestions={positions} field=\"name\"\r\n                      value={doctor.position || position } delay={1000} dropdown \r\n                      completeMethod={getPositions}\r\n                      onChange={(e)=>{ \r\n                        console.log('e.value',e.value)\r\n                        if (e.value.name) { \r\n                          doctor.position = e.value\r\n                          setPosition(e.value.name) \r\n                        } else setPosition(e.value)   \r\n                       }}  \r\n                        className={classNames({ 'p-invalid': submitted && !doctor.position})}\r\n                    />\r\n                    {submitted && !doctor.position && <small className=\"p-error\">Должность должна быть указана.</small>}\r\n                </div>\r\n                <div className=\"p-field  p-col-12 p-md-4\">\r\n                    <label htmlFor=\"phone\">телефон</label>\r\n                    <InputMask id=\"phone\"  \r\n                      type=\"text\" mask=\"tel:+79999999999\"\r\n                      value={phone.telcom_value} \r\n                      onChange={(e)=>{setPhone({...phone, telcom_value: e.target.value})  \r\n                        }} required className={classNames({ 'p-invalid': submitted && !/tel:\\+?[-0-9().]+/i.test(phone.telcom_value)})}\r\n                    />\r\n                    {submitted && !/tel:\\+?[-0-9().]+/i.test(phone.telcom_value) && <small className=\"p-error\">тел.номер некорректен!</small>}\r\n                </div>\r\n                <div className=\"p-field  p-col-12 p-md-4\">\r\n                    <label htmlFor=\"email\">email</label>\r\n                    <InputText id=\"email\" type=\"text\" \r\n                      value={email.telcom_value} \r\n                      onChange={(e)=>{  \r\n                        setEmail({...email, telcom_value:e.target.value})  \r\n                        }} className={classNames({ 'p-invalid': submitted && !(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='')})}\r\n                    />\r\n                    {submitted && !(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='') && <small className=\"p-error\">Неверный email</small>}\r\n                </div>\r\n                <InputAddress className=\"p-col-12\" submitted={submitted} \r\n                  label='Адрес проживания'\r\n                  value={doctor.person.address || DEFAULT_ADDRESS} strictly \r\n                  onClear={(value: IAddressR)=>{\r\n                    doctor.person.address = {...value}                    \r\n                  }}\r\n                  onChange={()=>doctor.person.address = {...addressStore.addressProps()}} \r\n                />    \r\n               </div>               \r\n            </Dialog>\r\n            <AddressDialog />\r\n            <Dialog visible={deleteDoctorDialog} style={{ width: '450px' }} header=\"Подтвердите\" modal footer={deleteDoctorDialogFooter} onHide={hideDeleteDoctorDialog}>\r\n                <div className=\"confirmation-content\">\r\n                    <i className=\"pi pi-exclamation-triangle p-mr-3\" style={{ fontSize: '2rem'}} />\r\n                    {doctor && <span>Вы действительно хотите удалить <b>{fioBodyTemplate}</b>?</span>}\r\n                </div>\r\n            </Dialog>\r\n\r\n            <Dialog visible={deleteDoctorsDialog} style={{ width: '450px' }} header=\"Подтвердите\" modal footer={deleteDoctorsDialogFooter} onHide={hideDeleteDoctorsDialog}>\r\n                <div className=\"confirmation-content\">\r\n                    <i className=\"pi pi-exclamation-triangle p-mr-3\" style={{ fontSize: '2rem'}} />\r\n                    {doctor && <span>Вы действительно хотите удалить выбранные записи?</span>}\r\n                </div>\r\n            </Dialog>\r\n        </div>\r\n    }\r\n    return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}\r\nexport default observer(DoctorsPage)               ","//Пол пациента\r\n//OID: 1.2.643.5.1.13.13.11.1040 Версия: 2.1\r\nexport const GENDERS = [\r\n  { code: 1, name: \"Мужской\" },\r\n  { code: 2, name: \"Женский\" },\r\n]\r\n","import $api, { API_URL } from \"../http\"\r\nimport { AxiosResponse } from \"axios\"\r\nimport { IReferenceId } from \"../models/IReference\"\r\nimport { IOrganization } from \"../models/IOrganization\"\r\n\r\nconst ORGANIZATION_RENDER_OPTIONS = {\r\n  render_options: { except: [\"updated_at\", \"old_oid\"], include: [\"address\", \"contacts\"] },\r\n  includes: [\"address\", \"contacts\"],\r\n  address: { except: [\"updated_at\", \"created_at\"], include: [\"null_flavors\"] },\r\n}\r\nexport default class OrganizationService {\r\n  // GET from public endpoint /auth/organizations/\r\n  static async getOrganizations(): Promise<AxiosResponse<{ organizations: IReferenceId[] }>> {\r\n    return $api.get(`${API_URL}auth/organizations/`)\r\n  }\r\n\r\n  // POST /show/model/Organization/:id from UEC endpoint\r\n  static async getOrganization(id: string): Promise<AxiosResponse<IOrganization>> {\r\n    return $api.post(`${API_URL}/show/model/Organization/${id}`, ORGANIZATION_RENDER_OPTIONS)\r\n  }\r\n  //PUT request for update Doctor /REST_API/v1/model/Doctor/:id\r\n  static async updateOrganization(request: any): Promise<AxiosResponse<IOrganization>> {\r\n    return $api.put(`${API_URL}model/Organization/${request.Organization.id}`, {\r\n      ...request,\r\n      ...ORGANIZATION_RENDER_OPTIONS,\r\n    })\r\n  }\r\n}\r\n","import { observer } from 'mobx-react-lite'\r\nimport { Context } from '..'\r\nimport { MultiSelect } from 'primereact/multiselect'\r\nimport { Column} from 'primereact/column'\r\nimport { DataTable, DataTableFilterMatchModeType, DataTableFilterMeta, DataTableSortParams } from 'primereact/datatable'\r\nimport { Toast } from 'primereact/toast'\r\nimport { FC, useContext, useEffect, useRef, useState } from 'react'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { CERTIFICATE_ROUTE, DIRECTION, LIST_ROUTE, RunsackFilterMatchMode } from '../utils/consts'\r\nimport { ICertificate } from '../models/responses/ICertificate'\r\nimport React from 'react'\r\nimport { Button } from 'primereact/button'\r\nimport { GENDERS } from '../NSI/1.2.643.5.1.13.13.11.1040'\r\nimport { DEAD_PLACE_TYPES } from '../NSI/1.2.643.5.1.13.13.99.2.20'\r\nimport { BASIS_DERMINING } from '../NSI/1.2.643.5.1.13.13.99.2.23'\r\nimport '../styles/components/DataTable.css'\r\nimport '../styles/components/MultiSelect.css'\r\nimport { CERT_TYPES } from '../NSI/1.2.643.5.1.13.13.99.2.19'\r\nimport { getOneLinePersonName } from '../models/IPersonName'\r\nimport  PrimeReact, {FilterMatchMode}  from 'primereact/api'\r\nimport { IReference, IReferenceId } from '../models/IReference'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport OrganizationService from '../services/OrganizationService'\r\n\r\ntype ListPageProps = {}\r\n\r\nconst ListPage: FC<ListPageProps> = (props: ListPageProps) => {\r\n  const {certificateStore, userStore} = useContext(Context)  \r\n  const [lazyLoading, setLazyLoading] = useState(false)\r\n  const [sortField, setSortField] = useState<string>('')\r\n  const [sortOrder, setSortOrder] = useState<-1 | 0 | 1>(0)\r\n  const [filters, setFilters] = useState<DataTableFilterMeta | undefined>()\r\n  const [organizations, setOrganizations] = useState<IReferenceId[] | null>(null)\r\n  const isSuperUser = userStore.userInfo?.roles.includes('MIAC') || userStore.userInfo?.roles.includes('ADMIN')\r\n  \r\n  useEffect(()=>{\r\n    if (organizations===null && isSuperUser) OrganizationService.getOrganizations().then(response=>\r\n      setOrganizations(response.data.organizations)\r\n    ).catch(()=>{\r\n      setOrganizations([])      \r\n    })},[isSuperUser, organizations])\r\n    \r\n  PrimeReact.locale = 'ru'\r\n  const toast = useRef<Toast>(null)\r\n  const dt = useRef(null)  \r\n\r\n  const [selected, setSelected] = useState<ICertificate | undefined>()\r\n\r\n  const initFilters = () => {\r\n        setFilters({\r\n        'basis_determining': { value: null, matchMode: FilterMatchMode.IN },  \r\n        'custodian_id': { value: null, matchMode: FilterMatchMode.IN },            \r\n        'number': { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.STARTS_WITH }]}, \r\n        'patient_fio': { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.CONTAINS }]},\r\n        'primory_reason' : { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.GREATER_THAN_OR_EQUAL_TO},{ value: null, matchMode: FilterMatchMode.LESS_THAN_OR_EQUAL_TO}]},\r\n        'patient_birth_date' : { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.DATE_AFTER},{ value: null, matchMode: FilterMatchMode.DATE_BEFORE}]},\r\n        'patient_death_date' : { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.DATE_AFTER},{ value: null, matchMode: FilterMatchMode.DATE_BEFORE}]},\r\n        'issue_date': { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.DATE_AFTER},{ value: null, matchMode: FilterMatchMode.DATE_BEFORE}]},   \r\n        'death_place': { value: null, matchMode: FilterMatchMode.IN },        \r\n        })        \r\n    }\r\n   \r\n    useEffect(() => {        \r\n        initFilters()\r\n    }, [])\r\n\r\n  const orderNumberBodyTemplate = (rowData: ICertificate)=>{    \r\n    return <i>{rowData.rowNumber}</i>\r\n  }\r\n  const seriesNumberBodyTemplate = (rowData: ICertificate)=>{   \r\n    const cert_type = CERT_TYPES.find(el=>el.code===rowData.cert_type) \r\n    return <>{rowData.series} {rowData.number} {cert_type?.s_name}</>\r\n  }\r\n  const reasonsBodyTemplate = (rowData: ICertificate)=>{\r\n    const acme = rowData.reason_ACME\r\n    const isACME = !!acme\r\n    const cr = rowData.c_reason?.diagnosis\r\n    const ar = rowData.a_reason?.diagnosis\r\n    const br = rowData.b_reason?.diagnosis\r\n    const dr = rowData.d_reason?.ext_diagnosis\r\n    let result = isACME && !!cr && acme === cr.ICD10 ? \r\n      `(ПП-${acme})${cr.s_name}; ` : !!cr ? `(В-${cr.ICD10})${cr.s_name}; ` : ''\r\n    result += (isACME && !!ar && acme === ar.ICD10 ? `(ПП-${acme})${ar.s_name}; ` : \r\n          !!ar ? `(А-${ar.ICD10})${ar.s_name}; ` : '')\r\n    result += (isACME && !!br && acme === br.ICD10 ? `(ПП-${acme})${br.s_name}; ` : \r\n          !!br ? `(Б-${br.ICD10})${br.s_name}; ` : '')\r\n    result += (isACME && !!dr && acme === dr.ICD10 ? `(ПП-${acme})${dr.s_name}; ` : \r\n          !!dr ? `(Г-${dr.ICD10})${dr.s_name}; ` : '')\r\n    if (rowData.death_reasons && rowData.death_reasons.length>0) { \r\n      result +=\"Сопутствующие: \" \r\n      rowData.death_reasons.forEach(el=>{\r\n        result +=`(${el.diagnosis?.ICD10})${el.diagnosis?.s_name}; `\r\n      })          \r\n    }\r\n    return <span style={{fontSize:'smaller'}}>{result}</span>\r\n  }\r\n\r\n  const filterClearTemplate = (options:any) => {\r\n        return <Button type=\"button\" icon=\"pi pi-times\" onClick={options.filterClearCallback} className=\"p-button-secondary\"></Button>;\r\n    }\r\n   const filterApplyTemplate = (options:any) => {\r\n        return <Button type=\"button\" icon=\"pi pi-check\" \r\n        onClick={options.filterApplyCallback} className=\"p-button-success\"></Button>\r\n    }\r\n  const dbBodyTemplate = (rowData: ICertificate)=>{\r\n    let _result =''\r\n    const birth = rowData.patient?.birth_date\r\n    if (!!birth) _result = `${birth.slice(8,10)}.${birth.slice(5,7)}.${birth.slice(0,4)}`  \r\n    return _result\r\n  }  \r\n  const ddBodyTemplate = (rowData: ICertificate)=>{\r\n    let _result =''    \r\n    const death = !rowData.death_datetime ? !rowData.death_year ? false : rowData.death_year.toString() : rowData.death_datetime \r\n    if (death && death.length>4) {\r\n       _result = `${death?.slice(8,10)}.${death.slice(5,7)}.${death.slice(0,4)}`\r\n    } else if (death && death.length<5){\r\n       _result =death       \r\n    } \r\n    return _result\r\n  }  \r\n  const ageBodyTemplate = (rowData: ICertificate)=>{\r\n    if (!rowData.death_datetime || !rowData.patient?.birth_date) return ''   \r\n    const dd = new Date(rowData.death_datetime)\r\n    const db = new Date(rowData.patient?.birth_date)\r\n    let age = dd.getFullYear() - db.getFullYear()\r\n    const m = dd.getMonth() - dd.getMonth()\r\n    if (m < 0 || (m === 0 && dd.getDate() < db.getDate())) age--    \r\n    return age\r\n  }\r\n\r\n  const genderBodyTemplate = (rowData: ICertificate)=>{\r\n    if (!rowData.patient?.gender) return ''\r\n    else return GENDERS[rowData.patient.gender-1].name.slice(0,1)\r\n  }\r\n\r\n  const fioBodyTemplate = (rowData: ICertificate)=>{\r\n      if (!rowData.patient) return \"\"\r\n      else if (!rowData.patient.person) return \"не иденти-фицирован\"          \r\n      const result = getOneLinePersonName(rowData.patient.person.person_name)\r\n      return <>{result}</>\r\n    }\r\n  const deathPlaceBodyTemplate = (rowData: ICertificate) => {\r\n    if (!rowData.death_place) return ''\r\n    else {\r\n     const place = DEAD_PLACE_TYPES.find(el=>el.code === rowData.death_place)\r\n     if (!place) return ''\r\n     else return <span style={{fontSize:'small'}}>{place.name}</span>\r\n    }      \r\n  }     \r\n  const basisDeterminingBodyTemplate = (rowData: ICertificate) => {\r\n    if (!rowData.basis_determining) return ''\r\n    else {\r\n     const basis = BASIS_DERMINING.find(el=>el.code === rowData.basis_determining)\r\n     if (!basis) return ''\r\n     else return <span style={{fontSize:'small'}}>{basis.name}</span>\r\n    }      \r\n  }\r\n  const custodianBodyTemplate = (rowData: ICertificate) => {\r\n    const cusName = rowData.custodian?.name\r\n    if (!cusName) return ''\r\n    else return <span style={{fontSize:'small'}}>{cusName}</span>\r\n  }  \r\n  const custodianFilterTemplate = (options: any) => {\r\n        return <MultiSelect value={options.value} options={organizations || []}  onChange={(e) => options.filterCallback(e.value)} optionLabel=\"name\" placeholder=\"не выбрано\" className=\"p-column-filter\" />;\r\n    }  \r\n  const custodian = isSuperUser ? \r\n    <Column  header=\"Мед. организация\" body={custodianBodyTemplate}          \r\n        filterField='custodian_id' showFilterMatchModes={false}\r\n                      filterClear={filterClearTemplate} filterApply={filterApplyTemplate}\r\n                      filter filterElement={custodianFilterTemplate}                    \r\n        style={{ flexGrow: 1, flexBasis: '120px' }}> </Column> :\r\n    <></>                  \r\n  const doctorBodyTemplate = (rowData: ICertificate) => {\r\n    if (!rowData.author) return ''\r\n    else {       \r\n      const result = getOneLinePersonName(rowData.author.doctor.person_name)\r\n      return  <span style={{fontSize:'small'}}>{result}</span>\r\n    }      \r\n  }\r\n  const positionBodyTemplate = (rowData: ICertificate) => {\r\n    if (!rowData.author?.doctor.position ) return ''\r\n    else return  <span style={{fontSize:'small'}}>{rowData.author.doctor.position.name}</span>         \r\n  }  \r\n  const issueDateBodyTemplate = (rowData: ICertificate) => {\r\n    const iDate = rowData.issue_date\r\n    if (!iDate ) return ''    \r\n    else return  <span style={{fontSize:'small'}}>{`${iDate.slice(8,10)}.${iDate.slice(5,7)}.${iDate.slice(0,4)}`}</span>         \r\n  }\r\n\r\n  const actionBodyTemplate = (rowData: ICertificate) => {       \r\n        return (\r\n            <React.Fragment>\r\n                <Button icon=\"pi pi-pencil\" className=\"p-button-rounded p-button-success p-mr-2\" onClick={()=>userStore.history().push(`${CERTIFICATE_ROUTE}/${rowData.id}?q=0`)} />                \r\n            </React.Fragment>\r\n        )\r\n    }\r\n  const loadCertificatesLazy = (event: {first:number, last:number}) => {  \r\n      setLazyLoading(true)         \r\n      certificateStore.getList(()=>{setLazyLoading(false)}, event.first, event.last)      \r\n  }   \r\n  const sortLazy = (e: DataTableSortParams) => {    \r\n    setLazyLoading(true) \r\n    const order =  e.sortOrder ? DIRECTION[e.sortOrder] : DIRECTION[0]    \r\n    if (e.sortField && e.sortField !=='rowNumber') {\r\n      certificateStore.sorts = [`${e.sortField} ${order}`]  \r\n      certificateStore.getList(()=>{setLazyLoading(false)})    \r\n    }  \r\n    if (e.sortOrder) setSortOrder(e.sortOrder)   \r\n    if (e.sortField) setSortField(e.sortField)\r\n    \r\n  }  \r\n  const basisDeterminingFilterTemplate = (options: any) => {\r\n        return <MultiSelect value={options.value} options={BASIS_DERMINING}  onChange={(e) => options.filterCallback(e.value)} optionLabel=\"name\" placeholder=\"не выбрано\" className=\"p-column-filter\" />;\r\n    }\r\n  const deathPlaceFilterTemplate = (options: any) => {\r\n        return <MultiSelect value={options.value} options={DEAD_PLACE_TYPES}  onChange={(e) => options.filterCallback(e.value)} optionLabel=\"name\" placeholder=\"не выбрано\" className=\"p-column-filter\" />;\r\n    }   \r\n    \r\n  const fioFilterTemplate = (options: any) => {\r\n        return <InputText value={options.value}  onChange={(e) => options.filterCallback(e.target.value)}  placeholder=\"строка поиска\" className=\"p-column-filter\" />\r\n    }  \r\n  \r\n  const footer = `Всего ${ certificateStore.count } свидетельств(а).`  \r\n  const layoutParams = {\r\n        title: 'СПИСОК СВИДЕТЕЛЬСТВ',     \r\n        url: LIST_ROUTE,\r\n        content:\r\n        <>\r\n          <Toast ref={toast} />\r\n          <div id='tableDiv' className='p-card' >             \r\n              <DataTable ref={dt} value={certificateStore.certs}  responsiveLayout=\"scroll\" scrollDirection=\"both\"\r\n                emptyMessage=\"нет данных, удовлетворяющих запросу\" scrollable scrollHeight=\"72vh\" \r\n                selectionMode=\"single\" selection={selected}  dataKey=\"id\" size=\"small\"\r\n                footer={footer} loading={lazyLoading}\r\n                onSelectionChange={e =>{\r\n                  certificateStore.select(certificateStore.certs.findIndex(el=>el.id === e.value.id))\r\n                  setSelected(e.value)\r\n                }} filterDisplay=\"menu\" \r\n                onFilter={e=>{\r\n                  console.log('e',e)\r\n                  let _filters = {} as any\r\n                  let _constraint: any = e.filters['issue_date'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`issue_date${RunsackFilterMatchMode[_constraint.constraints[0].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value                  \r\n                  if (_constraint && _constraint.constraints[1] && _constraint.constraints[1].value) \r\n                    _filters[`issue_date${RunsackFilterMatchMode[_constraint.constraints[1].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[1].value\r\n                    _constraint = e.filters['primory_reason'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`reason_ACME${RunsackFilterMatchMode[_constraint.constraints[0].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value                  \r\n                  if (_constraint && _constraint.constraints[1] && _constraint.constraints[1].value) \r\n                    _filters[`reason_ACME${RunsackFilterMatchMode[_constraint.constraints[1].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[1].value  \r\n                   _constraint = e.filters['patient_birth_date'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`patient_birth_date${RunsackFilterMatchMode[_constraint.constraints[0].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value                  \r\n                  if (_constraint && _constraint.constraints[1] && _constraint.constraints[1].value) \r\n                    _filters[`patient_birth_date${RunsackFilterMatchMode[_constraint.constraints[1].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[1].value  \r\n                  _constraint = e.filters['patient_death_date'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`death_datetime${RunsackFilterMatchMode[_constraint.constraints[0].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value                  \r\n                  if (_constraint && _constraint.constraints[1] && _constraint.constraints[1].value) \r\n                    _filters[`death_datetime${RunsackFilterMatchMode[_constraint.constraints[1].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[1].value     \r\n                  _constraint = e.filters['number'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`number${RunsackFilterMatchMode[_constraint.constraints[0].matchMode as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value\r\n                  _constraint = e.filters['patient_fio'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`patient_fio${RunsackFilterMatchMode[_constraint.constraints[0].matchMode as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value  \r\n                  _constraint = e.filters['basis_determining']   \r\n                  if (_constraint && _constraint.value) {\r\n                    const values = _constraint.value as IReference[]\r\n                    let _codes = [] as string[]\r\n                    values.map(item=> _codes.push(item.code)) \r\n                    _filters.basis_determining_in = _codes   \r\n                  }\r\n                  _constraint = e.filters['death_place']   \r\n                  if (_constraint && _constraint.value) {\r\n                    const values = _constraint.value as IReference[]\r\n                    let _codes = [] as string[]\r\n                    values.map(item=> _codes.push(item.code)) \r\n                    _filters.death_place_in = _codes   \r\n                  }\r\n                  _constraint = e.filters['custodian_id']   \r\n                  if (_constraint && _constraint.value) {\r\n                    const values = _constraint.value as IReferenceId[]\r\n                    let _codes = [] as number[]\r\n                    values.map(item=> _codes.push(item.id)) \r\n                    _filters.custodian_id_in = _codes   \r\n                  }\r\n                  certificateStore.filters = _filters\r\n                  setLazyLoading(true)\r\n                  certificateStore.getList(()=>{setLazyLoading(false)})  \r\n                }}                \r\n                virtualScrollerOptions={{ lazy: true, onLazyLoad: loadCertificatesLazy, itemSize: 6, delay: 200}} filters={filters} filterLocale={'ru'}\r\n                onRowDoubleClick={()=>userStore.history().push(`${CERTIFICATE_ROUTE}/${certificateStore.cert.id}?q=0`)}\r\n                onSort={sortLazy} sortField={sortField} sortOrder={sortOrder}\r\n                >  \r\n                    <Column header=\"№ п.п\"  body={orderNumberBodyTemplate} sortable\r\n                      sortField='rowNumber'\r\n                      style={{ flexGrow: 1, flexBasis: '58px' }} frozen></Column>                                   \r\n                    <Column header=\"Серия Номер Вид\" body={seriesNumberBodyTemplate} filterField='number'\r\n                      filter filterPlaceholder=\"Поиск по номеру\" dataType='text' showFilterOperator ={false}                                           \r\n                      filterClear={filterClearTemplate} filterApply={filterApplyTemplate} sortField='number' sortable style={{ flexGrow: 1, flexBasis: '110px' }} frozen></Column>\r\n                    <Column header=\"Причины смерти и соп. патологии\" showFilterOperator ={false}                     \r\n                     filterField='primory_reason'  filterPlaceholder=\"код ПП\" filter dataType='numeric'\r\n                     filterClear={filterClearTemplate} filterApply={filterApplyTemplate}  \r\n                      style={{ flexGrow: 1, flexBasis: '250px' }} body={reasonsBodyTemplate}></Column>\r\n                    <Column  header=\"ФИО\" body={fioBodyTemplate} \r\n                      sortField='patient.person.person_name.family'\r\n                      dataType='text' showFilterOperator ={false}\r\n                      filter filterField='patient_fio' filterClear={filterClearTemplate} filterApply={filterApplyTemplate}  filterElement={fioFilterTemplate}\r\n                      sortable style={{ flexGrow: 1, flexBasis: '140px' }}></Column>                    \r\n                    <Column  header=\"ДР\" body={dbBodyTemplate} filter sortable\r\n                       showFilterOperator={false} dataType='date' filterPlaceholder=\"дата рождения\"\r\n                     filterField='patient_birth_date' sortField='patient.birth_date' \r\n                     filterClear={filterClearTemplate} filterApply={filterApplyTemplate}  \r\n                       style={{ flexGrow: 1, flexBasis: '110px' }}> </Column>\r\n                    <Column  header=\"ДС\" body={ddBodyTemplate} filter sortable\r\n                       showFilterOperator={false} dataType='date' filterPlaceholder=\"дата смерти\"\r\n                     filterField='patient_death_date' sortField='death_datetime' \r\n                     filterClear={filterClearTemplate} filterApply={filterApplyTemplate}  \r\n                       style={{ flexGrow: 1, flexBasis: '110px' }}> </Column>\r\n                    <Column  header=\"Лет\" body={ageBodyTemplate} \r\n                      style={{ flexGrow: 1, flexBasis: '46px' }}> </Column>\r\n                    <Column  header=\"Пол\" body={genderBodyTemplate} sortField='patient.gender'\r\n                      sortable style={{ flexGrow: 1, flexBasis: '56px' }}> </Column>    \r\n                    <Column  header=\"Адрес проживания\" sortable \r\n                      field='patient.person.address.streetAddressLine'\r\n                      style={{ flexGrow: 1, flexBasis: '200px' }}> </Column>  \r\n                    <Column  header=\"Адрес смерти\" sortable\r\n                      field='death_addr.streetAddressLine'\r\n                      style={{ flexGrow: 1, flexBasis: '200px' }}> </Column>                     \r\n                    <Column  header=\"Смерть наступила\" body={deathPlaceBodyTemplate}\r\n                      showFilterMatchModes={false} filterElement={deathPlaceFilterTemplate}\r\n                      filterClear={filterClearTemplate} filterApply={filterApplyTemplate} \r\n                      filter filterField='death_place' sortField='death_place' sortable \r\n                      style={{ flexGrow: 1, flexBasis: '140px' }}> </Column>  \r\n                    <Column  header=\"Основание заключения\" body={basisDeterminingBodyTemplate}\r\n                      sortField='basis_determining' sortable\r\n                      filterField='basis_determining' showFilterMatchModes={false}\r\n                      filterClear={filterClearTemplate} filterApply={filterApplyTemplate}\r\n                      filter filterElement={basisDeterminingFilterTemplate} \r\n                      style={{ flexGrow: 1, flexBasis: '140px' }}> </Column>\r\n                    {custodian}\r\n                    <Column  header=\"Специалист\" body={doctorBodyTemplate}\r\n                      style={{ flexGrow: 1, flexBasis: '120px' }}> </Column>\r\n                    <Column  header=\"Должность\" body={positionBodyTemplate}\r\n                      style={{ flexGrow: 1, flexBasis: '130px' }}> </Column>  \r\n                    <Column  header=\"Выдано\" body={issueDateBodyTemplate} \r\n                     showFilterOperator={false} dataType='date' \r\n                     filterField='issue_date' sortField='issue_date' filterPlaceholder=\"дата выпуска\"\r\n                     filterClear={filterClearTemplate} filterApply={filterApplyTemplate}                       \r\n                     filter sortable style={{ flexGrow: 1, flexBasis: '100px' }}> </Column>                \r\n                    <Column body={actionBodyTemplate} exportable={false} \r\n                      style={{ flexGrow: 1, flexBasis: '100px' }}></Column>\r\n                </DataTable>\r\n          </div>  \r\n        </>\r\n    }\r\n\r\n return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n )  \r\n}\r\nexport default observer(ListPage)","export default __webpack_public_path__ + \"static/media/security.f40a12e4.png\";","const LoginImageDiv = () => {\r\n  return (\r\n    <div className='login-image'>\r\n      <div className='login-image-content'>\r\n        <h1>Медицинское</h1>\r\n        <h1>свидетельство</h1>\r\n        <h1>о смерти</h1>\r\n        <h3>версия 3.0</h3>\r\n        <h3>(с учетом требований CDA_R2 уровня 3)</h3>\r\n      </div>\r\n      <div className='login-footer'>\r\n        <p>2022 © АО \"АМИАЦ\"</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default LoginImageDiv\r\n","import { observer } from 'mobx-react-lite'\r\nimport { useContext, useState } from 'react'\r\nimport { FC } from 'react'\r\nimport { Link} from 'react-router-dom'\r\nimport { Context } from '..'\r\nimport logo from \"../images/security.png\"\r\nimport '../styles/login.css'\r\nimport  '../styles/components/Inputtext.css'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport {Password} from 'primereact/password'\r\nimport { Button } from 'primereact/button'\r\nimport { Field, Form } from 'react-final-form'\r\nimport { classNames } from 'primereact/utils'\r\nimport LoginImageDiv from '../static/LoginImageDiv'\r\n\r\ninterface IAuth {\r\n  email: string\r\n  password: string\r\n}\r\nconst LoginPage: FC = () => {    \r\n  const [email, setEmail] = useState<string>('')\r\n  const {userStore} = useContext(Context)   \r\n  \r\n  const validate = (data: IAuth) => {\r\n    let errors: any = {}        \r\n        if (!data.email) {\r\n            errors.email = 'Поле <Email> обязательно'\r\n        } else if (/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(data.email)){\r\n          setEmail(data.email)\r\n        }\r\n        if (!data.password) {\r\n            errors.password = 'Поле <Пароль> обязательно'\r\n        }        \r\n        return errors\r\n  }\r\n  const onSubmit = async (data: IAuth, form: any) => {          \r\n    userStore.login(data.email, data.password)        \r\n  }\r\n  const onPassordRecovery = async () => {          \r\n    userStore.renew_link(email)        \r\n  }\r\n  const isFormFieldValid = (meta: any) => !!(meta.touched && meta.error)\r\n  const getFormErrorMessage = (meta: any) => {\r\n    return (isFormFieldValid(meta) && <small className=\"p-error\">{meta.error}</small>)\r\n  }    \r\n  return (\r\n  <>\r\n    <div className=\"login-body\">\r\n      <div className=\"login-wrapper\">\r\n        <div className=\"login-panel\">\r\n          <img src={logo} className='logo' alt=\"logo\"></img>\r\n          <div id=\"clickForm\" className=\"login-form\" >\r\n            <h2>Авторизация</h2>\r\n            <p>Нет учетной записи? <Link to=\"/registration\">Регистрация</Link></p>\r\n            <Form onSubmit={onSubmit} initialValues={{email: '', password: '' }} \r\n              validate={validate} \r\n              render={({ handleSubmit }) => (\r\n              <form  onSubmit={handleSubmit}  className=\"p-fluid\">\r\n                <Field name=\"email\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <i className=\"pi pi-envelope\" />\r\n                        <InputText id=\"email\"  autoFocus {...input} className={classNames({ 'p-invalid': isFormFieldValid(meta) })} />\r\n                        <label htmlFor=\"email\" \r\n                        className={classNames({ 'p-error': isFormFieldValid(meta) })}>Email*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"password\"  render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password\" autoComplete='off' {...input} toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n              <Button type=\"submit\" label=\"ВОЙТИ\" style={{marginBottom:\"1rem\"}}/>   \r\n              <Button type=\"button\" onClick={onPassordRecovery} label=\"не помню пароль\" className=\"p-button-link\"  /> \r\n            </form>)}/>            \r\n          </div>\r\n        </div>  \r\n        <LoginImageDiv/>      \r\n      </div>\r\n    </div>\r\n  </>\r\n)}\r\nexport default observer(LoginPage)","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useEffect } from 'react'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { CERTIFICATE_ROUTE, HOME_ROUTE, LIST_ROUTE, MO_SETTINGS_ROUTE } from '../utils/consts'\r\nimport { Button } from 'primereact/button'\r\nimport { Card } from 'primereact/card'\r\nimport { DataTable } from 'primereact/datatable'\r\nimport { Column } from 'primereact/column'\r\nimport { Divider } from 'primereact/divider'\r\nimport { Context } from '..'\r\nimport { ProgressSpinner } from 'primereact/progressspinner'\r\n\r\ntype MainPageProps = {}\r\n\r\nconst MainPage: FC<MainPageProps> = (props: MainPageProps) => {\r\n  const {userStore, certificateStore, layoutStore} = useContext(Context)\r\n  useEffect(()=>{\r\n    if (userStore.userInfo) certificateStore.userInfo = userStore.userInfo\r\n    layoutStore.isLoading = true\r\n    certificateStore.getList(()=>{layoutStore.isLoading = false},0,4)         \r\n  },[certificateStore, layoutStore, userStore.userInfo])\r\n  \r\n  const news =[{version:\"3.004\",record:\"Улучшена работа вкладки ввода причин; исправлена ошибка выбора жд_ст населенных пунктов при вводе адреса.\"},{version:\"3.003\",record:\"Улучшена работа списка. Фильтрация по датам рождения, первопричинам, МО в списке\"},{version:\"3.002\",record:\"Фильтрация по датам смерти в списке\"},\r\n  {version:\"3.001\",record:\"Исправлена ошибка нумерации в списке\"},\r\n  {version:\"3.000\",record:\"с учетом требований CDA_R2 уровня 3\"}]\r\n  const layoutParams= {\r\n    title: 'Главная',     \r\n    url: HOME_ROUTE,\r\n    content: userStore ? ( \r\n      <>     \r\n        <div className=\"p-d-flex p-flex-column p-jc-around p-flex-md-row p-flex-wrap\">\r\n          <Button style={{minWidth:'243px'}} className=\"p-mr-2 p-mb-2 p-shadow-3\" label=\"Ввод свидетельства\"  title=\"Форма ввода свидетельства\" \r\n          onClick={(e)=>{userStore.history().push(`${CERTIFICATE_ROUTE}/${certificateStore.cert.id}?q=0`)}}/>\r\n            <Button style={{minWidth:'243px'}} className=\"p-button-secondary p-mr-2 p-mb-2 p-shadow-3\" label=\"Настройки\" title=\"Настройки учетной записи\" onClick={(e)=>{userStore.history().push(`${MO_SETTINGS_ROUTE}/${userStore.userInfo?.organization.id}`)}}/>\r\n            <Button style={{minWidth:'243px'}} className=\"p-button-secondary p-mr-2 p-mb-2 p-shadow-3\" id=\"reports\" label=\"Отчеты\" title=\"Формирование отчетов\" />\r\n            <Button style={{minWidth:'243px'}} className=\"p-mr-2 p-mb-2 p-shadow-3\" label=\"Перинатальное свидетельство\" /> \r\n            <Button className=\"p-button-secondary p-mr-2 p-mb-2 p-shadow-3\" \r\n            id=\"repBt\" style={{minWidth:'243px'}} label=\"ЖУРНАЛ\" title=\"Журнал выданных свидетельств и копий\" />                     \r\n            <Button style={{minWidth:'243px'}} className=\"p-button-success p-mr-2 p-mb-2 p-shadow-3\" label=\"Список свидетельств\" title=\"Список введеных свидетельств\" onClick={(e)=>{userStore.history().push(LIST_ROUTE)}}/>            \r\n        </div> \r\n        <Divider style={{marginTop:'1rem', marginBottom:'1rem'}}/>\r\n        <div className=\"p-d-flex p-flex-column p-jc-around p-flex-md-row p-flex-wrap\">\r\n          <Card className=\"p-mr-2 p-mb-2\" title=\"Последние изменения\" >\r\n            <DataTable className=\"p-datatable-sm\" value={news} responsiveLayout='scroll'>\r\n              <Column field=\"version\" header=\"Версия\"></Column>\r\n              <Column field=\"record\" header=\"Что нового\"></Column>\r\n            </DataTable> \r\n          </Card>\r\n        </div>                  \r\n      </>\r\n    ) : (<ProgressSpinner/>)   \r\n  }  \r\n  return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}\r\nexport default observer(MainPage)","export default __webpack_public_path__ + \"static/media/ava.ec8d39a0.jpg\";","import $api, { API_URL } from \"../http\"\r\nimport { AxiosResponse } from \"axios\"\r\nimport { IUser } from \"../models/IUser\"\r\nimport { IUserInfo } from \"../models/responses/IUserInfo\"\r\nexport default class UsersService {\r\n  static async fetchUsers(): Promise<AxiosResponse<IUser[]>> {\r\n    return $api.post(`${API_URL}model/User/`, {\r\n      render_options: { only: [\"id\", \"email\", \"roles\", \"organization_id\", \"activated\"] },\r\n    })\r\n  }\r\n  static async getUser(id: number): Promise<AxiosResponse<IUserInfo>> {\r\n    return $api.post(`${API_URL}/show/model/User/${id}`, {\r\n      render_options: { only: [\"id\", \"roles\"], include: [\"person_name\", \"organization\", \"contacts\"] },\r\n      includes: [\"person_name\", \"organization\", \"contacts\"],\r\n      organization: { only: [\"id\", \"name\", \"sm_code\"] },\r\n    })\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/hospital.0e4a3324.jpg\";","import { FC, useContext, useEffect, useRef, useState } from 'react'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport ava from '../images/hospital.jpg'\r\nimport '../styles/pages/ProfilePage.css'\r\nimport '../styles/components/AutoComplete.css'\r\nimport { DESTROY_OPTION, MO_SETTINGS_ROUTE} from '../utils/consts'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport OrganizationService from '../services/OrganizationService'\r\nimport { IOrganization } from '../models/IOrganization'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { ProgressSpinner } from 'primereact/progressspinner'\r\nimport { IAudit } from '../models/IAudit'\r\nimport { classNames } from 'primereact/utils'\r\nimport { InputMask } from 'primereact/inputmask'\r\nimport { IContact } from '../models/IContact'\r\nimport { Button } from 'primereact/button'\r\nimport { Toast } from 'primereact/toast'\r\nimport { DEFAULT_ERROR_TOAST } from '../utils/defaults'\r\nimport { Context } from '..'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { IReferenceId } from '../models/IReference'\r\nimport AddressDialog from '../components/dialogs/AddressDialog'\r\nimport { observer } from 'mobx-react-lite'\r\nimport AddressFC2 from '../components/inputs/InputAddress'\r\nimport { IAddressR } from '../models/requests/IAddressR'\r\n\r\n// страница настроек профиля организации\r\n// Organization profile page\r\n\r\n// используем роут с параметром id для загрузки с API\r\ninterface IMatch extends IRouteMatch {  \r\n  params: {id: string}\r\n}\r\ninterface SettingsPageProps extends IRouteProps { \r\n    match: IMatch  \r\n}\r\n\r\n\r\nconst SettingsPage: FC<SettingsPageProps> = (props: SettingsPageProps) =>{ \r\n  const {userStore, addressStore} = useContext(Context)\r\n  const [audits, setAudits] = useState<IAudit[]>([])\r\n  const [submitted, setSubmitted] = useState(false)\r\n  const [email, setEmail] = useState<IContact>({telcom_value:'', main:false} as IContact) \r\n  const [phone, setPhone] = useState<IContact>({telcom_value:'', main:true} as IContact)\r\n  const [organization, setOrganization] = useState<IOrganization | null>(null)\r\n  const [ID, setID] = useState<number | null>(null)\r\n  const toast = useRef<Toast>(null) \r\n  useEffect(()=>{\r\n    if (organization!==null && organization.id !== ID) {\r\n      setPhone({telcom_value:'', main:true} as IContact)\r\n      setEmail({telcom_value:'', main:false} as IContact)          \r\n      organization.contacts.forEach((item)=>{if (item.main) setPhone({...item})\r\n        else setEmail({...item, telcom_value: item.telcom_value.replace('mailto:','')})})\r\n      setID(organization.id)      \r\n    }\r\n  },[organization, ID])\r\n\r\n  useEffect(()=>{\r\n    if (organization===null && props.match.params.id) {\r\n        OrganizationService.getOrganization(props.match.params.id)\r\n        .then(response=>{        \r\n          setOrganization(response.data)        \r\n        })\r\n        .catch((reason=>{console.log(reason)\r\n          if (toast!==null && toast.current!==null) toast.current.show(DEFAULT_ERROR_TOAST)\r\n        }))      \r\n    }\r\n  },[organization, props.match.params.id, userStore.userInfo])\r\n  const [organizations, setOrganizations] = useState<IReferenceId[] | null>(null)\r\n  useEffect(()=>{\r\n    if (organizations===null && userStore.userInfo\r\n       && userStore.userInfo.roles.includes('ADMIN')) \r\n    OrganizationService.getOrganizations().then(response=>\r\n      setOrganizations(response.data.organizations)\r\n    ).catch(()=>{\r\n      setOrganizations([])\r\n      if (toast!==null && toast.current!==null) toast.current.show(DEFAULT_ERROR_TOAST)\r\n    })},[organizations, userStore.userInfo])\r\n  const changesAudit = (fieldName: string, field: string, oldValue: string, newValue: string) => {\r\n    if (organization ===null) return\r\n    let _audits = audits\r\n    const audit = _audits.find(element=>element.field === field) || {field, before: oldValue} as IAudit\r\n    if (audit.after === undefined) _audits.push(audit)    \r\n    audit.after = newValue   \r\n    audit.detail = `${fieldName}: ${audit.before} -> ${audit.after}`     \r\n    setAudits(_audits)\r\n  }\r\n  \r\n\r\n  // Обработчик изменения контактов      \r\n  const onContactChange = (contact: IContact) => { \r\n      if (organization === null) return  \r\n      let _contact = contact.telcom_value==='' ?\r\n      (contact.id ? {...contact,...DESTROY_OPTION} : {...contact}) :    \r\n      (contact.id ? {id:contact.id, parent_guid: contact.parent_guid, telcom_use: contact.telcom_use, telcom_value: contact.telcom_value, main: contact.main} : {...contact}) \r\n      if (organization.contacts === undefined) organization.contacts = []\r\n      if (_contact.id) {        \r\n          const idx = organization.contacts.findIndex(item=>item.id===_contact.id)  \r\n          if (idx>-1) organization.contacts[idx] = _contact        \r\n      } else organization.contacts.push(_contact)       \r\n  }\r\n\r\n  // проверка возможности сохранения\r\n  const isSaveAvaible = () : boolean => {\r\n    if (organization === null) return false    \r\n    let _result = audits.length > 0    \r\n    _result = _result && /tel:\\+?[-0-9().]+/i.test(phone.telcom_value)    \r\n    _result = _result && (/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='')    \r\n    _result = _result && !(!organization.name || (!organization.name && organization.name.length > 100))\r\n    _result = _result && !!organization.name_full    \r\n    //_result = _result && !(!organization.address || !organization.address.houseGUID)\r\n   \r\n    return  _result\r\n  }  \r\n  const saveOrganization = () => {\r\n    if (organization===null) return    \r\n    setSubmitted(true)\r\n    if (isSaveAvaible()) {\r\n      onContactChange(phone)\r\n      onContactChange(email)\r\n      let _organization = { id: organization.id,                               \r\n                            name: organization.name,\r\n                            name_full: organization.name_full,\r\n                            license: organization.license || null,\r\n                            license_data: organization.license_data || null,\r\n                            okpo: organization.okpo || null,\r\n                            sm_code: organization.sm_code || '00',\r\n                            contacts_attributes: organization.contacts,\r\n                            address_attributes: organization.address\r\n                           } as any                                                     \r\n      OrganizationService.updateOrganization({Organization: _organization, audits: audits})\r\n        .then(response=>{          \r\n          setAudits([])\r\n          setSubmitted(false)\r\n          setOrganization(response.data)\r\n          //console.log('response.data',response.data)\r\n          if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Успешно', detail: 'Изменения применены', life:3000 })\r\n        })\r\n        .catch((reason=>{console.log(reason)\r\n          if (toast!==null && toast.current!==null) toast.current.show(DEFAULT_ERROR_TOAST)\r\n        }))    \r\n    } else if (toast!==null && toast.current!==null) toast.current.show({ severity: 'info', summary: 'Отклонено', detail: 'Изменения отсутствуют или неприменимы', life:3000 })   \r\n  } \r\n  \r\n  const adminOpportunities = ()=>{    \r\n    return (userStore.userInfo && userStore.userInfo.roles.includes('ADMIN')) ? \r\n    (<>\r\n      <div className=\"p-field p-col-12\">\r\n        <label htmlFor=\"organization\" >Выбрать медорганизацию</label>\r\n        <Dropdown id=\"organization\"  options={organizations || []}\r\n          onChange={(e)=>{            \r\n            if (e.value.id) {\r\n              const history = userStore.history()\r\n              let link = `${MO_SETTINGS_ROUTE}/${e.value.id}`\r\n              setOrganization(null)              \r\n              history.push(link)              \r\n            }  \r\n          }}\r\n          filter showClear optionLabel=\"name\" />\r\n      </div>\r\n    </>) \r\n    : (<></>)     \r\n  }\r\n  const layoutParams = {\r\n    title: 'Профиль медорганизации',     \r\n    url: MO_SETTINGS_ROUTE,\r\n    content: organization ? (<>    \r\n    <div className=\"card widget-user-card\" key={props.match.params.id}>\r\n      <div className=\"user-card-header\">\r\n        <img src={ava} alt=\"\" className=\"user-card-avatar\" />\r\n      </div>\r\n      <div className=\"user-card-body\">  \r\n      <div className=\"user-card-title\">\r\n        {organization.name || ''}\r\n      </div>             \r\n      <div className=\"user-card-subtext\">{organization.oid}</div>\r\n      <div className=\"p-grid user-card-stats\">\r\n        <div className=\"p-col-4\">\r\n          <i className=\"pi pi-users\"></i>\r\n          <div>14 Создано</div>\r\n        </div>\r\n        <div className=\"p-col-4\">\r\n          <i className=\"pi pi-bookmark\"></i>\r\n          <div>2 Выданно</div>\r\n        </div>\r\n        <div className=\"p-col-4\">\r\n          <i className=\"pi pi-check-square\"></i>\r\n          <div>6 Отправленно</div>\r\n        </div>\r\n      </div>        \r\n    </div>\r\n    <div className='card' style={{textAlign: 'left'}} >      \r\n        <div className='p-fluid p-formgrid p-grid'>\r\n          <div className=\"p-field p-col-12 p-md-5 \">\r\n            <label htmlFor=\"name\">Наименование</label>\r\n            <InputText id=\"name\" required value={organization.name || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"Наименование\", \"name\", _organization.name || '', e.target.value || '')\r\n                   _organization.name = e.target.value\r\n                  setOrganization(_organization) \r\n              }}\r\n              autoFocus className={classNames({ 'p-invalid': submitted && organization.name && organization.name?.length > 100})}\r\n            />\r\n            {submitted && (!organization.name || (organization.name && organization.name.length > 100)) && <small className=\"p-error\">Краткое наименование более 100 знаков или отсутствует</small>}\r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-7\">\r\n            <label htmlFor=\"name_full\">Полное наименование</label>\r\n            <InputText id=\"name_full\" value={organization.name_full || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}                  \r\n                  changesAudit(\"Полное наименование\", \"name_full\", _organization.name || '', e.target.value || '')\r\n                  _organization.name_full = e.target.value\r\n                  setOrganization(_organization) \r\n              }}\r\n              required className={classNames({ 'p-invalid': submitted && !organization.name_full})}\r\n            />\r\n            {submitted && !organization.name_full && <small className=\"p-error\">Полное наименование обязательно</small>}\r\n          </div>\r\n          <div className=\"p-field p-col-12\">\r\n            <label htmlFor=\"license\">Cерия и номер лицензии на осуществление медицинской деятельности</label>\r\n            <InputText id=\"license\" value={organization.license || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"Cерия и номер лицензии\", \"license\", _organization.license || '', e.target.value || '')\r\n                   _organization.license = e.target.value\r\n                  setOrganization(_organization) \r\n              }}               \r\n            />            \r\n          </div>\r\n          <div className=\"p-field p-col-12\">\r\n            <label htmlFor=\"license_data\">указание на Федеральную службу по надзору в сфере здравоохранения и дату регистрации лицензии</label>\r\n            <InputText id=\"license_data\" value={organization.license_data || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"Данные лицензии\", \"license_data\", _organization.license_data || '', e.target.value || '')\r\n                   _organization.license_data = e.target.value\r\n                  setOrganization(_organization) \r\n              }}               \r\n            />            \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">\r\n            <label htmlFor=\"okpo\">ОКПО</label>\r\n            <InputText id=\"okpo\" value={organization.okpo || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"ОКПО\", \"okpo\", _organization.okpo || '', e.target.value || '')\r\n                  _organization.okpo = e.target.value\r\n                  setOrganization(_organization) \r\n              }}               \r\n            />            \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">\r\n            <label htmlFor=\"sm_code\">Последние две цифры кода в ТФОМС</label>\r\n            <div className=\"p-inputgroup\">\r\n              <span className=\"p-inputgroup-addon\">2800</span>\r\n              <InputMask mask=\"99\" id=\"sm_code\" value={organization.sm_code || ''} \r\n                onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"ТФОМС код\", \"sm_code\", _organization.sm_code || '', e.target.value || '')\r\n                  _organization.sm_code = e.value\r\n                  setOrganization(_organization) \r\n                }}               \r\n              />                            \r\n            </div>                        \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">\r\n            <label htmlFor=\"phone\">телефон</label>\r\n            <InputMask id=\"phone\" required \r\n              type=\"text\" mask=\"tel:+79999999999\"\r\n              value={phone.telcom_value} \r\n              onChange={(e)=>{\r\n                changesAudit(\"телефон\", \"phone\", phone.telcom_value || '', e.target.value || '')  \r\n                setPhone({...phone, telcom_value: e.target.value})                \r\n              }} \r\n              className={classNames({ 'p-invalid': submitted && !/tel:\\+?[-0-9().]+/i.test(phone.telcom_value)})}\r\n            />\r\n            {submitted && !/tel:\\+?[-0-9().]+/i.test(phone.telcom_value) && <small className=\"p-error\">тел.номер некорректен или отсутствует!</small>}            \r\n          </div>\r\n          <div className=\"p-field  p-col-12 p-md-6\">\r\n            <label htmlFor=\"email\">email</label>\r\n            <InputText id=\"email\" type=\"text\" \r\n              value={email.telcom_value} \r\n              onChange={(e)=>{ \r\n                changesAudit(\"email\", \"email\", email.telcom_value || '', e.target.value || '') \r\n                setEmail({...email, telcom_value:e.target.value})  \r\n              }} \r\n              className={classNames({ 'p-invalid': submitted && !(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='')})}\r\n                    />\r\n              {submitted && !(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='') && <small className=\"p-error\">Неверный email</small>}\r\n          </div>      \r\n          <AddressFC2 className=\"p-col-12\" submitted={submitted} \r\n            label='Адрес медорганизации'\r\n            value={organization.address} strictly \r\n            onClear={(value: IAddressR)=>setOrganization({...organization, address: {...value}})}\r\n            onChange={()=>{        \r\n              let _organization = {...organization, address: addressStore.addressProps()}                \r\n              changesAudit(\"Адрес\", \"address\", organization.address?.streetAddressLine || '', _organization.address?.streetAddressLine || '')                 \r\n              setOrganization(_organization)\r\n            }}  \r\n          />\r\n          <div className=\"p-field  p-col-12 p-md-6\">\r\n            <Button label=\"ПРИМЕНИТЬ\"  className=\"p-button-success\" \r\n              style={{marginTop: '22px'}} onClick={saveOrganization}  />\r\n          </div>   \r\n          {adminOpportunities()}          \r\n        </div>        \r\n      </div>             \r\n    </div>\r\n    <Toast ref={toast} /> \r\n    <AddressDialog />        \r\n  </>) : (<><Toast ref={toast} /><ProgressSpinner/></>)\r\n  }\r\n  return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}\r\nexport default observer(SettingsPage)","import { AdminPage } from \"./pages/AdminPage\"\r\nimport CertificatePage from \"./pages/CertificatePage\"\r\nimport DoctorsPage from \"./pages/DoctorsPage\"\r\nimport { ErrorPage } from \"./pages/ErrorPage\"\r\nimport ListPage from \"./pages/ListPage\"\r\nimport LoginPage from \"./pages/LoginPage\"\r\nimport MainPage from \"./pages/MainPage\"\r\nimport { MessagePage } from \"./pages/MessagePage\"\r\nimport { PassordRecoveryPage } from \"./pages/PasswordRecoveryPage\"\r\nimport { ProfilePage } from \"./pages/ProfilePage\"\r\nimport { RegistrationPage } from \"./pages/RegistrationPage\"\r\nimport SettingsPage from \"./pages/SettingsPage\"\r\nimport {\r\n  ADMIN_ROUTE,\r\n  CERTIFICATE_ROUTE,\r\n  ERROR_ROUTE,\r\n  HOME_ROUTE,\r\n  LIST_ROUTE,\r\n  LOGIN_ROUTE,\r\n  MESSAGE_ROUTE,\r\n  PWD_RECOVERY_ROUTE,\r\n  REGISTRATION_ROUTE,\r\n  USER_ROUTE,\r\n  DOCTORS_ROUTE,\r\n  MO_SETTINGS_ROUTE,\r\n} from \"./utils/consts\"\r\n\r\nexport const AUTH_ROUTES = [\r\n  { path: HOME_ROUTE, Component: MainPage },\r\n  { path: ADMIN_ROUTE, Component: AdminPage },\r\n  { path: LIST_ROUTE, Component: ListPage },\r\n  { path: CERTIFICATE_ROUTE + \"/:id\", Component: CertificatePage },\r\n  { path: DOCTORS_ROUTE, Component: DoctorsPage },\r\n  { path: USER_ROUTE + \"/:id\", Component: ProfilePage },\r\n  { path: MO_SETTINGS_ROUTE + \"/:id\", Component: SettingsPage },\r\n  { path: LOGIN_ROUTE, Component: MainPage },\r\n]\r\nexport const NON_AUTH_ROUTES = [\r\n  { path: LOGIN_ROUTE, Component: LoginPage },\r\n  { path: REGISTRATION_ROUTE, Component: RegistrationPage },\r\n  { path: PWD_RECOVERY_ROUTE + \"/:code\", Component: PassordRecoveryPage },\r\n  { path: HOME_ROUTE, Component: LoginPage },\r\n]\r\nexport const PUBLIC_ROUTES = [\r\n  { path: MESSAGE_ROUTE + \"/:message\", Component: MessagePage },\r\n  { path: ERROR_ROUTE + \"/:error\", Component: ErrorPage },\r\n]\r\n","//import React, { useEffect } from 'react';\r\nimport { FC } from 'react'\r\n\r\ntype AdminPageProps = {}\r\n\r\nexport const AdminPage: FC<AdminPageProps> = (props: AdminPageProps) => {\r\n  //const [state, setState] = useState();\r\n\r\n  //useEffect(() => {}, []);\r\n\r\n  return (\r\n    <>\r\n      <h1>AdminPage React TS FC Component</h1>\r\n      <div>List</div>\r\n    </>\r\n  );\r\n};","import { FC, useEffect, useState } from 'react'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport ava from '../images/ava.jpg'\r\nimport '../styles/pages/ProfilePage.css'\r\nimport { ROLES, USER_ROUTE } from '../utils/consts'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { IUserInfo } from '../models/responses/IUserInfo'\r\nimport UsersService from '../services/UsersService'\r\n\r\n// страница настроек профиля пользователя\r\n// User profile page\r\n\r\n// используем роут с параметром id для загрузки с API\r\ninterface IMatch extends IRouteMatch {  \r\n  params: {id: number}\r\n}\r\ninterface ProfilePageProps extends IRouteProps { \r\n    match: IMatch  \r\n}\r\n\r\n\r\nexport const ProfilePage: FC<ProfilePageProps> = (props: ProfilePageProps) =>{ \r\n  const [user, setUser] = useState<IUserInfo | null>(null)\r\n  useEffect(()=>{\r\n    if (user===null && props.match.params.id) UsersService.getUser(props.match.params.id)\r\n    .then(response=>setUser(response.data))\r\n    .catch(()=>console.log('Ошибка получения пользователя')) \r\n  })\r\n  const user_name = `${user?.person_name.family} ${user?.person_name.given_1}`\r\n  const user_team = `${user!==null && user.roles ? ROLES[user.roles.split(' ')[0]] : ''} ${user?.organization.name}`\r\n  const layoutParams = {\r\n    title: 'Профиль пользователя',     \r\n    url: USER_ROUTE,\r\n    content: (<>  \r\n    <div className=\"card widget-user-card\">\r\n      <div className=\"user-card-header\">\r\n        <img src={ava} alt=\"\" className=\"user-card-avatar\" />\r\n      </div>\r\n      <div className=\"user-card-body\">\r\n        <div className=\"user-card-title\">{user_name}</div>\r\n        <div className=\"user-card-subtext\">{user_team}</div>\r\n        <div className=\"p-grid user-card-stats\">\r\n          <div className=\"p-col-4\">\r\n            <i className=\"pi pi-users\"></i>\r\n            <div>14 Создано</div>\r\n          </div>\r\n          <div className=\"p-col-4\">\r\n            <i className=\"pi pi-bookmark\"></i>\r\n            <div>2 Выданно</div>\r\n          </div>\r\n          <div className=\"p-col-4\">\r\n            <i className=\"pi pi-check-square\"></i>\r\n            <div>6 Отправленно</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>      \r\n  </>)\r\n  }\r\n  return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}","import { useHistory} from 'react-router-dom'\r\nimport { Button } from 'primereact/button'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { Password } from 'primereact/password'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { InputMask } from 'primereact/inputmask'\r\nimport { classNames } from 'primereact/utils'\r\nimport  '../styles/components/Dropdown.css'\r\nimport  '../styles/components/Inputtext.css'\r\nimport React, { useContext, useState } from 'react'\r\nimport { FC } from 'react'\r\nimport { Field, Form } from 'react-final-form'\r\nimport { Context } from '..'\r\nimport logo from \"../images/security.png\"\r\nimport { IRegisterForm } from '../models/FormsData/IRegisterForm'\r\nimport { IRegistration } from '../models/requests/IRegistration'\r\nimport LoginImageDiv from '../static/LoginImageDiv'\r\nimport OrganizationService from '../services/OrganizationService'\r\nimport { useEffect } from 'react'\r\nimport { IReferenceId } from '../models/IReference'\r\n\r\nexport const RegistrationPage: FC = () =>{ \r\n  const history = useHistory()  \r\n  const [organizations, setOrganizations] = useState<IReferenceId[] | null>(null)\r\n  useEffect(()=>{\r\n    if (organizations===null) OrganizationService.getOrganizations().then(response=>\r\n      setOrganizations(response.data.organizations)\r\n    ).catch(()=>{\r\n      setOrganizations([])\r\n      history.push(\"/error/Ошибка API при получении списка МО\")\r\n    })},[organizations, history])\r\n  const {userStore} = useContext(Context)  \r\n  const validate = (data: IRegisterForm) => {\r\n    let errors: any = {} \r\n    if (!data.name || (data.name.trim().split(' ').length < 2)){             \r\n            errors.name = 'значение <ФИО> некорректно'\r\n    }       \r\n    if (!data.email) {\r\n       errors.email = 'Поле <Email> обязательно'\r\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(data.email)) {\r\n       errors.email = 'Неверный email Н.п. example@email.com'\r\n    }\r\n    if (!data.password) {\r\n       errors.password = 'Поле <Пароль> обязательно'\r\n    } else if (data.password && data.password!==data.password_confirmation) {\r\n       errors.password_confirmation = 'пароли не совпадают'\r\n    }     \r\n    if (data.organization == null ) {\r\n       errors.organization = 'Поле <Медорганизация> обязательно'       \r\n    }   \r\n    return errors\r\n  }\r\n    const onSubmit = async (data: IRegisterForm, form: any) => {\r\n    const request:IRegistration  = {} as IRegistration \r\n    try {\r\n        const names = data.name.trim().split(' ')\r\n        request.person_name_attributes = {family: names[0], given_1: names[1]}         \r\n        if (names.length>2)  request.person_name_attributes.given_2= names[2]  \r\n        if (data.phone_number) request.contacts_attributes={telcom_value: data.phone_number, main: true}        \r\n        request.email = data.email\r\n        request.password = data.password\r\n        request.password_confirmation = data.password_confirmation\r\n        request.organization_id = data.organization.id                  \r\n        userStore.registration(request)        \r\n    } catch (e:any){\r\n      history.push(\"/error/\"+e.message)      \r\n    }          \r\n  }\r\n  const isFormFieldValid = (meta: any) => !!(meta.touched && meta.error)\r\n  const getFormErrorMessage = (meta: any) => {\r\n    return (isFormFieldValid(meta) && <small className=\"p-error\">{meta.error}</small>)\r\n  } \r\n  if (organizations)\r\n  return (\r\n  <>\r\n    <div className=\"login-body\">\r\n      <div className=\"login-wrapper\">\r\n        <div className=\"login-panel\">\r\n          <img src={logo} className=\"logo_reg\" alt=\"logo\"></img>\r\n          <div className=\"login-form\">\r\n            <h2>Регистрация</h2>            \r\n            <Form onSubmit={onSubmit} initialValues={{name: '', email: '', password: '', password_confirmation: '', organization: null, phone_number: ''}} \r\n              validate={validate} \r\n              render={({ handleSubmit }) => (\r\n              <form onSubmit={handleSubmit} className=\"p-fluid\" >\r\n                <Field name=\"name\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                       <InputText id=\"name\" {...input} autoFocus className={classNames({ 'p-invalid': isFormFieldValid(meta) })} />\r\n                        <label htmlFor=\"name\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Фамилия имя отчество*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                )} />                \r\n                <Field name=\"email\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <i className=\"pi pi-envelope\" />\r\n                        <InputText id=\"email\" {...input} className={classNames({ 'p-invalid': isFormFieldValid(meta) })} />\r\n                        <label htmlFor=\"email\" \r\n                        className={classNames({ 'p-error': isFormFieldValid(meta) })}>Email*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"password\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password\" {...input} toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"password_confirmation\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password_confirmation\" {...input}  toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password_confirmation\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Еще раз пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"organization\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label\">\r\n                       <Dropdown id=\"organization\" {...input} options={organizations}\r\n                        filter showClear optionLabel=\"name\" className=\"p-inputwrapper p-inputwrapper-filled\"/>  \r\n                        <label htmlFor=\"organization\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Медорганизация*</label>                     \r\n                      </span>  \r\n                      {getFormErrorMessage(meta)}                    \r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"phone\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <i className=\"pi pi-phone\" />\r\n                       <InputMask id=\"phone\" {...input} mask=\"+7(999) 999-9999\"  className={classNames({ 'p-invalid': isFormFieldValid(meta) })} />\r\n                        <label htmlFor=\"phone\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Контактный номер</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                )} />\r\n              <Button type=\"submit\" label=\"ДАЛЕЕ\" />    \r\n            </form>)}/>            \r\n          </div>\r\n        </div>  \r\n        <LoginImageDiv/>      \r\n      </div>\r\n    </div>\r\n  </>)\r\n  else return <></>\r\n}","import { FC, useContext } from 'react'\r\nimport { Field, Form } from 'react-final-form'\r\nimport { Button } from 'primereact/button'\r\nimport { Password } from 'primereact/password'\r\nimport { classNames } from 'primereact/utils'\r\nimport { Context } from '..'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport LoginImageDiv from '../static/LoginImageDiv'\r\nimport logo from '../images/security.png'\r\nimport { IPassRenew } from '../models/requests/IPassRenew'\r\ninterface IParams {code: string}\r\ninterface IMatch extends IRouteMatch {  \r\n  params: IParams\r\n}\r\ninterface PasswordRecoveryPageProps extends IRouteProps {  \r\n  match: IMatch  \r\n}\r\nexport const PassordRecoveryPage: FC<PasswordRecoveryPageProps> = (props: PasswordRecoveryPageProps) =>{\r\n  const {userStore} = useContext(Context)\r\n  const validate = (data: IPassRenew) => {\r\n    let errors: any = {}        \r\n    if (!data.password) {\r\n       errors.password = 'Поле <Пароль> обязательно'\r\n    } else if (data.password && data.password!==data.password_confirmation) {\r\n       errors.password_confirmation = 'пароли не совпадают'\r\n    }      \r\n    return errors\r\n  }\r\n  const isFormFieldValid = (meta: any) => !!(meta.touched && meta.error)\r\n  const getFormErrorMessage = (meta: any) => {\r\n    return (isFormFieldValid(meta) && <small className=\"p-error\">{meta.error}</small>)\r\n  }\r\n  const onSubmit = (data: IPassRenew, form: any) => {          \r\n     userStore.pwd_renew(data)       \r\n  }   \r\n  return (\r\n  <>    \r\n    <div className=\"login-body\">\r\n      <div className=\"login-wrapper\">\r\n        <div className=\"login-panel\">\r\n          <img src={logo} className='logo' alt=\"logo\"></img>\r\n          <div  className=\"login-form\" >\r\n            <h2>Восстановить пароль</h2>            \r\n            <Form onSubmit={onSubmit} initialValues={{ activation_link: props.match.params.code,password: '', password_confirmation: '' }} \r\n              validate={validate} \r\n              render={({ handleSubmit }) => (\r\n              <form  onSubmit={handleSubmit}  className=\"p-fluid\">                \r\n                  <Field name=\"password\"  render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password\" autoComplete='off' {...input} toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Новый пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"password_confirmation\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password_confirmation\" {...input}  toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password_confirmation\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Еще раз пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n              <Button type=\"submit\" label=\"ИЗМЕНИТЬ\" />               \r\n            </form>)}/>            \r\n          </div>\r\n        </div>  \r\n        <LoginImageDiv/>      \r\n      </div>\r\n    </div>\r\n  </>)\r\n}","\r\nimport { FC } from 'react';\r\nimport { IRouteMatch } from '../models/IRouteMatch';\r\nimport { IRouteProps } from '../models/IRouteProps';\r\n\r\ninterface IParams {message: string}\r\ninterface IMatch extends IRouteMatch {  \r\n  params: IParams\r\n}\r\ninterface MessagePageProps extends IRouteProps {  \r\n  match: IMatch  \r\n}\r\n\r\n\r\nexport const MessagePage: FC<MessagePageProps> = (props: MessagePageProps) => {\r\n  return (\r\n    <>\r\n      <h1>Внимание:</h1>\r\n      <div>{props.match.params.message}!</div>\r\n    </>\r\n  )\r\n}","\r\nimport { FC } from 'react'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport '../styles/simplePage.css'\r\nimport '../styles/root.css'\r\n\r\n\r\ninterface IMatch extends IRouteMatch {  \r\n  params: {error: string}\r\n}\r\ninterface ErrorPageProps extends IRouteProps { \r\n    match: IMatch  \r\n}\r\n\r\nexport const ErrorPage: FC<ErrorPageProps> = (props: ErrorPageProps) => {\r\n  return (\r\n    <>\r\n      <div className=\"error-body\">\r\n        <div className=\"erpage-block\">\r\n          <h1>Ошибка!</h1>\r\n          <div>{props.match.params.error}</div>\r\n        </div>\r\n      </div>  \r\n    </>\r\n  )\r\n}","import { observer } from 'mobx-react-lite'\r\nimport { useEffect } from 'react'\r\nimport { useContext } from 'react'\r\nimport { FC } from 'react'\r\nimport { Route, Switch, useHistory } from 'react-router-dom'\r\nimport { Context } from '..'\r\nimport { NoMatchPage } from '../pages/NoMatchPage'\r\nimport { AUTH_ROUTES, NON_AUTH_ROUTES, PUBLIC_ROUTES } from '../routes'\r\n\r\nconst AppRouter: FC = observer(() => {  \r\n  const history = useHistory()\r\n  const {userStore} = useContext(Context) \r\n  const token =  userStore.token()\r\n  const isAuth =  userStore.isAuth()\r\n  userStore.setHistory(history)  \r\n  useEffect(()=>{\r\n    if (token.length>0 && !isAuth) {\r\n      userStore.checkAuth()\r\n    }   \r\n  },[token, userStore, isAuth])  \r\n  const chech_routes =  userStore.isAuth() || (token.length>0) ?  AUTH_ROUTES : NON_AUTH_ROUTES    \r\n  return (\r\n    <Switch> \r\n      { chech_routes.map(\r\n        ({path, Component})=><Route key={path} path={path} component={Component} exact/>)\r\n      }          \r\n      { PUBLIC_ROUTES.map(\r\n        ({path, Component})=><Route key={path} path={path} component={Component} exact/>)\r\n      }\r\n      <Route component={NoMatchPage} />                         \r\n    </Switch>     \r\n  )\r\n})\r\nexport default AppRouter\r\n","import {FC} from 'react'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport AppRouter  from './components/AppRouter'\r\nimport './styles/root.css'\r\nimport './styles/primereact.css'\r\nimport 'primeicons/primeicons.css'\r\nimport 'primeflex/primeflex.css'\r\n\r\n\r\nconst App: FC =() => {    \r\n  return (\r\n    <BrowserRouter>\r\n      <AppRouter/>\r\n    </BrowserRouter>  \r\n  )  \r\n}\r\n\r\nexport default App\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport Address from \"../models/FormsData/Address\"\r\nimport { checkFieldNullFlavor, INullFlavorR } from \"../models/INullFlavor\"\r\nimport { IReference } from \"../models/IReference\"\r\nimport { DEFAULT_ADDRESS, IAddressR } from \"../models/requests/IAddressR\"\r\nimport { IFiasItem } from \"../models/responses/IFiasItem\"\r\nimport FiasService from \"../services/FiasService\"\r\nimport { HOME_REGION_CODE } from \"../utils/defaults\"\r\nimport { removeEmpty } from \"../utils/functions\"\r\nexport default class AddressStore {\r\n  private _address: Address\r\n  private _isLoding: boolean\r\n  private _history: any\r\n  private _regionsOptions: IReference[] | undefined\r\n  private _fiasOptions: IFiasItem[] | undefined\r\n  private _dialogVisible: boolean\r\n  private _manualMode: boolean\r\n  private _onAddrComplete?: (() => void) | undefined\r\n\r\n  constructor() {\r\n    this._isLoding = false\r\n    this._address = new Address(DEFAULT_ADDRESS)\r\n    this._dialogVisible = false\r\n    this._manualMode = false\r\n    makeAutoObservable(this)\r\n  }\r\n\r\n  fetchRegionOptions() {\r\n    const _regions = localStorage.getItem(\"Regions\")\r\n    if (_regions) {\r\n      this._regionsOptions = JSON.parse(_regions) as IReference[]\r\n      this.defaultRegion()\r\n    } else\r\n      FiasService.getRegions()\r\n        .then((response) => {\r\n          this._regionsOptions = response.data.data.map((item) => {\r\n            return { code: item.code?.substr(0, 2), name: item.streetAddressLine } as IReference\r\n          })\r\n          localStorage.setItem(\"Regions\", JSON.stringify(this._regionsOptions))\r\n          this.defaultRegion()\r\n        })\r\n        .finally(() => (this._isLoding = false))\r\n  }\r\n\r\n  async searchBar(query: string, regionID = HOME_REGION_CODE as string) {\r\n    this._isLoding = true\r\n    try {\r\n      const response = await FiasService.searchBar(query, regionID)\r\n      if (response.data.data) this._fiasOptions = response.data.data\r\n      else this._fiasOptions = []\r\n      return this._fiasOptions\r\n    } catch (e) {\r\n      console.log(e)\r\n      return []\r\n    } finally {\r\n      this._isLoding = false\r\n    }\r\n  }\r\n  defaultRegion() {\r\n    return this._regionsOptions?.find((item) => item.code === HOME_REGION_CODE)\r\n  }\r\n  async getChildItems(parent: string, level: string, query = \"\") {\r\n    this._isLoding = true\r\n    try {\r\n      const response = await FiasService.getChildItems(parent, level, query)\r\n      if (response.data.data)\r\n        this._fiasOptions = response.data.data.map((item) => {\r\n          if (item.level !== \"building\") item.name = `${item.name} ${item.shortname}`\r\n          return item\r\n        })\r\n      else this._fiasOptions = []\r\n      return this._fiasOptions\r\n    } finally {\r\n      this._isLoding = false\r\n    }\r\n  }\r\n\r\n  // Returned full streetAddressLine include flat and postal code to save in IAddress\r\n  // Возвращает полный строковый адрес, включая квартиру и почтовы код,\r\n  // обычно не используемые в строке поиска, для сохранения в POJO\r\n\r\n  streetAddressLine(): string {\r\n    const addr = this._address\r\n    return `${addr.streetAddressLine}${addr.flat ? \", \" + addr.flat : \"\"}${\r\n      addr.postalCode ? \", \" + addr.postalCode : \"\"\r\n    }`\r\n  }\r\n  createNullFlavors(): INullFlavorR[] {\r\n    const addr = this._address\r\n    //check postalcode\r\n    checkFieldNullFlavor(\"postalCode\", addr.postalCode, addr.nullFlavors)\r\n    //check aoGUID\r\n    checkFieldNullFlavor(\"aoGUID\", addr.aoGUID, addr.nullFlavors)\r\n    //check houseGUID\r\n    checkFieldNullFlavor(\"houseGUID\", addr.houseGUID, addr.nullFlavors)\r\n    return addr.null_flavors_attributes()\r\n  }\r\n  // Check address for FIAS requarens\r\n  isNotStrictly(): boolean {\r\n    const addr = this._address\r\n    return !addr.aoGUID || !addr.houseGUID || !addr.postalCode\r\n  }\r\n  // Returned POJO address data\r\n  // Возвращает POJO объект адреса\r\n  addressProps(): IAddressR {\r\n    const addr = this._address\r\n    const _result = {\r\n      id: addr.id,\r\n      state: addr.state?.code,\r\n      streetAddressLine: this.streetAddressLine(),\r\n      aoGUID: addr.aoGUID,\r\n      houseGUID: addr.houseGUID,\r\n      postalCode: addr.postalCode,\r\n      house_number: addr.housenum,\r\n      struct_number: addr.strucnum,\r\n      building_number: addr.buildnum,\r\n      flat_number: addr.flat,\r\n      parent_guid: addr.parent,\r\n      null_flavors_attributes: [...this.createNullFlavors()],\r\n    } as IAddressR\r\n    return removeEmpty(_result)\r\n  }\r\n\r\n  set history(history: any) {\r\n    this._history = history\r\n  }\r\n  get history() {\r\n    return this._history\r\n  }\r\n\r\n  set isLoading(isLoding: boolean) {\r\n    this._isLoding = isLoding\r\n  }\r\n  get isLoading() {\r\n    return this._isLoding\r\n  }\r\n  get address() {\r\n    return this._address\r\n  }\r\n  set address(value: Address) {\r\n    this._address = value\r\n  }\r\n  get regionsOptions() {\r\n    return this._regionsOptions\r\n  }\r\n  get fiasOptions() {\r\n    return this._fiasOptions\r\n  }\r\n  clear() {\r\n    if (this._address === undefined) return\r\n    this._address.postalCode = undefined\r\n    this._address.district = undefined\r\n    this._address.city = undefined\r\n    this._address.houseGUID = undefined\r\n    this._address.aoGUID = undefined\r\n    this._address.street = undefined\r\n    this._address.town = undefined\r\n    this._address.housenum = undefined\r\n    this._address.buildnum = undefined\r\n    this._address.strucnum = undefined\r\n    this._address.streetAddressLine = this._address.state?.name + \", \" || \"\"\r\n  }\r\n  get dialogVisible(): boolean {\r\n    return this._dialogVisible\r\n  }\r\n  set dialogVisible(value: boolean) {\r\n    this._dialogVisible = value\r\n  }\r\n\r\n  get manualMode(): boolean {\r\n    return this._manualMode\r\n  }\r\n  set manualMode(value: boolean) {\r\n    this._manualMode = value\r\n  }\r\n\r\n  get onAddrComplete(): (() => void) | undefined {\r\n    return this._onAddrComplete\r\n  }\r\n  set onAddrComplete(value: (() => void) | undefined) {\r\n    this._onAddrComplete = value\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IPatient } from \"../IPatient\"\r\nimport IIdentityR from \"../requests/IIdentityR\"\r\nimport { IPatientR } from \"../requests/IPatientR\"\r\nimport Identity from \"./Identity\"\r\nimport Person from \"./Person\"\r\nexport const MAIN_REGISTRATION_ADDRESS = 1\r\nexport default class Patient implements ISerializable {\r\n  private _id?: string | undefined\r\n  private _person?: Person\r\n  private _gender?: number | undefined\r\n  private _birth_date: Date | undefined\r\n  private _birth_year?: number\r\n  private _provider_organization?: number\r\n  private _addrType?: number\r\n  private _guid: string\r\n  private _identity?: Identity\r\n  private _nullFlavors: INullFlavorR[]\r\n  private _oldOne?: IPatient\r\n  constructor(props = {} as IPatient) {\r\n    this._guid = props.guid || uuidv4()\r\n    this._oldOne = { ...props }\r\n    if (props.person) this._person = new Person(props.person)\r\n    this._provider_organization = props.organization_id\r\n    if (props.gender) this._gender = props.gender\r\n    this._addrType = props.addr_type || MAIN_REGISTRATION_ADDRESS\r\n    if (props.birth_date) this._birth_date = new Date(props.birth_date)\r\n    if (props.id) this._id = props.id\r\n    if (props.birth_year) this._birth_year = props.birth_year\r\n    if (props.identity) this._identity = new Identity(props.identity)\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes(): IPatientR {\r\n    let _patient = { guid: this._guid } as IPatientR\r\n    if (this._id) _patient.id = this.id\r\n    if (this._addrType) _patient.addr_type = this._addrType\r\n    if (this._birth_date) _patient.birth_date = this._birth_date.toDateString()\r\n    if (this._birth_year) _patient.birth_year = this._birth_year\r\n    if (this._gender) _patient.gender = this._gender\r\n    if (this._identity) _patient.identity_attributes = this._identity.getAttributes()\r\n    else if (this._oldOne?.identity?.id)\r\n      _patient.identity_attributes = { id: this._oldOne.identity.id, _destroy: \"1\" } as IIdentityR\r\n    if (this._provider_organization) _patient.organization_id = this._provider_organization\r\n    if (this._person) _patient.person_attributes = this._person.getAttributes()\r\n    else _patient.person_id = null\r\n    if (this.nullFlavors.length > 0) _patient.null_flavors_attributes = this.null_flavors_attributes()\r\n    return _patient\r\n  }\r\n  get id() {\r\n    return this._id\r\n  }\r\n  set id(id: string | undefined) {\r\n    this._id = id\r\n  }\r\n  get person() {\r\n    return this._person\r\n  }\r\n\r\n  set person(value: Person | undefined) {\r\n    this._person = value\r\n  }\r\n\r\n  get gender() {\r\n    return this._gender\r\n  }\r\n  set gender(gender: number | undefined) {\r\n    this._gender = gender\r\n  }\r\n  get birth_date() {\r\n    return this._birth_date\r\n  }\r\n  set birth_date(birth_date: Date | undefined) {\r\n    this._birth_date = birth_date\r\n  }\r\n  get guid() {\r\n    return this._guid\r\n  }\r\n\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  get addr_type() {\r\n    return this._addrType\r\n  }\r\n  set addr_type(addr_type: number | undefined) {\r\n    this._addrType = addr_type\r\n  }\r\n  get provider_organization() {\r\n    return this._provider_organization\r\n  }\r\n  set provider_organization(provider_organization: number | undefined) {\r\n    this._provider_organization = provider_organization\r\n  }\r\n  get birth_year() {\r\n    return this._birth_year\r\n  }\r\n  set birth_year(birth_year: number | undefined) {\r\n    this._birth_year = birth_year\r\n  }\r\n  get identity() {\r\n    return this._identity\r\n  }\r\n  set identity(identity: Identity | undefined) {\r\n    this._identity = identity\r\n  }\r\n\r\n  setBirthDay(value: Date | undefined, isYear: boolean) {\r\n    if (value && !isYear) {\r\n      if (this._birth_date === undefined)\r\n        this.nullFlavors = this.nullFlavors.filter((element) => element.parent_attr !== \"birth_date\")\r\n      this.birth_date = value\r\n      this.birth_year = undefined\r\n    } else if (value && isYear) {\r\n      if (this.birth_date === undefined)\r\n        this.nullFlavors = this.nullFlavors.filter((element) => element.parent_attr !== \"birth_date\")\r\n      this.birth_date = value\r\n      this.birth_year = (this.birth_date as Date).getFullYear()\r\n    } else {\r\n      this.birth_date = undefined\r\n      this.birth_year = undefined\r\n    }\r\n  }\r\n}\r\n","import { autorun, makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NA, NULL_FLAVOR_IDX, REGION_OKATO } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IAudit } from \"../IAudit\"\r\nimport { checkFieldNullFlavor, INullFlavorR } from \"../INullFlavor\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { ICertificateR } from \"../requests/ICertificateR\"\r\nimport { IChildInfoR } from \"../requests/IChildInfoR\"\r\nimport { IDeathReasonR } from \"../requests/IDeathReasonR\"\r\nimport { ICertificate } from \"../responses/ICertificate\"\r\nimport { IDeathReason } from \"../responses/IDeathReason\"\r\nimport Authenticator from \"./Authenticator\"\r\nimport { ChildInfo } from \"./ChildInfo\"\r\nimport { DeathReason } from \"./DeathReason\"\r\nimport Participant from \"./Participant\"\r\nimport Patient from \"./Patient\"\r\n\r\nexport default class Certificate implements ISerializable {\r\n  private _id: number\r\n  private _series?: string\r\n  private _number?: string\r\n  private _issueDate?: Date\r\n  private _certType?: number\r\n  private _seriesPrev?: string\r\n  private _numberPrev?: string\r\n  private _effTimePrev?: Date\r\n  private _patient: Patient\r\n  private _lifeAreaType?: number\r\n  private _deathAreaType?: number\r\n  private _deathDatetime?: Date\r\n  private _deathYear?: number\r\n  private _deathMonth?: number | undefined\r\n  private _deathPlace?: number | undefined\r\n  private _maritalStatus?: number | undefined\r\n  private _educationLevel?: number | undefined\r\n  private _socialStatus?: number | undefined\r\n  private _deathKind?: number | undefined\r\n  private _extReasonTime?: Date | undefined\r\n  private _extReasonDescription?: string | undefined\r\n  private _reasonA?: DeathReason | undefined\r\n  private _reasonB?: DeathReason\r\n  private _reasonC?: DeathReason\r\n  private _reasonD?: DeathReason\r\n  private _deathReasons: DeathReason[]\r\n  private _reasonACME?: DeathReason | undefined\r\n  private _deathAddr?: IAddressR\r\n  private _guid?: string\r\n  private _policyOMS?: string | undefined\r\n  private _childInfo?: ChildInfo | undefined\r\n  private _establishedMedic?: number | undefined\r\n  private _basisDetermining?: number | undefined\r\n  private _trafficAccident?: number | undefined\r\n  private _pregnancyConnection?: number | undefined\r\n  private _author?: Authenticator | undefined\r\n  private _audithor?: Authenticator | undefined\r\n  private _legalAuthenticator?: Authenticator | undefined\r\n  private _nullFlavors: INullFlavorR[]\r\n  private _audits: IAudit[]\r\n  private _custodian_id?: number\r\n  private _participant?: Participant | undefined\r\n  private _oldOne?: ICertificate | undefined\r\n  private _latestOne?: ICertificate | undefined\r\n  disposers: (() => void)[]\r\n\r\n  constructor(props: ICertificate) {\r\n    if (props.null_flavors && props.null_flavors.length > 0)\r\n      this._nullFlavors = props.null_flavors.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      })\r\n    else this._nullFlavors = []\r\n    this._oldOne = { ...props }\r\n    this._latestOne = props.latest_one\r\n    this._audits = []\r\n    this._id = props.id || -1\r\n    this._guid = props.guid || uuidv4()\r\n    this._custodian_id = props.custodian?.id || props.patient?.organization_id\r\n    this._patient = props.patient ? new Patient(props.patient) : new Patient()\r\n    if (props.issue_date) this._issueDate = new Date(props.issue_date)\r\n    this._certType = props.cert_type\r\n    this._series = props.series || REGION_OKATO\r\n    this._number = props.number\r\n    if (!!props.death_datetime) this._deathDatetime = new Date(props.death_datetime)\r\n    this._deathYear = props.death_year\r\n    this._numberPrev = props.number_prev\r\n    this._seriesPrev = props.series_prev\r\n    this._policyOMS = props.policy_OMS\r\n    this._lifeAreaType = props.life_area_type\r\n    this._deathAreaType = props.death_area_type\r\n    this._deathAddr = {\r\n      ...props.death_addr,\r\n      null_flavors_attributes:\r\n        props.death_addr?.null_flavors?.map((item) => {\r\n          return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n        }) || [],\r\n    } as IAddressR\r\n    this._deathPlace = props.death_place\r\n    this._deathKind = props.death_kind\r\n    this._educationLevel = props.education_level\r\n    this._maritalStatus = props.marital_status\r\n    this._socialStatus = props.social_status\r\n    if (props.eff_time_prev) this._effTimePrev = new Date(props.eff_time_prev)\r\n    if (props.child_info) this._childInfo = new ChildInfo(props.child_info)\r\n    if (props.author) this._author = new Authenticator(props.author)\r\n    if (props.audithor) this._audithor = new Authenticator(props.audithor)\r\n    if (props.legal_authenticator) this._legalAuthenticator = new Authenticator(props.legal_authenticator)\r\n    if (props.ext_reason_time) this._extReasonTime = new Date(props.ext_reason_time)\r\n    this._extReasonDescription = props.ext_reason_description\r\n    this._establishedMedic = props.established_medic\r\n    this._basisDetermining = props.basis_determining\r\n    this._trafficAccident = props.traffic_accident\r\n    this._pregnancyConnection = props.pregnancy_connection\r\n\r\n    if (props.a_reason) this._reasonA = new DeathReason(props.a_reason)\r\n    else this._reasonA = new DeathReason({} as IDeathReason)\r\n    if (props.b_reason) this._reasonB = new DeathReason(props.b_reason)\r\n    if (props.c_reason) this._reasonC = new DeathReason(props.c_reason)\r\n    if (props.reason_ACME) this.changeReasonACME(props.reason_ACME)\r\n\r\n    if (props.d_reason) this._reasonD = new DeathReason(props.d_reason)\r\n    if (props.death_reasons) this._deathReasons = props.death_reasons.map((reason) => new DeathReason(reason))\r\n    else this._deathReasons = []\r\n    if (props.participant) this._participant = new Participant(props.participant)\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n    this.disposers = []\r\n    this.disposers[0] = autorun(() => checkFieldNullFlavor(\"b_reason\", this.reasonB, this._nullFlavors, NA))\r\n    this.disposers[1] = autorun(() => checkFieldNullFlavor(\"c_reason\", this._reasonC, this._nullFlavors, NA))\r\n    this.disposers[2] = autorun(() => checkFieldNullFlavor(\"d_reason\", this.reasonD, this._nullFlavors, NA))\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  changeReasonACME(value: string | undefined) {\r\n    if (!value || \"\" === value) this._reasonACME = undefined\r\n    else {\r\n      if (value === this._reasonA?.diagnosis?.ICD10) this._reasonACME = this._reasonA\r\n      else if (value === this._reasonB?.diagnosis?.ICD10) this._reasonACME = this._reasonB\r\n      else if (value === this._reasonC?.diagnosis?.ICD10) this._reasonACME = this._reasonC\r\n      else this._reasonACME = undefined\r\n    }\r\n  }\r\n  milisecAge() {\r\n    // Discard the time-zone information.\r\n    const a = this._patient.birth_date as Date\r\n    if (a === undefined) return false\r\n    const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate(), a.getHours(), a.getMinutes())\r\n    const b = this._deathDatetime as Date\r\n    if (b === undefined) return false\r\n    const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate(), b.getHours(), b.getMinutes())\r\n    return utc2 - utc1\r\n  }\r\n  hoursAge() {\r\n    const _MS_PER_HOUR = 1000 * 60 * 60\r\n    const ms = this.milisecAge()\r\n    if (ms) return Math.floor(ms / _MS_PER_HOUR)\r\n    else return false\r\n  }\r\n  daysAge() {\r\n    const _MS_PER_DAY = 1000 * 60 * 60 * 24\r\n    const ms = this.milisecAge()\r\n    if (ms) return Math.floor(ms / _MS_PER_DAY)\r\n    else return false\r\n  }\r\n  yearsAge() {\r\n    const dd = this._deathDatetime as Date\r\n    const db = this._patient.birth_date as Date\r\n    if (!!dd && !!db) return dd.getFullYear() - db.getFullYear()\r\n    else return false\r\n  }\r\n  setDeathDay(value: Date | undefined, isYear: boolean) {\r\n    if (value && !isYear) {\r\n      this.deathDatetime = value\r\n      this.deathYear = undefined\r\n    } else if (value && isYear) {\r\n      this.deathDatetime = value\r\n      this.deathYear = (this.deathDatetime as Date).getFullYear()\r\n    } else {\r\n      this.deathDatetime = undefined\r\n      this.deathYear = undefined\r\n    }\r\n  }\r\n\r\n  saveReasonEffTime(reason: DeathReason) {\r\n    if (!this._deathDatetime) return false\r\n    let result = new Date(this._deathDatetime)\r\n    if (reason.minutes) result.setMinutes(result.getMinutes() - reason.minutes)\r\n    if (reason.hours) result.setHours(result.getHours() - reason.hours)\r\n    if (reason.days) result.setDate(result.getDate() - reason.days)\r\n    if (reason.weeks) result.setDate(result.getDate() - reason.weeks * 7)\r\n    if (reason.months) result.setMonth(result.getMonth() - reason.months)\r\n    if (reason.years) result.setFullYear(result.getFullYear() - reason.years)\r\n    reason.effectiveTime = result\r\n    return true\r\n  }\r\n\r\n  getAttributes(): ICertificateR {\r\n    let _cert = { guid: this._guid } as ICertificateR\r\n    if (this._id > -1) _cert.id = this._id\r\n    if (this._issueDate) _cert.issue_date = this._issueDate.toDateString()\r\n    _cert.number_prev = this._numberPrev\r\n    _cert.series_prev = this._seriesPrev\r\n    _cert.eff_time_prev = this._effTimePrev?.toDateString()\r\n    if (this._audithor) {\r\n      _cert.audithor_attributes = this._audithor.getAttributes()\r\n      if (!_cert.audithor_attributes.id && !!this._oldOne?.audithor?.id)\r\n        _cert.audithor_attributes.id = this._oldOne.audithor.id\r\n    } else if (this._oldOne && this._oldOne.audithor)\r\n      _cert.audithor_attributes = { id: this._oldOne.audithor.id, _destroy: \"1\" }\r\n    if (this._author) {\r\n      _cert.author_attributes = this._author.getAttributes()\r\n      if (!_cert.author_attributes.id && !!this._oldOne?.author?.id) _cert.author_attributes.id = this._oldOne.author.id\r\n    } else if (this._oldOne && this._oldOne.author)\r\n      _cert.author_attributes = { id: this._oldOne.author.id, _destroy: \"1\" }\r\n    if (this._legalAuthenticator) {\r\n      _cert.legal_authenticator_attributes = this._legalAuthenticator.getAttributes()\r\n      if (!_cert.legal_authenticator_attributes.id && !!this._oldOne?.legal_authenticator?.id)\r\n        _cert.legal_authenticator_attributes.id = this._oldOne.legal_authenticator.id\r\n    } else if (this._oldOne && this._oldOne.legal_authenticator)\r\n      _cert.legal_authenticator_attributes = { id: this._oldOne.legal_authenticator.id, _destroy: \"1\" }\r\n    if (this._basisDetermining) _cert.basis_determining = this._basisDetermining\r\n    if (this._certType) _cert.cert_type = this._certType\r\n    if (this._childInfo) _cert.child_info_attributes = this._childInfo.getAttributes()\r\n    else if (this._oldOne && this._oldOne.child_info) _cert.child_info_attributes = { _destroy: \"1\" } as IChildInfoR\r\n    if (this._deathAddr && !!this._deathAddr.state && !!this._deathAddr.streetAddressLine)\r\n      _cert.death_addr_attributes = { ...this._deathAddr } as IAddressR\r\n    else if (this._oldOne && this._oldOne.death_addr)\r\n      _cert.death_addr_attributes = { id: this._oldOne.death_addr.id, _destroy: \"1\" } as IAddressR\r\n    if (this._deathAreaType) _cert.death_area_type = this._deathAreaType\r\n    if (this._deathDatetime) _cert.death_datetime = this._deathDatetime\r\n    if (this._deathYear) _cert.death_year = this._deathYear\r\n    if (this._deathKind) _cert.death_kind = this._deathKind\r\n    if (this._deathPlace) _cert.death_place = this.deathPlace\r\n    if (this._deathReasons.length > 0)\r\n      _cert.death_reasons_attributes = this._deathReasons.map((item) => item.getAttributes())\r\n    if (this._oldOne?.death_reasons && this._oldOne.death_reasons.length > 0) {\r\n      let _temp = [] as IDeathReasonR[]\r\n      this._oldOne.death_reasons.forEach((item) => {\r\n        if (\r\n          !_cert.death_reasons_attributes ||\r\n          _cert.death_reasons_attributes.findIndex((el) => el.id === item.id) === -1\r\n        )\r\n          _temp.push({ id: item.id, _destroy: \"1\" } as IDeathReasonR)\r\n      })\r\n      if (_cert.death_reasons_attributes && _temp.length > 0)\r\n        _cert.death_reasons_attributes = _cert.death_reasons_attributes.concat(_temp)\r\n      else if (_temp.length > 0) _cert.death_reasons_attributes = _temp\r\n    }\r\n    if (this._educationLevel) _cert.education_level = this._educationLevel\r\n    if (this._establishedMedic) _cert.established_medic = this._establishedMedic\r\n    if (this._extReasonDescription) _cert.ext_reason_description = this.extReasonDescription\r\n    if (this._extReasonTime) _cert.ext_reason_time = this._extReasonTime\r\n    if (this._lifeAreaType) _cert.life_area_type = this._lifeAreaType\r\n    if (this._policyOMS) _cert.policy_OMS = this._policyOMS\r\n    if (this._pregnancyConnection) _cert.pregnancy_connection = this.pregnancyConnection\r\n    if (this._maritalStatus) _cert.marital_status = this._maritalStatus\r\n    if (this.nullFlavors.length > 0) _cert.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._reasonA && this._reasonA.diagnosis) _cert.a_reason_attributes = this._reasonA.getAttributes()\r\n    else if (this._oldOne && this._oldOne.a_reason)\r\n      _cert.a_reason_attributes = { id: this._oldOne.a_reason.id, _destroy: \"1\" } as IDeathReasonR\r\n    if (this._reasonACME) _cert.reason_ACME = this._reasonACME.diagnosis?.ICD10\r\n    if (this._reasonB && this._reasonB.diagnosis) _cert.b_reason_attributes = this._reasonB.getAttributes()\r\n    else if (this._oldOne && this._oldOne.b_reason)\r\n      _cert.b_reason_attributes = { id: this._oldOne.b_reason.id, _destroy: \"1\" } as IDeathReasonR\r\n    if (this._reasonC && this._reasonC.diagnosis) _cert.c_reason_attributes = this._reasonC.getAttributes()\r\n    else if (this._oldOne && this._oldOne.c_reason)\r\n      _cert.c_reason_attributes = { id: this._oldOne.c_reason.id, _destroy: \"1\" } as IDeathReasonR\r\n    if (this._reasonD && this._reasonD.diagnosis) _cert.d_reason_attributes = this._reasonD.getAttributes(true)\r\n    else if (this._oldOne && this._oldOne.d_reason)\r\n      _cert.d_reason_attributes = { id: this._oldOne.d_reason.id, _destroy: \"1\" } as IDeathReasonR\r\n    if (this._series) _cert.series = this._series\r\n    if (this._socialStatus) _cert.social_status = this._socialStatus\r\n    if (this._trafficAccident) _cert.traffic_accident = this._trafficAccident\r\n    if (this._patient) _cert.patient_attributes = this._patient.getAttributes()\r\n    _cert.custodian_id = this._custodian_id || _cert.patient_attributes?.organization_id\r\n    if (this._participant) _cert.participant_attributes = this._participant.getAttributes()\r\n    //console.log(\"_cert\", _cert)\r\n    return _cert\r\n  }\r\n  //#region Getters - Setters\r\n  get id() {\r\n    return this._id\r\n  }\r\n  set id(id: number) {\r\n    this._id = id\r\n  }\r\n  get series() {\r\n    return this._series\r\n  }\r\n  set series(series: string | undefined) {\r\n    this._series = series\r\n  }\r\n  get number() {\r\n    return this._number\r\n  }\r\n  set number(number: string | undefined) {\r\n    this._number = number\r\n  }\r\n  get issueDate() {\r\n    return this._issueDate\r\n  }\r\n  set issueDate(issueDate: Date | undefined) {\r\n    this._issueDate = issueDate\r\n  }\r\n  get deathDatetime() {\r\n    return this._deathDatetime\r\n  }\r\n  set deathDatetime(death_datetime: Date | undefined) {\r\n    this._deathDatetime = death_datetime\r\n  }\r\n  get certType() {\r\n    return this._certType\r\n  }\r\n  set certType(cert_type: number | undefined) {\r\n    this._certType = cert_type\r\n  }\r\n  get seriesPrev() {\r\n    return this._seriesPrev\r\n  }\r\n  set seriesPrev(series: string | undefined) {\r\n    this._seriesPrev = series\r\n  }\r\n  get numberPrev() {\r\n    return this._numberPrev\r\n  }\r\n  set numberPrev(number: string | undefined) {\r\n    this._numberPrev = number\r\n  }\r\n  get guid() {\r\n    return this._guid\r\n  }\r\n  get author(): Authenticator | undefined {\r\n    return this._author\r\n  }\r\n  set author(value: Authenticator | undefined) {\r\n    this._author = value\r\n  }\r\n  get authenticator(): Authenticator | undefined {\r\n    return this._audithor\r\n  }\r\n  set authenticator(value: Authenticator | undefined) {\r\n    this._audithor = value\r\n  }\r\n  get legalAuthenticator(): Authenticator | undefined {\r\n    return this._legalAuthenticator\r\n  }\r\n  set legalAuthenticator(value: Authenticator | undefined) {\r\n    this._legalAuthenticator = value\r\n  }\r\n\r\n  get extReasonTime(): Date | undefined {\r\n    return this._extReasonTime\r\n  }\r\n  set extReasonTime(value: Date | undefined) {\r\n    this._extReasonTime = value\r\n  }\r\n  get establishedMedic(): number | undefined {\r\n    return this._establishedMedic\r\n  }\r\n  set establishedMedic(value: number | undefined) {\r\n    this._establishedMedic = value\r\n  }\r\n  get basisDetermining(): number | undefined {\r\n    return this._basisDetermining\r\n  }\r\n  set basisDetermining(value: number | undefined) {\r\n    this._basisDetermining = value\r\n  }\r\n  get trafficAccident(): number | undefined {\r\n    return this._trafficAccident\r\n  }\r\n  set trafficAccident(value: number | undefined) {\r\n    this._trafficAccident = value\r\n  }\r\n  get pregnancyConnection(): number | undefined {\r\n    return this._pregnancyConnection\r\n  }\r\n  set pregnancyConnection(value: number | undefined) {\r\n    this._pregnancyConnection = value\r\n  }\r\n\r\n  get patient() {\r\n    return this._patient\r\n  }\r\n  get effTimePrev() {\r\n    return this._effTimePrev\r\n  }\r\n  set effTimePrev(eff_time: Date | undefined) {\r\n    this._effTimePrev = eff_time\r\n  }\r\n  get deathYear() {\r\n    return this._deathYear\r\n  }\r\n  set deathYear(death_year: number | undefined) {\r\n    this._deathYear = death_year\r\n  }\r\n\r\n  get policyOMS() {\r\n    return this._policyOMS || \"\"\r\n  }\r\n\r\n  set policyOMS(policyOMS: string | undefined) {\r\n    this._policyOMS = policyOMS\r\n  }\r\n\r\n  get lifeAreaType() {\r\n    return this._lifeAreaType\r\n  }\r\n  set lifeAreaType(lat: number | undefined) {\r\n    this._lifeAreaType = lat\r\n  }\r\n  get deathAreaType() {\r\n    return this._deathAreaType\r\n  }\r\n  set deathAreaType(dat: number | undefined) {\r\n    this._deathAreaType = dat\r\n  }\r\n\r\n  get deathAddr() {\r\n    return this._deathAddr\r\n  }\r\n  set deathAddr(value: IAddressR | undefined) {\r\n    this._deathAddr = value\r\n  }\r\n  get deathKind(): number | undefined {\r\n    return this._deathKind\r\n  }\r\n  set deathKind(value: number | undefined) {\r\n    this._deathKind = value\r\n  }\r\n  get socialStatus(): number | undefined {\r\n    return this._socialStatus\r\n  }\r\n  set socialStatus(value: number | undefined) {\r\n    this._socialStatus = value\r\n  }\r\n  get educationLevel(): number | undefined {\r\n    return this._educationLevel\r\n  }\r\n  set educationLevel(value: number | undefined) {\r\n    this._educationLevel = value\r\n  }\r\n  get maritalStatus(): number | undefined {\r\n    return this._maritalStatus\r\n  }\r\n  set maritalStatus(value: number | undefined) {\r\n    this._maritalStatus = value\r\n  }\r\n  get deathPlace(): number | undefined {\r\n    return this._deathPlace\r\n  }\r\n  set deathPlace(value: number | undefined) {\r\n    this._deathPlace = value\r\n  }\r\n  get deathMonth(): number | undefined {\r\n    return this._deathMonth\r\n  }\r\n  set deathMonth(value: number | undefined) {\r\n    this._deathMonth = value\r\n  }\r\n  get childInfo(): ChildInfo | undefined {\r\n    return this._childInfo\r\n  }\r\n  set childInfo(value: ChildInfo | undefined) {\r\n    this._childInfo = value\r\n  }\r\n  get extReasonDescription(): string | undefined {\r\n    return this._extReasonDescription\r\n  }\r\n  set extReasonDescription(value: string | undefined) {\r\n    this._extReasonDescription = value\r\n  }\r\n  get reasonA(): DeathReason | undefined {\r\n    return this._reasonA\r\n  }\r\n  set reasonA(value: DeathReason | undefined) {\r\n    this._reasonA = value\r\n  }\r\n  get reasonB(): DeathReason | undefined {\r\n    return this._reasonB\r\n  }\r\n  set reasonB(value: DeathReason | undefined) {\r\n    this._reasonB = value\r\n  }\r\n  get reasonC(): DeathReason | undefined {\r\n    return this._reasonC\r\n  }\r\n  set reasonC(value: DeathReason | undefined) {\r\n    this._reasonC = value\r\n  }\r\n  get reasonD(): DeathReason | undefined {\r\n    return this._reasonD\r\n  }\r\n  set reasonD(value: DeathReason | undefined) {\r\n    this._reasonD = value\r\n  }\r\n  get reasonACME(): DeathReason | undefined {\r\n    return this._reasonACME\r\n  }\r\n  set reasonACME(value: DeathReason | undefined) {\r\n    this._reasonACME = value\r\n  }\r\n  get deathReasons(): DeathReason[] {\r\n    return this._deathReasons\r\n  }\r\n  set deathReasons(value: DeathReason[]) {\r\n    this._deathReasons = value\r\n  }\r\n  get audits() {\r\n    return this._audits\r\n  }\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n\r\n  get participant(): Participant | undefined {\r\n    return this._participant\r\n  }\r\n  set participant(value: Participant | undefined) {\r\n    this._participant = value\r\n  }\r\n  get latestOne(): ICertificate | undefined {\r\n    return this._latestOne\r\n  }\r\n  set latestOne(value: ICertificate | undefined) {\r\n    this._latestOne = value\r\n  }\r\n\r\n  get oldOne(): ICertificate | undefined {\r\n    return this._oldOne\r\n  }\r\n\r\n  //#endregion\r\n\r\n  dispose() {\r\n    // So, to avoid subtle memory issues, always call the\r\n    // disposers when the reactions are no longer needed.\r\n    this.disposers.forEach((disposer) => disposer())\r\n  }\r\n}\r\n","export const DEFAULT_RENDER_OPTIONS = { except: [\"updated_at\", \"created_at\"] }\r\n","import { DEFAULT_RENDER_OPTIONS } from \"./default\"\r\n\r\nexport const NULLFLAVORABLE_RENDER_OPTIONS = {\r\n  ...DEFAULT_RENDER_OPTIONS,\r\n  include: [\"null_flavors\"],\r\n}\r\n","export const DEFAULT_AUTHENTICATOR_RENDER_OPTIONS = {\r\n  only: [\"id\", \"doctor\", \"time\"],\r\n  include: [\"doctor\"],\r\n}\r\n","export const LETTERED_DEATH_REASON_RENDER_OPTIONS = {\r\n  except: [\"diagnosis_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"diagnosis\", \"null_flavors\"],\r\n}\r\n","import { AxiosResponse } from \"axios\"\r\nimport $api, { API_URL } from \"../http\"\r\nimport { NULLFLAVORABLE_RENDER_OPTIONS } from \"../models/render_options/address\"\r\nimport { DEFAULT_AUTHENTICATOR_RENDER_OPTIONS } from \"../models/render_options/Authenticator\"\r\nimport { CHILD_INFO_RENDER_OPTIONS } from \"../models/render_options/child_info\"\r\nimport { DEFAULT_RENDER_OPTIONS } from \"../models/render_options/default\"\r\nimport { SHORT_DOCTOR_RENDER_OPTIONS } from \"../models/render_options/Doctor\"\r\nimport { EXTERNAL_DEATH_REASON_RENDER_OPTIONS } from \"../models/render_options/external_death_reason\"\r\nimport { LETTERED_DEATH_REASON_RENDER_OPTIONS } from \"../models/render_options/lettered_reason\"\r\nimport { OTHER_REASON_RENDER_OPTIONS } from \"../models/render_options/other_reason\"\r\nimport { PARTICIPANT_RENDER_OPTIONS } from \"../models/render_options/Participant\"\r\nimport { PATIENT_RENDER_OPTIONS } from \"../models/render_options/patient\"\r\nimport { PERSON_RENDER_OPTIONS } from \"../models/render_options/person\"\r\nimport { PROCEDURE_RENDER_OPTIONS } from \"../models/render_options/procedure\"\r\nimport { RELATED_SUBJECT_RENDER_OPTIONS } from \"../models/render_options/related_subject\"\r\nimport { ICertificateR } from \"../models/requests/ICertificateR\"\r\nimport { ICertificate } from \"../models/responses/ICertificate\"\r\n\r\nexport const CERTIFICATE_FULL_RENDER_OPTIONS = {\r\n  render_options: {\r\n    except: [\"custodian_id\", \"patient_id\", \"updated_at\"],\r\n    include: [\r\n      \"patient\",\r\n      \"author\",\r\n      \"legal_authenticator\",\r\n      \"audithor\",\r\n      \"a_reason\",\r\n      \"b_reason\",\r\n      \"c_reason\",\r\n      \"d_reason\",\r\n      \"death_addr\",\r\n      \"child_info\",\r\n      \"custodian\",\r\n      \"death_reasons\",\r\n      \"participant\",\r\n      \"null_flavors\",\r\n      \"latest_one\",\r\n    ],\r\n  },\r\n  includes: [\r\n    \"patient\",\r\n    \"participant\",\r\n    \"custodian\",\r\n    \"a_reason\",\r\n    \"b_reason\",\r\n    \"c_reason\",\r\n    \"d_reason\",\r\n    \"death_addr\",\r\n    \"child_info\",\r\n    \"death_reasons\",\r\n    \"latest_one\",\r\n  ],\r\n  death_addr: NULLFLAVORABLE_RENDER_OPTIONS,\r\n  patient: PATIENT_RENDER_OPTIONS,\r\n  identity: NULLFLAVORABLE_RENDER_OPTIONS,\r\n  address: NULLFLAVORABLE_RENDER_OPTIONS,\r\n  a_reason: LETTERED_DEATH_REASON_RENDER_OPTIONS,\r\n  b_reason: LETTERED_DEATH_REASON_RENDER_OPTIONS,\r\n  c_reason: LETTERED_DEATH_REASON_RENDER_OPTIONS,\r\n  d_reason: EXTERNAL_DEATH_REASON_RENDER_OPTIONS,\r\n  author: DEFAULT_AUTHENTICATOR_RENDER_OPTIONS,\r\n  legal_authenticator: DEFAULT_AUTHENTICATOR_RENDER_OPTIONS,\r\n  audithor: DEFAULT_AUTHENTICATOR_RENDER_OPTIONS,\r\n  death_reasons: OTHER_REASON_RENDER_OPTIONS,\r\n  procedures: PROCEDURE_RENDER_OPTIONS,\r\n  child_info: CHILD_INFO_RENDER_OPTIONS,\r\n  related_subject: RELATED_SUBJECT_RENDER_OPTIONS,\r\n  addr: NULLFLAVORABLE_RENDER_OPTIONS,\r\n  person: PERSON_RENDER_OPTIONS,\r\n  doctor: SHORT_DOCTOR_RENDER_OPTIONS,\r\n  participant: PARTICIPANT_RENDER_OPTIONS,\r\n  position: { only: [\"id\", \"name\"] },\r\n  custodian: { only: [\"id\", \"name\"] },\r\n  null_flavors: DEFAULT_RENDER_OPTIONS,\r\n}\r\n\r\nexport default class CertificateService {\r\n  //POST request for get Certificate's list\r\n  static async getCertificates(query: any, first = 0, last = 9): Promise<AxiosResponse<ICertificate[]>> {\r\n    return $api.post(`${API_URL}model/Certificate/`, {\r\n      ...query,\r\n      offset: first,\r\n      limit: last - first + 1,\r\n      ...CERTIFICATE_FULL_RENDER_OPTIONS,\r\n    })\r\n  }\r\n\r\n  // POST request for get Certificate's count\r\n  static async getCount(query: any): Promise<AxiosResponse<number>> {\r\n    return $api.post(`${API_URL}model/Certificate/`, { ...query, count: \"1\" })\r\n  }\r\n\r\n  //POST request for add  /REST_API/v1/model/Certificate/add\r\n  static async addCertificate(certificate: ICertificateR): Promise<AxiosResponse<ICertificate>> {\r\n    return $api.post(`${API_URL}model/Certificate/add`, {\r\n      Certificate: certificate,\r\n      ...CERTIFICATE_FULL_RENDER_OPTIONS,\r\n    })\r\n  }\r\n\r\n  //PUT request for update Certificate /REST_API/v1/model/Certificate/:id\r\n  static async updateCertificate(request: any): Promise<AxiosResponse<ICertificate>> {\r\n    return $api.put(`${API_URL}model/Certificate/${request.Certificate.id}`, {\r\n      ...request,\r\n      ...CERTIFICATE_FULL_RENDER_OPTIONS,\r\n    })\r\n  }\r\n  // DELETE request for remove Certificate /REST_API/v1/model/Certificate/:id\r\n  static async removeCertificate(certificate_id: number): Promise<AxiosResponse<ICertificate>> {\r\n    return $api.delete(`${API_URL}model/Certificate/${certificate_id}`)\r\n  }\r\n}\r\n","export const PATIENT_RENDER_OPTIONS = {\r\n  except: [\"person_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"person\", \"identity\", \"null_flavors\"],\r\n}\r\n","export const EXTERNAL_DEATH_REASON_RENDER_OPTIONS = {\r\n  except: [\"ext_diagnosis_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"ext_diagnosis\", \"null_flavors\"],\r\n}\r\n","export const OTHER_REASON_RENDER_OPTIONS = {\r\n  except: [\"diagnosis_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"diagnosis\", \"procedures\", \"null_flavors\"],\r\n}\r\n","export const PROCEDURE_RENDER_OPTIONS = {\r\n  except: [\"medical_serv_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"medical_serv\", \"null_flavors\"],\r\n}\r\n","export const CHILD_INFO_RENDER_OPTIONS = {\r\n  except: [\"related_subject_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"related_subject\", \"address\", \"null_flavors\"],\r\n}\r\n","export const RELATED_SUBJECT_RENDER_OPTIONS = {\r\n  except: [\"person_name_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"person_name\", \"addr\", \"null_flavors\"],\r\n}\r\n","export const PERSON_RENDER_OPTIONS = {\r\n  except: [\"created_at\", \"updated_at\"],\r\n  include: [\"person_name\", \"address\", \"null_flavors\"],\r\n}\r\n","export const SHORT_DOCTOR_RENDER_OPTIONS = {\r\n  only: [\"id\", \"person_name\", \"position\"],\r\n  include: [\"person_name\", \"position\"],\r\n}\r\n","export const PARTICIPANT_RENDER_OPTIONS = {\r\n  except: [\"person_id\", \"certificate_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"person\", \"identity\"],\r\n}\r\n","import { autorun, configure, makeAutoObservable } from \"mobx\"\r\nimport Certificate from \"../models/FormsData/Certificate\"\r\nimport { IPatient } from \"../models/IPatient\"\r\nimport { ICertificate } from \"../models/responses/ICertificate\"\r\nimport { IUserInfo } from \"../models/responses/IUserInfo\"\r\nimport CertificateService from \"../services/CertificateService\"\r\nimport { ID_CARD_TYPES, NULL_FLAVOR_IDX, PASSPORT_RF } from \"../utils/defaults\"\r\nimport { DeathReason } from \"../models/FormsData/DeathReason\"\r\nimport { IDeathReason } from \"../models/responses/IDeathReason\"\r\nimport { IAddressR } from \"../models/requests/IAddressR\"\r\nimport { INullFlavorR } from \"../models/INullFlavor\"\r\nconfigure({\r\n  enforceActions: \"never\",\r\n})\r\nexport default class CertificateStore {\r\n  private _cert: Certificate\r\n  private _submitted: boolean\r\n  private _userInfo?: IUserInfo | undefined\r\n  private _certs: ICertificate[]\r\n  private _selected: number\r\n  private _sorts: string[] | undefined\r\n  private _filters: any\r\n  private _first: number\r\n  private _last: number\r\n  private _rows: number\r\n  private _count: number\r\n  private _needFetch: boolean\r\n\r\n  disposers: (() => void)[]\r\n  constructor() {\r\n    this._submitted = false\r\n    this.disposers = []\r\n    this._certs = []\r\n    this._filters = {}\r\n    this._first = 0\r\n    this._last = 0\r\n    this._rows = 0\r\n    this._count = 0\r\n    this._needFetch = true\r\n    this._cert = new Certificate({\r\n      custodian: this._userInfo?.organization,\r\n      patient: {\r\n        organization_id: this._userInfo?.organization.id,\r\n        identity: {\r\n          identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code,\r\n        },\r\n        person: { person_name: { family: \"\", given_1: \"\", given_2: \"\" } },\r\n      } as IPatient,\r\n    } as ICertificate)\r\n    this._selected = 0\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n\r\n    // реакции на изменение данных\r\n    this.disposers[0] = autorun(() => {\r\n      let _q = { ...this._filters }\r\n      //console.log(\"фильтры\", this._filters)\r\n      if (this._userInfo && !this._userInfo.roles.includes(\"MIAC\")) _q.custodian_id_eq = this._userInfo?.organization.id\r\n      if (this._filters) {\r\n        this._needFetch = true\r\n        CertificateService.getCount({ q: _q })\r\n          .then((value) => {\r\n            this._count = value.data\r\n            //console.log(\"надено\", this._count)\r\n          })\r\n          .catch((reason) => console.log(reason))\r\n      }\r\n    })\r\n    this.disposers[1] = autorun(() => {\r\n      if (this._sorts) this._needFetch = true\r\n    })\r\n  }\r\n\r\n  //#region setters-getters\r\n  get cert() {\r\n    return this._cert\r\n  }\r\n  set cert(value: Certificate) {\r\n    this._cert = value\r\n  }\r\n\r\n  get submitted(): boolean {\r\n    return this._submitted\r\n  }\r\n  set submitted(value: boolean) {\r\n    this._submitted = value\r\n  }\r\n  get certs(): ICertificate[] {\r\n    return this._certs.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n  get userInfo(): IUserInfo | undefined {\r\n    return this._userInfo\r\n  }\r\n  set userInfo(value: IUserInfo | undefined) {\r\n    this._userInfo = value\r\n  }\r\n  get sorts(): string[] | undefined {\r\n    return this._sorts\r\n  }\r\n  set sorts(value: string[] | undefined) {\r\n    this._sorts = value\r\n  }\r\n  get filters(): any {\r\n    return this._filters\r\n  }\r\n  set filters(value: any) {\r\n    this._filters = value\r\n  }\r\n  get first(): number {\r\n    return this._first\r\n  }\r\n  set first(value: number) {\r\n    this._first = value\r\n  }\r\n  get rows(): number {\r\n    return this._rows\r\n  }\r\n  set rows(value: number) {\r\n    this._rows = value\r\n  }\r\n  get count(): number {\r\n    return this._count\r\n  }\r\n  set count(value: number) {\r\n    this._count = value\r\n  }\r\n  //#endregion\r\n  createNew(id = -1) {\r\n    this._cert = new Certificate({\r\n      id: id,\r\n      custodian: this._userInfo?.organization,\r\n      patient: {\r\n        organization_id: this._userInfo?.organization.id,\r\n        identity: {\r\n          identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code,\r\n        },\r\n        person: { person_name: { family: \"\", given_1: \"\", given_2: \"\" } },\r\n      } as IPatient,\r\n    } as ICertificate)\r\n  }\r\n  replace() {\r\n    const old = this._certs.find((cert) => cert.id === this._cert.id)\r\n    if (!old) return\r\n    this._cert = new Certificate({\r\n      id: -1,\r\n      custodian: old.custodian,\r\n      patient: old.patient,\r\n      basis_determining: old.basis_determining,\r\n      cert_type: old.cert_type === 1 ? 4 : 3,\r\n      death_area_type: old.death_area_type,\r\n      death_kind: old.death_kind,\r\n      death_datetime: old.death_datetime,\r\n      death_place: old.death_place,\r\n      death_year: old.death_year,\r\n      education_level: old.education_level,\r\n      eff_time_prev: old.issue_date,\r\n      established_medic: old.established_medic,\r\n      ext_reason_description: old.ext_reason_description,\r\n      ext_reason_time: old.ext_reason_time,\r\n      life_area_type: old.life_area_type,\r\n      marital_status: old.marital_status,\r\n      number_prev: old.number,\r\n      policy_OMS: old.policy_OMS,\r\n      pregnancy_connection: old.pregnancy_connection,\r\n      reason_ACME: old.reason_ACME,\r\n      series_prev: old.series,\r\n      social_status: old.social_status,\r\n      traffic_accident: old.traffic_accident,\r\n    } as ICertificate)\r\n    if (old.a_reason)\r\n      this._cert.reasonA = new DeathReason({\r\n        days: old.a_reason.days,\r\n        diagnosis: old.a_reason.diagnosis,\r\n        effective_time: old.a_reason.effective_time,\r\n        hours: old.a_reason.hours,\r\n        null_flavors: old.a_reason.null_flavors?.map((item) => {\r\n          return { code: item.code, parent_attr: item.parent_attr }\r\n        }),\r\n        minutes: old.a_reason.minutes,\r\n        months: old.a_reason.months,\r\n        years: old.a_reason.years,\r\n        weeks: old.a_reason.weeks,\r\n      } as IDeathReason)\r\n    else this._cert.reasonA = new DeathReason({} as IDeathReason)\r\n    if (old.b_reason)\r\n      this._cert.reasonB = new DeathReason({\r\n        days: old.b_reason.days,\r\n        diagnosis: old.b_reason.diagnosis,\r\n        effective_time: old.b_reason.effective_time,\r\n        hours: old.b_reason.hours,\r\n        null_flavors: old.b_reason.null_flavors?.map((item) => {\r\n          return { code: item.code, parent_attr: item.parent_attr }\r\n        }),\r\n        minutes: old.b_reason.minutes,\r\n        months: old.b_reason.months,\r\n        years: old.b_reason.years,\r\n        weeks: old.b_reason.weeks,\r\n      } as IDeathReason)\r\n    if (old.c_reason)\r\n      this._cert.reasonC = new DeathReason({\r\n        days: old.c_reason.days,\r\n        diagnosis: old.c_reason.diagnosis,\r\n        effective_time: old.c_reason.effective_time,\r\n        hours: old.c_reason.hours,\r\n        null_flavors: old.c_reason.null_flavors?.map((item) => {\r\n          return { code: item.code, parent_attr: item.parent_attr }\r\n        }),\r\n        minutes: old.c_reason.minutes,\r\n        months: old.c_reason.months,\r\n        years: old.c_reason.years,\r\n        weeks: old.c_reason.weeks,\r\n      } as IDeathReason)\r\n    if (old.d_reason)\r\n      this._cert.reasonD = new DeathReason({\r\n        days: old.d_reason.days,\r\n        diagnosis: old.d_reason.ext_diagnosis,\r\n        effective_time: old.d_reason.effective_time,\r\n        hours: old.d_reason.hours,\r\n        null_flavors: old.d_reason.null_flavors?.map((item) => {\r\n          return { code: item.code, parent_attr: item.parent_attr }\r\n        }),\r\n        minutes: old.d_reason.minutes,\r\n        months: old.d_reason.months,\r\n        years: old.d_reason.years,\r\n        weeks: old.d_reason.weeks,\r\n      } as IDeathReason)\r\n    if (old.death_reasons)\r\n      this._cert.deathReasons = old.death_reasons.map(\r\n        (reason) =>\r\n          new DeathReason({\r\n            days: reason.days,\r\n            diagnosis: reason.diagnosis,\r\n            effective_time: reason.effective_time,\r\n            hours: reason.hours,\r\n            null_flavors: reason.null_flavors?.map((item) => {\r\n              return { code: item.code, parent_attr: item.parent_attr }\r\n            }),\r\n            minutes: reason.minutes,\r\n            months: reason.months,\r\n            years: reason.years,\r\n            weeks: reason.weeks,\r\n            procedures: reason.procedures?.map((item) => {\r\n              return {\r\n                effective_time: item.effective_time,\r\n                medical_serv: item.medical_serv,\r\n                text_value: item.text_value,\r\n                null_flavors: item.null_flavors?.map((item) => {\r\n                  return { code: item.code, parent_attr: item.parent_attr }\r\n                }),\r\n              }\r\n            }),\r\n          } as IDeathReason)\r\n      )\r\n    else this._cert.deathReasons = []\r\n    if (old.death_addr)\r\n      this._cert.deathAddr = {\r\n        ...old.death_addr,\r\n        null_flavors_attributes:\r\n          old.death_addr?.null_flavors?.map((item) => {\r\n            return { parent_attr: item.parent_attr, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n          }) || [],\r\n        id: undefined,\r\n        parent_guid: undefined,\r\n        null_flavors: null,\r\n      } as IAddressR\r\n\r\n    old.latest_one = this._cert.oldOne\r\n  }\r\n\r\n  save(onSuccess?: (data: ICertificate) => void, onError?: (message: string) => void, sm_code?: string) {\r\n    if (!this._userInfo) return false\r\n    if (!this._cert.patient.provider_organization)\r\n      this._cert.patient.provider_organization = this.userInfo?.organization.id\r\n    const request = this._cert.getAttributes()\r\n    if (!request.id && sm_code) {\r\n      request.number = sm_code\r\n      if (request.patient_attributes?.id) {\r\n        request.patient_id = request.patient_attributes?.id\r\n        request.patient_attributes = undefined\r\n      }\r\n    }\r\n    //console.log(\"request\", request)\r\n    return !request.id\r\n      ? CertificateService.addCertificate(request)\r\n          .then((response) => {\r\n            const nCert = response.data\r\n            if (nCert) {\r\n              const idx = this._certs.length\r\n              this._certs.push(nCert)\r\n              this.select(idx)\r\n              if (onSuccess) onSuccess(nCert)\r\n              //console.log(\"nCert\", nCert)\r\n            } else {\r\n              if (onError)\r\n                onError(\"Cвидетельство сохранено, но сервер не вернул результат. Необходим повторный вход в систему\")\r\n            }\r\n          })\r\n          .catch((reason) => {\r\n            if (onError) onError(reason)\r\n          })\r\n      : CertificateService.updateCertificate({ Certificate: request })\r\n          .then((response) => {\r\n            const nCert = response.data\r\n            if (nCert) {\r\n              const idx = this._certs.findIndex((cert) => cert.id === nCert.id)\r\n              this._certs[idx] = nCert\r\n              //console.log(\"nCert\", nCert)\r\n              this.select(idx)\r\n              if (onSuccess) onSuccess(nCert)\r\n            } else {\r\n              if (onError)\r\n                onError(\"Свидетельство сохранено, но сервер не вернул результат. Необходим повторный вход в систему\")\r\n            }\r\n          })\r\n          .catch((reason) => {\r\n            if (onError) onError(reason)\r\n          })\r\n  }\r\n  delete() {\r\n    if (this._cert.id === -1) return false\r\n    else return CertificateService.removeCertificate(this._cert.id)\r\n  }\r\n\r\n  clean(num = this._selected) {\r\n    try {\r\n      this._certs.splice(num)\r\n      const dataLength = this._certs.length\r\n      if (dataLength > 0) {\r\n        this.select(this._selected > dataLength - 1 ? dataLength - 1 : this._selected)\r\n      } else {\r\n        this.createNew(-1)\r\n        this._selected = 0\r\n      }\r\n    } catch {\r\n      throw Error(\"Not valid certificate number\")\r\n    }\r\n  }\r\n\r\n  select(num: number) {\r\n    this._cert = new Certificate(this._certs[num])\r\n    this._selected = num\r\n  }\r\n\r\n  getList(doAfter?: () => void, first = this._first, last = this._first + this._rows) {\r\n    let _q = { ...this._filters, sorts: this._sorts }\r\n    if (this._userInfo && !this._userInfo.roles.includes(\"MIAC\")) _q.custodian_id_eq = this._userInfo?.organization.id\r\n    else if (!this._userInfo) return false\r\n    const isAdd = !this._needFetch && first === this.first\r\n    //console.log(\"getList response\", first, last)\r\n    CertificateService.getCertificates({ q: _q }, isAdd ? this._last + 1 : first, last)\r\n      .then((response) => {\r\n        if (isAdd && this._needFetch) return // case that loaded data already not needed\r\n        let num = isAdd ? this._certs.length : 0\r\n        const _certs = isAdd\r\n          ? this._certs.concat(\r\n              response.data.map((cert) => {\r\n                return { ...cert, rowNumber: ++num }\r\n              })\r\n            )\r\n          : response.data.map((cert) => {\r\n              return { ...cert, rowNumber: ++num }\r\n            })\r\n        this._certs = _certs\r\n        const dataLength = response.data.length\r\n        if (dataLength > 0) {\r\n          this._rows = this._certs.length\r\n          this._needFetch = false\r\n          this.select(this._selected > dataLength ? dataLength - 1 : this._selected)\r\n        }\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        if (doAfter) doAfter()\r\n      })\r\n    this._first = first\r\n    this._last = last\r\n  }\r\n\r\n  findById(certificate_id: number, doAfter?: () => void) {\r\n    if (!this._userInfo) return false\r\n    CertificateService.getCertificates({\r\n      q: { custodian_id_eq: this._userInfo.organization.id, id_eq: certificate_id },\r\n    })\r\n      .then((response) => {\r\n        if (response.data && response.data.length > 0) this._cert = new Certificate(response.data[0])\r\n        if (response.data) {\r\n          this.certs.push(response.data[0])\r\n          this.select(0)\r\n        }\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        if (doAfter) doAfter()\r\n      })\r\n  }\r\n  dispose() {\r\n    // So, to avoid subtle memory issues, always call the\r\n    // disposers when the reactions are no longer needed.\r\n    this.disposers.forEach((disposer) => disposer())\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { ToastMessageType } from \"primereact/toast\"\r\n\r\nexport default class LayoutStore {\r\n  private _isTabletOrMobile: boolean\r\n  private _isLayoutStaticInactive: boolean\r\n  private _isRightSidebarActive: boolean\r\n  private _isProfileMenuActive: boolean\r\n  private _isNotificationsMenuActive: boolean\r\n  private _isLoading: boolean\r\n  private _message: ToastMessageType | null\r\n\r\n  constructor() {\r\n    this._isTabletOrMobile = false\r\n    this._isLayoutStaticInactive = false\r\n    this._isRightSidebarActive = false\r\n    this._isProfileMenuActive = false\r\n    this._isNotificationsMenuActive = false\r\n    this._isLoading = false\r\n    this._message = null\r\n    makeAutoObservable(this)\r\n  }\r\n  setTabletOrMobile(visible: boolean) {\r\n    this._isTabletOrMobile = visible\r\n  }\r\n  tabletOrMobile() {\r\n    return this._isTabletOrMobile\r\n  }\r\n  sideBarToggle() {\r\n    this._isLayoutStaticInactive = !this._isLayoutStaticInactive\r\n  }\r\n  setLayoutStaticInactive(isLayoutStaticInactive: boolean) {\r\n    this._isLayoutStaticInactive = isLayoutStaticInactive\r\n  }\r\n  layoutStaticInactive() {\r\n    return this._isLayoutStaticInactive\r\n  }\r\n  rightSideBarActive() {\r\n    return this._isRightSidebarActive\r\n  }\r\n  setRightSideBarActive(rightSidebarActive: boolean) {\r\n    this._isRightSidebarActive = rightSidebarActive\r\n  }\r\n  profileMenuActive() {\r\n    return this._isProfileMenuActive\r\n  }\r\n  setProfileMenuActive(profileMenuActive: boolean) {\r\n    this._isProfileMenuActive = profileMenuActive\r\n  }\r\n  notificationsMenuActive() {\r\n    return this._isNotificationsMenuActive\r\n  }\r\n  setNotificationsMenuActive(notificationsMenuActive: boolean) {\r\n    this._isNotificationsMenuActive = notificationsMenuActive\r\n  }\r\n  get isLoading(): boolean {\r\n    return this._isLoading\r\n  }\r\n  set isLoading(value: boolean) {\r\n    this._isLoading = value\r\n  }\r\n\r\n  get message(): ToastMessageType | null {\r\n    return this._message\r\n  }\r\n  set message(value: ToastMessageType | null) {\r\n    this._message = value\r\n  }\r\n}\r\n","import { autorun, makeAutoObservable } from \"mobx\"\r\nimport { ISuggestions } from \"../models/ISuggestions\"\r\nimport { DISEASE_DEADTH_KIND } from \"../NSI/1.2.643.5.1.13.13.99.2.21\"\r\nimport {\r\n  AUTHENTICATOR_SUG,\r\n  AUTHOR_SUG,\r\n  BASIS_DERMINING_SUG,\r\n  CERT_DEATH_THIME_SUG,\r\n  CERT_TYPE_SUG,\r\n  CHILD_WEIGHT_SUG,\r\n  DEATH_AREA_SUG,\r\n  DEATH_KINDS_SUG,\r\n  DEATH_PLACE_SUG,\r\n  DEATH_PLACE_TYPE_SUG,\r\n  DEFAULT_CERT_SUGGESTIONS,\r\n  EDUCATION_LEVEL_SUG,\r\n  EST_MEDIC_SUG,\r\n  EXT_REASON_SUG,\r\n  EXT_REASON_TIME_SUG,\r\n  IDNUMBER_SUG,\r\n  IDSERIES_SUG,\r\n  IORGCODE_SUG,\r\n  IORGDATE_SUG,\r\n  IORGNAME_SUG,\r\n  KIND_DEATH_REASON_SUG,\r\n  LEGAL_AUTHENTICATOR_SUG,\r\n  LIFE_AREA_SUG,\r\n  LIFE_PLACE_SUG,\r\n  MARITAL_STATUS_SUG,\r\n  MOTHER_ADDRESS_SUG,\r\n  MOTHER_BIRTHDAY_SUG,\r\n  MOTHER_FIO_SUG,\r\n  NUMBER_PREGNANCY_SUG,\r\n  OMS_SUG,\r\n  PARTIPICIPANT_DATE_SUG,\r\n  PARTIPICIPANT_FIO_SUG,\r\n  PARTIPICIPANT_IDENTITY_SUG,\r\n  PATIENT_BIRTHDAY_SUG,\r\n  PATIENT_GENDER_SUG,\r\n  PERSON_NAME_SUG,\r\n  PREGNANCY_CONNECTION_SUG,\r\n  REASON_A_SUG,\r\n  REASON_A_TIME_SUG,\r\n  REASON_B_SUG,\r\n  REASON_B_TIME_SUG,\r\n  REASON_C_SUG,\r\n  REASON_C_TIME_SUG,\r\n  REASON_D_SUG,\r\n  REASON_D_TIME_SUG,\r\n  SNILS_SUG,\r\n  SOCIAL_STATUS_SUG,\r\n  TERMS_PREGNANCY_SUG,\r\n  TRAFFFIC_ACCIDENT_SUG,\r\n} from \"../utils/defaults\"\r\nimport CertificateStore from \"./certificateStore\"\r\n\r\nexport default class SuggestionsStore {\r\n  private _cStore: CertificateStore\r\n  private _suggestions: ISuggestions[]\r\n  private _identified: boolean\r\n  private _fromRelatives: boolean\r\n  disposers: (() => void)[]\r\n  constructor(cStore: CertificateStore) {\r\n    this._cStore = cStore\r\n    this.disposers = []\r\n    this._identified = true\r\n    this._fromRelatives = false\r\n    this._suggestions = DEFAULT_CERT_SUGGESTIONS\r\n    makeAutoObservable(this)\r\n    // проверки полноты заполнения свидетельства\r\n    // работают как реакции на изменение данных\r\n    this.disposers[0] = autorun(() => {\r\n      this._suggestions[CERT_TYPE_SUG].done = !!this._cStore.cert.certType\r\n    })\r\n\r\n    this.disposers[1] = autorun(() => {\r\n      this._suggestions[PATIENT_GENDER_SUG].done = !!this._cStore.cert.patient.gender\r\n    })\r\n    this.disposers[2] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const isBirthDay =\r\n        !patient.birth_date &&\r\n        patient.nullFlavors.findIndex((element) => {\r\n          return element.parent_attr === \"birth_date\" && !element._destroy\r\n        }) === -1\r\n      this._suggestions[PATIENT_BIRTHDAY_SUG].done = !isBirthDay\r\n    })\r\n    this.disposers[3] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const cert = this._cStore.cert\r\n      const isDeathDay =\r\n        !cert.deathDatetime && cert.nullFlavors.findIndex((element) => element.parent_attr === \"death_datetime\") === -1\r\n      this._suggestions[CERT_DEATH_THIME_SUG].done = !isDeathDay\r\n    })\r\n    this.disposers[4] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const person = this._cStore.cert.patient.person\r\n      const isSNILS =\r\n        (!person && this._identified) ||\r\n        (person &&\r\n          (!person.SNILS || person.SNILS.length < 14) &&\r\n          person.nullFlavors.findIndex((element) => element.parent_attr === \"SNILS\") === -1)\r\n      this._suggestions[SNILS_SUG].done = !isSNILS\r\n    })\r\n    this.disposers[5] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const oms = this._cStore.cert.policyOMS\r\n      const isOMS =\r\n        (!oms || oms.length < 7) &&\r\n        this._cStore.cert.nullFlavors.findIndex((element) => element.parent_attr === \"policy_OMS\") === -1\r\n      this._suggestions[OMS_SUG].done = !isOMS\r\n    })\r\n    this.disposers[6] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const identity = patient.identity\r\n      const code = identity?.issueOrgCode\r\n      const isCODE =\r\n        (!identity && patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\") === -1) ||\r\n        (identity &&\r\n          (!code || code.length < 1) &&\r\n          identity.nullFlavors.findIndex((element) => element.parent_attr === \"issueOrgCode\") === -1)\r\n      this._suggestions[IORGCODE_SUG].done = !isCODE\r\n    })\r\n    this.disposers[7] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const isIORGDate =\r\n        (!patient.identity && patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\") === -1) ||\r\n        (patient.identity && !patient.identity?.issueOrgDate)\r\n      this._suggestions[IORGDATE_SUG].done = !isIORGDate\r\n    })\r\n    this.disposers[8] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const isIORGName =\r\n        (!patient.identity && patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\") === -1) ||\r\n        (patient.identity && (!patient.identity?.issueOrgName || patient.identity.issueOrgName.length < 15))\r\n      this._suggestions[IORGNAME_SUG].done = !isIORGName\r\n    })\r\n    this.disposers[9] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const identity = patient.identity\r\n      const series = patient.identity?.series\r\n      const isIDSeries =\r\n        (!identity && patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\") === -1) ||\r\n        (identity &&\r\n          (!series || series.length < 1) &&\r\n          identity.nullFlavors.findIndex((element) => element.parent_attr === \"series\") === -1)\r\n      this._suggestions[IDSERIES_SUG].done = !isIDSeries\r\n    })\r\n    this.disposers[10] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const isIDNumber =\r\n        (!patient.identity &&\r\n          patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\" && !element._destroy) === -1) ||\r\n        (patient.identity && !patient.identity.number)\r\n      this._suggestions[IDNUMBER_SUG].done = !isIDNumber\r\n    })\r\n    this.disposers[11] = autorun(() => {\r\n      const person = this._cStore.cert.patient.person\r\n      const isLifeArea =\r\n        (!person && this._identified) ||\r\n        (person &&\r\n          (!person.address ||\r\n            !person.address.streetAddressLine ||\r\n            person.address.streetAddressLine.split(\",\").length < 3) &&\r\n          person.nullFlavors.findIndex((element) => element.parent_attr === \"address\") === -1)\r\n      this._suggestions[LIFE_PLACE_SUG].done = !isLifeArea\r\n    })\r\n    this.disposers[12] = autorun(() => {\r\n      const isDeathArea =\r\n        (!this._cStore.cert.deathAddr ||\r\n          !this._cStore.cert.deathAddr.streetAddressLine ||\r\n          this._cStore.cert.deathAddr.streetAddressLine.split(\",\").length < 3) &&\r\n        this._cStore.cert.nullFlavors.findIndex((element) => element.parent_attr === \"death_addr\") === -1\r\n      this._suggestions[DEATH_PLACE_SUG].done = !isDeathArea\r\n    })\r\n    this.disposers[13] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const isDeathAreaType =\r\n        this._cStore.cert.deathAreaType === undefined &&\r\n        this._cStore.cert.nullFlavors.findIndex((element) => element.parent_attr === \"death_area_type\") === -1\r\n      this._suggestions[DEATH_AREA_SUG].done = !isDeathAreaType\r\n    })\r\n    this.disposers[14] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const isLifeAreaType =\r\n        this._cStore.cert.lifeAreaType === undefined &&\r\n        this._cStore.cert.nullFlavors.findIndex((element) => element.parent_attr === \"life_area_type\") === -1\r\n      this._suggestions[LIFE_AREA_SUG].done = !isLifeAreaType\r\n    })\r\n    this.disposers[15] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[DEATH_PLACE_TYPE_SUG].done = this._cStore.cert.deathPlace !== undefined\r\n    })\r\n    this.disposers[16] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isTERMS_PREGNANCY =\r\n        childInfo === undefined ||\r\n        childInfo.termPregnancy !== undefined ||\r\n        childInfo.nullFlavors.findIndex((element) => element.parent_attr === \"term_pregnancy\") !== -1\r\n      this._suggestions[TERMS_PREGNANCY_SUG].done = isTERMS_PREGNANCY\r\n    })\r\n    this.disposers[17] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isCHILD_WEIGHT = childInfo === undefined || childInfo.weight !== undefined\r\n      this._suggestions[CHILD_WEIGHT_SUG].done = isCHILD_WEIGHT\r\n    })\r\n    this.disposers[18] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isNUMBER_PREGNANCY = !childInfo || !!childInfo.whichAccount\r\n      this._suggestions[NUMBER_PREGNANCY_SUG].done = isNUMBER_PREGNANCY\r\n    })\r\n    this.disposers[19] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isMOTHER_FIO =\r\n        !childInfo ||\r\n        (!!childInfo.relatedSubject &&\r\n          (childInfo.relatedSubject.nullFlavors.findIndex((item) => item.parent_attr === \"person_name\") !== -1 ||\r\n            !!childInfo.relatedSubject.fio))\r\n      this._suggestions[MOTHER_FIO_SUG].done = isMOTHER_FIO\r\n    })\r\n    this.disposers[20] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isMOTHER_BIRTHDAY =\r\n        !childInfo ||\r\n        (!!childInfo.relatedSubject &&\r\n          (childInfo.relatedSubject.nullFlavors.findIndex((item) => item.parent_attr === \"birthTime\") !== -1 ||\r\n            !!childInfo.relatedSubject.birthTime))\r\n      this._suggestions[MOTHER_BIRTHDAY_SUG].done = isMOTHER_BIRTHDAY\r\n    })\r\n    this.disposers[21] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isMOTHER_ADDRESS =\r\n        !childInfo ||\r\n        (!!childInfo.relatedSubject &&\r\n          (childInfo.relatedSubject.nullFlavors.findIndex((item) => item.parent_attr === \"addr\") !== -1 ||\r\n            (!!childInfo.relatedSubject.addr && !!childInfo.relatedSubject.addr.houseGUID)))\r\n      this._suggestions[MOTHER_ADDRESS_SUG].done = isMOTHER_ADDRESS\r\n    })\r\n    this.disposers[22] = autorun(() => {\r\n      this._suggestions[MARITAL_STATUS_SUG].done = !!this._cStore.cert && !!this._cStore.cert.maritalStatus\r\n    })\r\n    this.disposers[23] = autorun(() => {\r\n      this._suggestions[EDUCATION_LEVEL_SUG].done = !!this._cStore.cert && !!this._cStore.cert.educationLevel\r\n    })\r\n    this.disposers[24] = autorun(() => {\r\n      this._suggestions[SOCIAL_STATUS_SUG].done = !!this._cStore.cert && !!this._cStore.cert.socialStatus\r\n    })\r\n    this.disposers[25] = autorun(() => {\r\n      this._suggestions[DEATH_KINDS_SUG].done = !!this._cStore.cert && !!this._cStore.cert.deathKind\r\n    })\r\n    this.disposers[26] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[KIND_DEATH_REASON_SUG].done =\r\n        (!!this._cStore.cert.deathKind && this._cStore.cert.deathKind === DISEASE_DEADTH_KIND) ||\r\n        (!!this._cStore.cert.extReasonTime && !!this._cStore.cert.extReasonDescription)\r\n    })\r\n    this.disposers[27] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[EST_MEDIC_SUG].done = !!this._cStore.cert.establishedMedic\r\n    })\r\n    this.disposers[28] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[BASIS_DERMINING_SUG].done = !!this._cStore.cert.basisDetermining\r\n    })\r\n    this.disposers[29] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_A_SUG].done = !!this._cStore.cert.reasonA?.diagnosis\r\n    })\r\n    this.disposers[30] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_A_TIME_SUG].done =\r\n        !!this._cStore.cert.reasonA?.effectiveTime ||\r\n        this._cStore.cert.reasonA?.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"effective_time\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[31] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_B_SUG].done =\r\n        !!this._cStore.cert.reasonB?.diagnosis ||\r\n        this._cStore.cert.nullFlavors.findIndex((item) => item.parent_attr === \"b_reason\" && !item._destroy) !== -1\r\n    })\r\n    this.disposers[32] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_B_TIME_SUG].done =\r\n        !this._cStore.cert.reasonB ||\r\n        !!this._cStore.cert.reasonB.effectiveTime ||\r\n        this._cStore.cert.reasonB?.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"effective_time\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[33] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_C_SUG].done =\r\n        !!this._cStore.cert.reasonC?.diagnosis ||\r\n        this._cStore.cert.nullFlavors.findIndex((item) => item.parent_attr === \"c_reason\" && !item._destroy) !== -1\r\n    })\r\n    this.disposers[34] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_C_TIME_SUG].done =\r\n        !this._cStore.cert.reasonC ||\r\n        !!this._cStore.cert.reasonC.effectiveTime ||\r\n        this._cStore.cert.reasonC?.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"effective_time\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[35] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_D_SUG].done =\r\n        this._cStore.cert.reasonD?.diagnosis !== undefined ||\r\n        this._cStore.cert.nullFlavors.findIndex((item) => item.parent_attr === \"d_reason\" && !item._destroy) !== -1\r\n    })\r\n    this.disposers[36] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_D_TIME_SUG].done =\r\n        !this._cStore.cert.reasonD ||\r\n        !!this._cStore.cert.reasonD.effectiveTime ||\r\n        this._cStore.cert.reasonD?.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"effective_time\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[37] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[TRAFFFIC_ACCIDENT_SUG].done =\r\n        !!this._cStore.cert.trafficAccident ||\r\n        this._cStore.cert.nullFlavors.findIndex((item) => item.parent_attr === \"traffic_accident\" && !item._destroy) !==\r\n          -1\r\n    })\r\n    this.disposers[38] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[PREGNANCY_CONNECTION_SUG].done =\r\n        !!this._cStore.cert.pregnancyConnection ||\r\n        this._cStore.cert.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"pregnancy_connection\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[39] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[AUTHOR_SUG].done = !!this._cStore.cert.author\r\n    })\r\n    this.disposers[40] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[AUTHENTICATOR_SUG].done = !!this._cStore.cert.authenticator\r\n    })\r\n    this.disposers[41] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[LEGAL_AUTHENTICATOR_SUG].done = !!this._cStore.cert.legalAuthenticator\r\n    })\r\n    this.disposers[42] = autorun(() => {\r\n      this._identified =\r\n        !!this._cStore.cert.patient.person ||\r\n        this._cStore.cert.patient.nullFlavors.findIndex((el) => el.parent_attr === \"person\" && !el._destroy) === -1\r\n    })\r\n    this.disposers[43] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._fromRelatives = this._identified && this._cStore.cert.patient && !this._cStore.cert.patient.identity\r\n    })\r\n    this.disposers[44] = autorun(() => {\r\n      const person = this._cStore.cert.patient?.person\r\n      const fio = person?.fio\r\n      const isPersonNameSug =\r\n        (!person && this._identified) ||\r\n        (!!fio &&\r\n          (fio.family.trim().length === 0 ||\r\n            fio.given_1.trim().length === 0 ||\r\n            (!!fio.given_2 && fio.given_2.trim().length === 0)))\r\n      this._suggestions[PERSON_NAME_SUG].done = !isPersonNameSug\r\n    })\r\n  }\r\n  dispose() {\r\n    // So, to avoid subtle memory issues, always call the\r\n    // disposers when the reactions are no longer needed.\r\n    this.disposers.forEach((disposer) => disposer())\r\n  }\r\n  redSuggestionsCount() {\r\n    return this.suggestions.reduce((result, item, index) => {\r\n      if (\r\n        !(\r\n          item.done ||\r\n          index in\r\n            [\r\n              EXT_REASON_SUG,\r\n              EXT_REASON_TIME_SUG,\r\n              PARTIPICIPANT_FIO_SUG,\r\n              PARTIPICIPANT_DATE_SUG,\r\n              PARTIPICIPANT_IDENTITY_SUG,\r\n            ]\r\n        )\r\n      )\r\n        ++result\r\n      return result\r\n    }, 0)\r\n  }\r\n  get identified(): boolean {\r\n    return this._identified\r\n  }\r\n  set identified(value: boolean) {\r\n    this._identified = value\r\n  }\r\n  get fromRelatives(): boolean {\r\n    return this._fromRelatives\r\n  }\r\n  set fromRelatives(value: boolean) {\r\n    this._fromRelatives = value\r\n  }\r\n  get suggestions(): ISuggestions[] {\r\n    return this._suggestions\r\n  }\r\n}\r\n","export default class TemporaryIDStore {\r\n  private _lastCertificateID: number\r\n  private _lastDeathReasonID: number\r\n  private _lastProcedureID: number\r\n\r\n  constructor() {\r\n    this._lastCertificateID = -1\r\n    this._lastDeathReasonID = -1\r\n    this._lastProcedureID = -1\r\n  }\r\n  get lastCertificateID(): number {\r\n    return this._lastCertificateID--\r\n  }\r\n  get lastDeathReasonID(): number {\r\n    return this._lastDeathReasonID--\r\n  }\r\n  get lastProcedureID(): number {\r\n    return this._lastProcedureID--\r\n  }\r\n}\r\n","import $api from \"../http\"\r\nimport { AxiosResponse } from \"axios\"\r\nimport { AuthResponse } from \"../models/responses/AuthResponse\"\r\nimport { IRegistration } from \"../models/requests/IRegistration\"\r\nimport { IPassRenew } from \"../models/requests/IPassRenew\"\r\nexport default class AuthService {\r\n  static async login(email: string, password: string): Promise<AxiosResponse<AuthResponse>> {\r\n    return $api.post(\"auth/login\", { email, password })\r\n  }\r\n  static async registration(user: IRegistration): Promise<AxiosResponse<AuthResponse>> {\r\n    return $api.post(\"auth/registration\", { user })\r\n  }\r\n  static async renew_link(email: string): Promise<AxiosResponse<void>> {\r\n    return $api.post(\"auth/renew_link\", { email })\r\n  }\r\n  static async pwd_renew(user: IPassRenew): Promise<AxiosResponse<void>> {\r\n    return $api.post(\"auth/pwd_renew\", { ...user })\r\n  }\r\n  static async logout(): Promise<void> {\r\n    return $api.post(\"auth/logout\")\r\n  }\r\n}\r\n","import { createContext } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport AddressStore from './store/addressStore'\r\nimport CertificateStore from './store/certificateStore'\r\nimport LayoutStore from './store/layoutStore'\r\nimport SuggestionsStore from './store/suggestionsStore'\r\nimport TemporaryIDStore from './store/temporaryIDStore'\r\nimport UserStore from './store/userStore'\r\ninterface IState{\r\n  userStore: UserStore\r\n  layoutStore: LayoutStore\r\n  certificateStore: CertificateStore\r\n  suggestionsStore: SuggestionsStore\r\n  addressStore: AddressStore \r\n  temporaryIDStore: TemporaryIDStore \r\n}\r\nconst userStore = new UserStore()\r\nconst layoutStore = new LayoutStore()\r\nconst certificateStore = new CertificateStore()\r\nconst suggestionsStore = new SuggestionsStore(certificateStore)\r\nconst addressStore = new AddressStore()\r\nconst temporaryIDStore = new TemporaryIDStore()\r\naddressStore.fetchRegionOptions()\r\nexport const Context = createContext<IState>({userStore, layoutStore, addressStore, certificateStore, temporaryIDStore,suggestionsStore}) \r\nReactDOM.render(  \r\n  <Context.Provider value={{userStore, layoutStore, addressStore, certificateStore, temporaryIDStore, suggestionsStore}} >\r\n    <App />  \r\n  </Context.Provider> , \r\n  document.getElementById('root')\r\n)\r\n\r\n\r\n","import axios from \"axios\"\r\nimport { makeAutoObservable } from \"mobx\"\r\nimport { API_URL } from \"../http\"\r\nimport { IUser } from \"../models/IUser\"\r\nimport { IPassRenew } from \"../models/requests/IPassRenew\"\r\nimport { IRegistration } from \"../models/requests/IRegistration\"\r\nimport { AuthResponse } from \"../models/responses/AuthResponse\"\r\nimport { IUserInfo } from \"../models/responses/IUserInfo\"\r\nimport AuthService from \"../services/AuthService\"\r\nimport UsersService from \"../services/UsersService\"\r\nimport { HOME_ROUTE, LOGIN_ROUTE } from \"../utils/consts\"\r\n\r\nexport default class UserStore {\r\n  private _isAuth: boolean\r\n  private _user: IUser\r\n  private _isLoding: boolean\r\n  private _history: any\r\n  private _token: string\r\n  private _userInfo?: IUserInfo\r\n\r\n  constructor() {\r\n    this._user = {} as IUser\r\n    this._isLoding = false\r\n    this._token = localStorage.getItem(\"token\") || \"\"\r\n    this._isAuth = this._token !== \"\"\r\n    if (this._isAuth) this.checkAuth()\r\n    makeAutoObservable(this)\r\n  }\r\n\r\n  setAuth(isAuth: boolean) {\r\n    this._isAuth = isAuth\r\n  }\r\n  isAuth() {\r\n    return this._isAuth\r\n  }\r\n  setUser(user: IUser) {\r\n    this._user = user\r\n  }\r\n  user() {\r\n    return this._user\r\n  }\r\n  setLoading(isLoding: boolean) {\r\n    this._isLoding = isLoding\r\n  }\r\n  isLoading() {\r\n    return this._isLoding\r\n  }\r\n  setHistory(history: any) {\r\n    this._history = history\r\n  }\r\n\r\n  setToken(access_token: string) {\r\n    this._token = access_token\r\n  }\r\n  token() {\r\n    return this._token\r\n  }\r\n  async login(email: string, password: string) {\r\n    AuthService.login(email, password)\r\n      .then((response) => {\r\n        if (response.data) {\r\n          localStorage.setItem(\"token\", response.data.tokens.access)\r\n          this.setAuth(true)\r\n          this.setUser(response.data.user)\r\n          this._history.push(HOME_ROUTE)\r\n        } else {\r\n          this._history.push(\"/error/Ошибка авторизации: неверный ответ API-сервера\")\r\n        }\r\n      })\r\n      .catch((reason) => {\r\n        this._history.push(\"/error/Auth1:\" + reason.message)\r\n      })\r\n  }\r\n  async registration(user: IRegistration) {\r\n    try {\r\n      await AuthService.registration(user)\r\n      this._history.push(\r\n        \"/message/Ваша заявка направлена администратору ресурса для активации. Письмо с результатом, будет выслано на Ваш email\"\r\n      )\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/\" + e.message)\r\n    }\r\n  }\r\n  async pwd_renew(user: IPassRenew) {\r\n    try {\r\n      await AuthService.pwd_renew(user)\r\n      this._history.push(\"/message/Пароль был успешно изменен\")\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/\" + e.message)\r\n      return false\r\n    }\r\n  }\r\n  async renew_link(email: string) {\r\n    try {\r\n      await AuthService.renew_link(email)\r\n      this._history.push(\"/message/Вам в почту направлено письмо, со ссылкой на страницу изменения пароля\")\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/\" + e.message)\r\n      return false\r\n    }\r\n  }\r\n  async logout() {\r\n    try {\r\n      await AuthService.logout()\r\n      this.setAuth(false)\r\n      localStorage.removeItem(\"token\")\r\n      this.setToken(\"\")\r\n      this.setUser({} as IUser)\r\n      this._userInfo = undefined\r\n      this._history.push(LOGIN_ROUTE)\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/\" + e.message)\r\n    }\r\n  }\r\n  async checkAuth() {\r\n    try {\r\n      this.setLoading(true)\r\n      const response = await axios.get<AuthResponse>(`${API_URL}auth/refresh`, { withCredentials: true })\r\n      localStorage.setItem(\"token\", response.data.tokens.access)\r\n      this.setToken(response.data.tokens.access)\r\n      this.setAuth(true)\r\n      this.setUser(response.data.user)\r\n    } catch (e: any) {\r\n      if (e.message?.includes(\"401\")) {\r\n        this._isAuth = false\r\n        this._token = \"\"\r\n        localStorage.removeItem(\"token\")\r\n        this._user = {} as IUser\r\n        this._history.push(LOGIN_ROUTE)\r\n      } else this._history.push(\"/error/Auth2:\" + e.message)\r\n    } finally {\r\n      this.setLoading(false)\r\n    }\r\n  }\r\n  async getUserInfo(id: number) {\r\n    if (id === undefined) return false\r\n    try {\r\n      this.setLoading(true)\r\n      const response = await UsersService.getUser(id)\r\n      return response.data\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/Auth3:\" + e.message)\r\n    } finally {\r\n      this.setLoading(false)\r\n    }\r\n  }\r\n  history() {\r\n    return this._history\r\n  }\r\n  get userInfo() {\r\n    if (this._userInfo) return this._userInfo\r\n    else if (this._user.id)\r\n      this.getUserInfo(this._user.id).then((response) => {\r\n        if (response) this._userInfo = response\r\n        else this._userInfo = undefined\r\n      })\r\n    return null\r\n  }\r\n}\r\n"],"sourceRoot":""}