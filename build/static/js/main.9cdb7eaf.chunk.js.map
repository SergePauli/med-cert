{"version":3,"sources":["pages/NoMatchPage.tsx","utils/consts.ts","components/layouts/FooterLayout.tsx","images/favicon.png","components/menus/SideBarMenu.tsx","http/index.ts","models/responses/ITimeEvent.ts","components/layouts/SideBarLayout.tsx","images/ava.png","components/menus/ProfileMenu.tsx","components/menus/NotificationsMenu.tsx","components/layouts/TopBarLayout.tsx","services/AuditService.ts","components/layouts/RightSideBarLayout.tsx","components/layouts/ActionButtonLayout.tsx","components/layouts/MainLayout.tsx","NSI/1.2.643.5.1.13.13.99.2.19.ts","components/c_sections/section_0.tsx","utils/defaults.ts","components/NullFlavorWrapper.tsx","models/INullFlavor.ts","models/FormsData/Identity.ts","models/FormsData/Person.ts","models/IPersonName.ts","components/inputs/PersonName.tsx","components/c_sections/section_1.tsx","components/inputs/inputsIdentity.tsx","components/c_sections/section_2.tsx","utils/functions.ts","components/dialogs/AddressDialog.tsx","services/FiasService.ts","models/FormsData/Address.ts","models/requests/IAddressR.ts","components/inputs/InputAddress.tsx","components/inputs/AreaType.tsx","components/c_sections/section_3.tsx","NSI/1.2.643.5.1.13.13.99.2.20.ts","NSI/1.2.643.5.1.13.13.99.2.15.ts","NSI/1.2.643.5.1.13.13.99.2.16.ts","NSI/1.2.643.5.1.13.13.11.1038.ts","NSI/1.2.643.5.1.13.13.99.2.18.ts","models/FormsData/RelatedSubject.ts","models/FormsData/ChildInfo.ts","components/MotherInfo.tsx","components/c_sections/section_5.tsx","NSI/1.2.643.5.1.13.13.99.2.21.ts","NSI/1.2.643.5.1.13.13.99.2.22.ts","NSI/1.2.643.5.1.13.13.99.2.23.ts","components/c_sections/section_6.tsx","models/FormsData/Procedure.ts","models/FormsData/DeathReason.ts","services/DiagnosisService.ts","components/inputs/Reason.tsx","services/ACME_Service.ts","utils/acme.ts","components/c_sections/section_7.tsx","components/c_sections/section_8.tsx","NSI/1.2.643.5.1.13.13.99.2.24.ts","NSI/1.2.643.5.1.13.13.99.2.25.ts","models/FormsData/DoctorRequest.ts","services/DoctorService.ts","models/FormsData/Authenticator.ts","components/c_sections/section_9.tsx","models/FormsData/Participant.ts","components/c_sections/section_10.tsx","pages/CertificatePage.tsx","models/FormsData/Doctor.ts","pages/DoctorsPage.tsx","NSI/1.2.643.5.1.13.13.11.1040.ts","pages/ListPage.tsx","images/security.png","static/LoginImageDiv.js","pages/LoginPage.tsx","pages/MainPage.tsx","images/ava.jpg","services/UsersService.ts","services/OrganizationService.ts","images/hospital.jpg","pages/SettingsPage.tsx","routes.js","pages/AdminPage.tsx","pages/ProfilePage.tsx","pages/RegistrationPage.tsx","pages/PasswordRecoveryPage.tsx","pages/MessagePage.tsx","pages/ErrorPage.tsx","components/AppRouter.tsx","App.tsx","store/addressStore.ts","models/FormsData/Patient.ts","models/FormsData/Certificate.ts","models/render_options/default.ts","models/render_options/address.ts","models/render_options/Authenticator.ts","models/render_options/lettered_reason.ts","services/CertificateService.ts","models/render_options/patient.ts","models/render_options/external_death_reason.ts","models/render_options/other_reason.ts","models/render_options/procedure.ts","models/render_options/child_info.ts","models/render_options/related_subject.ts","models/render_options/person.ts","models/render_options/Doctor.ts","models/render_options/Participant.ts","store/certificateStore.ts","store/layoutStore.ts","store/suggestionsStore.ts","store/temporaryIDStore.ts","services/AuthService.ts","index.tsx","store/userStore.ts"],"names":["NoMatchPage","className","href","HOME_ROUTE","LOGIN_ROUTE","LIST_ROUTE","CERTIFICATE_ROUTE","DOCTORS_ROUTE","USER_ROUTE","MO_SETTINGS_ROUTE","DIRECTION","ROLES","USER","ADMIN","STATS","RunsackFilterMatchMode","startsWith","contains","notContains","endsWith","equals","notEquals","in","lt","lte","gt","gte","between","dateIs","dateIsNot","dateBefore","dateAfter","custom","DESTROY_OPTION","_destroy","TIME_FORMAT","year","month","day","hour","minute","DATE_FORMAT","FooterLayout","props","orgName","userInfo","organization","name","profile","roles","split","SideBarMenu","userStore","useContext","Context","useState","activeItem","setActiveItem","onItemClick","event","item","disabled","preventDefault","url","history","push","command","originalEvent","classNames","id","style","menu","items","label","role","length","map","index","separator","renderSeparator","iconClassName","icon","linkClassName","undefined","submenuIcon","content","type","onClick","e","target","includes","submenu","UniqueComponentId","renderMenuItem","renderItem","renderMenu","model","API_URL","FIAS_URL","ACME_URL","$api","axios","create","withCredentials","baseURL","$fias","$acme","headers","Accept","interceptors","request","use","config","Authorization","localStorage","getItem","response","error","a","originalRequest","status","_isRetry","get","setItem","data","tokens","access","Error","errors","message","reduce","result","element","JSON","stringify","Severity","SideBarLayout","observer","certificateStore","cert_id","cert","toString","cert_route_id","issueDate","logout","activeUrl","findActive","isActive","forEach","to","src","avatar","alt","ProfileMenu","useHistory","NotificationsMenu","summary","detail","detail_templ","TopBarLayout","layoutStore","isTOM","useMediaQuery","query","profileMenuClassName","profileMenuActive","notificationsMenuClassName","notificationsMenuActive","notif_items","notif_amount","previtem","sum","userName","person_name","family","given_1","given_2","charAt","tabletOrMobile","setTabletOrMobile","sideBarToggle","title","setNotificationsMenuActive","setProfileMenuActive","ava","setRightSideBarActive","ACTIONS","Map","color","TIME_EVENT_OPTIONS","render_options","only","include","user","AuditService","post","rightSideBarActive","timeEvents","setTimeEvents","q","setQ","useEffect","sorts","user_organization_id_eq","getAudits","limit","then","catch","ACTION_ATTRIBUTES","action","timeStr","Date","created_at","toLocaleString","backgroundColor","email","ActionButtonLayout","position","radius","direction","layoutStaticInactive","wrapperClass","setUserInfo","userId","isLoading","addLocale","noFilter","clear","apply","matchAll","matchAny","addRule","removeRule","accept","reject","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","firstDay","isRTL","showMonthAfterYear","yearSuffix","week","timeOnlyTitle","timeText","hourText","minuteText","secondText","allDayText","actionItems","CERT_TYPES","code","s_name","header","htmlFor","value","series","placeholder","number","dateFormat","inputId","autoFocus","options","certType","filter","optionLabel","find","el","onChange","padding","fontWeight","numberPrev","seriesPrev","effTimePrev","borderLeft","borderLeftStyle","background","latestOne","HOME_REGION_CODE","DEFAULT_CERT_SUGGESTIONS","section","suggestion","done","NULL_FLAVORS","NULL_FLAVOR_IDX","NI","INV","DER","OTH","NINF","PINF","UNC","MSK","NA","UNK","ASKU","NAV","NASK","QS","TRC","ID_CARD_TYPES","s_mask","n_mask","c_mask","DEFAULT_ERROR_TOAST","severity","life","baseZIndex","NullFlavorWrapper","setValue","checked","setChecked","fieldStyle","paraNum","marginLeft","nullFlavors","field_name","parent_attr","nullFlavor","checkbox","lincked","setCheck","_nullFlavors","marginTop","checkboxLabel","dropdown","findIndex","idx","canNullFlavor","field","width","getCleanNullFlavor","old","_new","parent_guid","checkFieldNullFlavor","key","splice","Identity","_id","_identityCardType","_series","_number","_issueOrgName","_issueOrgCode","_issueOrgDate","_parentGUID","this","identity_card_type_id","issueOrgName","issueOrgCode","parentGUID","null_flavors","makeAutoObservable","deep","_identity","toDateString","null_flavors_attributes","ct","issueOrgDate","Person","_personName","_SNILS","_address","_contacts","_oldOne","SNILS","address","contacts","_person","state","streetAddressLine","address_attributes","contacts_attributes","person_name_attributes","fio","snils","getOneLinePersonName","trim","PersonName","personName","setFio","isErrorMessage","submitted","values","_result","suggestionsStore","certificate","patient","person","birth_year","yearBTChecked","setYearBTChecked","deathYear","yearDTChecked","setYearDTChecked","identified","optionCode","fromRelatives","isDeathTime","deathDatetime","identity","policyOMS","setBirthDay","birth_date","gender","locale","mask","showIcon","setDeathDay","timeOnly","hourFormat","inputsIdentity","dulValue","seriesProps","seriesField","numberProps","numberField","depCodeProps","docChecked","setDocChecked","identityCardType","setDulValue","nullFlavorOption","depCodeField","nf","cols","rows","paddingLeft","removeEmpty","obj","candidat","Array","prototype","isPrototypeOf","newObj","Object","keys","addressStore","regions","regionsOptions","searchStr","setSearchStr","region","setRegion","district","setDistrict","city","setCity","town","setTown","street","setStreet","housenum","house","setHouse","fiasOptions","addresses","setAddresses","toast","useRef","setAddress","parent","postalCode","aoGUID","AOGUID","houseGUID","HouseGUID","level","slice","buildnum","strucnum","fetchRegionOptions","onHide","dialogVisible","autocompleteOnChange","setter","getSuggestions","getChildItems","reason","current","show","footer","manualMode","isNotStrictly","oldOne","onAddrComplete","onCancel","visible","breakpoints","modal","suggestions","completeMethod","replace","searchBar","filterBy","forceSelection","maxWidth","flat","ref","FiasService","regionID","parentOpt","Address","_streetAddressLine","_state","_district","_city","_town","_street","_aoGUID","_houseGUID","_housenum","_buildnum","_strucnum","_flat","_postalCode","_parent","house_number","building_number","struct_number","flat_number","fetchAddressHierarchy","fiasItem","shortname","parseFiasItem","console","log","DEFAULT_ADDRESS","invalid","strictly","bt_id","_addr","onClear","AreaType","addressLife","setAddressLife","deathAddr","addressDeath","setAddressDeath","checkedLifeArea","checkedDeathArea","onAddressCopy","deathAreaType","lifeAreaType","_lifeAddr","_deathAddr","addressProps","DEAD_PLACE_TYPES","MARITAL_STATUSES","EDUCATION_LEVELS","SOCIAL_STATUSES","TERMS_PREGNANCY","RelatedSubject","_guid","_familyConnection","_fio","_birthTime","guid","uuidv4","family_connection","birthTime","addr","_rs","addr_attributes","toLocaleDateString","ChildInfo","_termPregnancy","_weight","_whichAccount","_relatedSubject","term_pregnancy","weight","which_account","related_subject","_chInfo","related_subject_attributes","getAttributes","MotherInfo","childInfo","relatedSubject","max","min","whichAccount","temp","age","hoursAge","isChildInfo","yearsAge","isMonthChild","daysAge","termPregnancy","ddStyle","minWidth","dDivStyle","paddingTop","deathPlace","chInf","maritalStatus","educationLevel","socialStatus","DEATH_KINDS","MEDICS","BASIS_DERMINING","isExtReason","deathKind","extReasonTime","panelStyle","extReasonDescription","establishedMedic","basisDetermining","Procedure","_medicalServ","_textValue","_effectiveTime","medical_serv","text_value","effective_time","_pr","medical_serv_id","getHours","getMinutes","DeathReason","_diagnosis","_years","_months","_weeks","_days","_hours","_minutes","_procedures","diagnosis","ext_diagnosis","days","hours","minutes","months","weeks","years","procedures","proc","textValue","medicalServ","effectiveTime","isExt","_dr","diagnosis_id","Number","parseInt","ext_diagnosis_id","procedures_attributes","_temp","pr","concat","DiagnosisService","offset","CSS_classes","diagnoses","setDiagnoses","diagnosisText","setDiagnosisText","diagnosisCode","setDiagnosisCode","deathTime","deathReason","setDeathReason","upButton","onUp","downButton","onDown","diagnosisOptionTemplate","option","marginRight","ICD10","effTime","onTimeChecked","saveReasonEffTime","onDiagnosisChecked","fieldName","delay","s_name_cont","ICD10_start","fetchExtDiagnoses","fetchDiagnoses","itemTemplate","ACMEService","input","data_AIN","ACME_AIN","withOtherReasons","deathDate","X1X4","X7X12","padStart","X14X17","X19X21","X22X23","X24X25","X26X29","birthDay","deathDay","XYMD","X39X41","_diff","getFullYear","getMonth","getDate","X42","X45","reasonD","lastIndexOf","substring","reasonA","padEnd","reasonB","reasonC","reasons","deathReasons","reasons_in","X171","X174","pregnancyConnection","X176X177","X178X179","X180X183","X188","X219","X220X231","reason_a","reason_b","reason_c","ext_reason","_part_2","codogram","parse_ACME_TIN","xACME","_sb","x45","x54","x51_53","spX45","spX54","spX51_53","mainCSSClass","isACME","reasonBckecked","reasonCckecked","reasonDckecked","reasonIDExchange","first","second","reasonACME","height","changeReasonACME","onSucccess","onError","strACMEAIN1","isReasonD","strACMEAIN2","runACME","TINs","data_TIN","_res","_alter","doACME","temporaryIDStore","checkReason","lastDeathReasonID","newReason","setNewReason","medicalServs","setMedicalServs","medservText","setMedservText","medservCode","setMedservCode","procedure","setProcedure","dateETChecked","setDateETChecked","diagnosChecked","setDiagnosChecked","selectedProcedures","setSelectedProcedures","selectedReasons","setSelectedReasons","setMedServValue","lastProcedureID","s_code","medServOptionTemplate","_reasons","val","name_cont","s_code_start","fetchMedicalServs","inputStyle","showTime","margin","selection","responsiveLayout","dataKey","emptyMessage","onSelectionChange","selectionMode","headerStyle","body","rowData","_resultStr","procNames","TRAFFIC_ACCIDENT","PREGNANCY_CONNECTION","DOCTOR_RENDER_OPTIONS","DoctorService","doctor","Doctor","put","doctor_id","delete","Authenticator","_time","_doctorID","time","_authenticator","doctors","setDoctors","getDoctors","organization_id_eq","err","isTrafficAccident","trafficAccident","isPregnancyConnection","nullFlavorDropdnStyle","customDropdnStyle","customParagraphFieldStyle","fontSize","author","doctorID","showClear","legalAuthenticator","authenticator","Participant","_receiptDate","_description","_original","receipt_date","description","original","person_attributes","identity_attributes","participant","receiptDate","buttonDisabled","match","params","certID","setCertID","setMessage","_idx","cArray","certs","select","findById","location","search","clean","save","sm_code","finally","createNew","sugCount","redSuggestionsCount","layoutParams","secton_router","shape","rowClassName","_position","_organization","_doctor","organization_id","position_id","emptyDoctor","setDoctor","doctorDialog","setDoctorDialog","deleteDoctorDialog","setDeleteDoctorDialog","deleteDoctorsDialog","setDeleteDoctorsDialog","selectedDoctors","setSelectedDoctors","setSubmitted","telcom_value","main","setEmail","phone","setPhone","setPosition","positions","setPositions","dt","openNew","hideDialog","hideDeleteDoctorDialog","hideDeleteDoctorsDialog","findIndexById","confirmDeleteSelected","onContactChange","contact","_contact","telcom_use","doctorDialogFooter","Fragment","_doctors","oldValue","newValue","_request","audits","createAudit","audit","_audits","before","after","_person_attributes","oldPerson","newPerson","_person_name_attributes","oldFIO","newFIO","oldAddress","newAddress","oldContacts","u","newContacts","oldNullFlavors","newNullFlavors","null_flavor_attributes","genUpdateDoctorRequest","updateDoctor","addDoctor","deleteDoctorDialogFooter","removeDoctor","deleteDoctorsDialogFooter","fioBodyTemplate","row","right","exportable","editDoctor","required","getPositions","test","GENDERS","lazyLoading","setLazyLoading","sortField","setSortField","sortOrder","setSortOrder","filters","setFilters","PrimeReact","selected","setSelected","matchMode","FilterMatchMode","IN","operator","constraints","STARTS_WITH","CONTAINS","DATE_AFTER","DATE_BEFORE","filterClearTemplate","filterClearCallback","filterApplyTemplate","filterApplyCallback","custodian","cusName","flexGrow","flexBasis","count","scrollDirection","scrollable","scrollHeight","size","filterDisplay","onFilter","_filters","_constraint","_codes","basis_determining_in","death_place_in","getList","virtualScrollerOptions","lazy","onLazyLoad","last","itemSize","showLoader","loading","filterLocale","onRowDoubleClick","onSort","order","indexOf","frozen","cert_type","filterField","filterPlaceholder","dataType","showFilterOperator","filterClear","filterApply","sortable","acme","reason_ACME","cr","c_reason","ar","a_reason","br","b_reason","dr","d_reason","death_reasons","filterElement","filterCallback","birth","death","death_datetime","death_year","dd","db","m","death_place","place","showFilterMatchModes","basis_determining","basis","iDate","issue_date","LoginImageDiv","onSubmit","form","login","password","onPassordRecovery","renew_link","isFormFieldValid","meta","touched","getFormErrorMessage","logo","initialValues","validate","render","handleSubmit","autoComplete","toggleMask","marginBottom","version","record","UsersService","ORGANIZATION_RENDER_OPTIONS","except","OrganizationService","Organization","setAudits","setOrganization","ID","setID","getOrganization","organizations","setOrganizations","getOrganizations","changesAudit","oid","textAlign","name_full","license","license_data","okpo","isSaveAvaible","updateOrganization","link","AUTH_ROUTES","path","Component","MainPage","ListPage","CertificatePage","DoctorsPage","setUser","getUser","user_name","user_team","SettingsPage","NON_AUTH_ROUTES","LoginPage","names","phone_number","password_confirmation","registration","PWD_RECOVERY_ROUTE","pwd_renew","activation_link","PUBLIC_ROUTES","MESSAGE_ROUTE","ERROR_ROUTE","AppRouter","token","isAuth","setHistory","checkAuth","chech_routes","component","exact","App","AddressStore","_isLoding","_history","_regionsOptions","_fiasOptions","_dialogVisible","_manualMode","_onAddrComplete","_regions","parse","defaultRegion","getRegions","substr","createNullFlavors","isLoding","Patient","_gender","_birth_date","_birth_year","_provider_organization","_addrType","addr_type","_patient","person_id","provider_organization","isYear","Certificate","_issueDate","_certType","_seriesPrev","_numberPrev","_effTimePrev","_lifeAreaType","_deathAreaType","_deathDatetime","_deathYear","_deathMonth","_deathPlace","_maritalStatus","_educationLevel","_socialStatus","_deathKind","_extReasonTime","_extReasonDescription","_reasonA","_reasonB","_reasonC","_reasonD","_deathReasons","_reasonACME","_policyOMS","_childInfo","_establishedMedic","_basisDetermining","_trafficAccident","_pregnancyConnection","_author","_audithor","_legalAuthenticator","_custodian_id","_participant","_latestOne","disposers","latest_one","number_prev","series_prev","policy_OMS","life_area_type","death_area_type","death_addr","death_kind","education_level","marital_status","social_status","eff_time_prev","child_info","audithor","legal_authenticator","ext_reason_time","ext_reason_description","established_medic","traffic_accident","pregnancy_connection","autorun","utc1","UTC","b","ms","milisecAge","Math","floor","setMinutes","setHours","setDate","setMonth","setFullYear","_cert","audithor_attributes","author_attributes","legal_authenticator_attributes","child_info_attributes","death_addr_attributes","death_reasons_attributes","a_reason_attributes","b_reason_attributes","c_reason_attributes","d_reason_attributes","patient_attributes","custodian_id","participant_attributes","eff_time","lat","dat","disposer","DEFAULT_RENDER_OPTIONS","NULLFLAVORABLE_RENDER_OPTIONS","DEFAULT_AUTHENTICATOR_RENDER_OPTIONS","LETTERED_DEATH_REASON_RENDER_OPTIONS","CERTIFICATE_FULL_RENDER_OPTIONS","CertificateService","certificate_id","configure","enforceActions","CertificateStore","_submitted","_userInfo","_certs","_selected","_sorts","_first","_rows","_count","_q","custodian_id_eq","getCount","onSuccess","patient_id","updateCertificate","nCert","addCertificate","removeCertificate","num","dataLength","doAfter","getCertificates","id_eq","custudian_id_eq","LayoutStore","_isTabletOrMobile","_isLayoutStaticInactive","_isRightSidebarActive","_isProfileMenuActive","_isNotificationsMenuActive","_isLoading","_message","isLayoutStaticInactive","rightSidebarActive","SuggestionsStore","cStore","_cStore","_suggestions","_identified","_fromRelatives","isBirthDay","isDeathDay","isSNILS","oms","isOMS","isCODE","isIORGDate","isIORGName","isIDSeries","isIDNumber","isLifeArea","isDeathArea","isDeathAreaType","isLifeAreaType","isTERMS_PREGNANCY","isCHILD_WEIGHT","isNUMBER_PREGNANCY","isMOTHER_FIO","isMOTHER_BIRTHDAY","isMOTHER_ADDRESS","isPersonNameSug","TemporaryIDStore","_lastCertificateID","_lastDeathReasonID","_lastProcedureID","AuthService","_isAuth","_user","_token","access_token","setAuth","removeItem","setToken","setLoading","getUserInfo","createContext","ReactDOM","Provider","document","getElementById"],"mappings":"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MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,WACN8B,WAAY,8YACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,WACN8B,WAAY,iYACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,WACN8B,WAAY,oZACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,4XACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,4XACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,uTACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,sZACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WAAY,wVACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WACE,+gBACFC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WAAY,iXACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WAAY,waACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,cACN8B,WAAY,gcACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,sTACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,2QACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,+PACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,iTACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WACE,2pBACFC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,igBACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,YACN8B,WAAY,wZACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,eACN8B,WAAY,2PACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,qBACN8B,WAAY,8eACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,oBACN8B,WAAY,wVACZC,MAAM,GAER,CACEF,QAAS,IACT7B,KAAM,0BACN8B,WACE,ulBAC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","file":"static/js/main.9cdb7eaf.chunk.js","sourcesContent":["\r\nimport { FC } from 'react'\r\nimport '../styles/simplePage.css'\r\nimport '../styles/root.css'\r\nexport const NoMatchPage: FC = () => {  \r\n\r\n  return (\r\n    <>\r\n      <div className=\"exception-body\">\r\n        <div className=\"nopage-block\">\r\n          <h1 className=\"nopage_h1\">Неверный адрес страницы</h1>\r\n          <div className=\"nopage_text\">Проверьте, правильно ли вы ввели его. Если данные верны, пожалуйста, сообщите нам об ошибке.</div>\r\n          <a className=\"nopage-button\" href=\"../\">На главную</a><a className=\"nopage-button\" href=\"../\">Сообщить об ошибке</a>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}","export interface IObjectKeys {\r\n  [key: string]: string | number | undefined\r\n}\r\nexport const HOME_ROUTE = \"/\"\r\nexport const LOGIN_ROUTE = \"/login\"\r\nexport const REGISTRATION_ROUTE = \"/registration\"\r\nexport const PWD_RECOVERY_ROUTE = \"/pwd_recovery\"\r\nexport const MESSAGE_ROUTE = \"/message\"\r\nexport const ERROR_ROUTE = \"/error\"\r\nexport const ADMIN_ROUTE = \"/admin\"\r\nexport const LIST_ROUTE = \"/list\"\r\nexport const CERTIFICATE_ROUTE = \"/cert\"\r\nexport const REPORT_ROUTE = \"/report\"\r\nexport const DOCTORS_ROUTE = \"/doctors\"\r\nexport const USER_ROUTE = \"/user\"\r\nexport const MO_SETTINGS_ROUTE = \"/organization\"\r\nexport const DIRECTION = [\"asc\", \"desc\"]\r\nexport const ROLES: IObjectKeys = {\r\n  USER: \"ПОЛЬЗОВАТЕЛЬ\",\r\n  ADMIN: \"АДМИНИСТРАТОР\",\r\n  STATS: \"СТАТИСТИК\",\r\n}\r\nexport const RunsackFilterMatchMode = {\r\n  startsWith: \"_start\",\r\n  contains: \"_cont\",\r\n  notContains: \"_not_cont\",\r\n  endsWith: \"_end\",\r\n  equals: \"_eq\",\r\n  notEquals: \"_not_eq\",\r\n  in: \"_in\",\r\n  lt: \"_lt\",\r\n  lte: \"lteq\",\r\n  gt: \"_gt\",\r\n  gte: \"_gteq\",\r\n  between: \"\",\r\n  dateIs: \"_eq\",\r\n  dateIsNot: \"_not_eq\",\r\n  dateBefore: \"_lt\",\r\n  dateAfter: \"_gt\",\r\n  custom: \"\",\r\n}\r\n// маркер удаления для использования в запросах на обновление\r\n// destroy-marker for using in nested_attributes\r\nexport const DESTROY_OPTION = { _destroy: \"1\" }\r\n\r\n//формат дата & время\r\nexport const TIME_FORMAT = {\r\n  year: \"2-digit\",\r\n  month: \"2-digit\",\r\n  day: \"2-digit\",\r\n  hour: \"2-digit\",\r\n  minute: \"2-digit\",\r\n} as Intl.DateTimeFormatOptions\r\n\r\n// формат даты\r\nexport const DATE_FORMAT = { year: \"2-digit\", month: \"short\", day: \"2-digit\" } as Intl.DateTimeFormatOptions\r\n","import { IUserInfo } from \"../../models/responses/IUserInfo\"\r\nimport {ROLES}  from \"../../utils/consts\"\r\n\r\ntype FooterLayoutProps = {userInfo: IUserInfo | null}\r\nconst FooterLayout = (props: FooterLayoutProps) => {\r\n  const orgName = props.userInfo!==null && props.userInfo.organization ? props.userInfo.organization.name : ''\r\n  const profile = props.userInfo!==null && props.userInfo.roles ? ROLES[props.userInfo.roles.split(' ')[0]]: ''  \r\n  return (\r\n    <div className=\"layout-footer\">\r\n      <div className=\"footer-logo-container\">\r\n        <span className=\"app-name\">{orgName}:</span>\r\n        <span className=\"app-profile\">{profile}</span>\r\n      </div>\r\n      <span className=\"copyright\">2022 © ГБУЗ АО \"АМИАЦ\"</span>\r\n    </div>       \r\n  )\r\n}\r\nexport default FooterLayout","export default __webpack_public_path__ + \"static/media/favicon.b5c775a4.png\";","import React, { FC,  useContext,  useState } from 'react'\r\nimport { MenuItem } from 'primereact/menuitem'\r\nimport { classNames, UniqueComponentId } from 'primereact/utils'\r\nimport { IMenuProps } from './IMenuProps'\r\nimport { HOME_ROUTE } from '../../utils/consts'\r\nimport { Context } from '../..'\r\n\r\n\r\nexport const SideBarMenu:FC<IMenuProps> = (props: IMenuProps) =>{ \r\n  const { userStore } = useContext(Context)\r\n  const [activeItem, setActiveItem] = useState<MenuItem>({})\r\n  const onItemClick = (event: React.MouseEvent, item:MenuItem)=> {\r\n        if (item.disabled) {\r\n            event.preventDefault()\r\n            return\r\n        }\r\n        if (!item.url) {\r\n           event.preventDefault()\r\n        } else if (item.url.startsWith(HOME_ROUTE)) {\r\n           userStore.history().push(item.url) \r\n           event.preventDefault()          \r\n        }\r\n        if (item.command) item.command({           \r\n              originalEvent: event,\r\n              item,\r\n            })        \r\n        if (item!==activeItem) {\r\n          if (activeItem.className) activeItem.className=''\r\n          item.className='active-menuitem'\r\n          setActiveItem(item)\r\n        } else {\r\n          item.className=''\r\n          setActiveItem({})\r\n        }\r\n  }\r\n\r\n  const className = classNames(\"layout-menu-container\", props.className)\r\n  const menu = (items: MenuItem[], label: string)=> {\r\n    const renderMenu = ()=> {\r\n      if (items.length>0) {\r\n        const renderItem = (item:MenuItem, index:number) => {\r\n          const renderSeparator = (index:number)=><li key={\"separator_\" + index} className='menu-separator' role='separator'></li>\r\n          const renderMenuItem =(item:MenuItem, index:number) => {\r\n          const submenuIconClassName = \"pi pi-fw pi-angle-down layout-submenu-toggler\"\r\n          const iconClassName = classNames(\"layout-menuitem-icon pi pi-fw\", item.icon)\r\n          const linkClassName = classNames(\"p-ripple\", { \"p-link\": item.url === undefined }, \r\n          { \"p-disabled\": item.disabled })\r\n          const submenuIcon = item.items && <span className={submenuIconClassName}></span>\r\n          const icon = item.icon && <span className={iconClassName}></span>\r\n          const label = item.label && <span className='layout-menuitem-text'>{item.label}</span>\r\n          const content = item.className || item.items ?             [\r\n              <button key={`bt_${item.label}_${index}`} type='button' onClick={(e:React.MouseEvent)=>onItemClick(e, item)} className=\"p-ripple p-link\">\r\n                {icon}\r\n                {label}\r\n                {submenuIcon}                                \r\n              </button>,              \r\n            ] :  [<a href={item.url} target={item.target}\r\n                    key={`a_${item.disabled ? label : index}`}  \r\n                    className={linkClassName} \r\n                    onClick={(e:React.MouseEvent)=>onItemClick(e, item)} \r\n                    aria-disabled={item.disabled}>\r\n                    {icon}{label}</a>,]\r\n            if (item.className?.includes('layout-root-menuitem')) \r\n               content.push(<div key={`dv_${item.label}_${index}`} className={item.className}><div className='layout-menuitem-root-text'>{item.label}</div></div>)\r\n            const submenu = (item.items && item.className) && menu(item.items, item.label || UniqueComponentId())      \r\n            return (\r\n              <li key={`li_${index}_${item.className}`} \r\n                className={item.className} style={item.style}       \r\n                role='menuitem'>\r\n                {content}\r\n                {submenu}\r\n              </li>\r\n            )\r\n          }\r\n          if (item.separator) return renderSeparator(index)\r\n          else return renderMenuItem(item, index) \r\n        }\r\n        return items.map((item, index) => {\r\n          return renderItem(item, index)\r\n        })\r\n      }\r\n      return null\r\n    }\r\n    \r\n    return (\r\n      <ul key={label} className=\"layout-menu\" role=\"menu\">\r\n        {renderMenu()}\r\n      </ul>\r\n    )\r\n  }  \r\n  return (\r\n    <div id={props.id || \"sidebar_menu\"} className={className} style={props.style}>\r\n      {menu(props.model || [], \"global\")}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n","import axios, { AxiosRequestConfig } from \"axios\"\r\nimport { AuthResponse } from \"../models/responses/AuthResponse\"\r\n\r\n// настройки на back-end\r\n//Main API service (Основной API) URL\r\nexport const API_URL = \"http://api-medss.int.amurzdrav.ru/REST_API/v1/\"\r\n//FIAS service (Сервис адресов ФИАС) URL\r\nexport const FIAS_URL = \"http://fias.int.amurzdrav.ru/fias\"\r\n//АСМЕ service (Сервис взаимодействия с АСМЕ) URL\r\nexport const ACME_URL = \"http://acme.int.amurzdrav.ru/\"\r\n\r\nconst $api = axios.create({\r\n  withCredentials: true,\r\n  baseURL: API_URL,\r\n})\r\n\r\nexport const $fias = axios.create({\r\n  baseURL: FIAS_URL,\r\n})\r\n\r\nexport const $acme = axios.create({\r\n  headers: {\r\n    Accept: \"application/json\",\r\n    \"Content-Type\": \"application/json; charset=utf-8\",\r\n    \"X-Requested-With\": \"XMLHttpRequest\",\r\n  },\r\n  baseURL: ACME_URL,\r\n})\r\n\r\n$api.interceptors.request.use((config: AxiosRequestConfig) => {\r\n  config.headers.Authorization = `Bearer ${localStorage.getItem(\"token\")}`\r\n  return config\r\n})\r\n\r\n$api.interceptors.response.use(\r\n  (config) => config,\r\n  async (error) => {\r\n    const originalRequest = error.config\r\n    if (error.response && error.response.status === 401 && error.config && !error.config._isRetry) {\r\n      originalRequest._isRetry = true\r\n      try {\r\n        const response = await axios.get<AuthResponse>(`${API_URL}auth/refresh`, { withCredentials: true })\r\n        localStorage.setItem(\"token\", response.data.tokens.access)\r\n        return $api.request(originalRequest)\r\n      } catch (e) {\r\n        throw new Error(\"API error 401, Сеанс не авторизован\")\r\n      }\r\n    } else if (error.response && [406, 422].includes(error.response.status)) {\r\n      if (error.response.data && error.response.data.errors) {\r\n        let message = error.response.data.errors.reduce((result: string, element: string) => {\r\n          result = `${result}, ${element}`\r\n          return result\r\n        }, `API error ${error.response.status}`)\r\n        throw new Error(message)\r\n      } else throw new Error(`API error ${JSON.stringify(error)}`)\r\n    }\r\n    throw error\r\n  }\r\n)\r\n\r\n$fias.interceptors.response.use(\r\n  (config) => config,\r\n  async (error) => {\r\n    if (error.response && error.response.status && [406, 422].includes(error.response.status)) {\r\n      if (error.response.data && error.response.data.errors) {\r\n        let message = error.response.data.errors.reduce((result: string, element: string) => {\r\n          result = `${result}, ${element}`\r\n          return result\r\n        }, `API error ${error.response.status}`)\r\n        throw new Error(message)\r\n      } else throw new Error(`API error ${error.response.status}`)\r\n    } else if (error.message.includes(\"Network Error\")) new Error(\"Ошибка сети: соединение не может быть установлено\")\r\n    throw error\r\n  }\r\n)\r\nexport default $api\r\n","import { IPersonName } from \"../IPersonName\"\r\n\r\nexport const ACTIONS = new Map<string, IActionAttribute>([\r\n  [\"added\", { title: \"Добавлено:\", icon: \"pi pi-plus\", color: \"rgb(104, 159, 56)\" }],\r\n  [\"updated\", { title: \"Изменено:\", icon: \"pi pi-pencil\", color: \"rgb(2, 136, 209)\" }],\r\n  [\"removed\", { title: \"Удалено:\", icon: \"pi pi-trash\", color: \"rgb(251, 192, 45)\" }],\r\n  [\"archived\", { title: \"Архивировано:\", icon: \"pi pi-inbox\", color: \"rgb(96, 125, 139)\" }],\r\n  [\"commented\", { title: \"Комментарий:\", icon: \"pi pi-comment\", color: \"rgb(96, 125, 139)\" }],\r\n  [\"imported\", { title: \"Импорт:\", icon: \"pi pi-download\", color: \"rgb(156, 39, 176)\" }],\r\n  [\"exported\", { title: \"Экспорт:\", icon: \"pi pi-upload\", color: \"rgb(156, 39, 176)\" }],\r\n  [\"signed_in\", { title: \"Подписано:\", icon: \"pi pi-user-edit\", color: \"rgb(104, 159, 56)\" }],\r\n  [\"signed_out\", { title: \"Отозвано:\", icon: \"pi pi-user-minus\", color: \"rgb(251, 192, 45)\" }],\r\n])\r\nexport enum Severity {\r\n  success,\r\n  info,\r\n  warning,\r\n  error,\r\n}\r\nexport interface IActionAttribute {\r\n  title: string\r\n  icon: string\r\n  color: string\r\n}\r\n\r\nexport interface ITimeEvent {\r\n  id: number\r\n  action: string\r\n  severity: Severity\r\n  detail: string\r\n  table?: string\r\n  summary?: string\r\n  user: { id: number; email: string; person_name: IPersonName }\r\n  organization: { id: number; name: string }\r\n  created_at: string\r\n}\r\n","import avatar from \"../../images/favicon.png\"\r\nimport { useContext } from \"react\"\r\nimport { observer } from \"mobx-react-lite\"\r\nimport { Context } from \"../..\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { CERTIFICATE_ROUTE, HOME_ROUTE, LIST_ROUTE } from \"../../utils/consts\"\r\nimport { SideBarMenu } from \"../menus/SideBarMenu\"\r\nimport { MenuItem } from \"primereact/menuitem\"\r\nimport { API_URL } from \"../../http\"\r\ntype SideBarLayoutProps = {activeUrl: string}\r\nconst SideBarLayout = observer((props: SideBarLayoutProps) => {\r\n   const {userStore, certificateStore} = useContext(Context)\r\n   const cert_id =  certificateStore.cert.id?.toString() || 'new'\r\n   const cert_route_id = `${CERTIFICATE_ROUTE}/${cert_id}`\r\n   const items:MenuItem[] = [    \r\n      { label: \"Свидетельство\", className: \"layout-root-menuitem\",     \r\n        items:[{label:\"Секции\", icon:\"pi-file\", items:[\r\n          {label:\"Сведения о документе\", \r\n          url:`${cert_route_id}?q=0`}, \r\n          {label:\"Начало(п.1-3,7)\", url:`${cert_route_id}?q=1`},{label:\"Документы(п.4-6)\", url:`${cert_route_id}?q=2`},{label:\"Адреса.(п.8-11)\", url:`${cert_route_id}?q=3`},{label:\"п.12-17\", url:`${cert_route_id}?q=5`},{label:\"п.18-21\", url:`${cert_route_id}?q=6`},{label:\"Причины (п.22 I)\", url:`${cert_route_id}?q=7`},{label:\"Прочие (п.22 II)\", url:`${cert_route_id}?q=8`},{label:\"п.23-26\", url:`${cert_route_id}?q=9`},{label:\"Получатель\", url:`${cert_route_id}?q=10`}]},\r\n        { label: \"Печать\", disabled: !certificateStore.cert.issueDate,  icon:\"pi-print\", items: [{label:\"Лицевая\", icon:\"pi-file\", target:\"_blank\", url:`${API_URL}print/face/${cert_id}`},{ label:\"Оборотная\", icon:\"pi-file\", target:\"_blank\", url:`${API_URL}print/back/${cert_id}`}]},  \r\n        { label: \"Списки\",  icon:\"pi-list\", items: [{label:\"Свидетельства\", icon:\"pi-id-card\", url:LIST_ROUTE},{label:\"Журнал\", icon:\"pi-align-left\", url:\"/#\"}]},]}, \r\n      {separator: true},\r\n      { label: \"Сеанс\", className: \"layout-root-menuitem\",      \r\n        items: [{label:\"Главная\", icon:\"pi-home\", url:HOME_ROUTE},{label:\"Свидетельства\", icon:\"pi-list\", url:LIST_ROUTE},{label:\"Выход\", icon:\"pi-sign-out\", command:()=>{userStore.logout()}}]     \r\n      },     \r\n   ]   \r\n  const url = props.activeUrl\r\n  const findActive = (items: MenuItem[])=>{\r\n    let isActive = false    \r\n    items.forEach((item)=>{        \r\n      if (item.url === url)  { \r\n        item.className='active-menuitem' \r\n        isActive = true \r\n      }\r\n      if (isActive) return true\r\n      if (item.items) {         \r\n        if (findActive(item.items)) { \r\n          item.className = item.className || 'active-menuitem'\r\n          isActive = true  \r\n        }  \r\n      } \r\n    })      \r\n    return isActive\r\n  }\r\n  findActive(items)  \r\n  return (\r\n    <div className='layout-sidebar'>      \r\n        <Link className='logo' to='#/'>\r\n          <img id='app-logo' className='logo-image' src={avatar} alt='РРМСС V3.0' />\r\n          <span className='app-name'>МедСС</span>\r\n        </Link>       \r\n        <SideBarMenu model={items} />  \r\n    </div>      \r\n  )\r\n})\r\nexport default SideBarLayout","export default __webpack_public_path__ + \"static/media/ava.0f62058a.png\";","import { MenuItem } from 'primereact/menuitem'\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { HOME_ROUTE } from '../../utils/consts'\r\nimport { IMenuProps } from './IMenuProps'\r\n\r\nexport const ProfileMenu: FC<IMenuProps> = (props: IMenuProps)=> { \r\n  const history = useHistory()  \r\n  const onItemClick = (event: React.MouseEvent, item:MenuItem)=> {\r\n    if (item.disabled) {\r\n      event.preventDefault()\r\n      return\r\n    }\r\n    if (!item.url) {\r\n      event.preventDefault()\r\n    } else if (item.url.startsWith(HOME_ROUTE)) {\r\n      history.push(item.url)\r\n      event.preventDefault()\r\n    }\r\n    if (item.command) item.command({           \r\n      originalEvent: event,\r\n      item,\r\n    })  \r\n  }\r\n  const className = \"profile-menu fade-in-up\"\r\n  const renderMenu = (items:MenuItem[]) => {\r\n    const renderItem = (item:MenuItem, index:number) => {\r\n        const renderSeparator = (index:number)=><li key={\"separator_\" + index} className='menu-separator' role='separator'></li>\r\n        const renderMenuItem =(item:MenuItem, index:number) => {          \r\n          const iconClassName = classNames(\"pi\", item.icon)          \r\n          const icon = item.icon && <i className={iconClassName}></i>\r\n          const label = item.label && <span>{item.label}</span>\r\n          const content = <button key={`bt_${item.label}_${index}`} \r\n              type='button' \r\n              onClick={(e:React.MouseEvent)=>onItemClick(e, item)} \r\n              className=\"p-link\">\r\n                {icon}\r\n                {label}                                                \r\n            </button> \r\n          return <li key={`pfi_${index}`}>{content}</li> \r\n            \r\n        }\r\n        if (item.separator) return renderSeparator(index)\r\n        else return renderMenuItem(item, index) \r\n      }\r\n    if (items.length > 0) {\r\n      return items.map((item, index) => {\r\n          return renderItem(item, index)\r\n      })\r\n    } else return null\r\n  }\r\n  return (\r\n    <ul className={className}>\r\n        {renderMenu(props.model || [])}\r\n    </ul>\r\n  )\r\n}","\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { HOME_ROUTE } from '../../utils/consts'\r\nimport { ExtMenuItem, INotificationMenuProps } from './IMenuProps'\r\n\r\nexport const NotificationsMenu: FC<INotificationMenuProps> = (props: INotificationMenuProps)=> {\r\n  const history = useHistory()   \r\n  const onItemClick = (event: React.MouseEvent, item:ExtMenuItem)=> {\r\n    if (item.disabled) {\r\n      event.preventDefault()\r\n      return\r\n    }\r\n    if (!item.url) {\r\n      event.preventDefault()\r\n    } else if (item.url.startsWith(HOME_ROUTE)) {\r\n      history.push(item.url)\r\n      event.preventDefault()\r\n    }\r\n    if (item.command) item.command({           \r\n      originalEvent: event,\r\n      item,\r\n    })  \r\n  }\r\n  const className = \"notifications-menu fade-in-up\"\r\n  const renderMenu = (items:ExtMenuItem[]) => {\r\n    const renderItem = (item:ExtMenuItem, index:number) => {\r\n        const renderSeparator = (index:number)=><li key={\"separator_\" + index} className='menu-separator' role='separator'></li>\r\n        const renderMenuItem =(item:ExtMenuItem, index:number) => { \r\n          const className =  classNames(\"notification-item\", item.className)                           \r\n          const iconClassName = classNames(\"pi\", item.icon, item.className)          \r\n          const icon = item.icon && <i className={iconClassName}></i>\r\n          const summary = item.summary && <div className=\"notification-summary\">{item.summary}</div>\r\n          const label = (item.label && item.label.split('detail'))||[\"\",\"\"]\r\n          const content = <button key={`bt_${item.summary}_${index}`} \r\n              type='button' className=\"p-link\" \r\n              onClick={(e:React.MouseEvent)=>onItemClick(e, item)}>\r\n                {icon}\r\n              <div className={className}>\r\n                {summary}\r\n                <div className=\"notification-detail\">\r\n                  {label[0]} <b>{item.detail}</b> {label[1]}  \r\n                </div>\r\n              </div>                                                               \r\n            </button> \r\n          return <li key={`nmi_${index}`}>{content}</li> \r\n            \r\n        }\r\n        if (item.separator) return renderSeparator(index)\r\n        else return renderMenuItem(item, index) \r\n      }\r\n    if (items.length > 0) {\r\n      return items.map((item, index) => {\r\n          return renderItem(item, index)\r\n      })\r\n    } else return null\r\n  }\r\n  return (\r\n    <ul className={className}>\r\n        {renderMenu(props.model || [])}\r\n    </ul>\r\n  )\r\n}","import { observer } from 'mobx-react-lite'\r\nimport { useContext } from 'react'\r\nimport { Context } from '../..'\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport ava from \"../../images/ava.png\"\r\nimport { classNames } from 'primereact/utils'\r\nimport { MenuItem } from 'primereact/menuitem'\r\nimport { ProfileMenu } from '../menus/ProfileMenu'\r\nimport { ExtMenuItem } from '../menus/IMenuProps'\r\nimport { NotificationsMenu } from '../menus/NotificationsMenu'\r\nimport { IUserInfo } from '../../models/responses/IUserInfo'\r\nimport { DOCTORS_ROUTE, MO_SETTINGS_ROUTE, USER_ROUTE } from '../../utils/consts'\r\ntype TopBarLayoutProps = {title: string,  userInfo: IUserInfo | null }\r\nconst detail_templ =\"detail\"\r\nexport const TopBarLayout = observer((props: TopBarLayoutProps) =>{\r\n  const {layoutStore, userStore} = useContext(Context)\r\n  const isTOM = useMediaQuery({ query: \"(max-width: 991px)\" })\r\n  const profileMenuClassName = classNames(\"profile-item\",{\"active-menuitem fadeInDown\":layoutStore.profileMenuActive()})\r\n  const notificationsMenuClassName = classNames(\"notifications-item\", {\"active-menuitem\":layoutStore.notificationsMenuActive()})\r\n  const menuToggle=()=>{    \r\n    if (isTOM && layoutStore.tabletOrMobile()) layoutStore.setTabletOrMobile(false) \r\n    else if (isTOM && !layoutStore.tabletOrMobile()) layoutStore.setTabletOrMobile(true)\r\n    else layoutStore.sideBarToggle()          \r\n  } \r\n  const items:MenuItem[] = [    \r\n      {label:\"Пользователь\", icon:\"pi-user\", url:`${USER_ROUTE}/${userStore.userInfo?.id}`},\r\n      {label:\"Медорганизация\", icon:\"pi-building\", url:`${MO_SETTINGS_ROUTE}/${userStore.userInfo?.organization.id}`}, \r\n      {label:\"Врачи\", icon:\"pi-users\", url:`${DOCTORS_ROUTE}`},     \r\n      {label:\"Выход\", icon:\"pi-power-off\", command:()=>{userStore.logout()}},       \r\n   ]\r\n  const notif_items:ExtMenuItem[] = [    \r\n      {label:`Создано ${detail_templ} свидетельств`, summary:\"Новых\", className:'p-success', icon:\"pi-user\", detail:3, url:\"/#\"},\r\n      {label:`Заменено ${detail_templ} свидетельств`, summary:\"Замены\", className:'p-info', icon:\"pi-cog\", detail:2, url:\"/#\"},      \r\n      {label:`Выданы родственникам ${detail_templ} свидетельств`, summary:\"Выданно\", icon:\"pi-cog\", detail:5, url:\"/#\"}, \r\n      {label:`С замечаниями ${detail_templ} свидетельств`, className:'p-danger', summary:\"Замечаний\", icon:\"pi-cog\", detail:1, url:\"/#\"},\r\n      {label:`Проверены ${detail_templ} свидетельств`, summary:\"Проверенно\",  className:'p-success', icon:\"pi-cog\", detail:3, url:\"/#\"},  \r\n      {label:`Отправлены в ФРМСИ ${detail_templ}`, summary:\"Отправлено\", className:'p-success', icon:\"pi-cog\", detail:2, url:\"/#\"},\r\n   ]\r\n   const notif_amount = notif_items.reduce((previtem, item, sum)=>{\r\n    return sum += item.detail\r\n   },0)\r\n   \r\n   const userName = props.userInfo!==null && props.userInfo.person_name ? \r\n   `${props.userInfo.person_name?.family} ${props.userInfo.person_name?.given_1[0]} ${props.userInfo.person_name?.given_2?.charAt(0) ||''}` : ''     \r\n  return (\r\n    <div className=\"layout-topbar\">\r\n      <div className=\"topbar-left\">\r\n        <button type=\"button\" className=\"menu-button p-link\" onClick={()=>menuToggle()}>\r\n          <i className=\"pi pi-chevron-left\"> </i>\r\n        </button>\r\n        <span className=\"topbar-separator\"></span>\r\n        <div className=\"layout-breadcrumb viewname\">\r\n          <span>{props.title}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"topbar-right\">\r\n        <ul className=\"topbar-menu\">          \r\n          <li className={notificationsMenuClassName}>\r\n            <button type=\"button\" className=\"p-link\"\r\n            onClick={()=>layoutStore.setNotificationsMenuActive(true)}>\r\n              <i className=\"pi pi-bell\"></i>\r\n              <span className=\"topbar-badge\">{notif_amount}</span>\r\n            </button>\r\n            <NotificationsMenu model={notif_items}/>\r\n          </li>\r\n          <li className={profileMenuClassName}>\r\n            <button type=\"button\" className=\"p-link\" onClick={()=>layoutStore.setProfileMenuActive(true)}>\r\n              <img src={ava} alt=\"\" className=\"profile-image\"/>\r\n              <span className=\"profile-name\">{userName}</span>\r\n            </button>\r\n            <ProfileMenu model={items}/>\r\n          </li> \r\n          <li className=\"right-sidebar-item\">\r\n            <button type=\"button\" className=\"p-link\" onClick={()=>layoutStore.setRightSideBarActive(true)}>\r\n              <i className=\"pi pi-align-right\"></i>\r\n            </button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n})","import { AxiosResponse } from \"axios\"\r\nimport $api, { API_URL } from \"../http\"\r\nimport { ITimeEvent } from \"../models/responses/ITimeEvent\"\r\n\r\n//Стандартные настройки JSON рендеринга модели timeEvent\r\nexport const TIME_EVENT_OPTIONS = {\r\n  render_options: {\r\n    only: [\"id\", \"summary\", \"table\", \"action\", \"detail\", \"created_at\"],\r\n    include: [\"user\", \"organization\"],\r\n  },\r\n  includes: [\"user\", \"organization\"],\r\n  user: { only: [\"id\", \"email\"], include: [\"person_name\"] },\r\n  organization: { only: [\"id\", \"name\"] },\r\n}\r\nexport default class AuditService {\r\n  //POST request for get audit's list\r\n  static async getAudits(query: any): Promise<AxiosResponse<ITimeEvent[]>> {\r\n    return $api.post(`${API_URL}model/Audit/`, { ...query, ...TIME_EVENT_OPTIONS })\r\n  }\r\n}\r\n","import { observer } from 'mobx-react-lite'\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC, useContext, useEffect, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { ACTIONS,  ITimeEvent } from '../../models/responses/ITimeEvent'\r\nimport {  TIME_FORMAT } from '../../utils/consts'\r\nimport AuditService from '../../services/AuditService'\r\n\r\n\r\ntype RightSideBarLayoutProps = {}\r\n\r\nconst RightSideBarLayout: FC<RightSideBarLayoutProps> = (props: RightSideBarLayoutProps) =>{ \r\n  const {layoutStore, userStore} = useContext(Context)\r\n  const className = classNames(\"layout-sidebar-right\", {\"layout-sidebar-right-active\": layoutStore.rightSideBarActive() }) \r\n  const [timeEvents, setTimeEvents] = useState<ITimeEvent[] | null>(null)\r\n  const [q , setQ] = useState<any | null>(null) \r\n  useEffect(()=>{\r\n    if (q === null && userStore.userInfo) {      \r\n      if (userStore.userInfo.roles.includes('ADMIN'))\r\n        setQ({ sorts: [ 'created_at desc']})\r\n      else \r\n        setQ({user_organization_id_eq: userStore.userInfo?.organization.id, sorts: [ 'created_at desc']})\r\n    }  \r\n  }, [q, userStore.userInfo, userStore.userInfo?.organization] ) \r\n  \r\n  useEffect(()=>{\r\n    if (timeEvents===null && q!==null) AuditService.getAudits({q:q, limit: 200})\r\n    .then(response=>setTimeEvents(response.data))\r\n    .catch(()=>setTimeEvents([]))\r\n  },[timeEvents, q]) \r\n    \r\n   \r\n  return (  \r\n  <div className={className}>\r\n    <h5>Активность</h5>\r\n    <div className=\"widget-timeline\">\r\n      { timeEvents===null || timeEvents.length===0 ? 'Событий не найдено' : timeEvents.map(item=>{        \r\n        const ACTION_ATTRIBUTES = ACTIONS.get(item.action)\r\n        if (ACTION_ATTRIBUTES === undefined) throw Error('неверный action')\r\n        const timeStr = new Date(item.created_at).toLocaleString(\r\n      \"ru\", TIME_FORMAT)\r\n        return (\r\n      <div className=\"timeline-event\" key={item.id}>\r\n        <span className=\"timeline-event-icon\" style={{ backgroundColor: ACTION_ATTRIBUTES.color }}>\r\n                <i className={ACTION_ATTRIBUTES.icon}></i>\r\n        </span>\r\n        <div className='timeline-event-title'>{timeStr} {ACTION_ATTRIBUTES.title}</div>\r\n        <div className='timeline-event-detail'>\r\n          {item.summary ? <><b>где: </b> <em>{item.summary}</em></> : ''}\r\n          {item.detail ? <p><b>что: </b>{item.detail}</p> : ''}          \r\n          <b>кем: </b> <em>{item.user.email}</em>         \r\n        </div>\r\n      </div>)})}\r\n    </div> \r\n        \r\n  </div>\r\n)}\r\nexport default observer(RightSideBarLayout)\r\n\r\n","\r\nimport  { FC } from 'react'\r\nimport '../../styles/components/ActionButtonLayout.css'\r\nimport '../../styles/components/Tooltip.css'\r\nimport { SpeedDial } from 'primereact/speeddial'\r\nimport { Tooltip } from 'primereact/tooltip'\r\n\r\nexport interface IActionItem {\r\n  label: string\r\n  icon: string\r\n  command: ()=>void\r\n}\r\n\r\ntype ActionButtonLayoutProps = {items?: IActionItem[]}\r\n\r\nexport const ActionButtonLayout: FC<ActionButtonLayoutProps> = (props: ActionButtonLayoutProps) =>{   \r\n  if (props.items)\r\n  return (\r\n  <div className=\"layout-action\"> \r\n    <Tooltip target=\".layout-action .p-speeddial-semi-circle.p-speeddial-direction-left .p-speeddial-action\" position=\"left\"  />   \r\n    <SpeedDial model={props.items} radius={80}  direction=\"left\" type=\"semi-circle\" />\r\n  </div>)\r\n  else return<></> \r\n}","import React, { FC, useContext, useEffect, useState } from 'react'\r\nimport '../../styles/layout.css'\r\nimport { Context } from '../..'\r\nimport FooterLayout from './FooterLayout'\r\nimport SideBarLayout from './SideBarLayout'\r\nimport { TopBarLayout } from './TopBarLayout'\r\nimport { classNames } from 'primereact/utils'\r\nimport { observer } from 'mobx-react-lite'\r\nimport RightSideBarLayout  from './RightSideBarLayout'\r\nimport { IUserInfo } from '../../models/responses/IUserInfo'\r\nimport { ActionButtonLayout, IActionItem } from './ActionButtonLayout'\r\nimport { ProgressSpinner } from 'primereact/progressspinner'\r\nimport { addLocale } from 'primereact/api'\r\ntype MainLayoutProps = {\r\n  title: string,\r\n  url:string, \r\n  content:React.ReactElement\r\n  actionItems?: IActionItem[]\r\n }\r\n\r\nconst MainLayout: FC<MainLayoutProps>=(props: MainLayoutProps) => { \r\n  const {layoutStore, userStore} = useContext(Context)\r\n  const rightSideBarActive = layoutStore.rightSideBarActive()\r\n  const layoutStaticInactive = layoutStore.layoutStaticInactive()\r\n  const profileMenuActive = layoutStore.profileMenuActive()\r\n  const notificationsMenuActive = layoutStore.notificationsMenuActive()  \r\n  const onClickOutside = ()=>{\r\n    if (rightSideBarActive) layoutStore.setRightSideBarActive(false)\r\n    else if (profileMenuActive) layoutStore.setProfileMenuActive(false)\r\n    else if (notificationsMenuActive) layoutStore.setNotificationsMenuActive(false)\r\n  } \r\n  const wrapperClass = classNames(\"layout-wrapper layout-static p-ripple layout-sidebar-indigo\",{\"layout-static-inactive\": layoutStaticInactive}, {\"layout-mobile-active\": layoutStore.tabletOrMobile()})\r\n  const [userInfo, setUserInfo] = useState<IUserInfo | null>(null)   \r\n  const userId = userStore.user().id   \r\n  useEffect(()=>{ \r\n     if (userId!== undefined && userInfo === null) \r\n     setUserInfo(userStore.userInfo)     \r\n    },[userId, userInfo, userStore.userInfo]\r\n  )\r\n  const content =  layoutStore.isLoading ? <ProgressSpinner/> : props.content \r\n  addLocale('ru', {\r\n    startsWith: 'Начинается с',\r\n    contains: 'Содержит',\r\n    notContains: 'Не содержит',\r\n    endsWith: 'Оканчивается на',\r\n    equals: 'Равно',\r\n    notEquals: 'Не равно',\r\n    noFilter: 'Любое',\r\n    lt: 'Меньше чем',\r\n    lte: 'Меньше или равно',\r\n    gt: 'Больше',\r\n    gte: 'Больше либо равно',\r\n    dateIs: 'Равна',\r\n    dateIsNot: 'Не равна',\r\n    dateBefore: 'Ранее чем',\r\n    dateAfter: 'Позже чем',\r\n    custom: 'Свое',\r\n    clear: 'Очистить',\r\n    apply: 'Применить',\r\n    matchAll: 'условия (И)',\r\n    matchAny: 'условия (ИЛИ)' ,\r\n    addRule: '+ условие',\r\n    removeRule: ' - условие',\r\n    accept: 'ДА',\r\n    reject: 'НЕТ',\r\n    closeText: 'закрыть',\r\n    prevText: 'назад',\r\n    nextText: 'вперед',\r\n    currentText: 'текущий',\r\n    monthNames: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь',\r\n        'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'],\r\n    monthNamesShort: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн',\r\n        'Июл', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек'],\r\n    dayNames: ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'],\r\n    dayNamesShort: ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'],\r\n    dayNamesMin: ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'],\r\n    weekHeader: 'Нед',\r\n    firstDay: 1,\r\n    isRTL: false,\r\n    showMonthAfterYear: false,\r\n    yearSuffix: '',\r\n    month: 'Мес',\r\n    week: 'Неделя',\r\n    day: 'День',\r\n    timeOnlyTitle: 'Выбор времени',\r\n    timeText: 'Время',\r\n    hourText: 'Часы',\r\n    minuteText: 'Минуты',\r\n    secondText: 'Секунды',\r\n    allDayText: 'Полный день',      \r\n  })\r\n  return (\r\n  <div className={wrapperClass} data-theme='light'>    \r\n    <div className='layout-content-wrapper' onClick={()=>onClickOutside()}>  \r\n      <TopBarLayout  title = {props.title}  userInfo={userInfo} />        \r\n      <div className='layout-content'>{content}\r\n        <ActionButtonLayout items={props.actionItems}/>\r\n      </div>\r\n      <FooterLayout userInfo={userInfo} />\r\n    </div>\r\n    <SideBarLayout  activeUrl={props.url} /> \r\n    <RightSideBarLayout />     \r\n    <div className=\"layout-search\"></div>        \r\n    <div className='layout-mask modal-in' onClick={()=>{layoutStore.setTabletOrMobile(false)}}></div>\r\n  </div>  \r\n  ) \r\n}\r\nexport default observer(MainLayout)\r\n\r\n","//\"Вид медицинского свидетельства о смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.19 Версия: 1.1\r\nexport const CERT_TYPES = [\r\n  { code: 1, name: \"окончательное\", s_name: \"ОКН\" },\r\n  { code: 2, name: \"предварительное\", s_name: \"ПРВ\" },\r\n  { code: 3, name: \"взамен предварительного\", s_name: \"ВП\" },\r\n  { code: 4, name: \"взамен окончательного\", s_name: \"ВO\" },\r\n]\r\n","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext } from 'react'\r\nimport { Context } from '../..'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { Divider } from 'primereact/divider'\r\nimport { Card } from 'primereact/card'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport { CERT_TYPES } from '../../NSI/1.2.643.5.1.13.13.99.2.19'\r\nimport { DATE_FORMAT } from '../../utils/consts'\r\n const Section0: FC = () => {\r\n   const { certificateStore } = useContext(Context)\r\n   const cert =  certificateStore.cert  \r\n   const header = () => {\r\n      return <span>Сведения о документе</span>\r\n    }\r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header} key={certificateStore.cert.id}>\r\n        <div className=\"p-fluid p-formgrid p-grid\">\r\n          <div className=\"p-field p-col-6 p-md-2\">\r\n            <label htmlFor=\"series\">Серия</label>\r\n            <InputText id=\"series\" value={cert.series} type=\"text\" \r\n              placeholder='Заполняется автоматически' disabled/>\r\n          </div>\r\n          <div className=\"p-field p-col-6 p-md-4\">\r\n            <label htmlFor=\"number\">Номер</label>\r\n            <InputText id=\"number\" value={cert.number} disabled type=\"text\" placeholder='Заполняется автоматически'/>\r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">                    \r\n            <label htmlFor=\"icon\">Дата</label>\r\n            <Calendar id=\"icon\"  dateFormat=\"dd.mm.yy\" value={cert.issueDate} disabled />\r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">\r\n            <label htmlFor=\"cert_type\">Вид свидетельства</label>\r\n            <Dropdown inputId=\"cert_type\"  placeholder=\"Выбрать\" autoFocus \r\n              options={cert.certType ? ([3, 4].includes(cert.certType) ? CERT_TYPES.filter((item)=>[4,3,1].includes(item.code)) : CERT_TYPES) : CERT_TYPES.filter((item)=>[1,2].includes(item.code)) } optionLabel=\"name\"\r\n              value={CERT_TYPES.find(el=>el.code===cert.certType)} onChange={(e) =>certificateStore.cert.certType = e.value.code} disabled={cert.id > -1} />\r\n          </div>\r\n          \r\n        </div>\r\n        <Divider/>\r\n        <div className=\"p-grid p-mt-2\">              \r\n          <div className=\"p-col-6 p-d-flex p-flex-column p-jc-left p-ai-center p-flex-md-row p-flex-wrap\">\r\n            <div className=\"overview-number p-mr-1 p-mb-1\" style={{padding:'0.1rem'}}>РАНЕЕ ВЫДАННОГО:</div>\r\n             <div className=\"overview-subtext p-mr-1 p-mb-1\" style={{fontWeight:600,padding:'0.2rem'}}>{!!cert.numberPrev ? `${cert.seriesPrev} ${cert.numberPrev} от ${cert.effTimePrev?.toLocaleString('ru', DATE_FORMAT)}` : 'НЕТ'}</div>\r\n          </div>\r\n          <div className=\"p-col-6 p-d-flex p-flex-column p-jc-left p-ai-center p-flex-md-row p-flex-wrap\"\r\n            style={{borderLeft:'1px #dee2e6', borderLeftStyle:'solid'}}>\r\n            <div className=\"overview-number p-mr-1 p-mb-1\" style={{padding:'0.1rem'}}>Статус:</div>\r\n            <div className=\"overview-subtext p-mr-1 p-mb-1\"style={{fontWeight:600,background: cert.latestOne ? 'rgb(211 47 47 / 22%)': '#c8e6c9', color: cert.latestOne ? 'rgb(211 47 47)' : '#256029', padding:'0.2rem'}}>{cert.latestOne ? 'ЗАМЕНЕНО' : 'АКТУАЛЬНОЕ'}</div>\r\n          </div>              \r\n        </div>\r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section0) ","export const HOME_REGION_CODE = \"28\"\r\nexport const DEFAULT_CERT_SUGGESTIONS = [\r\n  { section: \"0\", code: \"0\", suggestion: \"Необходимо выбрать тип свидетельства\", done: false },\r\n  {\r\n    section: \"1\",\r\n    code: \"п.1\",\r\n    suggestion: \"Поля ФИО должны быть заполнены, если умерший идентифицирован\",\r\n    done: false,\r\n  },\r\n  { section: \"1\", code: \"п.2\", suggestion: \"Указание пола умершего является обязательным для заполнения\", done: false },\r\n  {\r\n    section: \"1\",\r\n    code: \"п.3\",\r\n    suggestion: \"Указание даты рождения или причины ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"1\",\r\n    code: \"п.7\",\r\n    suggestion: \"Указание даты смерти или причины ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.1\",\r\n    suggestion: \"Указание серии ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.2\",\r\n    suggestion: \"Указание номера ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.3\",\r\n    suggestion: \"Указание органа выдавшего ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.4\",\r\n    suggestion: \"Указание даты выдачи ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.4.5\",\r\n    suggestion: \"Указание кода подразделения ДУЛ умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.5\",\r\n    suggestion: \"Указание SNILS умершего или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"2\",\r\n    code: \"п.6\",\r\n    suggestion: \"Указание полиса ОМС или причины его отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"3\",\r\n    code: \"п.8\",\r\n    suggestion: \"Место жительства или причина его отсутствия - обязательны для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"3\",\r\n    code: \"п.9\",\r\n    suggestion: \"Вид места жительства или причина его отсутствия - обязательны для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"3\",\r\n    code: \"п.10\",\r\n    suggestion: \"Вид места смерти или причина его отсутствия - обязательны для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"3\",\r\n    code: \"п.11\",\r\n    suggestion: \"Вид места смерти или причина его отсутствия - обязательны для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.12\",\r\n    suggestion: \"Выбор места наступления смерти - обязателен для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.13\",\r\n    suggestion: \"Выбор срока береммености для детей от 168 ч до 1месяца  - обязателен для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.1\",\r\n    suggestion: \"Внесение весса для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.2\",\r\n    suggestion:\r\n      \"Внесение порядкового номера беременности матери для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.3\",\r\n    suggestion: \"Внесение ФИО матери для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.4\",\r\n    suggestion: \"Внесение даты рождения матери для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.14.5\",\r\n    suggestion: \"Внесение адреса жительства матери для детей от 168 ч до года  - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.15\",\r\n    suggestion: \"Указание семейного положения - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.16\",\r\n    suggestion: \"Указание образования - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"5\",\r\n    code: \"п.17\",\r\n    suggestion: \"Указание занятости - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"6\",\r\n    code: \"п.18\",\r\n    suggestion: \"Указание рода причины смерти - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"6\",\r\n    code: \"п.19\",\r\n    suggestion:\r\n      \"Указание указать дату, время и обстоятельства травмы (отравления), в случае смерти не от заболевания - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"6\",\r\n    code: \"п.20\",\r\n    suggestion: \"Указание типа медицинского работника, установившего причины смерти - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"6\",\r\n    code: \"п.21\",\r\n    suggestion: \"Указание основание установления причины смерти - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.a)\",\r\n    suggestion: \"Указание причины а) - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.a)т\",\r\n    suggestion: \"Период времени между началом патол. состояния и смертью в причине а) - обязателен для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.б)\",\r\n    suggestion: \"Указание причины б) или ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.б)т\",\r\n    suggestion:\r\n      \"Период времени между началом патол. состояния и смертью в причине б) или его отсутствие - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.в)\",\r\n    suggestion: \"Указание причины в) или ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.в)т\",\r\n    suggestion:\r\n      \"Период времени между началом патол. состояния и смертью в причине в) или его отсутствие - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.г)\",\r\n    suggestion: \"Указание причины г) или ее отсутствия - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"7\",\r\n    code: \"п.22.г)т\",\r\n    suggestion:\r\n      \"Период времени между началом патол. состояния и смертью в причине г) или его отсутствие - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"8\",\r\n    code: \"п.22.II.1\",\r\n    suggestion: \"Указание кода прочего состояния или причины его отсутствия - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"8\",\r\n    code: \"п.22.II.2\",\r\n    suggestion:\r\n      \"Указание периода времени между началом патол. состояния и смертью или причины его отсутствия - обязательно для заполнения\",\r\n    done: true,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.23\",\r\n    suggestion: \"Указание периода наступления смерти в случае ДТП  - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.24\",\r\n    suggestion: \"Указание срока в случае наступления смерти при беременности  - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.25.1\",\r\n    suggestion:\r\n      \"Указание данных о враче (судебно-медицинском эксперте, фельдшере, акушерке), заполнившем свидетельство - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.25.2\",\r\n    suggestion: \"Указание данных о руководителе медицинской организации - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"9\",\r\n    code: \"п.26\",\r\n    suggestion:\r\n      \"Указание данных об ответственном за проверку медицинских свидетельств лице - обязательно для заполнения\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"10\",\r\n    code: \"*A\",\r\n    suggestion: \"Указание ФИО получателя - обязательно для печати\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"10\",\r\n    code: \"*B\",\r\n    suggestion: \"Указание даты выдачи - обязательно для печати\",\r\n    done: false,\r\n  },\r\n  {\r\n    section: \"10\",\r\n    code: \"*С\",\r\n    suggestion: \"Указание СНИЛС или иного документа удостоверения личности - обязательно для печати\",\r\n    done: false,\r\n  },\r\n]\r\nexport const CERT_TYPE_SUG = 0\r\nexport const PERSON_NAME_SUG = 1\r\nexport const PATIENT_GENDER_SUG = 2\r\nexport const PATIENT_BIRTHDAY_SUG = 3\r\nexport const CERT_DEATH_THIME_SUG = 4\r\nexport const IDSERIES_SUG = 5\r\nexport const IDNUMBER_SUG = 6\r\nexport const IORGNAME_SUG = 7\r\nexport const IORGDATE_SUG = 8\r\nexport const IORGCODE_SUG = 9\r\nexport const SNILS_SUG = 10\r\nexport const OMS_SUG = 11\r\nexport const LIFE_AREA_SUG = 13\r\nexport const LIFE_PLACE_SUG = 12\r\nexport const DEATH_PLACE_SUG = 14\r\nexport const DEATH_AREA_SUG = 15\r\nexport const DEATH_PLACE_TYPE_SUG = 16\r\nexport const TERMS_PREGNANCY_SUG = 17\r\nexport const CHILD_WEIGHT_SUG = 18\r\nexport const NUMBER_PREGNANCY_SUG = 19\r\nexport const MOTHER_FIO_SUG = 20\r\nexport const MOTHER_BIRTHDAY_SUG = 21\r\nexport const MOTHER_ADDRESS_SUG = 22\r\nexport const MARITAL_STATUS_SUG = 23\r\nexport const EDUCATION_LEVEL_SUG = 24\r\nexport const SOCIAL_STATUS_SUG = 25\r\nexport const DEATH_KINDS_SUG = 26\r\nexport const KIND_DEATH_REASON_SUG = 27\r\nexport const EST_MEDIC_SUG = 28\r\nexport const BASIS_DERMINING_SUG = 29\r\nexport const REASON_A_SUG = 30\r\nexport const REASON_A_TIME_SUG = 31\r\nexport const REASON_B_SUG = 32\r\nexport const REASON_B_TIME_SUG = 33\r\nexport const REASON_C_SUG = 34\r\nexport const REASON_C_TIME_SUG = 35\r\nexport const REASON_D_SUG = 36\r\nexport const REASON_D_TIME_SUG = 37\r\nexport const EXT_REASON_SUG = 38\r\nexport const EXT_REASON_TIME_SUG = 39\r\nexport const TRAFFFIC_ACCIDENT_SUG = 40\r\nexport const PREGNANCY_CONNECTION_SUG = 41\r\nexport const AUTHOR_SUG = 42\r\nexport const AUTHENTICATOR_SUG = 44\r\nexport const LEGAL_AUTHENTICATOR_SUG = 43\r\nexport const PARTIPICIPANT_FIO_SUG = 45\r\nexport const PARTIPICIPANT_DATE_SUG = 46\r\nexport const PARTIPICIPANT_IDENTITY_SUG = 47\r\n\r\nexport const changeSuggestion = (code: string, suggestions: any[], done: boolean) => {\r\n  const suggestion = suggestions.find((item) => item.code === code)\r\n  if (suggestion) suggestion.done = done\r\n}\r\n\r\nexport const NULL_FLAVORS = [\r\n  { code: \"NI\", name: \"Нет информации\" },\r\n  { code: \"INV\", name: \"Недопустимое значение\" },\r\n  { code: \"DER\", name: \"Извлекаемое значение\" },\r\n  { code: \"OTH\", name: \"Другое\" },\r\n  { code: \"NINF\", name: \"Минус бесконечность\" },\r\n  { code: \"PINF\", name: \"Плюс бесконечность\" },\r\n  { code: \"UNC\", name: \"Кодирование не проводилось\" },\r\n  { code: \"MSK\", name: \"Скрыто\" },\r\n  { code: \"NA\", name: \"Неприменимо\" },\r\n  { code: \"UNK\", name: \"Неизвестно\" },\r\n  { code: \"ASKU\", name: \"Запрошено, но неизвестно\" },\r\n  { code: \"NAV\", name: \"Временно недоступно\" },\r\n  { code: \"NASK\", name: \"Не запрашивалось\" },\r\n  { code: \"QS\", name: \"Достаточное количество\" },\r\n  { code: \"TRC\", name: \"Трудноразличимо\" },\r\n]\r\nexport type NULL_FLAVOR_CODES =\r\n  | \"NI\"\r\n  | \"INV\"\r\n  | \"DER\"\r\n  | \"OTH\"\r\n  | \"NINF\"\r\n  | \"PINF\"\r\n  | \"UNC\"\r\n  | \"MSK\"\r\n  | \"NA\"\r\n  | \"UNK\"\r\n  | \"ASKU\"\r\n  | \"NAV\"\r\n  | \"NASK\"\r\n  | \"QS\"\r\n  | \"TRC\"\r\n\r\nexport type INullFlavorIdx = {\r\n  [index in NULL_FLAVOR_CODES]: number\r\n}\r\nexport const NULL_FLAVOR_IDX: INullFlavorIdx = {\r\n  NI: 0,\r\n  INV: 1,\r\n  DER: 2,\r\n  OTH: 3,\r\n  NINF: 4,\r\n  PINF: 5,\r\n  UNC: 6,\r\n  MSK: 7,\r\n  NA: 8,\r\n  UNK: 9,\r\n  ASKU: 10,\r\n  NAV: 11,\r\n  NASK: 12,\r\n  QS: 13,\r\n  TRC: 14,\r\n}\r\nexport const ASKU = 10\r\nexport const NA = 8\r\nexport const UNK = 9\r\n\r\nexport const MALE = 1\r\nexport const FEMALE = 2\r\nexport const NOGENDER = 4\r\n\r\nexport const URBAN_AREA_TYPE = 1\r\nexport const VILAGE_AREA_TYPE = 2\r\nexport interface ID_CARD_TYPE {\r\n  code: number\r\n  name: string\r\n  s_mask?: string\r\n  n_mask?: string\r\n  c_mask?: string\r\n}\r\nexport const ID_CARD_TYPES: Array<ID_CARD_TYPE> = [\r\n  { code: 1, name: \"Паспорт гр. РФ\", s_mask: \"99 99\", n_mask: \"999999\", c_mask: \"999-999\" },\r\n  { code: 2, name: \"Заграничный паспорт гр. РФ\", s_mask: \"99\", n_mask: \"9999999\", c_mask: \"ФМС 99999\" },\r\n  { code: 3, name: \"Служебный паспорт\" },\r\n  { code: 4, name: \"Врем. уд. личности(форма № 2П)\" },\r\n  { code: 6, name: \"Свидетельство о рождении\", n_mask: \"999999\" },\r\n  { code: 8, name: \"Удостоверение личности военнослужащего\" },\r\n  { code: 9, name: \"Военный билет\" },\r\n  { code: 10, name: \"Паспорт иностранного гражданина\" },\r\n  { code: 11, name: \"Вид на жительство\" },\r\n  { code: 17, name: \"Разрешение на временное проживание в РФ\" },\r\n  { code: 25, name: \"Справка об освобождении из места лишения свободы\" },\r\n  { code: 36, name: \"Водительское удостоверение\" },\r\n  { code: 38, name: \"Охотничий билет\" },\r\n]\r\n\r\nexport const PASSPORT_RF = 0\r\nexport const REGION = { code: \"28\", name: \"Амурская область\" }\r\nexport const REGION_OKATO = \"10\"\r\nexport const DEFAULT_ERROR_TOAST = {\r\n  severity: \"error\",\r\n  summary: \"Сбой\",\r\n  detail: \"Что-то пошло не так, по-пробуйте позднее\",\r\n  life: 3000,\r\n  baseZIndex: 999,\r\n}\r\n","import React, {FC} from 'react'\r\nimport { IReference } from '../models/IReference'\r\nimport { Checkbox, CheckboxChangeParams } from \"primereact/checkbox\"\r\nimport { Dropdown, DropdownChangeParams } from \"primereact/dropdown\"\r\nimport { useState } from 'react'\r\nimport { NULL_FLAVORS } from '../utils/defaults'\r\nimport { INullFlavorR } from '../models/INullFlavor'\r\nimport { useEffect } from 'react'\r\n\r\ntype NullFlavorWrapperProps = {\r\n  paraNum?: boolean,  \r\n  label: React.ReactElement,  \r\n  checked?: boolean, \r\n  setCheck?: ((e: CheckboxChangeParams, nullFlavors?: INullFlavorR[]) => void), \r\n  disabled?: boolean,\r\n  field: React.ReactElement,\r\n  field_name?: string,\r\n  options: IReference[],\r\n  nullFlavors?: INullFlavorR[], \r\n  value?: number,  \r\n  onChange?: ((e: IReference, nullFlavors: INullFlavorR[] | undefined) => void),\r\n  lincked?: boolean\r\n}\r\n\r\nconst NullFlavorWrapper: FC<NullFlavorWrapperProps>=(props: NullFlavorWrapperProps) => {   \r\n  const [value, setValue] = useState<IReference | null>(props.value? NULL_FLAVORS[props.value] : null)\r\n  const [checked, setChecked] = useState<boolean>(props.checked || false) \r\n  const fieldStyle = props.paraNum ? {marginLeft: '-0.76rem'} : {}\r\n  const ddStyle = {width: '200px'}\r\n  const nullFlavors = (props.nullFlavors && props.nullFlavors.length>0 && props.field_name ) ? props.nullFlavors.filter((element: INullFlavorR)=>element.parent_attr!==props.field_name) : []\r\n  const nullFlavor = (props.nullFlavors && props.nullFlavors.length>0 && props.field_name ) ? props.nullFlavors.find((element: INullFlavorR)=>element.parent_attr===props.field_name) : false\r\n  useEffect(()=>{   \r\n    if (props.nullFlavors) {\r\n      const nullFlavor = props.nullFlavors.find(item=>item.parent_attr===props.field_name && !item._destroy)\r\n      if (nullFlavor) {\r\n        setValue(NULL_FLAVORS[nullFlavor.code])\r\n        if (props.checked!==true) setChecked(false)\r\n      } else if (props.checked!==false) setChecked(true)\r\n    }    \r\n  },[props.nullFlavors, props.field_name, props.checked])   \r\n  \r\n  const checkbox  = !props.lincked && <Checkbox        \r\n        style={{ marginLeft: \"0.4rem\" }}\r\n        checked={checked}\r\n        disabled={props.disabled} \r\n        onChange={(e)=>{\r\n            setChecked(e.checked)\r\n            if (props.nullFlavors) {\r\n              if (props.setCheck && e.checked ) { \r\n                if (nullFlavor && nullFlavor.id) {\r\n                  props.nullFlavors.forEach(el=>{\r\n                    if (el.parent_attr===props.field_name) el._destroy=\"1\"\r\n                  })\r\n                  props.setCheck(e)\r\n                } else  props.setCheck(e, nullFlavors)\r\n              } else if (props.setCheck && props.value && props.field_name) { \r\n                let _nullFlavors = nullFlavors               \r\n                _nullFlavors.push({parent_attr: props.field_name, code: props.value })                                 \r\n                props.setCheck(e, _nullFlavors)                            \r\n              } else if (props.setCheck) props.setCheck(e)             \r\n            } else if (props.setCheck) props.setCheck(e)            \r\n          }\r\n        }        \r\n      />  \r\n       \r\n  const style =  props.lincked ? {marginTop:'0.4rem'} : {}  \r\n  const checkboxLabel = props.lincked && !props.checked ? (<></>) : (\r\n    <div className='p-checkbox-right p-field-checkbox'\r\n     key={`nf_${props.checked}_${props.paraNum}`} style={style}>            \r\n      {props.label}     \r\n      {checkbox}\r\n     </div>\r\n  )\r\n  const dropdown = !props.lincked && <Dropdown       \r\n      id={\"p\" + props.field_name}       \r\n      key={`dd_${props.field_name}_${props.checked}`}\r\n      style={fieldStyle}\r\n      value={value}      \r\n      options={props.options}\r\n      onChange={(e: DropdownChangeParams)=>{   \r\n        setValue(e.value)                \r\n        if (props.onChange) { // for not in MobX nullflavors\r\n          const nullFlavor = {parent_attr: props.field_name, code: NULL_FLAVORS.findIndex((element)=>element.code===e.value.code)}\r\n          let _nullFlavors = nullFlavors\r\n          _nullFlavors.push(nullFlavor as INullFlavorR)\r\n          props.onChange(e.value, _nullFlavors)\r\n        } else if (!!props.nullFlavors) { //standart case nullFlavor\r\n            const idx = props.nullFlavors.findIndex(item=>item.parent_attr===props.field_name)\r\n            if (idx > -1) props.nullFlavors[idx].code = NULL_FLAVORS.findIndex((element)=>element.code===e.value.code)\r\n            else throw new Error(`Error change nullFlavor: invalid field name:  ${props.field_name}`)            \r\n        }                                    \r\n      }}\r\n      optionLabel='name'      \r\n      placeholder='Причина отсутствия'\r\n    />    \r\n  const canNullFlavor = checked ? (\r\n    <div style={fieldStyle}>{props.field}</div>\r\n  ) : (\r\n    <div style={ddStyle}>{dropdown}</div>\r\n  )  \r\n  return (<>{checkboxLabel}{canNullFlavor}</>)\r\n}\r\nexport default NullFlavorWrapper","import { NULL_FLAVOR_CODES, UNK } from \"../utils/defaults\"\r\nimport { IDestroyble } from \"./IDestroyble\"\r\nexport interface INullFlavor {\r\n  id?: number\r\n  parent_guid?: string\r\n  parent_attr: string\r\n  code: NULL_FLAVOR_CODES\r\n}\r\n\r\nexport interface INullFlavorR extends IDestroyble {\r\n  id?: number\r\n  parent_guid?: string\r\n  parent_attr: string\r\n  code: number\r\n}\r\n\r\n//получаем чистый NullFlavor без метки удаления\r\nexport const getCleanNullFlavor = (old: INullFlavorR): INullFlavorR | undefined => {\r\n  if (old === undefined) return\r\n  let _new = { code: old.code, parent_attr: old.parent_attr } as INullFlavorR\r\n  if (old.id) _new.id = old.id\r\n  if (old.parent_guid) _new.parent_guid = old.parent_guid\r\n  return _new\r\n}\r\n\r\n//генерируем заполнитель UNK автоматически,\r\n//проверяя значение field\r\n//и массив заполнителей до внесения изменений: original\r\nexport const checkFieldNullFlavor = (\r\n  key: string,\r\n  field: any | null | undefined,\r\n  nullFlavors: INullFlavorR[],\r\n  code = UNK\r\n) => {\r\n  let idx = nullFlavors.findIndex((item) => item.parent_attr === key)\r\n  if (field && idx !== -1 && nullFlavors[idx].id) {\r\n    do {\r\n      nullFlavors[idx]._destroy = \"1\"\r\n      idx = nullFlavors.findIndex((item) => item.parent_attr === key && !item._destroy && item.id)\r\n    } while (idx !== -1)\r\n  } else if (field && idx !== -1) nullFlavors.splice(idx, 1)\r\n  else if (!field && idx !== -1 && nullFlavors[idx]._destroy === \"1\") {\r\n    nullFlavors[idx] = { ...getCleanNullFlavor(nullFlavors[idx]) } as INullFlavorR\r\n  } else if (!field && idx === -1) nullFlavors.push({ code: code, parent_attr: key })\r\n}\r\n\r\n//генерируем заполнители UNK автоматически,\r\n//проверяя карту fields<имя поля, значение>\r\n//и массив заполнителей до внесения изменений: original\r\nexport const createNullFlavors = (fields: Map<string, any | null | undefined>, original: INullFlavorR[]) => {\r\n  fields.forEach((value, key) => {\r\n    checkFieldNullFlavor(key, value, original)\r\n  })\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport IIdentity from \"../IIdentity\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport IIdentityR from \"../requests/IIdentityR\"\r\n\r\nexport default class Identity implements ISerializable {\r\n  private _id?: string\r\n  private _identityCardType: number\r\n  private _series?: string\r\n  private _number: string | undefined\r\n  private _issueOrgName: string | undefined\r\n  private _issueOrgCode?: string | undefined\r\n  private _issueOrgDate: Date | undefined\r\n  private _parentGUID: string\r\n  private _nullFlavors: INullFlavorR[]\r\n  constructor(props: IIdentity) {\r\n    this._id = props.id\r\n    this._identityCardType = props.identity_card_type_id\r\n    if (props.series) this._series = props.series\r\n    this._number = props.number\r\n    this._issueOrgName = props.issueOrgName\r\n    if (props.issueOrgCode) this._issueOrgCode = props.issueOrgCode\r\n    if (props.issueDate) this._issueOrgDate = new Date(props.issueDate)\r\n    this._parentGUID = props.parentGUID\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes(): IIdentityR {\r\n    let _identity = {} as IIdentityR\r\n    if (this._id) _identity.id = this._id\r\n    if (this._identityCardType) _identity.identity_card_type_id = this._identityCardType\r\n    if (this._issueOrgCode) _identity.issueOrgCode = this._issueOrgCode\r\n    if (this._issueOrgDate) _identity.issueDate = this._issueOrgDate.toDateString()\r\n    if (this._issueOrgName) _identity.issueOrgName = this._issueOrgName\r\n    if (this._nullFlavors.length > 0) _identity.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._number) _identity.number = this._number\r\n    if (this._parentGUID) _identity.parentGUID = this._parentGUID\r\n    if (this._series) _identity.series = this._series\r\n    return _identity\r\n  }\r\n  get identityCardType() {\r\n    return this._identityCardType\r\n  }\r\n  set identityCardType(ct: number) {\r\n    this._identityCardType = ct\r\n  }\r\n  get series() {\r\n    return this._series ? this._series : \"\"\r\n  }\r\n  set series(series: string | undefined) {\r\n    this._series = series\r\n  }\r\n  get number() {\r\n    return this._number\r\n  }\r\n  set number(number: string | undefined) {\r\n    this._number = number\r\n  }\r\n  get issueOrgName() {\r\n    return this._issueOrgName\r\n  }\r\n  set issueOrgName(issueOrgName: string | undefined) {\r\n    this._issueOrgName = issueOrgName\r\n  }\r\n  get issueOrgDate() {\r\n    return this._issueOrgDate\r\n  }\r\n  set issueOrgDate(issueOrgDate: Date | undefined) {\r\n    this._issueOrgDate = issueOrgDate\r\n  }\r\n  get issueOrgCode() {\r\n    return this._issueOrgCode ? this._issueOrgCode : \"\"\r\n  }\r\n  set issueOrgCode(issueOrgCode: string | undefined) {\r\n    this._issueOrgCode = issueOrgCode\r\n  }\r\n  get parentGUID() {\r\n    return this._parentGUID\r\n  }\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IContact } from \"../IContact\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IPerson } from \"../IPerson\"\r\nimport { IPersonName } from \"../IPersonName\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { IPersonR } from \"../requests/IPersonR\"\r\n\r\nexport default class Person implements ISerializable {\r\n  private _id?: string\r\n  private _personName?: IPersonName\r\n  private _SNILS?: string | undefined\r\n  private _nullFlavors: INullFlavorR[]\r\n  private _address?: IAddressR | undefined\r\n  private _contacts: IContact[]\r\n  private _oldOne?: IPerson\r\n\r\n  constructor(props = {} as IPerson) {\r\n    this._oldOne = props\r\n    this._personName = props.person_name\r\n    this._SNILS = props.SNILS\r\n    this._id = props.id\r\n    this._address = {\r\n      ...props.address,\r\n      null_flavors_attributes:\r\n        props.address?.null_flavors?.map((item) => {\r\n          return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n        }) || [],\r\n    } as IAddressR\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    this._contacts = props.contacts || []\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n\r\n  getAttributes(): IPersonR {\r\n    let _person = {} as IPersonR\r\n    if (this._id) _person.id = this._id\r\n    if (this._SNILS) _person.SNILS = this._SNILS\r\n    if (this._address && !!this._address.state && !!this._address.streetAddressLine)\r\n      _person.address_attributes = { ...this._address }\r\n    else if (this._oldOne && this._oldOne.address?.id)\r\n      _person.address_attributes = { id: this._oldOne.address.id, _destroy: \"1\" } as IAddressR\r\n    if (this._contacts.length > 0) _person.contacts_attributes = [...this._contacts]\r\n    if (this._nullFlavors.length > 0) _person.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._personName) _person.person_name_attributes = { ...this._personName }\r\n    return _person\r\n  }\r\n\r\n  get fio() {\r\n    return this._personName\r\n  }\r\n\r\n  set fio(fio: IPersonName | undefined) {\r\n    this._personName = fio\r\n  }\r\n\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  get SNILS() {\r\n    return this._SNILS\r\n  }\r\n\r\n  set SNILS(snils: string | undefined) {\r\n    this._SNILS = snils\r\n  }\r\n\r\n  get id() {\r\n    return this._id\r\n  }\r\n  get address(): IAddressR | undefined {\r\n    return this._address\r\n  }\r\n  set address(value: IAddressR | undefined) {\r\n    this._address = value\r\n  }\r\n  get contacts(): IContact[] {\r\n    return this._contacts\r\n  }\r\n  set contacts(value: IContact[]) {\r\n    this._contacts = value\r\n  }\r\n\r\n  fullName(): string {\r\n    const fio = this._personName\r\n    return !!fio ? `${fio.family} ${fio.given_1} ${!!fio.given_2 ? fio.given_2 : \"\"}` : \"\"\r\n  }\r\n}\r\n","export interface IPersonName {\r\n  id?: number\r\n  family: string // фамилия\r\n  given_1: string // имя\r\n  given_2?: string // отчество\r\n}\r\nexport const getOneLinePersonName = (person_name: IPersonName | undefined | null): string => {\r\n  if (!person_name) return \"\"\r\n  else return `${person_name.family} ${person_name.given_1} ${person_name.given_2 ? person_name.given_2 : \"\"}`.trim()\r\n}\r\n","import { InputText } from 'primereact/inputtext'\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC, useState } from 'react'\r\nimport { getOneLinePersonName, IPersonName } from '../../models/IPersonName'\r\n\r\ntype PersonNameProps = {\r\n  personName?: IPersonName\r\n  submitted?:boolean\r\n  onChange:(personName: IPersonName)=>void\r\n}\r\nexport const PersonName:FC<PersonNameProps> = (props:PersonNameProps) =>{\r\n  const [fio, setFio] = useState(getOneLinePersonName(props.personName)) \r\n  const isErrorMessage = props.submitted && (!props.personName || !props.personName.family || !props.personName.given_1)\r\n  return (<>\r\n    <InputText  id=\"fio\" type=\"text\" \r\n      value={fio}                    \r\n      onChange={(e)=>{\r\n        setFio(e.target.value)               \r\n        const values = e.target.value.trim().split(\" \")\r\n        let _result = {} as IPersonName\r\n        if (props.personName?.id) _result.id = props.personName?.id\r\n        if (values && values.length > 1) {\r\n          _result = {..._result, family: values[0], given_1: values[1]} as IPersonName\r\n          if (values[2]) _result.given_2 = values[2]                      \r\n        } else  _result = {..._result, family: '', given_1: ''} as IPersonName\r\n        props.onChange(_result)                                      \r\n      }}\r\n      className={classNames({ 'p-invalid': isErrorMessage})}\r\n    />\r\n    {isErrorMessage && <small className=\"p-error\">Фамилия, имя обязательны</small>}\r\n  </>)\r\n} ","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { Checkbox, CheckboxChangeParams } from 'primereact/checkbox'\r\nimport { RadioButton } from 'primereact/radiobutton'\r\nimport '../../styles/components/RadioButton.css'\r\nimport '../../styles/components/Calendar.css'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { ASKU, FEMALE, ID_CARD_TYPES, MALE, NOGENDER, NULL_FLAVORS, PASSPORT_RF, UNK } from '../../utils/defaults'\r\nimport { IReference } from '../../models/IReference'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { checkFieldNullFlavor, INullFlavorR } from '../../models/INullFlavor'\r\nimport { IPersonName } from '../../models/IPersonName'\r\nimport IIdentity from '../../models/IIdentity'\r\nimport Identity from '../../models/FormsData/Identity'\r\nimport Person from '../../models/FormsData/Person'\r\nimport { PersonName } from '../inputs/PersonName'\r\n\r\n\r\n const Section1: FC = () => {   \r\n  const { certificateStore, suggestionsStore, layoutStore } = useContext(Context) \r\n  const certificate = certificateStore.cert   \r\n  const patient = certificate.patient\r\n  const person =  patient.person     \r\n  const [yearBTChecked, setYearBTChecked] = useState<boolean>(!!patient.birth_year)   \r\n  const [yearDTChecked, setYearDTChecked] = useState<boolean>(!!certificate.deathYear) \r\n  \r\n  const header = () => {\r\n      return <span>Данные умершего</span>\r\n    }\r\n    \r\n  const identified = suggestionsStore.identified   \r\n  const optionCode = suggestionsStore.fromRelatives ? 'ASKU' : 'NA UNK'\r\n  const isDeathTime = certificate.deathDatetime!==undefined \r\n        && certificate.nullFlavors.findIndex((item)=>item.parent_attr===\"death_time\")===-1\r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">\r\n            <div className=\"p-field-checkbox p-col-12 p-lg-6\">              \r\n              <Checkbox inputId=\"notIdentified\" checked={!suggestionsStore.identified} onChange={e =>{                \r\n                if (e.checked) {\r\n                  patient.person = undefined\r\n                  patient.identity = undefined\r\n                  certificate.policyOMS = undefined\r\n                } else { \r\n                  patient.person = new Person()\r\n                  if (yearBTChecked) { setYearBTChecked(false) \r\n                    patient.setBirthDay(patient.birth_date as Date | undefined, false)\r\n                  }      \r\n                }  \r\n                checkFieldNullFlavor('person', patient.person, patient.nullFlavors, UNK) \r\n                checkFieldNullFlavor('identity', patient.identity, patient.nullFlavors, UNK)  \r\n                checkFieldNullFlavor('policy_OMS', certificate.policyOMS, certificate.nullFlavors, UNK)           \r\n                suggestionsStore.identified = !e.checked  \r\n                }} \r\n              />\r\n              <label htmlFor=\"notIdentified\">Умерший не идентифицирован</label>\r\n            </div>\r\n            <div className=\"p-field-checkbox p-col-12 p-lg-6\">              \r\n              <Checkbox inputId=\"fromRelatives\" checked={suggestionsStore.fromRelatives} \r\n              onChange={e =>{       \r\n                suggestionsStore.fromRelatives = e.checked\r\n                if (e.checked) { \r\n                  if (!patient.person) {\r\n                    patient.person = new Person()\r\n                    checkFieldNullFlavor('person', patient.person, patient.nullFlavors)\r\n                  }  \r\n                  if (yearBTChecked) { \r\n                    setYearBTChecked(false) \r\n                    patient.setBirthDay(patient.birth_date as Date | undefined, false)\r\n                  }\r\n                  patient.identity = undefined  \r\n                  checkFieldNullFlavor('identity', patient.identity, patient.nullFlavors, ASKU)                                  \r\n                } else \r\n                  patient.identity = new Identity({identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code} as IIdentity)                \r\n                }}/>\r\n              <label htmlFor=\"fromRelatives\">Внесено со слов родственников</label>\r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'> 1. </div>\r\n              <div className='p-paragraph-field p-mr-2 p-mb-2' \r\n                key={`pdiv1_${identified}`} >\r\n                <NullFlavorWrapper \r\n                  disabled={!suggestionsStore.fromRelatives}               \r\n                  checked={identified} \r\n                  paraNum                                \r\n                  label={<label htmlFor=\"family\">Фамилия, имя, отчество(при наличии)</label>}\r\n                  field={<PersonName personName={person?.fio}                                     \r\n                    onChange={(value: IPersonName | undefined)=>{     \r\n                      if (!person) return                          \r\n                      if (value?.family !== \"\" && (!person.fio || person.fio.family ===\"\")) layoutStore.message = { severity: 'success', summary: 'Успешно', detail: 'ФИО умершего изменены, чтобы сохранить изменения, введите причину А в п.22', life: 3000 }                                        \r\n                      person.fio = value || {family:'',given_1:''}\r\n                      checkFieldNullFlavor('fio.given_2', person.fio.given_2, person.nullFlavors, UNK)     \r\n                                                  \r\n                  }}/>}                  \r\n                  options={NULL_FLAVORS.filter((item:IReference)=>optionCode.includes(item.code))} \r\n                  value={suggestionsStore.fromRelatives ? ASKU : UNK} \r\n                  nullFlavors={patient.nullFlavors}  \r\n                  field_name=\"person\"                                 \r\n                />             \r\n              </div>\r\n            </div>  \r\n            <div className=\"p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1' > 2. </div>\r\n              <div className='p-paragraph-field'>\r\n                <div className=\"p-formgroup-inline\">\r\n                  <div className='p-field-radiobutton p-radiobutton'>Пол</div>\r\n                  <div className='p-field-radiobutton'>                  \r\n                    <RadioButton name='undef' checked={patient.gender === NOGENDER}\r\n                      onChange={(e)=>{\r\n                        if (e.checked) patient.gender = NOGENDER  \r\n                        else patient.gender = undefined\r\n                      }}/>\r\n                    <label htmlFor='undef'> Неопределенный </label>\r\n                  </div>\r\n                  <div className='p-field-radiobutton'>                  \r\n                    <RadioButton name='female' checked={patient.gender === FEMALE}\r\n                      onChange={(e)=>{\r\n                      if (e.checked) patient.gender = FEMALE  \r\n                      else patient.gender = undefined\r\n                      }}\r\n                    />\r\n                    <label htmlFor='female'> Женский</label>\r\n                  </div>                \r\n                  <div className='p-field-radiobutton'>                  \r\n                    <RadioButton name='male' checked={patient.gender === MALE}\r\n                      onChange={(e)=>{\r\n                        if (e.checked) patient.gender = MALE  \r\n                        else patient.gender = undefined\r\n                      }}\r\n                    />\r\n                    <label htmlFor='male'>Мужской</label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"p-field p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1'> 3. </div>\r\n              <div className='p-paragraph-field' key={`pdiv5_${identified}`}>                    \r\n                <NullFlavorWrapper paraNum\r\n                    disabled={suggestionsStore.identified}                    \r\n                    label={<label htmlFor=\"dateBirth\">Дата рождения</label>}\r\n                    checked={suggestionsStore.identified || yearBTChecked } setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) {                        \r\n                        patient.birth_date = undefined\r\n                        patient.birth_year = undefined \r\n                      } \r\n                      if (nullFlavors) patient.nullFlavors = nullFlavors \r\n                    }} \r\n                    onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) patient.nullFlavors = nullFlavors}}\r\n                    field={<div className=\"p-d-flex p-jc-start p-ai-center\">              \r\n                      <Calendar id=\"dateBirth\" className=\"p-mr-2\" locale=\"ru\"\r\n                        dateFormat={yearBTChecked ? \"yy\" : \"dd.mm.yy\"}  \r\n                        mask={yearBTChecked ? \"9999\" : \"99.99.9999\"}                         \r\n                        value={patient.birth_date} \r\n                        onChange={(e)=>patient.setBirthDay(e.target.value as Date | undefined, yearBTChecked)                          \r\n                        }\r\n                        showIcon />\r\n                      <div className=\"p-field-checkbox\">              \r\n                        <Checkbox checked={yearBTChecked} \r\n                          inputId=\"bd_year\" disabled={suggestionsStore.identified}\r\n                          onChange={e=>{\r\n                            setYearBTChecked(e.checked)\r\n                            patient.setBirthDay(patient.birth_date as Date | undefined, e.checked) }}/>\r\n                        <label htmlFor=\"bd_year\">Только год</label>\r\n                      </div>\r\n                    </div>}\r\n                    options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                    value={suggestionsStore.fromRelatives ? ASKU : UNK}\r\n                    field_name=\"birth_date\"\r\n                    nullFlavors={patient.nullFlavors}\r\n                />                               \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1'> 7. </div>\r\n              <div className='p-paragraph-field p-mr-3 p-mb-2'>\r\n                <NullFlavorWrapper paraNum                   \r\n                  label={<label htmlFor=\"dateDeath\">Дата смерти</label>}                  \r\n                  checked={certificate.deathDatetime!==undefined} setCheck={(e:CheckboxChangeParams, nullFlavors:      INullFlavorR[] | undefined)=>{                   \r\n                    if (!e.checked) certificate.setDeathDay(undefined, false)                      \r\n                    else certificate.setDeathDay(new Date(), false)                         \r\n                    if (nullFlavors) certificate.nullFlavors = nullFlavors  \r\n                  }} \r\n                  onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n                  field={<div className=\"p-d-flex p-jc-start p-ai-center\">              \r\n                      <Calendar id=\"dateDeath\" className=\"p-mr-2\" locale=\"ru\"\r\n                        dateFormat={yearDTChecked ? \"yy\" : \"dd.mm.yy\"} \r\n                        mask={yearDTChecked ? \"9999\" : \"99.99.9999\"}\r\n                        value={certificate.deathDatetime}\r\n                        onChange={(e)=>certificate.setDeathDay(e.target.value as Date | undefined, yearDTChecked) \r\n                        } \r\n                        showIcon />\r\n                      <div className=\"p-field-checkbox\">              \r\n                        <Checkbox checked={yearDTChecked} \r\n                          inputId=\"bd_year\" \r\n                          onChange={e=>{ setYearDTChecked(e.checked)\r\n                            certificate.setDeathDay(certificate.deathDatetime as Date | undefined, e.checked)}}/>\r\n                        <label htmlFor=\"bd_year\">Только год</label>\r\n                      </div>\r\n                    </div>}\r\n                    options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                    value={UNK}\r\n                    field_name=\"death_datetime\"                    \r\n                    nullFlavors={certificate.nullFlavors}\r\n                 />\r\n              </div>     \r\n              <div className='p-paragraph-field' key={`pdivdt_${yearDTChecked}_${isDeathTime}`}>                \r\n                <NullFlavorWrapper \r\n                  disabled={yearDTChecked}                   \r\n                  label={<label htmlFor=\"timeDeath\">Время смерти</label>}\r\n                  checked={isDeathTime && !yearDTChecked} \r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                   \r\n                    if (nullFlavors) certificate.nullFlavors = nullFlavors  \r\n                  }}\r\n                  onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) certificate.nullFlavors = nullFlavors}} \r\n                  field={ <Calendar id=\"timeDeath\"  \r\n                    timeOnly hourFormat=\"24\" locale=\"ru\"                                                   \r\n                    value={certificate.deathDatetime} \r\n                    showIcon />}\r\n                  options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                  value={UNK}\r\n                  field_name=\"death_time\"\r\n                  nullFlavors={certificate.nullFlavors}                  \r\n                />\r\n              </div>\r\n            </div>            \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section1) ","import { InputMask, InputMaskProps } from 'primereact/inputmask'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport Identity from '../../models/FormsData/Identity'\r\nimport { ID_CARD_TYPE } from '../../utils/defaults'\r\n\r\ntype InputsIdentityProps = {\r\n  dulValue?: ID_CARD_TYPE\r\n  identity?:Identity  \r\n}\r\nexport const inputsIdentity = (props:InputsIdentityProps) =>{\r\n  const identity = props.identity\r\n  const dulValue = props.dulValue\r\n  const seriesProps = {type:\"text\", id:\"series\", value:identity?.series,                  \r\n      onChange:(e:any)=>{if (identity) identity.series = e.target.value }}  \r\n  const seriesField = dulValue?.s_mask ? <InputMask {...{mask:dulValue?.s_mask,...seriesProps} as InputMaskProps }/>\r\n    : <InputText {...seriesProps}/>   \r\n  const numberProps = {type:\"text\", id:\"docNumber\", value:identity?.number,                  \r\n      onChange:(e:any)=>{if (identity) identity.number = e.target.value }}  \r\n  const numberField = dulValue?.n_mask ? <InputMask {...{mask:dulValue?.n_mask,...numberProps} as InputMaskProps }/>\r\n    : <InputText {...numberProps}/> \r\n  const depCodeProps = {type:\"text\", id:\"depCode\", value:identity?.issueOrgCode,                  \r\n      onChange:(e:any)=>{if (identity) identity.issueOrgCode = e.target.value}}  \r\n  const depCodeField = dulValue?.c_mask ? <InputMask {...{mask:dulValue?.c_mask,...depCodeProps} as InputMaskProps }/>\r\n    : <InputText {...depCodeProps}/> \r\n  return [seriesField, numberField,  depCodeField]\r\n}","import { observer } from 'mobx-react-lite'\r\nimport React, { FC, useContext, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { Card } from 'primereact/card'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport '../../styles/components/RadioButton.css'\r\nimport '../../styles/components/Calendar.css'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { ASKU, ID_CARD_TYPES, NA, NULL_FLAVORS, PASSPORT_RF, UNK } from '../../utils/defaults'\r\nimport { IReference } from '../../models/IReference'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { checkFieldNullFlavor, INullFlavorR } from '../../models/INullFlavor'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { InputMask } from 'primereact/inputmask'\r\nimport { InputTextarea } from 'primereact/inputtextarea'\r\nimport Identity from '../../models/FormsData/Identity'\r\nimport IIdentity from '../../models/IIdentity'\r\nimport { inputsIdentity } from '../inputs/inputsIdentity'\r\n\r\n\r\n\r\n const Section2: FC = () => {\r\n  const { certificateStore, suggestionsStore } = useContext(Context)   \r\n  const identified = suggestionsStore.identified  \r\n  const header = () => {\r\n      return <span>Документы умершего</span>\r\n    }    \r\n  const certificate = certificateStore.cert   \r\n  const patient = certificate.patient\r\n  const identity = patient.identity \r\n  const [docChecked, setDocChecked] = useState(identified && patient.nullFlavors.findIndex(item=>!item._destroy && item.parent_attr==='identity')===-1)    \r\n  const [dulValue, setDulValue]  = useState(ID_CARD_TYPES.find((item)=>item.code === identity?.identityCardType))\r\n  const person =  patient.person   \r\n  const nullFlavorOption =  docChecked ? \"UNK\" : \"UNK ASKU NA\" \r\n  const [seriesField, numberField, depCodeField] = inputsIdentity({dulValue, identity})    \r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">            \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>4. </div>\r\n              <div className='p-paragraph-field p-mr-2 p-mb-2'>\r\n                <NullFlavorWrapper \r\n                  disabled={!identified} paraNum                              \r\n                  checked={docChecked} setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>\r\n                    { if (e.checked) {\r\n                      patient.identity = new Identity({\r\n                        identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code,                                  \r\n                          } as IIdentity)\r\n                        if (!identified) suggestionsStore.identified = true\r\n                      } else patient.identity = undefined \r\n                      if (nullFlavors) patient.nullFlavors = nullFlavors\r\n                      setDocChecked(e.checked)\r\n                    }}\r\n                  nullFlavors={patient.nullFlavors}\r\n                  field_name=\"identity\"\r\n                  label={<label htmlFor=\"identity_card_type\">Документ, удостоверяющей личность умершего: </label>}\r\n                  field={<Dropdown  id=\"identity_card_type\" value={dulValue} \r\n                  autoFocus options={ID_CARD_TYPES} optionLabel='name'\r\n                  onChange={(e)=>{\r\n                    if (identity) identity.identityCardType = e.value.code\r\n                    else {\r\n                      patient.identity = new Identity({identity_card_type_id: e.value.code} as IIdentity)\r\n                      checkFieldNullFlavor(\"identity\", patient.identity, patient.nullFlavors)\r\n                    }  \r\n                    setDulValue(ID_CARD_TYPES.find((item)=>item.code === e.value.code))\r\n                  }}\r\n                  />}                  \r\n                  options={NULL_FLAVORS.filter((item:IReference)=>nullFlavorOption.includes(item.code))} \r\n                  value={docChecked ? UNK : ASKU}                                    \r\n                />             \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`ser_${docChecked}`} \r\n                style={{marginLeft:'1.5rem'}}>\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"series\">Серия</label>}\r\n                  checked={docChecked && patient.identity?.nullFlavors.findIndex(nf=>nf.parent_attr==='series')===-1} setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                    if (e.checked && patient.identity) patient.identity.series = ''\r\n                    else if (patient.identity) patient.identity.series = undefined                                    \r\n                  }}                 \r\n                  field={seriesField}\r\n                  field_name='series'\r\n                  options={identified ? [NULL_FLAVORS[NA]] : [NULL_FLAVORS[ASKU]]}\r\n                  value={NA}\r\n                  nullFlavors={patient.identity?.nullFlavors}\r\n                  lincked={!docChecked}                                   \r\n                />  \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`num_${docChecked}`}\r\n                style={{marginLeft:'1.5rem'}} >\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"docNumber\">Номер</label>}\r\n                  checked={docChecked}                 \r\n                  field={numberField}\r\n                  options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                  value={identified ? UNK : ASKU} \r\n                  lincked                                      \r\n                />                    \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-3 p-mb-2\" key={`org_${docChecked}`} style={{marginLeft:'1.5rem'}} >\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"issueOrgName\">Кем выдан</label>}\r\n                  checked={docChecked}                   \r\n                  field={\r\n                    <InputTextarea id=\"issueOrgName\" value={identity?.issueOrgName} \r\n                    cols={65} rows={2}   disabled={!identified}\r\n                    onChange={(e)=>{if (identity) identity.issueOrgName = e.target.value }}/>}\r\n                  options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                  value={identified ? UNK : ASKU} \r\n                  lincked                                      \r\n                />                    \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{marginLeft:'1.5rem'}} key={`pdiv5_${docChecked}`}>\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"issueDate\">Когда выдан</label>}\r\n                  checked={docChecked}                   \r\n                  field={<Calendar  id=\"issueDate\" className=\"p-mr-2\" \r\n                    dateFormat={\"dd.mm.yy\"} \r\n                    locale=\"ru\" mask=\"99.99.9999\"                    \r\n                    value={identity?.issueOrgDate}\r\n                    onChange={(e)=>{if (identity) identity.issueOrgDate = e.target.value as Date | undefined}}\r\n                    showIcon />\r\n                  }\r\n                  options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n                  value={identified ? UNK : ASKU}\r\n                  field_name=\"issueDate\"\r\n                  lincked                                       \r\n                /> \r\n              </div>  \r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`code_${docChecked}`} style={{marginLeft:'1.5rem'}}> \r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"depCode\">Код подразделения</label>}\r\n                  checked={docChecked && patient.identity?.nullFlavors.findIndex(nf=>nf.parent_attr==='issueOrgCode')===-1} \r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                    if (e.checked && patient.identity) patient.identity.issueOrgCode = ''\r\n                    else if (patient.identity) patient.identity.issueOrgCode = undefined  \r\n                    if (nullFlavors && patient.identity) patient.identity.nullFlavors =  nullFlavors            \r\n                  }}                   \r\n                  field={depCodeField}\r\n                  options={identified ? [NULL_FLAVORS[NA]] : [NULL_FLAVORS[ASKU]]}\r\n                  value={identified ? NA : ASKU} \r\n                  nullFlavors={patient.identity?.nullFlavors} \r\n                  lincked={!docChecked}\r\n                  field_name=\"issueOrgCode\"                                     \r\n                />                    \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1'> 5. </div>\r\n              <div className='p-paragraph-field'>                    \r\n                <NullFlavorWrapper paraNum                    \r\n                    label={<label htmlFor=\"snils\">СНИЛС</label>}\r\n                    disabled={!identified} \r\n                    checked={person && person.nullFlavors.findIndex(item=>item.parent_attr === 'SNILS' && !item._destroy)===-1} setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                      if (!person) return\r\n                      if (nullFlavors) person.nullFlavors = nullFlavors\r\n                      if (!e.checked) person.SNILS = undefined                                       \r\n                    }}                    \r\n                    field={<InputMask id=\"snils\"  \r\n                      type=\"text\" mask=\"999-999-999 99\"\r\n                      value={person?.SNILS} \r\n                      onChange={(e)=>{\r\n                        if (!person) return\r\n                        person.SNILS = e.target.value}}/>            \r\n                    }\r\n                    options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK NA\".includes(item.code))} \r\n                    value={docChecked ? UNK : ASKU}\r\n                    field_name=\"SNILS\"\r\n                    nullFlavors={person?.nullFlavors}\r\n                />                               \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-jc-center\">\r\n              <div className='paragraph p-mr-1'>6.* </div>\r\n              <div className='p-paragraph-field p-mr-3 p-mb-2'>\r\n                <NullFlavorWrapper  paraNum                   \r\n                    label={<label htmlFor=\"policyOMS\">Серия и номер полиса ОМС</label>}\r\n                    checked={identified && certificate.nullFlavors.findIndex(item=>item.parent_attr === 'policy_OMS' && !item._destroy)===-1} setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                      if (!e.checked) certificate.policyOMS = undefined                                           \r\n                    }}                     \r\n                    field={<InputText id=\"policyOMS\"  \r\n                      type=\"text\" \r\n                      value={certificate.policyOMS} \r\n                      onChange={(e)=>{certificate.policyOMS = e.target.value}}/>            \r\n                    }\r\n                    options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK NA\".includes(item.code))} \r\n                    value={docChecked ? UNK : ASKU}\r\n                    field_name=\"policy_OMS\"\r\n                    nullFlavors={certificate.nullFlavors}\r\n                />\r\n              </div>                   \r\n            </div>  \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%', paddingLeft:'0.5rem'}} >\r\n              <em>* В случае смерти ребенка до года заполняется в отношении матери</em>\r\n            </div>          \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section2) ","const SEC_IN_WEEK = 604800\r\nconst SEC_IN_DAY = 86400\r\nexport interface ITimeDiff {\r\n  years: number | undefined\r\n  months: number | undefined\r\n  weeks: number | undefined\r\n  days: number | undefined\r\n  hours: number | undefined\r\n  minutes: number | undefined\r\n}\r\nexport const timeDiff = (d1: Date, d2: Date) => {\r\n  if (d2 < d1) throw Error(\"invalid dates d1 > d2\")\r\n  let latest = d2\r\n  let yearDiff = d2.getFullYear() - d1.getFullYear()\r\n  const years = yearDiff > 0 ? yearDiff : undefined\r\n  if (years) {\r\n    latest = new Date(d1.getFullYear(), latest.getMonth(), latest.getDate(), latest.getHours(), latest.getMinutes())\r\n    if (d1 > latest)\r\n      latest = new Date(\r\n        d1.getFullYear() + 1,\r\n        latest.getMonth(),\r\n        latest.getDate(),\r\n        latest.getHours(),\r\n        latest.getMinutes()\r\n      )\r\n  }\r\n\r\n  const months =\r\n    latest.getMonth() < d1.getMonth() ? 12 + latest.getMonth() - d1.getMonth() : latest.getMonth() - d1.getMonth()\r\n  if (months > 0) {\r\n    latest = new Date(d1.getFullYear(), d1.getMonth(), latest.getDate(), latest.getHours(), latest.getMinutes())\r\n    if (d1 > latest) {\r\n      if (d1.getMonth() === 12) {\r\n        latest = new Date(d1.getFullYear() + 1, 1, latest.getDate(), latest.getHours(), latest.getMinutes())\r\n      } else\r\n        latest = new Date(d1.getFullYear(), d1.getMonth() + 1, latest.getDate(), latest.getHours(), latest.getMinutes())\r\n    }\r\n  }\r\n  let diff = (latest.getTime() - d1.getTime()) / 1000\r\n  diff = Math.floor(diff)\r\n  const weeks = Math.floor(diff / SEC_IN_WEEK)\r\n  diff = diff - weeks * SEC_IN_WEEK\r\n  const days = Math.floor(diff / SEC_IN_DAY)\r\n  diff = diff - days * SEC_IN_DAY\r\n  const hours = Math.floor(diff / 3600)\r\n  diff = diff - hours * 3600\r\n  const minutes = Math.floor(diff / 60)\r\n  return {\r\n    years,\r\n    months,\r\n    weeks,\r\n    days,\r\n    hours,\r\n    minutes,\r\n  } as ITimeDiff\r\n}\r\n// for API request params objects\r\n// to remove the indefined items from nested objects as well, using a recursive\r\n// используем рекурсивную функцию очистки объектов от undefined свойств\r\nexport const removeEmpty = (obj: any) => {\r\n  let candidat = obj as Object\r\n  if (Array.prototype.isPrototypeOf(candidat)) {\r\n    return obj\r\n  }\r\n  let newObj = {} as any\r\n  Object.keys(obj).forEach((key) => {\r\n    if (obj[key] === Object(obj[key])) newObj[key] = removeEmpty(obj[key])\r\n    else if (obj[key] !== undefined) newObj[key] = obj[key]\r\n  })\r\n  return newObj\r\n}\r\n","/*\r\n* ADDRESS SEARCH DIALOG COMPONENT\r\n* функционал ввода адреса посредством поиска в ФИАС\r\n* параметры:\r\n* ID - ID существующей записи адреса в СУБД \r\n* address - полное представление записи адреса в СУБД  \r\n*/\r\nimport { observer } from 'mobx-react-lite'\r\nimport { AutoComplete, AutoCompleteChangeParams } from 'primereact/autocomplete'\r\nimport { Button } from 'primereact/button'\r\nimport { Dialog } from 'primereact/dialog'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { Toast } from 'primereact/toast'\r\nimport { FC, useContext, useEffect, useRef, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { IReference } from '../../models/IReference'\r\nimport { IFiasItem } from '../../models/responses/IFiasItem'\r\nimport { DEFAULT_ERROR_TOAST, HOME_REGION_CODE } from '../../utils/defaults'\r\n\r\ntype AddressDialogProps = {  \r\n  onCancel?: ()=>void \r\n}\r\n\r\nconst AddressDialog: FC<AddressDialogProps> = (props: AddressDialogProps) =>{ \r\n  const { addressStore } = useContext(Context)  \r\n  const [isLoading] = useState(addressStore.isLoading)  \r\n  const value = addressStore.address  \r\n  const streetAddressLine = value.streetAddressLine\r\n  const regions = addressStore.regionsOptions\r\n  const [searchStr, setSearchStr] = useState<string>('')   \r\n  useEffect(()=>setSearchStr(streetAddressLine)    \r\n  , [streetAddressLine])  \r\n  const [region, setRegion] = useState<IReference>()\r\n  useEffect(()=>setRegion(regions?.find((item)=>item.code === value.state?.code))      \r\n   , [regions, value.state])   \r\n  const [district, setDistrict] = useState<string>('')\r\n  useEffect(()=>setDistrict(value.district?.name || ''), [value.district?.name])\r\n  const [city, setCity] = useState<string>(value.city?.name || '')\r\n  useEffect(()=>setCity(value.city?.name || ''), [value.city?.name])\r\n  const [town, setTown] = useState<string>(value.town?.name || '')\r\n  useEffect(()=>setTown(value.town?.name || ''), [value.town?.name])\r\n  const [street, setStreet] = useState<string>(value.street?.name || '')\r\n  useEffect(()=>setStreet(value.street?.name || ''), [value.street?.name])\r\n  const [house, setHouse] = useState<string>(value.housenum || '')\r\n  useEffect(()=>setHouse(value.housenum || ''), [value.housenum])\r\n  const [addresses, setAddresses] = useState(addressStore.fiasOptions)   \r\n  const toast = useRef<Toast>(null)\r\n  const setAddress = (e:IFiasItem)=>{ \r\n    if (e === null) return      \r\n    if (e.parent) setAddress(e.parent)\r\n    if (e.postalCode && e.postalCode.length>0) value.postalCode = e.postalCode\r\n    value.aoGUID = e.AOGUID\r\n    value.houseGUID = e.HouseGUID \r\n    value.streetAddressLine = e.streetAddressLine\r\n    switch (e.level) {\r\n      case 'Region' : if (e.code) value.state = {code: e.code.slice(0,2), name: e.name}      \r\n        setRegion(regions?.find((item)=>item.code === value.state?.code))\r\n        break\r\n      case 'City': value.city = {code: e.AOGUID, name: e.name}\r\n        setCity(e.name) \r\n        break\r\n      case 'District': value.district = {code: e.AOGUID, name: e.name}\r\n        setDistrict(e.name)\r\n        break\r\n      case 'Town': value.town = {code: e.AOGUID, name: e.name}\r\n        setTown(e.name)\r\n        break\r\n      case 'building': value.housenum = e.housenum; \r\n        value.buildnum = e.buildnum;\r\n        value.strucnum = e.strucnum;\r\n      break\r\n      case 'Street': \r\n        setStreet(e.name)\r\n        value.street = {code: e.AOGUID, name: e.name}\r\n      break\r\n    }         \r\n  }  \r\n  useEffect( () => {     \r\n    if (regions===undefined) {\r\n      addressStore.fetchRegionOptions()          \r\n    } else if (value.state===undefined || value.state===null)  {      \r\n      setRegion(regions?.find((region)=>region.code===HOME_REGION_CODE)) \r\n      value.state = region\r\n    } else if (value.state?.code) {\r\n      setRegion(regions?.find((region)=>region.code===value.state?.code))\r\n    }    \r\n  }, [regions, value, addressStore, region])  \r\n  \r\n  \r\n  const onHide = ()=>{ \r\n    addressStore.dialogVisible = false\r\n  }\r\n\r\n  const autocompleteOnChange = (e: AutoCompleteChangeParams, setter: (value: string)=>void) => {\r\n    if(e.value && e.value?.AOGUID) { \r\n      addressStore.clear()                                        \r\n      setAddress(e.value)\r\n    } else setter(e.value)\r\n  }\r\n\r\n  const getSuggestions = (parent:string, level: string, query:string)=>{\r\n   addressStore.getChildItems(parent, level, query)\r\n    .then(response=>setAddresses(response))\r\n    .catch(reason => {  \r\n       if (toast.current) toast.current.show({...DEFAULT_ERROR_TOAST, detail:`ошибка запроса к ФИАС: ${reason.message}`})\r\n       setAddresses([])\r\n    })    \r\n  }\r\n\r\n  const cantSaveChanges = ()=> {    \r\n    if ((!addressStore.manualMode && addressStore.isNotStrictly()) \r\n      || addressStore.address.oldOne.streetAddressLine === addressStore.streetAddressLine()) return true\r\n    else  return false  \r\n  }\r\n  const footer = (\r\n    <div>\r\n      <Button label=\"Применить\" icon=\"pi pi-check\" disabled={cantSaveChanges()}\r\n        onClick={()=>{          \r\n          if (addressStore.isNotStrictly() && addressStore.manualMode) {  \r\n            value.housenum = house          \r\n            if (value.houseGUID === null && !!house ) \r\n              addressStore.address.streetAddressLine = `${searchStr}${value.housenum.length>0 ? ', '+value.housenum : ''}`\r\n            else addressStore.address.streetAddressLine = searchStr\r\n          }  \r\n          if (addressStore.onAddrComplete) addressStore.onAddrComplete()          \r\n          onHide()\r\n        }} className=\"p-button-text p-button-success\"/>        \r\n      <Button label=\"Отмена\" icon=\"pi pi-times\" onClick={()=>{\r\n        if (props.onCancel) props.onCancel()\r\n        onHide()}} className=\"p-button-text\"/>\r\n    </div>\r\n)\r\n  return (\r\n  <Dialog footer={footer} header='Ввод адреса посредством ФИАС' visible={addressStore.dialogVisible} onHide={onHide} \r\n    breakpoints={{'960px': '75vw', '640px': '100vw'}} \r\n    style={{width: '50vw'}} modal>\r\n    <div className=\"p-grid p-fluid\">  \r\n    <div className='p-field p-col-12'>        \r\n      <div className='p-inputgroup'>\r\n        <span className='p-inputgroup-addon'>Строка поиска:</span> \r\n        <AutoComplete id='searchFIAS' disabled={isLoading}  \r\n            value={searchStr} \r\n            suggestions={addresses}\r\n            completeMethod={(e) =>{\r\n              const query = value.state?.name ? e.query.replace(value.state?.name+',', '') : e.query\r\n              if (query.trim().length>1) { \r\n                addressStore.searchBar(query.trim(), value.state?.code)\r\n                setAddresses(addressStore.fiasOptions)\r\n              }\r\n            }}\r\n          field='streetAddressLine'\r\n          onChange={(e) => {                                  \r\n            if(e.value && e.value?.AOGUID) { \r\n              addressStore.clear()                                        \r\n              setAddress(e.value)\r\n              setSearchStr(e.value.streetAddressLine)\r\n            } else setSearchStr(e.target.value)\r\n          }}\r\n          placeholder='Регион, Город(Район),(Нас.пункт), Улица, Дом'\r\n        />\r\n      </div> \r\n    </div>       \r\n    <div className=\"p-field p-col-12 p-md-6\">      \r\n      <label htmlFor=\"region\">субъект Российской Федерации</label>\r\n      <Dropdown id='region' value={region} filter filterBy='name'\r\n          onChange={(e)=>{                \r\n            value.state = e.value \r\n            addressStore.clear() \r\n            setRegion(e.value)\r\n          }}\r\n          options={regions}\r\n          optionLabel='name'                                           \r\n      />\r\n    </div> \r\n    <div className=\"p-field p-col-12 p-md-6\">\r\n      <label htmlFor=\"district\">район</label>\r\n      <AutoComplete id='district' dropdown              \r\n          value={district}  forceSelection                    \r\n          field='name' disabled={isLoading}\r\n          onChange={e=>autocompleteOnChange(e, setDistrict)}                       \r\n          suggestions={addresses}\r\n          completeMethod={e=>{\r\n            if (value.state?.code) \r\n            getSuggestions(value.state?.code, 'district', e.query)\r\n          }}                                                           \r\n        />\r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-6\">\r\n        <label htmlFor=\"city\">город</label>         \r\n        <AutoComplete id='city' dropdown              \r\n          value={city}  forceSelection                    \r\n          field='name' \r\n          onChange={e=>autocompleteOnChange(e,setCity)}                       \r\n          suggestions={addresses}\r\n          completeMethod={e=>{                \r\n            if (value.state?.code) getSuggestions(value.state?.code,'city', e.query)\r\n          }}               \r\n        />              \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-6\">\r\n        <label htmlFor=\"town\">населенный пункт</label>\r\n        <AutoComplete id='town' dropdown value={town}  \r\n          forceSelection field='name' \r\n          onChange={e=>autocompleteOnChange(e, setTown)}                       \r\n          suggestions={addresses}\r\n          completeMethod={async (e) =>{\r\n            let parent = value.state?.code               \r\n            if (value.city?.code) parent = value.city?.code  \r\n            if (value.district?.code) parent = value.district?.code                \r\n            if (parent) getSuggestions(parent, 'town', e.query)                \r\n          }}                                                   \r\n        />        \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-6\">\r\n        <label htmlFor=\"street\">улица</label>\r\n        <AutoComplete id='street' forceSelection              \r\n          value={street} field='name' dropdown                 \r\n          onChange={e=>autocompleteOnChange(e, setStreet)}                       \r\n          suggestions={addresses}\r\n          completeMethod={async (e) =>{\r\n            let parent = value.state?.code \r\n            if (value.district?.code) parent = value.district?.code              \r\n            if (value.city?.code) parent = value.city?.code                 \r\n            if (value.town?.code) parent = value.town?.code               \r\n            if (parent) getSuggestions(parent, 'street', e.query)                 \r\n          }}                                                   \r\n        />\r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\" style={{ maxWidth:'7rem'}}>\r\n        <label htmlFor=\"housenum\">дом</label>\r\n        <AutoComplete id='housenum' dropdown value={house} field='name'            \r\n          onChange={(e)=>{\r\n            if(e.value && e.value?.AOGUID) { \r\n              addressStore.clear()                                        \r\n              setAddress(e.value)\r\n              setHouse(e.value.name)\r\n            } else {\r\n              setHouse(e.value)              \r\n              value.housenum = e.value                               \r\n              value.houseGUID = null\r\n            }\r\n          }}                       \r\n          suggestions={addresses}\r\n          completeMethod={async (e) =>{\r\n            let parent = value.state?.code \r\n            if (value.district?.code) parent = value.district?.code              \r\n            if (value.city?.code) parent = value.city?.code                 \r\n            if (value.town?.code) parent = value.town?.code\r\n            if (value.street?.code) parent = value.street?.code               \r\n            if (parent) getSuggestions(parent, 'building', e.query)                \r\n          }}                                                   \r\n        />         \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\" style={{ maxWidth:'7rem'}}> \r\n        <label htmlFor=\"strucnum\">стр.</label>\r\n        <InputText id='strucnum'              \r\n          value={value.strucnum || ''}                \r\n          onChange={(e)=>{\r\n            if (e.target.value.trim().length>0) value.strucnum=e.target.value\r\n          }}\r\n        />        \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\" style={{ maxWidth:'7rem'}}>\r\n        <label htmlFor=\"buildnum\">корп.</label>\r\n        <InputText id='buildnum' value={value.buildnum || ''}                \r\n          onChange={(e)=>{\r\n            if (e.target.value.trim().length>0) value.buildnum=e.target.value                \r\n          }}                  \r\n        />        \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\" style={{ maxWidth:'9rem'}}>\r\n        <label htmlFor=\"flat\">квартира(офис)</label>\r\n        <InputText id='flat' value={value.flat || ''}                  \r\n          onChange={(e)=>{\r\n            value.flat=e.target.value}\r\n          }                                               \r\n        />        \r\n      </div>\r\n      <div className=\"p-field p-col-12 p-md-4\">\r\n        <label htmlFor=\"postalCode\">почтовый код</label>\r\n        <InputText id='postalCode' disabled={value.aoGUID!==undefined}              \r\n          value={value.postalCode || \"\"}                  \r\n            onChange={(e)=>{\r\n              value.postalCode=e.target.value                \r\n            }}                                               \r\n        />        \r\n      </div>\r\n      <Toast ref={toast} />      \r\n    </div>  \r\n  </Dialog>)\r\n}\r\nexport default observer(AddressDialog)","import { AxiosResponse } from \"axios\"\r\nimport { $fias, FIAS_URL } from \"../http\"\r\nimport { IFiasResponse } from \"../models/responses/IFiasResponse\"\r\nimport { HOME_REGION_CODE } from \"../utils/defaults\"\r\n\r\nexport default class FiasService {\r\n  static async getRegions(): Promise<AxiosResponse<IFiasResponse>> {\r\n    return $fias.get(`${FIAS_URL}?level=region&limit=120`)\r\n  }\r\n  static async searchBar(query: string, regionID = HOME_REGION_CODE as string): Promise<AxiosResponse<IFiasResponse>> {\r\n    return $fias.get(`${FIAS_URL}?searchBar=1&withParent=1&regionID=${regionID}&total_found=1&query=${query}`)\r\n  }\r\n  static async getChildItems(\r\n    parent: string,\r\n    level: string,\r\n    query = \"\",\r\n    limit = \"120\"\r\n  ): Promise<AxiosResponse<IFiasResponse>> {\r\n    const parentOpt = parent.length === 2 ? `regionID=${parent}` : `parent=${parent}`\r\n    return $fias.get(`${FIAS_URL}?${parentOpt}&withParent=1&level=${level}&query=${query}&limit=${limit}`)\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport FiasService from \"../../services/FiasService\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IReference } from \"../IReference\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { IFiasItem } from \"../responses/IFiasItem\"\r\n\r\nexport default class Address {\r\n  private _oldOne: IAddressR\r\n  private _id?: string\r\n  private _streetAddressLine: string\r\n  private _state?: IReference\r\n  private _district?: IReference\r\n  private _city?: IReference\r\n  private _town?: IReference\r\n  private _street?: IReference\r\n  private _aoGUID?: string | null\r\n  private _houseGUID?: string | null\r\n  private _housenum?: string | null\r\n  private _buildnum?: string | null\r\n  private _strucnum?: string | null\r\n  private _flat?: string | null\r\n  private _postalCode?: string\r\n  private _nullFlavors: INullFlavorR[]\r\n  private _parent?: string\r\n  constructor(props: IAddressR) {\r\n    this._nullFlavors =\r\n      !!props.null_flavors_attributes && props.null_flavors_attributes.length > 0\r\n        ? [...props.null_flavors_attributes]\r\n        : []\r\n    if (props.id) this._id = props.id\r\n    this._oldOne = props\r\n    this._streetAddressLine = props.streetAddressLine\r\n    this._aoGUID = props.aoGUID\r\n    this._houseGUID = props.houseGUID\r\n    this._postalCode = props.postalCode\r\n    this._housenum = props.house_number\r\n    this._buildnum = props.building_number\r\n    this._strucnum = props.struct_number\r\n    this._flat = props.flat_number\r\n    this._parent = props.parent_guid\r\n    this.fetchAddressHierarchy()\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n\r\n  get oldOne(): IAddressR {\r\n    return this._oldOne\r\n  }\r\n\r\n  get id() {\r\n    return this._id\r\n  }\r\n  set id(id: string | undefined) {\r\n    this._id = id\r\n  }\r\n  get streetAddressLine() {\r\n    return this._streetAddressLine\r\n  }\r\n  set streetAddressLine(value: string) {\r\n    this._streetAddressLine = value\r\n  }\r\n  get state() {\r\n    return this._state\r\n  }\r\n  set state(value: IReference | undefined) {\r\n    this._state = value\r\n  }\r\n  get flat() {\r\n    return this._flat\r\n  }\r\n  set flat(value: string | undefined | null) {\r\n    this._flat = value\r\n  }\r\n\r\n  get postalCode() {\r\n    return this._postalCode\r\n  }\r\n  set postalCode(value: string | undefined) {\r\n    this._postalCode = value\r\n  }\r\n  get housenum() {\r\n    return this._housenum\r\n  }\r\n  set housenum(value: string | undefined | null) {\r\n    this._housenum = value\r\n  }\r\n  get buildnum() {\r\n    return this._buildnum\r\n  }\r\n  set buildnum(value: string | undefined | null) {\r\n    this._buildnum = value\r\n  }\r\n  get strucnum() {\r\n    return this._strucnum\r\n  }\r\n  set strucnum(value: string | undefined | null) {\r\n    this._strucnum = value\r\n  }\r\n\r\n  set street(value: IReference | undefined) {\r\n    this._street = value\r\n  }\r\n  get street() {\r\n    return this._street\r\n  }\r\n  set town(value: IReference | undefined) {\r\n    this._town = value\r\n  }\r\n  get town() {\r\n    return this._town\r\n  }\r\n  set aoGUID(value: string | undefined | null) {\r\n    this._aoGUID = value\r\n  }\r\n  get aoGUID() {\r\n    return this._aoGUID\r\n  }\r\n  set houseGUID(value: string | undefined | null) {\r\n    this._houseGUID = value\r\n  }\r\n  get houseGUID() {\r\n    return this._houseGUID\r\n  }\r\n  set district(value: IReference | undefined) {\r\n    this._district = value\r\n  }\r\n  get district() {\r\n    return this._district\r\n  }\r\n  set city(value: IReference | undefined) {\r\n    this._city = value\r\n  }\r\n  get city() {\r\n    return this._city\r\n  }\r\n\r\n  get parent() {\r\n    return this._parent\r\n  }\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes(): INullFlavorR[] {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  //рекурсивный парсинг структуры адресного объекта\r\n  parseFiasItem(fiasItem: IFiasItem) {\r\n    switch (fiasItem.level) {\r\n      case \"building\":\r\n        this._streetAddressLine = fiasItem.streetAddressLine\r\n        break\r\n      case \"Street\":\r\n        this._street = { code: fiasItem.AOGUID, name: `${fiasItem.name} ${fiasItem.shortname}` }\r\n        break\r\n      case \"Town\":\r\n        this._town = { code: fiasItem.AOGUID, name: `${fiasItem.name} ${fiasItem.shortname}` }\r\n        break\r\n      case \"City\":\r\n        this._city = { code: fiasItem.AOGUID, name: `${fiasItem.name} ${fiasItem.shortname}` }\r\n        break\r\n      case \"District\":\r\n        this._district = { code: fiasItem.AOGUID, name: `${fiasItem.name} ${fiasItem.shortname}` }\r\n        break\r\n      case \"Region\":\r\n        if (fiasItem.code) {\r\n          const code = fiasItem.code.slice(0, 2)\r\n          this._state = { code: code, name: `${fiasItem.name}` }\r\n        }\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    if (fiasItem.parent) this.parseFiasItem(fiasItem.parent)\r\n  }\r\n  // Получить всю ФИАС структуру адресного объекта по AOGUID\r\n  fetchAddressHierarchy() {\r\n    if (!this._aoGUID) return\r\n    FiasService.getChildItems(this._aoGUID, this._houseGUID ? \"building\" : \"\", \"\", \"1\")\r\n      .then((response) => {\r\n        if (response.data.data)\r\n          response.data.data.forEach((item) => {\r\n            this.parseFiasItem(item)\r\n          })\r\n      })\r\n      .catch((reason) => console.log(reason))\r\n  }\r\n}\r\n","import { HOME_REGION_CODE } from \"../../utils/defaults\"\r\nimport { IDestroyble } from \"../IDestroyble\"\r\nimport { INullFlavorableR } from \"./INullFlavorableR\"\r\n\r\nexport interface IAddressR extends INullFlavorableR, IDestroyble {\r\n  id?: string\r\n  state: string\r\n  streetAddressLine: string\r\n  aoGUID?: string | null\r\n  houseGUID?: string | null\r\n  postalCode?: string\r\n  code?: string\r\n  parent_guid?: string\r\n  actual?: boolean\r\n  house_number?: string | null\r\n  struct_number?: string | null\r\n  building_number?: string | null\r\n  flat_number?: string | null\r\n}\r\nexport const DEFAULT_ADDRESS = { state: HOME_REGION_CODE, streetAddressLine: \"\" } as IAddressR\r\n","import { observer } from 'mobx-react-lite'\r\nimport { Button } from 'primereact/button'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { classNames } from 'primereact/utils'\r\nimport { FC, useContext, useEffect } from 'react'\r\nimport { Context } from '../..'\r\nimport Address from '../../models/FormsData/Address'\r\nimport { DEFAULT_ADDRESS, IAddressR } from '../../models/requests/IAddressR'\r\n\r\n\r\ntype InputAddressProps = { \r\n  submitted: boolean // is it form submitted already\r\n  value: IAddressR // object, containing address\r\n  onClear: (value: IAddressR)=>void // setter to state value in the form>\r\n  onChange: ()=>void // setter to state new value from dialog to form \r\n  label?: string\r\n  strictly?: boolean // if address need to be all from FIAS\r\n  className?: string // styles for main div  \r\n  id?: string \r\n}\r\n\r\nconst InputAddress: FC<InputAddressProps> = (props: InputAddressProps) =>{ \r\n  const submitted = props.submitted\r\n  const value = props.value\r\n  const {addressStore} = useContext(Context)\r\n\r\n  const invalid = props.strictly ? !value || !value.houseGUID\r\n     : !value || (value.streetAddressLine && value.streetAddressLine.split(',').length < 3)\r\n  \r\n  const bt_id = `bt_addr_${props.id}`   \r\n  \r\n  //useEffect(()=>{addressStore.address = new Address(props.value || DEFAULT_ADDRESS)\r\n  //  console.log('props.value', props.value.streetAddressLine)\r\n  //},[addressStore, props.value])\r\n\r\n   useEffect(()=>{\r\n    if (addressStore.manualMode!== !props.strictly) {\r\n      addressStore.manualMode = !props.strictly \r\n    }\r\n  },[addressStore, props.strictly])\r\n\r\n  return (<div className={classNames({'p-field': !!props.label}, props.className)} >\r\n    {props.label && <label htmlFor={bt_id}>{props.label}</label>}\r\n    <div className='p-inputgroup'>\r\n      <Button id='bt_addr_dialog' label=\"Ввод\" onClick={()=>{\r\n        addressStore.address = new Address(props.value || DEFAULT_ADDRESS)\r\n        addressStore.dialogVisible = true\r\n        addressStore.onAddrComplete = props.onChange}} style={{width:'5rem'}}/>\r\n      <InputText \r\n        title={value?.streetAddressLine}\r\n        value={value?.streetAddressLine}\r\n        placeholder={'введите адрес вида: Амурская область, Н-ский район, село Тосево, улица Товарная, дом 13, кв. 9' } className={classNames({ 'p-invalid': submitted && invalid})} />\r\n      <Button icon=\"pi pi-times\" className=\"p-button-danger\" onClick={()=>{\r\n        if (!value) return        \r\n        let _addr = DEFAULT_ADDRESS\r\n        if (value.id) _addr.id = value.id\r\n        if (value.parent_guid) _addr.parent_guid = value.parent_guid\r\n        if (value.null_flavors_attributes) _addr.null_flavors_attributes = value.null_flavors_attributes       \r\n        props.onClear(_addr)\r\n        addressStore.address = new Address(_addr)}}\r\n      />\r\n    </div>\r\n    {submitted && invalid && <small className=\"p-error\">Адресс введен не полностью или отсутствует</small>}\r\n  </div>)  \r\n}\r\nexport default observer(InputAddress)","import { RadioButton } from \"primereact/radiobutton\"\r\nimport { useState } from \"react\"\r\nimport { URBAN_AREA_TYPE, VILAGE_AREA_TYPE } from \"../../utils/defaults\"\r\n\r\n\r\ntype AreaTypeProps = {\r\n  value: number | undefined\r\n  onChange: ((value: number | undefined)=>void)\r\n}\r\n\r\nexport const AreaType = (props: AreaTypeProps) =>{ \r\n  const [value, setValue] = useState<number | undefined>(props.value)\r\n  return (  \r\n  <div className=\"p-formgroup-inline\" key={`rbt_${value}`} style={{marginLeft: '-0.76rem'}}>              \r\n      <div className='p-field-radiobutton'>                  \r\n        <RadioButton name='urban' checked={value === URBAN_AREA_TYPE}\r\n          onChange={(e)=>{\r\n            if (e.checked) { \r\n              setValue(URBAN_AREA_TYPE) \r\n              props.onChange(URBAN_AREA_TYPE)\r\n            } else {\r\n              setValue(undefined)\r\n              props.onChange(undefined) \r\n            }\r\n          }}\r\n        />\r\n        <label htmlFor='undef'>Городская</label>\r\n      </div>\r\n      <div className='p-field-radiobutton'>                  \r\n        <RadioButton name='vilage' checked={value === VILAGE_AREA_TYPE}\r\n          onChange={(e)=>{\r\n            if (e.checked) { \r\n              setValue(VILAGE_AREA_TYPE) \r\n              props.onChange(VILAGE_AREA_TYPE)\r\n            } else {\r\n              setValue(undefined)\r\n              props.onChange(undefined) \r\n            }\r\n          }}/>\r\n        <label htmlFor='vilage'>Сельская</label>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { observer } from \"mobx-react-lite\"\r\nimport { Button } from \"primereact/button\"\r\nimport { Card } from \"primereact/card\"\r\nimport { CheckboxChangeParams } from \"primereact/checkbox\"\r\nimport { FC, useContext, useState} from \"react\"\r\nimport { Context } from \"../..\"\r\nimport { IReference } from \"../../models/IReference\"\r\nimport { ASKU, NULL_FLAVORS, UNK } from \"../../utils/defaults\"\r\nimport { removeEmpty } from \"../../utils/functions\"\r\nimport AddressDialog from \"../dialogs/AddressDialog\"\r\nimport InputAddress from \"../inputs/InputAddress\"\r\nimport { AreaType } from \"../inputs/AreaType\"\r\nimport NullFlavorWrapper from \"../NullFlavorWrapper\"\r\nimport { INullFlavorR } from \"../../models/INullFlavor\"\r\nimport { DEFAULT_ADDRESS, IAddressR } from \"../../models/requests/IAddressR\"\r\n\r\n\r\nconst Section3: FC = () => {\r\n  const { addressStore, certificateStore,suggestionsStore } = useContext(Context)\r\n  const certificate = certificateStore.cert  \r\n  const patient = certificate.patient\r\n  const [addressLife, setAddressLife] = useState(patient.person?.address) \r\n  const [addressDeath, setAddressDeath] = useState(certificate.deathAddr) \r\n  const identified = suggestionsStore.identified\r\n  const checkedLifeArea = !!patient.person && patient.person.nullFlavors.findIndex((item)=>item.parent_attr==='address' && !item._destroy)===-1\r\n  const checkedDeathArea = !!addressDeath || certificate.nullFlavors.findIndex((item)=>item.parent_attr==='death_addr')===-1  \r\n  const fromRelatives = suggestionsStore.fromRelatives\r\n  const submitted = certificateStore.submitted\r\n  \r\n  const header = () => {\r\n    return <><span>Адреса мест жительства и смерти</span><Button type=\"button\" onClick={onAddressCopy} label=\"СОВПАДАЮТ\" disabled={!checkedLifeArea} className=\"p-button-raised p-button-success\"  /></>\r\n  }\r\n\r\n  //copy info from life address to dead address objects\r\n  const onAddressCopy = () => {\r\n    if (!patient.person) return\r\n    certificate.deathAreaType = certificate.lifeAreaType    \r\n    let _lifeAddr = patient.person.address \r\n    if (_lifeAddr === undefined) certificate.deathAddr = undefined      \r\n    else {\r\n      _lifeAddr.id = undefined\r\n      _lifeAddr.parent_guid = undefined\r\n      _lifeAddr = removeEmpty(_lifeAddr) as IAddressR\r\n      let _deathAddr = {} as IAddressR\r\n      if (certificate.deathAddr?.id) _deathAddr.id = certificate.deathAddr?.id\r\n      if (certificate.deathAddr?.parent_guid) _deathAddr.parent_guid = certificate.deathAddr?.parent_guid\r\n      certificate.deathAddr = {..._lifeAddr,...certificate.deathAddr} as IAddressR              \r\n    }    \r\n    setAddressDeath(certificate.deathAddr)\r\n  }\r\n  return (<>    \r\n    <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n      <div className=\"p-fluid p-formgrid p-grid\">\r\n        <div className=\"p-field p-d-flex p-jc-start\" style={{width: '98%'}}>          \r\n          <div className='paragraph p-mr-1'>8.</div>          \r\n          <div className='p-paragraph-field' style={{width: '98%'}}>\r\n            <NullFlavorWrapper paraNum                     \r\n              label={<label htmlFor=\"addr\">Место постоянного жительства(регистрации)</label>}\r\n              checked={identified && checkedLifeArea}  \r\n              setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (!patient.person) return\r\n                if (nullFlavors) patient.person.nullFlavors = nullFlavors\r\n                if (!e.checked) patient.person.address = undefined                \r\n              }}               \r\n              field={<InputAddress  submitted={submitted} \r\n                      id='person_addr'            \r\n                      value={addressLife || DEFAULT_ADDRESS} \r\n                      onClear={(value: IAddressR)=>{  \r\n                        if (!patient.person) return                                             \r\n                        patient.person.address = value\r\n                        setAddressLife(patient.person.address)\r\n                      }}\r\n                      onChange={()=>{\r\n                        if (!patient.person) return\r\n                        patient.person.address = addressStore.addressProps()                        \r\n                        setAddressLife(patient.person.address)\r\n                      }}  \r\n                    />}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={fromRelatives ? ASKU : UNK}\r\n              field_name=\"address\"\r\n              nullFlavors={patient.person?.nullFlavors}\r\n            />                  \r\n          </div>\r\n        </div>\r\n        <div className=\"p-d-flex p-jc-center\">          \r\n          <div className='paragraph p-mr-1'>9.</div>          \r\n          <div className='p-paragraph-field'>\r\n            <NullFlavorWrapper                     \r\n              label={<label htmlFor=\"urban\">Местность</label>}\r\n              checked={identified && !!certificate.lifeAreaType}  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                if (!e.checked) certificate.lifeAreaType = undefined                \r\n              }} \r\n              onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n              field={<AreaType value={certificate.lifeAreaType} onChange={(value: number | undefined)=>{\r\n                certificate.lifeAreaType = value                \r\n              }}/>}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={fromRelatives ? ASKU : UNK}\r\n              field_name=\"life_area_type\"\r\n              nullFlavors={certificate.nullFlavors}\r\n            />                  \r\n          </div>\r\n        </div>\r\n        <div className=\"p-field p-d-flex p-jc-start\" style={{width: '98%'}}>          \r\n          <div className='paragraph p-mr-1'>10.</div>          \r\n          <div className='p-paragraph-field' style={{width: '98%'}}>\r\n            <NullFlavorWrapper paraNum                     \r\n              label={<label htmlFor=\"death_addr\">Адрес места смерти</label>}\r\n              checked={checkedDeathArea}  \r\n              setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                if (!e.checked) certificate.deathAddr = undefined                \r\n              }}               \r\n              field={<InputAddress  submitted={submitted} \r\n                      id='death_addr'            \r\n                      value={addressDeath || DEFAULT_ADDRESS} \r\n                      onClear={(value: IAddressR)=>{                                               \r\n                        certificate.deathAddr = value \r\n                        setAddressDeath(certificate.deathAddr)                       \r\n                      }}\r\n                      onChange={()=>{\r\n                        certificate.deathAddr = addressStore.addressProps()  \r\n                        setAddressDeath(certificate.deathAddr)                      \r\n                      }}  \r\n                    />}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={fromRelatives ? ASKU : UNK}\r\n              field_name=\"death_addr\"\r\n              nullFlavors={certificate.nullFlavors}\r\n            />                  \r\n          </div>\r\n        </div>\r\n        <div className=\"p-d-flex p-jc-center\">          \r\n          <div className='paragraph p-mr-1'>11.</div>          \r\n          <div className='p-paragraph-field' key={`dArea_${certificate.deathAreaType}`}>\r\n            <NullFlavorWrapper                     \r\n              label={<label htmlFor=\"urban\">Местность</label>}\r\n              checked={!!certificate.deathAreaType && certificate.nullFlavors.findIndex(item=>item.parent_attr==='death_area_type' && !item._destroy\r\n              )===-1}  \r\n              setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                if (!e.checked) certificate.deathAreaType = undefined\r\n              }} \r\n              onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n              field={<AreaType value={certificate.deathAreaType} onChange={(value: number | undefined)=>{\r\n                certificate.deathAreaType = value\r\n              }}/>}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={fromRelatives ? ASKU : UNK}\r\n              field_name=\"death_area_type\"\r\n              nullFlavors={certificate.nullFlavors}\r\n            />                  \r\n          </div>\r\n        </div>        \r\n      </div>\r\n    </Card>\r\n    <AddressDialog /> \r\n  </>)\r\n}\r\n export default observer(Section3)  ","//Типы мест наступления смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.20 Версия: 3.1\r\nexport const DEAD_PLACE_TYPES = [\r\n  { code: 1, name: \"на месте происшествия\" },\r\n  { code: 2, name: \"в машине скорой помощи\" },\r\n  { code: 3, name: \"в стационаре\" },\r\n  { code: 4, name: \"дома\" },\r\n  { code: 5, name: \"в другом месте\" },\r\n  { code: 7, name: \"в образовательной организации\" },\r\n]\r\n","//\"Семейное положение\"\r\n//OID: 1.2.643.5.1.13.13.99.2.15  Версия: 3.1\r\nexport const MARITAL_STATUSES = [\r\n  { code: 4, name: \"состоял(а) в зарегистрированном браке\" },\r\n  { code: 5, name: \" не состоял(а) в зарегистрированном браке\" },\r\n  { code: 3, name: \" неизвестно\" },\r\n]\r\n","//\"Классификатор образования для медицинских свидетельств\"\r\n// OID: 1.2.643.5.1.13.13.99.2.16 Версия: 2.1\r\nexport const EDUCATION_LEVELS = [\r\n  { code: 1, name: \"профессиональное: высшее\" },\r\n  { code: 2, name: \"профессиональное: неполное высшее\" },\r\n  { code: 3, name: \"профессиональное: среднее профессиональное\" },\r\n  { code: 5, name: \"общее: среднее\" },\r\n  { code: 6, name: \"общее: основное\" },\r\n  { code: 7, name: \"общее: начальное\" },\r\n  { code: 10, name: \"общее: дошкольное\" },\r\n  { code: 11, name: \"не имеет начального образования\" },\r\n  { code: 9, name: \"неизвестно\" },\r\n]\r\n","//Социальные группы населения в учетной медицинской документации\r\n//OID: 1.2.643.5.1.13.13.11.1038 Версия: 5.1\r\nexport const SOCIAL_STATUSES = [\r\n  { code: 5, name: \"Работал(а)\" },\r\n  { code: 6, name: \"Проходил(а) военную службу или приравненную к ней службу\" },\r\n  { code: 4, name: \"Студент(ка)\" },\r\n  { code: 7, name: \"Пенсионер(ка)\" },\r\n  { code: 8, name: \"Не работал(а)\" },\r\n  { code: 10, name: \"Прочие\" },\r\n  { code: 22, name: \"неизвестно\" },\r\n]\r\n","// \"Доношенность новорожденного\"\r\n// OID: 1.2.643.5.1.13.13.99.2.18 Версия: 1.1\r\nexport const TERMS_PREGNANCY = [\r\n  { code: 1, name: \" доношенный (37-41 недели)\" },\r\n  { code: 2, name: \" недоношенный (менее 37 недель)\" },\r\n  { code: 3, name: \" переношенный (42 недели и более)\" },\r\n]\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IPersonName } from \"../IPersonName\"\r\nimport { IRelatedSubject } from \"../IRelatedSubject\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { IRelatedSubjectR } from \"../requests/IRelatedSubjectR\"\r\n\r\nconst MATHER = 1\r\n\r\nexport default class RelatedSubject implements ISerializable {\r\n  private _id?: number\r\n  private _guid: string\r\n  private _familyConnection: number\r\n  private _addr?: IAddressR | undefined\r\n  private _fio?: IPersonName | undefined\r\n  private _birthTime?: Date | undefined\r\n  private _nullFlavors: INullFlavorR[]\r\n\r\n  constructor(props: IRelatedSubject) {\r\n    this._guid = props.guid || uuidv4()\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    this._id = props.id\r\n    this._familyConnection = props.family_connection || MATHER\r\n    this._fio = props.person_name\r\n    if (props.birthTime) this._birthTime = new Date(props.birthTime)\r\n    this._addr = {\r\n      ...props.addr,\r\n      null_flavors_attributes:\r\n        props.addr?.null_flavors?.map((item) => {\r\n          return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n        }) || [],\r\n    } as IAddressR\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n\r\n  get addr(): IAddressR | undefined {\r\n    return this._addr\r\n  }\r\n  set addr(value: IAddressR | undefined) {\r\n    this._addr = value\r\n  }\r\n  get fio(): IPersonName | undefined {\r\n    return this._fio\r\n  }\r\n  set fio(value: IPersonName | undefined) {\r\n    this._fio = value\r\n  }\r\n\r\n  get birthTime(): Date | undefined {\r\n    return this._birthTime\r\n  }\r\n  set birthTime(value: Date | undefined) {\r\n    this._birthTime = value\r\n  }\r\n  get nullFlavors(): INullFlavorR[] {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(value: INullFlavorR[]) {\r\n    this._nullFlavors = value\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  getAttributes(): IRelatedSubjectR {\r\n    let _rs = { family_connection: this._familyConnection, guid: this._guid } as IRelatedSubjectR\r\n    if (this._nullFlavors.length > 0) _rs.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._addr) _rs.addr_attributes = { ...this._addr }\r\n    if (this._birthTime) _rs.birthTime = this._birthTime.toLocaleDateString()\r\n    if (this._fio) _rs.person_name_attributes = { ...this._fio }\r\n    if (this._id) _rs.id = this._id\r\n    return _rs\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IChildInfo } from \"../IChildInfo\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { IChildInfoR } from \"../requests/IChildInfoR\"\r\nimport RelatedSubject from \"./RelatedSubject\"\r\n\r\nexport class ChildInfo implements ISerializable {\r\n  private _id?: number\r\n  private _guid: string\r\n  private _termPregnancy?: number | undefined\r\n  private _weight?: number | undefined\r\n  private _whichAccount?: number | undefined\r\n  private _relatedSubject?: RelatedSubject | undefined\r\n  private _address?: IAddressR | undefined\r\n  private _nullFlavors: INullFlavorR[]\r\n\r\n  constructor(props: IChildInfo | undefined = undefined) {\r\n    if (props) {\r\n      this._id = props.id\r\n      this._guid = props.guid || uuidv4()\r\n      this._termPregnancy = props.term_pregnancy\r\n      this._weight = props.weight\r\n      this._whichAccount = props.which_account\r\n      this._address = {\r\n        ...props.address,\r\n        null_flavors_attributes:\r\n          props.address?.null_flavors?.map((item) => {\r\n            return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n          }) || [],\r\n      } as IAddressR\r\n      if (props.null_flavors && props.null_flavors.length > 0)\r\n        this._nullFlavors = props.null_flavors.map((item) => {\r\n          return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n        })\r\n      else this._nullFlavors = []\r\n      if (props.related_subject) this._relatedSubject = new RelatedSubject(props.related_subject)\r\n    } else {\r\n      this._nullFlavors = []\r\n      this._guid = uuidv4()\r\n    }\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n\r\n  get termPregnancy(): number | undefined {\r\n    return this._termPregnancy\r\n  }\r\n  set termPregnancy(value: number | undefined) {\r\n    this._termPregnancy = value\r\n  }\r\n  get weight(): number | undefined {\r\n    return this._weight\r\n  }\r\n  set weight(value: number | undefined) {\r\n    this._weight = value\r\n  }\r\n  get whichAccount(): number | undefined {\r\n    return this._whichAccount\r\n  }\r\n  set whichAccount(value: number | undefined) {\r\n    this._whichAccount = value\r\n  }\r\n  get relatedSubject(): RelatedSubject | undefined {\r\n    return this._relatedSubject\r\n  }\r\n  set relatedSubject(value: RelatedSubject | undefined) {\r\n    this._relatedSubject = value\r\n  }\r\n  get nullFlavors(): INullFlavorR[] {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(value: INullFlavorR[]) {\r\n    this._nullFlavors = value\r\n  }\r\n  get address(): IAddressR | undefined {\r\n    return this._address\r\n  }\r\n  set address(value: IAddressR | undefined) {\r\n    this._address = value\r\n  }\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  getAttributes(): IChildInfoR {\r\n    let _chInfo = { guid: this._guid } as IChildInfoR\r\n    if (this._nullFlavors.length > 0) _chInfo.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._relatedSubject) _chInfo.related_subject_attributes = this._relatedSubject.getAttributes()\r\n    if (this._termPregnancy) _chInfo.term_pregnancy = this._termPregnancy\r\n    if (this._weight) _chInfo.weight = this._weight\r\n    if (this._whichAccount) _chInfo.which_account = this._whichAccount\r\n    if (this._id) _chInfo.id = this._id\r\n    if (this._address && !!this._address.state && !!this._address.streetAddressLine)\r\n      _chInfo.address_attributes = { ...this._address }\r\n    return _chInfo\r\n  }\r\n}\r\n","import { useContext, useEffect, useState } from 'react'\r\nimport { InputNumber } from 'primereact/inputnumber'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport NullFlavorWrapper from './NullFlavorWrapper'\r\nimport { ChildInfo } from '../models/FormsData/ChildInfo'\r\nimport RelatedSubject from '../models/FormsData/RelatedSubject'\r\nimport { IChildInfo } from '../models/IChildInfo'\r\nimport {  checkFieldNullFlavor, INullFlavorR } from '../models/INullFlavor'\r\nimport { IPersonName } from '../models/IPersonName'\r\nimport { IReference } from '../models/IReference'\r\nimport { IRelatedSubject } from '../models/IRelatedSubject'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { Context } from '..'\r\nimport AddressFC2 from './inputs/InputAddress'\r\nimport { NA, NULL_FLAVORS, UNK } from '../utils/defaults'\r\nimport AddressDialog from './dialogs/AddressDialog'\r\nimport { DEFAULT_ADDRESS, IAddressR } from '../models/requests/IAddressR'\r\n\r\ntype MotherInfoProps = {\r\n  childInfo?: ChildInfo\r\n  onChange: ((childInfo: ChildInfo) => void)  \r\n}\r\n\r\nexport const MotherInfo = (props: MotherInfoProps) => {\r\n  const { addressStore, certificateStore} = useContext(Context)  \r\n  const [fio, setFio] = useState('')\r\n  const submitted = certificateStore.submitted\r\n  const [childInfo] = useState(props.childInfo || new ChildInfo({} as IChildInfo))\r\n  const [relatedSubject] = useState(childInfo.relatedSubject || new RelatedSubject({} as IRelatedSubject))\r\n  const [address, setAddress] = useState(relatedSubject.addr)\r\n  useEffect(()=>{    \r\n      setFio(relatedSubject.fio ? `${relatedSubject.fio.family} ${relatedSubject.fio.given_1} ${relatedSubject.fio?.given_2}` : '')         \r\n      if (childInfo.relatedSubject!==relatedSubject) childInfo.relatedSubject = relatedSubject         \r\n      if (!props.childInfo) props.onChange(childInfo)   \r\n    },[props, childInfo, relatedSubject])         \r\n    const options = NULL_FLAVORS.filter((item:IReference)=>\"UNK\".includes(item.code))       \r\n    const checked = relatedSubject.nullFlavors.findIndex((item)=>item.parent_attr==='addr')===-1\r\n        \r\n    \r\n    return ( <>\r\n      <div className=\"p-field p-grid\" style={{width:'90%'}}>\r\n        <label htmlFor=\"weight\" \r\n          className=\"p-col-fixed\" style={{width:'85%'}} >масса тела ребенка при рождении (грамм)</label>\r\n        <div className=\"p-col\">\r\n          <InputNumber  id=\"weight\" value={childInfo.weight} max={9999} min={10} \r\n            onChange={(e)=>{              \r\n             if (!!e.value) childInfo.weight=e.value \r\n             else childInfo.weight= undefined             \r\n            }}\r\n          type=\"text\"/>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-field p-grid\" style={{width:'90%'}}>\r\n        <label htmlFor=\"which_account\" className=\"p-col-fixed\" style={{width:'85%'}} >каким по счету был ребенок у матери (считая умерших и не считая мертворожденных)</label>\r\n        <div className=\"p-col\">\r\n          <InputNumber  id=\"which_account\" max={99} min={1}\r\n            onChange={(e)=>{\r\n             if (!!e.value) childInfo.whichAccount=e.value    \r\n             else  childInfo.whichAccount=undefined         \r\n            }} \r\n            value={childInfo.whichAccount} type=\"text\"/>\r\n        </div>\r\n      </div> \r\n      <div className='p-paragraph-field p-mr-2 p-mb-2'>\r\n        <NullFlavorWrapper                           \r\n          setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>\r\n            { if (e.checked)  { \r\n              } else { \r\n                relatedSubject.fio = undefined                \r\n                props.onChange(childInfo) \r\n              }\r\n              if (nullFlavors) relatedSubject.nullFlavors = nullFlavors              \r\n            }}                 \r\n          label={<label htmlFor=\"fio\">Фамилия матери, имя, отчество(при наличии)</label>}\r\n          field={<InputText  id=\"fio\" type=\"text\" \r\n                  value={fio}                    \r\n                  onChange={(e)=>{     \r\n                    setFio(e.target.value)               \r\n                    const values = e.target.value.trim().split(\" \")\r\n                    if (values && values.length > 1) {\r\n                      const temp = {family: values[0], given_1: values[1]} as IPersonName\r\n                      if (values[2]) temp.given_2 = values[2]\r\n                      else checkFieldNullFlavor('given_2',temp.given_2,relatedSubject.nullFlavors, NA)\r\n                      relatedSubject.fio = temp\r\n                      props.onChange(childInfo)                     \r\n                    }                                        \r\n                  }}/>}                  \r\n          options={options} \r\n          value={UNK} \r\n          nullFlavors={relatedSubject.nullFlavors}  \r\n          field_name=\"person_name\"                                 \r\n        />             \r\n      </div>\r\n      <div className='p-paragraph-field p-mr-2 p-mb-2'>                     \r\n        <NullFlavorWrapper                                       \r\n          label={<label htmlFor=\"dateBirth\">Дата рождения матери</label>}\r\n          setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) {                        \r\n                        relatedSubject.birthTime = undefined                        \r\n                      } \r\n                      if (nullFlavors) relatedSubject.nullFlavors = nullFlavors\r\n                    }} \r\n          onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{\r\n            if (nullFlavors) relatedSubject.nullFlavors = nullFlavors}}\r\n          field={<Calendar id=\"dateBirth\" showIcon dateFormat='dd.mm.yy'\r\n                  locale='ru' mask='99.99.9999'                                          \r\n                  value={relatedSubject.birthTime} \r\n                  onChange={(e)=>{\r\n                    relatedSubject.birthTime = e.target.value as Date | undefined\r\n                  }}                         \r\n                />}\r\n          options={options} \r\n          value={UNK} \r\n          nullFlavors={relatedSubject.nullFlavors}  \r\n          field_name=\"birthTime\"\r\n        />                               \r\n      </div> \r\n      <div className=\"p-field\" style={{width: '98%'}}>\r\n        <NullFlavorWrapper                      \r\n              label={<label htmlFor=\"mother_addr\">Место жительства матери</label>}\r\n              checked={checked}  \r\n              setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                if (nullFlavors) relatedSubject.nullFlavors = nullFlavors\r\n                if (!e.checked) relatedSubject.addr = undefined                \r\n              }}               \r\n              field={<AddressFC2  submitted={submitted} \r\n                      id='mother_addr'            \r\n                      value={address || DEFAULT_ADDRESS} \r\n                      onClear={(value: IAddressR)=>{                                               \r\n                        relatedSubject.addr = value\r\n                        setAddress(relatedSubject.addr)\r\n                      }}\r\n                      onChange={()=>{\r\n                        relatedSubject.addr = addressStore.addressProps()\r\n                        setAddress(relatedSubject.addr)\r\n                      }}  \r\n                    />}\r\n              options={NULL_FLAVORS.filter((item:IReference)=>\"ASKU UNK\".includes(item.code))} \r\n              value={UNK}\r\n              field_name=\"addr\"\r\n              nullFlavors={relatedSubject.nullFlavors}\r\n            />\r\n      </div>  \r\n      <AddressDialog />        \r\n    </>)\r\n}","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useEffect, useState} from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport '../../styles/components/RadioButton.css'\r\nimport '../../styles/components/Calendar.css'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { NA, NULL_FLAVORS } from '../../utils/defaults'\r\nimport { IReference } from '../../models/IReference'\r\n\r\nimport { Dropdown } from 'primereact/dropdown'\r\n\r\nimport { DEAD_PLACE_TYPES } from '../../NSI/1.2.643.5.1.13.13.99.2.20'\r\nimport { MARITAL_STATUSES } from '../../NSI/1.2.643.5.1.13.13.99.2.15'\r\nimport { EDUCATION_LEVELS } from '../../NSI/1.2.643.5.1.13.13.99.2.16'\r\nimport { SOCIAL_STATUSES } from '../../NSI/1.2.643.5.1.13.13.11.1038'\r\nimport { checkFieldNullFlavor, INullFlavorR } from '../../models/INullFlavor'\r\nimport { TERMS_PREGNANCY } from '../../NSI/1.2.643.5.1.13.13.99.2.18'\r\nimport { ChildInfo } from '../../models/FormsData/ChildInfo'\r\nimport { MotherInfo } from '../MotherInfo'\r\nimport InputAddress from '../inputs/InputAddress'\r\nimport { DEFAULT_ADDRESS, IAddressR } from '../../models/requests/IAddressR'\r\n\r\n const Section5: FC = () => {\r\n  const { certificateStore, addressStore } = useContext(Context)\r\n   \r\n  const optionCode = 'NA'\r\n  const options = NULL_FLAVORS.filter((item:IReference)=>optionCode.includes(item.code))  \r\n  const defaultCode = NA \r\n  const header = () => {\r\n      return <span>Прочие данные умершего</span>\r\n    }\r\n  const certificate = certificateStore.cert\r\n  const age = certificate.hoursAge()  \r\n  const isChildInfo = !!age && (age > 168) && certificate.yearsAge() < 1      \r\n  const isMonthChild = isChildInfo && certificate.daysAge() < 30 \r\n  const [address, setAddress] = useState(certificate.childInfo?.address)\r\n  \r\n  useEffect(()=>{\r\n    if (isChildInfo && certificate.childInfo===undefined) \r\n     certificate.childInfo = new ChildInfo()\r\n    else if (!isChildInfo && certificate.childInfo!==undefined) certificate.childInfo = undefined\r\n  },[isChildInfo, certificate]) \r\n  \r\n  const childInfo = certificate.childInfo \r\n  useEffect(()=>{    \r\n    if (!isMonthChild && childInfo) {\r\n        childInfo.termPregnancy = undefined\r\n        checkFieldNullFlavor('term_pregnancy',childInfo.termPregnancy, childInfo.nullFlavors, NA)\r\n    }    \r\n  },[isMonthChild, childInfo]) \r\n  useEffect(()=>{       \r\n    if (!isChildInfo && !!certificate.childInfo) {\r\n      certificate.childInfo = undefined\r\n      checkFieldNullFlavor('related_subject', certificate.childInfo, certificate.nullFlavors, NA)\r\n    }    \r\n  }, [ isChildInfo, certificate ])\r\n  const ddStyle = {minWidth:'210px', maxWidth:'500px', marginTop: '0.5rem', marginLeft: '-0.75rem'}\r\n  const dDivStyle = {paddingTop: '0.1rem'}\r\n      \r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">            \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>12. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"deathPlaceType\">Смерть наступила</label>\r\n                <Dropdown inputId=\"deathPlaceType\" style={ddStyle} placeholder=\"Выбрать\"  \r\n                  options={DEAD_PLACE_TYPES} optionLabel=\"name\" autoFocus\r\n                  value={DEAD_PLACE_TYPES.find((item)=>item.code === certificate.deathPlace)} \r\n                  onChange={(e) =>{\r\n                    certificate.deathPlace = e.value.code                    \r\n                  }} />\r\n              </div>  \r\n            </div> \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}}>\r\n              <div className='paragraph p-mr-1'>13.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{width: '90%'}}>\r\n                <NullFlavorWrapper  checked={isMonthChild}  key={`MonthChild_${isMonthChild}`} \r\n                  disabled\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                            if (nullFlavors && certificate.childInfo) certificate.childInfo.nullFlavors = nullFlavors                  \r\n                            if (!e.checked)  certificate.childInfo = undefined                              \r\n                            }}            \r\n                  label={<label htmlFor=\"MonthChild\">Для детей, умерших в возрасте от 168 час. до 1 месяца</label>}\r\n                  field={<Dropdown inputId=\"MonthChild\"  placeholder=\"Выбрать\" autoFocus \r\n                    style={{minWidth:'210px', maxWidth:'300px'}}        \r\n                    options={TERMS_PREGNANCY} optionLabel=\"name\"\r\n                    value={TERMS_PREGNANCY.find((item)=>item.code === certificate.childInfo?.termPregnancy)} \r\n                    onChange={(e) =>{                      \r\n                      if (certificate.childInfo) certificate.childInfo.termPregnancy = e.value.code                                          \r\n                    }} />}\r\n                  options={options} \r\n                  value={defaultCode} \r\n                  nullFlavors={certificate.childInfo?.nullFlavors}  \r\n                  field_name=\"term_pregnancy\" paraNum \r\n                />    \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>14.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{width: '90%'}}>\r\n                <NullFlavorWrapper  checked={isChildInfo}  key={`YearChild_${isChildInfo}`} \r\n                  disabled\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                            if (nullFlavors) certificate.nullFlavors = nullFlavors                  \r\n                              certificate.childInfo = undefined\r\n                            }}            \r\n                  label={<label htmlFor=\"YearChild\">Для детей, умерших в возрасте от 168 час. до 1 года</label>}\r\n                  field={<MotherInfo childInfo={childInfo} onChange={(chInf: ChildInfo)=>{\r\n                    if (certificate.childInfo !== chInf) certificate.childInfo = chInf  \r\n                  }} />}\r\n                  options={options} \r\n                  value={defaultCode} \r\n                  nullFlavors={certificate.nullFlavors}  \r\n                  field_name=\"related_subject\" paraNum \r\n                />    \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>8K.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{width: '90%'}}>\r\n                <NullFlavorWrapper  checked={isChildInfo}  key={`YearChild_BP_${isChildInfo}`} \r\n                  disabled\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n                              if (!certificate.childInfo) return\r\n                              if (nullFlavors) certificate.childInfo.nullFlavors = nullFlavors\r\n                              if (!e.checked) certificate.childInfo.address = undefined  \r\n                            }}            \r\n                  label={<label htmlFor=\"child_birth_addr\">Место рождения ребенка</label>}\r\n                  field={<InputAddress submitted={false} \r\n                      id='child_birth_addr'            \r\n                      value={address || DEFAULT_ADDRESS} \r\n                      onClear={(value: IAddressR)=>{ \r\n                        if (!certificate.childInfo) return                                             \r\n                        certificate.childInfo.address = value\r\n                        setAddress(certificate.childInfo.address)\r\n                      }}\r\n                      onChange={()=>{\r\n                        if (!certificate.childInfo) return\r\n                        certificate.childInfo.address = addressStore.addressProps()\r\n                        setAddress(certificate.childInfo.address)\r\n                      }}  \r\n                    />}\r\n                  options={options} \r\n                  value={defaultCode} \r\n                  nullFlavors={certificate.childInfo?.nullFlavors}  \r\n                  field_name=\"address\" paraNum \r\n                />    \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>15.*</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"marital_status\">Семейное положение</label>\r\n                <Dropdown inputId=\"marital_status\" style={ddStyle}\r\n                  placeholder=\"Выбрать\" autoFocus \r\n                  options={MARITAL_STATUSES} optionLabel=\"name\"\r\n                  value={MARITAL_STATUSES.find((item)=>item.code === certificate.maritalStatus)} \r\n                  onChange={(e) =>{certificate.maritalStatus= e.value.code}} \r\n                />                    \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>16.* </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"education_level\">Образование</label>\r\n                <Dropdown inputId=\"education_level\" style={ddStyle}\r\n                  placeholder=\"Выбрать\" autoFocus \r\n                  options={EDUCATION_LEVELS} optionLabel=\"name\"\r\n                  value={EDUCATION_LEVELS.find((item)=>item.code === certificate.educationLevel)} \r\n                  onChange={(e) =>{certificate.educationLevel = e.value.code}} \r\n                />   \r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>17.*</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"social_status\">Занятость</label>\r\n                <Dropdown inputId=\"social_status\" style={ddStyle}\r\n                  placeholder=\"Выбрать\" autoFocus \r\n                  options={SOCIAL_STATUSES} optionLabel=\"name\"\r\n                  value={SOCIAL_STATUSES.find((item)=>item.code === certificate.socialStatus)} \r\n                  onChange={(e) => {certificate.socialStatus = e.value.code}} \r\n                />    \r\n              </div>  \r\n            </div> \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%', paddingLeft:'0.5rem'}} >\r\n              <em>* В случае смерти ребенка до года заполняется в отношении матери</em>\r\n            </div>            \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section5) ","//Род причины смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.21 Версия: 2.1\r\nexport const DISEASE_DEADTH_KIND = 1\r\nexport const DEATH_KINDS = [\r\n  { code: 1, name: \"от заболевания\" },\r\n  { code: 2, name: \"от несчастного случая, не связанного с производством\" },\r\n  { code: 3, name: \"от несчастного случая, связанного с производством\" },\r\n  { code: 4, name: \"убийства\" },\r\n  { code: 5, name: \"самоубийства\" },\r\n  { code: 6, name: \"в ходе военных действий\" },\r\n  { code: 7, name: \"в ходе террористических действий\" },\r\n  { code: 8, name: \"род смерти не установлен\" },\r\n]\r\n","//Тип медицинского работника, установившего причины смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.22 Версия: 3.1\r\nexport const MEDICS = [\r\n  { code: 1, name: \"врач, только установивший смерть\" },\r\n  { code: 2, name: \"лечащий врач\" },\r\n  { code: 3, name: \"фельдшер, акушерка\" },\r\n  { code: 4, name: \"врач-патологоанатом\" },\r\n  { code: 5, name: \"врач-судебно-медицинский эксперт\" },\r\n]\r\n","//Основания для установления причины смерти\r\n//OID: 1.2.643.5.1.13.13.99.2.23  Версия: 2.1\r\nexport const BASIS_DERMINING = [\r\n  { code: 1, name: \"осмотр трупа\" },\r\n  { code: 2, name: \"записи в медицинской документации\" },\r\n  { code: 3, name: \"предшествующее наблюдение за пациентом\" },\r\n  { code: 4, name: \"вскрытие\" },\r\n]\r\n","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext} from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport '../../styles/components/RadioButton.css'\r\nimport '../../styles/components/Calendar.css'\r\nimport '../../styles/pages/CertificatePage.css'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { NA, NULL_FLAVORS } from '../../utils/defaults'\r\nimport { IReference } from '../../models/IReference'\r\nimport { Dropdown } from 'primereact/dropdown'\r\n\r\nimport { INullFlavorR } from '../../models/INullFlavor'\r\nimport { DEATH_KINDS, DISEASE_DEADTH_KIND } from '../../NSI/1.2.643.5.1.13.13.99.2.21'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { InputTextarea } from 'primereact/inputtextarea'\r\nimport { MEDICS } from '../../NSI/1.2.643.5.1.13.13.99.2.22'\r\nimport { BASIS_DERMINING } from '../../NSI/1.2.643.5.1.13.13.99.2.23'\r\n\r\n const Section6: FC = () => {\r\n  const { certificateStore } = useContext(Context)\r\n   \r\n  const optionCode = 'NA'\r\n  const options = NULL_FLAVORS.filter((item:IReference)=>optionCode.includes(item.code))  \r\n  \r\n  const header = () => {\r\n      return <span>Характеристика причины смерти</span>\r\n    }\r\n  const certificate = certificateStore.cert  \r\n  const isExtReason = certificate.deathKind !== undefined && certificate.deathKind !== DISEASE_DEADTH_KIND \r\n  \r\n  \r\n  \r\n  const ddStyle = {minWidth:'210px', maxWidth:'500px', marginTop: '0.5rem', marginLeft: '-0.75rem'}\r\n  const dDivStyle = {paddingTop: '0.1rem'}\r\n      \r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">            \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>18. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"deathPlaceType\">Смерть произошла</label>\r\n                <Dropdown inputId=\"deathPlaceType\" style={ddStyle} placeholder=\"Выбрать\"  \r\n                  options={DEATH_KINDS} optionLabel=\"name\" autoFocus\r\n                  value={DEATH_KINDS.find((item)=>item.code === certificate.deathKind)} \r\n                  onChange={(e) =>{\r\n                    certificate.deathKind = e.value.code                    \r\n                  }} />\r\n              </div>  \r\n            </div>            \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>19.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`pdivdt_${isExtReason}`} style={{width: '90%'}}>                                  \r\n                <NullFlavorWrapper paraNum disabled checked={isExtReason}                                      \r\n                  label={<label htmlFor=\"extReasonTime\"> В случае смерти от несчастного случая, убийства, самоубийства, от военных и террористических действий, при неустановленном роде смерти - указать дату, время и обстоятельства травмы (отравления)</label>}\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) {                        \r\n                        certificate.extReasonTime = undefined                        \r\n                      } \r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                    }} \r\n                  onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{\r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n                  field={<div className=\"p-d-flex p-flex-wrap p-jc-start\">\r\n                          <Calendar id=\"extReasonTime\" showIcon className=\"p-mr-3 p-mb-2\"\r\n                            placeholder='дата' dateFormat={\"dd.mm.yy\"} \r\n                            locale=\"ru\" mask=\"99.99.9999\" panelStyle={{marginLeft:'12rem'}}                                         \r\n                            value={certificate.extReasonTime} \r\n                            onChange={(e)=>{\r\n                              certificate.extReasonTime = e.target.value as Date | undefined\r\n                            }}                         \r\n                          />\r\n                         <Calendar id=\"timereason\" className=\"p-mr-3 p-mb-2\" timeOnly \r\n                         hourFormat=\"24\" placeholder='время' locale=\"ru\"           \r\n                         value={certificate.extReasonTime}                            \r\n                            onChange={(e)=>{\r\n                              certificate.extReasonTime = e.target.value as Date | undefined\r\n                            }}\r\n                          showIcon /> \r\n                         <InputTextarea id=\"extReasonDescription\" value={certificate.extReasonDescription} \r\n                            cols={65} rows={2} placeholder='обстоятельства'  \r\n                            onChange={(e)=>{certificate.extReasonDescription = e.target.value }}\r\n                          /> \r\n                        </div> \r\n                  }\r\n                  options={options} \r\n                  value={NA} \r\n                  nullFlavors={certificate.nullFlavors}  \r\n                  field_name=\"ext_reason_time\"\r\n                />                               \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>20. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"establishedMedic\">Причины смерти установлены:</label>\r\n                <Dropdown inputId=\"establishedMedic\" style={ddStyle} placeholder=\"Выбрать\"  \r\n                  options={MEDICS} optionLabel=\"name\" autoFocus\r\n                  value={MEDICS.find((item)=>item.code === certificate.establishedMedic)} \r\n                  onChange={(e) =>{\r\n                    certificate.establishedMedic = e.value.code                    \r\n                  }} />\r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">\r\n              <div className='paragraph p-mr-1'>21. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={dDivStyle}>\r\n                <label htmlFor=\"basisDetermining\">На основании:</label>\r\n                <Dropdown inputId=\"basisDetermining\" style={ddStyle} placeholder=\"Выбрать\"  \r\n                  options={BASIS_DERMINING} optionLabel=\"name\" autoFocus\r\n                  value={BASIS_DERMINING.find((item)=>item.code === certificate.basisDetermining)} \r\n                  onChange={(e) =>{\r\n                    certificate.basisDetermining = e.value.code                    \r\n                  }} />\r\n              </div>  \r\n            </div>     \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section6) ","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { DATE_FORMAT, TIME_FORMAT } from \"../../utils/consts\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IProcedureR } from \"../requests/IProcedureR\"\r\nimport { IMedicalServs } from \"../responses/IMedservs\"\r\nimport { IProcedure } from \"../responses/IProcedure\"\r\n\r\nexport class Procedure implements ISerializable {\r\n  private _id?: number\r\n  private _medicalServ: IMedicalServs\r\n  private _guid: string\r\n  private _textValue?: string | undefined\r\n  private _effectiveTime?: Date\r\n  private _nullFlavors: INullFlavorR[]\r\n  constructor(props: IProcedure) {\r\n    this._id = props.id\r\n    this._guid = props.guid || uuidv4()\r\n    this._medicalServ = props.medical_serv\r\n    this._textValue = props.text_value\r\n    if (props.effective_time) this._effectiveTime = new Date(props.effective_time)\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes(): IProcedureR {\r\n    let _pr = { guid: this._guid } as IProcedureR\r\n    if (this._id && this._id > -1) _pr.id = this._id\r\n    if (this._effectiveTime) _pr.effective_time = this._effectiveTime.toLocaleString()\r\n    if (this._medicalServ) _pr.medical_serv_id = this._medicalServ.id\r\n    if (this._textValue) _pr.text_value = this._textValue\r\n    if (this._nullFlavors.length > 0) _pr.null_flavors_attributes = this.null_flavors_attributes()\r\n    return _pr\r\n  }\r\n  get id(): number | undefined {\r\n    return this._id\r\n  }\r\n  set id(value: number | undefined) {\r\n    this._id = value\r\n  }\r\n  get effectiveTime(): Date | undefined {\r\n    return this._effectiveTime\r\n  }\r\n  set effectiveTime(value: Date | undefined) {\r\n    this._effectiveTime = value\r\n  }\r\n  get textValue(): string | undefined {\r\n    return this._textValue\r\n  }\r\n  set textValue(value: string | undefined) {\r\n    this._textValue = value\r\n  }\r\n  get medicalServ(): IMedicalServs {\r\n    return this._medicalServ\r\n  }\r\n  set medicalServ(value: IMedicalServs) {\r\n    this._medicalServ = value\r\n  }\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  get guid(): string {\r\n    return this._guid\r\n  }\r\n\r\n  timeStr(): string {\r\n    if (this._effectiveTime === undefined) return \"\"\r\n    return this._effectiveTime?.toLocaleString(\r\n      \"ru\",\r\n      this._effectiveTime.getHours() === 0 && this._effectiveTime.getMinutes() === 0 ? DATE_FORMAT : TIME_FORMAT\r\n    )\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IDeathReason } from \"../responses/IDeathReason\"\r\nimport { IDiagnosis } from \"../responses/IDiagnosis\"\r\nimport { Procedure } from \"./Procedure\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { IDeathReasonR } from \"../requests/IDeathReasonR\"\r\nimport { IProcedureR } from \"../requests/IProcedureR\"\r\nexport class DeathReason implements ISerializable {\r\n  private _oldOne: IDeathReason\r\n  private _id?: number\r\n  private _diagnosis?: IDiagnosis | undefined\r\n  private _effectiveTime?: Date | undefined\r\n  private _years?: number | undefined\r\n  private _months?: number | undefined\r\n  private _weeks?: number | undefined\r\n  private _days?: number | undefined\r\n  private _hours?: number | undefined\r\n  private _minutes?: number | undefined\r\n  private _guid: string\r\n  private _procedures: Procedure[]\r\n  private _nullFlavors: INullFlavorR[]\r\n\r\n  constructor(props = {} as IDeathReason) {\r\n    this._oldOne = { ...props }\r\n    this._id = props.id\r\n    this._guid = props.guid || uuidv4()\r\n    this._diagnosis = props.diagnosis || props.ext_diagnosis\r\n    if (props.effective_time) this._effectiveTime = new Date(props.effective_time)\r\n    this._days = props.days\r\n    this._hours = props.hours\r\n    this._minutes = props.minutes\r\n    this._months = props.months\r\n    this._weeks = props.weeks\r\n    this._years = props.years\r\n    this._procedures = props.procedures?.map((proc) => new Procedure(proc)) || []\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  get id(): number | undefined {\r\n    return this._id\r\n  }\r\n\r\n  set id(id: number | undefined) {\r\n    this._id = id\r\n  }\r\n\r\n  get diagnosis(): IDiagnosis | undefined {\r\n    return this._diagnosis\r\n  }\r\n  set diagnosis(value: IDiagnosis | undefined) {\r\n    this._diagnosis = value\r\n  }\r\n  get effectiveTime(): Date | undefined {\r\n    return this._effectiveTime\r\n  }\r\n  set effectiveTime(value: Date | undefined) {\r\n    this._effectiveTime = value\r\n  }\r\n  get years(): number | undefined {\r\n    return this._years\r\n  }\r\n  set years(value: number | undefined) {\r\n    this._years = value\r\n  }\r\n  get months(): number | undefined {\r\n    return this._months\r\n  }\r\n  set months(value: number | undefined) {\r\n    this._months = value\r\n  }\r\n  get weeks(): number | undefined {\r\n    return this._weeks\r\n  }\r\n  set weeks(value: number | undefined) {\r\n    this._weeks = value\r\n  }\r\n  get days(): number | undefined {\r\n    return this._days\r\n  }\r\n  set days(value: number | undefined) {\r\n    this._days = value\r\n  }\r\n  get hours(): number | undefined {\r\n    return this._hours\r\n  }\r\n  set hours(value: number | undefined) {\r\n    this._hours = value\r\n  }\r\n  get minutes(): number | undefined {\r\n    return this._minutes\r\n  }\r\n  set minutes(value: number | undefined) {\r\n    this._minutes = value\r\n  }\r\n  get procedures(): Procedure[] {\r\n    return this._procedures\r\n  }\r\n  set procedures(value: Procedure[]) {\r\n    this._procedures = value\r\n  }\r\n  get nullFlavors(): INullFlavorR[] {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(value: INullFlavorR[]) {\r\n    this._nullFlavors = value\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n  procNames(): string {\r\n    let _result = \"\"\r\n    this._procedures.forEach((proc) => {\r\n      _result += proc.textValue || proc.medicalServ.name\r\n      if (proc.effectiveTime) _result += \" от \" + proc.timeStr()\r\n      _result += \"; \"\r\n    })\r\n    return _result\r\n  }\r\n  getAttributes(isExt = false): IDeathReasonR {\r\n    let _dr = { guid: this._guid } as IDeathReasonR\r\n    if (this._id && this._id > -1) _dr.id = this._id\r\n    if (this._effectiveTime) _dr.effective_time = this._effectiveTime\r\n    if (this._days) _dr.days = this._days\r\n    if (this._hours) _dr.hours = this._hours\r\n    if (this._minutes) _dr.minutes = this._minutes\r\n    if (this._months) _dr.months = this._months\r\n    if (this._weeks) _dr.weeks = this._weeks\r\n    if (this._years) _dr.years = this._years\r\n    if (this._diagnosis && !isExt) _dr.diagnosis_id = Number.parseInt(this._diagnosis.id)\r\n    if (this._diagnosis && isExt) _dr.ext_diagnosis_id = Number.parseInt(this._diagnosis.id)\r\n    if (this._nullFlavors.length > 0) _dr.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._procedures.length > 0) _dr.procedures_attributes = this._procedures.map((item) => item.getAttributes())\r\n    if (this._oldOne.procedures && this._oldOne.procedures.length > 0) {\r\n      let _temp = [] as IProcedureR[]\r\n      this._oldOne.procedures.forEach((item) => {\r\n        if (!_dr.procedures_attributes || _dr.procedures_attributes.findIndex((pr) => pr.id === item.id) === -1)\r\n          _temp.push({ id: item.id, _destroy: \"1\" } as IProcedureR)\r\n      })\r\n      if (_dr.procedures_attributes && _temp.length > 0)\r\n        _dr.procedures_attributes = _dr.procedures_attributes.concat(_temp)\r\n      else if (_temp.length > 0) _dr.procedures_attributes = _temp\r\n    }\r\n    return _dr\r\n  }\r\n}\r\n","import { AxiosResponse } from \"axios\"\r\nimport $api, { API_URL } from \"../http\"\r\nimport { IDiagnosis } from \"../models/responses/IDiagnosis\"\r\nimport { IMedicalServs } from \"../models/responses/IMedservs\"\r\n\r\nexport default class DiagnosisService {\r\n  static async fetchDiagnoses(query: any): Promise<AxiosResponse<IDiagnosis[]>> {\r\n    return $api.post(`${API_URL}model/Diagnosis/`, { q: query, offset: 0, limit: 200 })\r\n  }\r\n  static async fetchExtDiagnoses(query: any): Promise<AxiosResponse<IDiagnosis[]>> {\r\n    return $api.post(`${API_URL}model/ExtDiagnosis/`, { q: query, offset: 0, limit: 200 })\r\n  }\r\n  static async fetchMedicalServs(query: any): Promise<AxiosResponse<IMedicalServs[]>> {\r\n    return $api.post(`${API_URL}model/MedicalServ/`, { q: query, offset: 0, limit: 200 })\r\n  }\r\n}\r\n","\r\n\r\nimport { observer } from 'mobx-react-lite'\r\nimport { AutoComplete } from 'primereact/autocomplete'\r\nimport { Button } from 'primereact/button'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { FC, useState } from 'react'\r\nimport Certificate from '../../models/FormsData/Certificate'\r\nimport { DeathReason } from '../../models/FormsData/DeathReason'\r\nimport { INullFlavorR } from '../../models/INullFlavor'\r\nimport { IReference } from '../../models/IReference'\r\nimport { IDiagnosis } from '../../models/responses/IDiagnosis'\r\nimport DiagnosisService from '../../services/DiagnosisService'\r\nimport { NA, NULL_FLAVORS, UNK } from '../../utils/defaults'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\n\r\ntype ReasonProps = {\r\n  disabled?:boolean\r\n  checked?:boolean\r\n  isExt?:boolean\r\n  deathReason?: DeathReason\r\n  label: string \r\n  certificate: Certificate\r\n  fieldName?: string\r\n  onChange: (reason: DeathReason | undefined)=>void\r\n  onUp?: ()=>void\r\n  onDown?: ()=>void\r\n  onTimeChecked?: (checked: boolean)=>void \r\n  onDiagnosisChecked?: (checked: boolean, nullFlavors: INullFlavorR[] | undefined)=>void\r\n}\r\n\r\nconst Reason: FC<ReasonProps> = (props: ReasonProps) => { \r\n  const options = NULL_FLAVORS.filter((item:IReference)=>\"ASKU NA UNK\".includes(item.code))\r\n  const style = {width:'86px'}\r\n  const CSS_classes = \"p-field p-inputgroup p-mr-1\"\r\n  const [checked, setChecked] = useState(props.checked || false)   \r\n  const [diagnoses, setDiagnoses] = useState<IDiagnosis[]>([]) \r\n  const [diagnosisText, setDiagnosisText] = useState('')\r\n  const [diagnosisCode, setDiagnosisCode] = useState('')\r\n  const  getDiagnoses = (event: { query: string })=>{\r\n  const option = {} as any\r\n  if (event.query.trim().length>0) option.s_name_cont = event.query.trim()\r\n  if (!!diagnosisCode && diagnosisCode.trim().length>0) option.ICD10_start =  diagnosisCode    \r\n  if (props.isExt) DiagnosisService.fetchExtDiagnoses(option).then(response=>{\r\n        if (response.data.length>0) setDiagnoses(response.data)\r\n        else setDiagnoses([])        \r\n      }).catch((reason)=>console.log(reason)) \r\n  else DiagnosisService.fetchDiagnoses(option).then(response=>{\r\n        if (response.data.length>0) setDiagnoses(response.data)\r\n        else setDiagnoses([])        \r\n      }).catch((reason)=>console.log(reason))    \r\n  }\r\n  const  getCodes = (event: { query: string })=>{    \r\n    if (event.query.trim().length>0) {\r\n      if (props.isExt) DiagnosisService.fetchExtDiagnoses({'ICD10_start': event.query.trim()}).then(response=>{        \r\n        if (response.data.length>0) setDiagnoses(response.data)\r\n        else setDiagnoses([])        \r\n      }).catch((reason)=>console.log(reason))\r\n      else DiagnosisService.fetchDiagnoses({'ICD10_start': event.query.trim()}).then(response=>{                \r\n        if (response.data.length>0) setDiagnoses(response.data)\r\n        else setDiagnoses([])        \r\n      }).catch((reason)=>console.log(reason)) \r\n    } \r\n  }\r\n  const deathTime = props.certificate.deathDatetime  \r\n  const [deathReason, setDeathReason] = useState<DeathReason | null | undefined>(props.deathReason)  \r\n  const upButton = props.onUp === undefined ? <></> : <Button icon=\"pi pi-angle-up\" onClick={props.onUp} className=\"p-button-rounded p-button-secondary p-mr-1\" />\r\n  const downButton = props.onDown === undefined ? <></> : <Button icon=\"pi pi-angle-down\" onClick={props.onDown} className=\"p-button-rounded p-button-secondary\" />\r\n  const diagnosisOptionTemplate = (option: IDiagnosis) => {\r\n        return (\r\n          <span>\r\n            <span style={{marginRight:'4px'}}>{option.ICD10}</span>\r\n            <span>{option.s_name}</span>\r\n          </span>\r\n        )\r\n    }\r\n  const effTime = checked && !!deathReason && !!deathTime ? (<NullFlavorWrapper  \r\n      checked={checked && !!deathReason.effectiveTime} \r\n      key={`et_${deathReason.effectiveTime}`} \r\n      label={<label>Период времени между началом патол. состояния и смертью</label>} \r\n      options={options}  paraNum value={UNK}\r\n      nullFlavors={deathReason.nullFlavors}\r\n      setCheck={(e: CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n        if (!e.checked) deathReason.effectiveTime = undefined \r\n        if (nullFlavors) deathReason.nullFlavors = nullFlavors\r\n        props.onChange(deathReason)\r\n        if (props.onTimeChecked) props.onTimeChecked(e.checked)\r\n      }}\r\n      onChange={(e: IReference, nullFlavors: INullFlavorR[] | undefined)=>{        \r\n        if (nullFlavors) deathReason.nullFlavors = nullFlavors}}\r\n      field_name=\"effective_time\"\r\n      field={\r\n        <div className=\"p-fluid p-formgrid p-grid\" style={{marginLeft:'0'}}>           \r\n          <div className={CSS_classes} style={style} key={`rt_${deathTime}`}>  \r\n            <span className=\"p-inputgroup-addon\">лет</span>          \r\n            <InputText id=\"year\" type=\"number\" min={0} max={99}\r\n                onChange={(e)=>{  \r\n                const value = Number.parseInt(e.target.value)                             \r\n                deathReason.years = value === 0 ? undefined : value\r\n                props.certificate.saveReasonEffTime(deathReason)\r\n                props.onChange(deathReason)              \r\n              }}\r\n             value={deathReason.years} />         \r\n          </div>\r\n          <div className={CSS_classes} style={style}>\r\n            <span className=\"p-inputgroup-addon\">мес</span>            \r\n            <InputText id=\"month\" type=\"number\" \r\n              min={0} max={12} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value)  \r\n              deathReason.months = value === 0 ? undefined : value\r\n              props.certificate.saveReasonEffTime(deathReason) \r\n              props.onChange(deathReason)\r\n            }}\r\n            value={deathReason.months}/>\r\n          </div>\r\n          <div className={CSS_classes} style={style}> \r\n            <span className=\"p-inputgroup-addon\">нед</span>           \r\n            <InputText id=\"ned\" type=\"number\" \r\n            min={0} max={4} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value)\r\n              deathReason.weeks = value === 0 ? undefined : value\r\n              props.certificate.saveReasonEffTime(deathReason)\r\n              props.onChange(deathReason)\r\n            }}\r\n            value={deathReason.weeks}/>         \r\n          </div>\r\n          <div className={CSS_classes} style={style}>\r\n            <span className=\"p-inputgroup-addon\">сут</span>            \r\n            <InputText id=\"dne\" type=\"number\" \r\n            min={0} max={7} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value)\r\n              deathReason.days = value === 0 ? undefined : value\r\n              if (props.certificate.saveReasonEffTime(deathReason)) props.onChange(deathReason)\r\n            }}\r\n            value={deathReason.days}/>\r\n          </div>\r\n          <div className={CSS_classes} style={style}>\r\n            <span className=\"p-inputgroup-addon\">час</span>            \r\n            <InputText id=\"hours\" type=\"number\"\r\n             min={0} max={23} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value) \r\n              deathReason.hours = value === 0 ? undefined : value\r\n              if (props.certificate.saveReasonEffTime(deathReason)) props.onChange(deathReason)\r\n            }}\r\n             value={deathReason.hours}/>          \r\n          </div>\r\n          <div className={CSS_classes} style={style}>\r\n            <span className=\"p-inputgroup-addon\">мин</span>            \r\n            <InputText id=\"minut\" type=\"number\"\r\n              min={0} max={59} onChange={(e)=>{\r\n              const value = Number.parseInt(e.target.value)  \r\n              deathReason.minutes = value === 0 ? undefined : value\r\n              props.certificate.saveReasonEffTime(deathReason) \r\n              props.onChange(deathReason)\r\n            }}\r\n             value={deathReason.minutes}/>\r\n          </div>\r\n        </div>\r\n      }\r\n    />) : <></>        \r\n  return (<div className=\"p-paragraph-field\"  style={{width: '100%'}}>  \r\n    <NullFlavorWrapper disabled={props.disabled} checked={checked} key={`rs2_${deathReason?.id}_${deathReason?.diagnosis}`}\r\n      setCheck={(e: CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{\r\n        setChecked(e.checked)        \r\n        if (e.checked) {\r\n          const reason = new DeathReason()\r\n          props.onChange(reason)\r\n          setDeathReason(reason)\r\n        } else {           \r\n          if (!!deathReason) {             \r\n            deathReason.nullFlavors = []\r\n            deathReason.effectiveTime = undefined  \r\n            deathReason.diagnosis = undefined\r\n            deathReason.nullFlavors.push({parent_attr:'effective_time', code: NA} as INullFlavorR)   \r\n            deathReason.nullFlavors.push({parent_attr:'diagnosis', code: NA} as INullFlavorR)       \r\n          } \r\n          props.onChange(undefined)   \r\n        }\r\n        if (props.onDiagnosisChecked) props.onDiagnosisChecked(e.checked, nullFlavors)        \r\n      }}  \r\n      label={<label>{props.label}</label>} \r\n      options={options} \r\n      nullFlavors={!props.fieldName ? deathReason?.nullFlavors : props.certificate.nullFlavors}       \r\n      paraNum      \r\n      field_name={props.fieldName || 'diagnosis'}\r\n      value={NA}\r\n      field={\r\n        <div className=\"p-fluid p-formgrid p-grid\">     \r\n          <div className={`p-field p-col-12 ${props.isExt ? 'p-md-10' : 'p-md-8'}`}>             \r\n            <AutoComplete id=\"reason_text\" placeholder=\"Диагноз\"\r\n              suggestions={diagnoses} delay={1000} dropdown\r\n              completeMethod={getDiagnoses} itemTemplate={diagnosisOptionTemplate}\r\n              field=\"s_name\" onChange={(e) =>{ \r\n                if (!!deathReason && !!e.value.s_name) { \r\n                  deathReason.diagnosis = e.value\r\n                  if (!!deathReason.diagnosis) setDiagnosisCode(deathReason.diagnosis?.ICD10)\r\n                } else if(e.value) {\r\n                  if (!!deathReason) deathReason.diagnosis = undefined\r\n                  setDiagnosisText(e.value)                  \r\n                } else {\r\n                  if (deathReason) deathReason.diagnosis = undefined\r\n                  setDiagnosisText('')                  \r\n                }  \r\n                if (deathReason!=null) props.onChange(deathReason)\r\n              }}\r\n              value={props.deathReason?.diagnosis || diagnosisText}/>          \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-2\">\r\n            <AutoComplete id=\"reason_code\" placeholder=\"Код\"\r\n              suggestions={diagnoses} delay={1000} field=\"ICD10\"\r\n              itemTemplate={diagnosisOptionTemplate}\r\n              completeMethod={getCodes} onChange={(e) =>{ \r\n                if (!!deathReason && !!e.value.s_name) {\r\n                    deathReason.diagnosis = e.value\r\n                    if (!!deathReason.diagnosis) setDiagnosisCode(deathReason.diagnosis?.ICD10)\r\n                } else if(e.value) {\r\n                    if (!!deathReason) deathReason.diagnosis = undefined\r\n                  setDiagnosisCode(e.value)                \r\n                } else {\r\n                  if (!!deathReason) deathReason.diagnosis = undefined               \r\n                  setDiagnosisCode('')\r\n                }  \r\n                if (!!deathReason) props.onChange(deathReason)\r\n              }}\r\n              value={props.deathReason?.diagnosis || diagnosisCode}/>          \r\n          </div>\r\n          <div className={`p-field ${props.isExt ? '' : 'p-col-12 p-md-2'}`}>\r\n            {upButton}\r\n            {downButton}            \r\n          </div>\r\n        </div>\r\n      }\r\n    />  \r\n    {effTime}\r\n  </div>)\r\n}\r\nexport default observer(Reason)","import { AxiosResponse } from \"axios\"\r\nimport { $acme, ACME_URL } from \"../http\"\r\n\r\nexport default class ACMEService {\r\n  //POST request for run ACME and get result\r\n  static async runACME(input: string): Promise<AxiosResponse<string>> {\r\n    return $acme.post(`${ACME_URL}useACME`, { data_AIN: input })\r\n  }\r\n}\r\n","import Certificate from \"../models/FormsData/Certificate\"\r\nimport ACMEService from \"../services/ACME_Service\"\r\n\r\n/**\r\n * Преобразование массива причин в строку заданного формата: Позиции\r\n * соответствуют кодам МКБ-10 причин смерти, записанных без точки (4\r\n * знакоместа) и разделенные знаком / внутри раздела 1 пункта 22 нашего\r\n * свидетельства о смерти, знаком * между разделами, пробелом внутри раздела\r\n * 2 и с размещением кода внешней причины (первые 3 знака) в конце\r\n * кодограммы с добавленным знаком & впереди.\r\n *\r\n * @return результирующая строка\r\n */\r\nconst codogram = (\r\n  reason_a: string,\r\n  reason_b: string | undefined,\r\n  reason_c: string | undefined,\r\n  ext_reason: string | undefined,\r\n  reasons: Array<string | undefined>\r\n): string => {\r\n  let _result = \"\"\r\n  let _part_2 = \"\"\r\n  reasons.forEach((code) => {\r\n    if (!!code) _part_2 += \" \" + code\r\n  })\r\n  if (!reason_b && !ext_reason && !reasons[0]) {\r\n    _result = reason_a\r\n  } else if (!!reason_b && !reason_c && !ext_reason && !reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b\r\n  } else if (!!reason_b && !!reason_c && !ext_reason && !reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"/\" + reason_c\r\n  } else if (!reason_b && !ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"*\" + _part_2\r\n  } else if (!!reason_b && !reason_c && !ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"*\" + _part_2\r\n  } else if (!!reason_b && !!reason_c && !ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"/\" + reason_c + \"*\" + _part_2\r\n  } else if (!reason_b && !!ext_reason && !reasons[0]) {\r\n    _result = reason_a + \" \" + ext_reason\r\n  } else if (!!reason_b && !reason_c && !!ext_reason && !reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \" \" + ext_reason\r\n  } else if (!!reason_b && !!reason_c && !!ext_reason && !reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"/\" + reason_c + \" \" + ext_reason\r\n  } else if (!reason_b && !!ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"*\" + _part_2 + \" \" + ext_reason\r\n  } else if (!!reason_b && !reason_c && !!ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"*\" + _part_2 + \" \" + ext_reason\r\n  } else if (!!reason_b && !!reason_c && !!ext_reason && !!reasons[0]) {\r\n    _result = reason_a + \"/\" + reason_b + \"/\" + reason_c + \"*\" + _part_2 + \" \" + ext_reason\r\n  }\r\n  return _result.padEnd(120, \" \")\r\n}\r\n\r\n/**\r\n * экспорт массива причин в строку\r\n *\r\n * @param withOtherReasons определяет есть ли прочие причины\r\n * @return входную кодограмму для внешнего модуля АСМЕ\r\n * (файл с расширением ain)\r\n */\r\nconst ACME_AIN = (withOtherReasons: boolean, certificate: Certificate) => {\r\n  const deathDatetime = certificate.deathDatetime?.toDateString()\r\n  const deathDate = certificate.deathDatetime?.toLocaleDateString()\r\n  //Позиции 1-4 соответствуют году смерти\r\n  const X1X4 = !deathDatetime ? \"0000\" : deathDatetime.slice(-4)\r\n  //Позиции 5-6 соответствуют месту смерти, которая обозначена NC\r\n\r\n  //Позиции 7-12 соответствуют номеру сертификата, вместо которого для\r\n  //идентификации записи после ее возврата от АСМЕ\r\n  //заполнены левой частью форматированного до 10 знаков незначащими нулями\r\n  //значения счетчика (6 знакомест)\r\n  const X7X12 = certificate.number?.slice(-4).padStart(6, \"0\") || \"000000\"\r\n\r\n  //Позиция 13 соответствует номеру кодировщика, который обозначен как 1\r\n\r\n  //Позиции 14-17 соответствуют лоту, вместо которого для идентификации записи после\r\n  //ее возврата от АСМЕ заполнены правой частью форматированного до 10 знаков\r\n  //незначащими нулями значения счетчика (4 знакоместа)\r\n  const X14X17 = withOtherReasons ? \"0000\" : \"0001\"\r\n\r\n  //Позиция 18 соответствует номеру секции, который обозначен как 1\r\n  //Позиции 19-21 соответствуют первым трем буквам месяца смерти\r\n  const X19X21 = !deathDatetime ? \"000\" : deathDatetime.slice(4, 7)\r\n  //Позиции 22-23 соответствуют месяцу смерти\r\n  const X22X23 = !deathDate ? \"  \" : deathDate.slice(3, 5)\r\n  //Позиции 24-25 соответствуют дню смерти\r\n  const X24X25 = !deathDate ? \"  \" : deathDate.slice(0, 2)\r\n  // Позиции 26-29 соответствуют Х26Х29 (году смерти), отсутствие заполняется пробелами\r\n  const X26X29 = !deathDate ? \"    \" : deathDate.slice(-4)\r\n  // Позиции 30-33 соответствуют году версии программы SuperMICAR\r\n  // Позиции 34-37 соответствуют году версии программы MICAR200\r\n  const birthDay = certificate.patient.birth_date\r\n  const deathDay = certificate.deathDatetime\r\n  //Позиция 38 соответствует: 1 - год, 2 - месяц, 4 - день\r\n  //Позиции 39 - 41 числу годов или месяцев или дней (в зависимости от позиции 38)\r\n  let XYMD = \"9\"\r\n  let X39X41 = \"999\"\r\n  if (deathDay && birthDay) {\r\n    let _diff = deathDay.getFullYear() - birthDay.getFullYear()\r\n    if (_diff > 1) {\r\n      XYMD = \"1\"\r\n      X39X41 = _diff.toString().padStart(3, \"0\")\r\n    } else if (_diff === 1) {\r\n      _diff = deathDay.getMonth() - birthDay.getMonth()\r\n      if (_diff > 0) {\r\n        XYMD = \"1\"\r\n        X39X41 = \"001\"\r\n      } else {\r\n        XYMD = \"2\"\r\n        _diff = deathDay.getMonth() + 12 - birthDay.getMonth()\r\n        X39X41 = _diff.toString().padStart(3, \"0\")\r\n      }\r\n    } else {\r\n      _diff = deathDay.getMonth() - birthDay.getMonth()\r\n      if (_diff > 1) {\r\n        XYMD = \"2\"\r\n        X39X41 = _diff.toString().padStart(3, \"0\")\r\n      } else if (_diff === 1) {\r\n        _diff = deathDay.getDate() - birthDay.getDate()\r\n        if (_diff > 0) {\r\n          XYMD = \"1\"\r\n          X39X41 = \"001\"\r\n        } else {\r\n          XYMD = \"3\"\r\n          _diff = deathDay.getDate() + 30 - birthDay.getDate()\r\n          X39X41 = _diff.toString().padStart(3, \"0\")\r\n        }\r\n      } else {\r\n        _diff = deathDay.getDate() - birthDay.getDate()\r\n        if (_diff > 0) {\r\n          XYMD = \"3\"\r\n          X39X41 = _diff.toString().padStart(3, \"0\")\r\n        } else {\r\n          XYMD = \"3\"\r\n          X39X41 = \"000\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //Позиция 42 соответствует пункту 14 нашего свидетельства: от чего умер.\r\n  //Значению deathKind=1 (заболевание) соответствует в АСМЕ код N\r\n  //Значению deathKind=2 или 3 (несчастный случай) соответствует в АСМЕ код A\r\n  //Значению deathKind=4 (убийство) соответствует в АСМЕ код H\r\n  //Значению deathKind=5 (самоубийство) соответствует в АСМЕ код S\r\n  //Значению deathKind=6 (в ходе военных действий) соответствует в АСМЕ код A\r\n  //Значению deathKind=7 (в ходе террористических действий) соответствует в АСМЕ код A\r\n  //Значению deathKind=8 (род смерти не установлен) соответствует в АСМЕ код C\r\n  let X42 = \" \"\r\n  if (!!certificate.deathKind && certificate.deathKind > 0)\r\n    X42 = [\"N\", \"A\", \"A\", \"H\", \"S\", \"A\", \"A\", \"C\"][certificate.deathKind - 1]\r\n  //Позиция 43 соответствует одному пробелу (\" \")\r\n  //Позиция 44 - кем отвергнута запись (принимается пробел, т.е. не отвергнута)\r\n\r\n  //X45 - четвертый знак кода четвертой строки при условии, что он\r\n  //находится в пределах W00-Y34.X, кроме Y06._ и Y07._\r\n  let X45 = certificate.reasonD?.diagnosis?.ICD10\r\n  X45 =\r\n    !X45 ||\r\n    !(X45 >= \"W00\" && X45 <= \"Y34.X\") ||\r\n    X45.lastIndexOf(\"X\") > 1 ||\r\n    X45.includes(\"Y06.\") ||\r\n    X45.includes(\"Y07.\") ||\r\n    X45.length < 4\r\n      ? \" \"\r\n      : X45.substring(4, 5)\r\n\r\n  //Позиции 51-170 соответствуют кодам МКБ-10 причин смерти, записанных\r\n  //без точки (4 знакоместа) и разделенные знаком / внутри раздела 1\r\n  //пункта 18 нашего свидетельства о смерти, знаком * между разделами,\r\n  //пробелом внутри раздела 2 и с размещением кода внешней причины (первые 3 знака) в конце\r\n  //кодограммы с добавленным знаком & впереди.\r\n  let reasonA = certificate.reasonA?.diagnosis?.ICD10\r\n  reasonA = reasonA && reasonA.replace(\".\", \"\").padEnd(4, \" \")\r\n  let reasonB = certificate.reasonB?.diagnosis?.ICD10\r\n  reasonB = reasonB && reasonB.replace(\".\", \"\").padEnd(4, \" \")\r\n  let reasonC = certificate.reasonC?.diagnosis?.ICD10\r\n  reasonC = reasonC && reasonC.replace(\".\", \"\").padEnd(4, \" \")\r\n  let reasonD = certificate.reasonD?.diagnosis?.ICD10\r\n  reasonD = reasonD && reasonD.replace(\".\", \"\")\r\n  if (X45 !== \" \" && !!reasonD) {\r\n    reasonD = \"&\" + reasonD\r\n    if (reasonD.length > 4) reasonD = reasonD.slice(0, 4)\r\n  } else if (!!reasonD && X45 === \" \") reasonD = (\"&\" + reasonD).padEnd(5, \" \")\r\n  if (reasonD && reasonD.length < 4) reasonD = reasonD.padEnd(4, \" \")\r\n  const reasons = []\r\n  reasons[0] =\r\n    certificate.deathReasons.length < 1 || !withOtherReasons\r\n      ? undefined\r\n      : certificate.deathReasons[0].diagnosis?.ICD10.replace(\".\", \"\").padEnd(4, \" \")\r\n  reasons[1] =\r\n    certificate.deathReasons.length < 2 || !withOtherReasons\r\n      ? undefined\r\n      : certificate.deathReasons[1].diagnosis?.ICD10.replace(\".\", \"\").padEnd(4, \" \")\r\n  reasons[2] =\r\n    certificate.deathReasons.length < 3 || !withOtherReasons\r\n      ? undefined\r\n      : certificate.deathReasons[2].diagnosis?.ICD10.replace(\".\", \"\").padEnd(4, \" \")\r\n  reasons[3] =\r\n    certificate.deathReasons.length < 4 || !withOtherReasons\r\n      ? undefined\r\n      : certificate.deathReasons[3].diagnosis?.ICD10.replace(\".\", \"\").padEnd(4, \" \")\r\n\r\n  reasonA = reasonA && reasonA.lastIndexOf(\"X\") > 1 ? reasonA.slice(0, 3) + \" \" : reasonA\r\n  reasonB = reasonB && reasonB.lastIndexOf(\"X\") > 1 ? reasonB.slice(0, 3) + \" \" : reasonB\r\n  reasonC = reasonC && reasonC.lastIndexOf(\"X\") > 1 ? reasonC.slice(0, 3) + \" \" : reasonC\r\n\r\n  const reasons_in = reasons.map((reason) => {\r\n    return reason && reason.lastIndexOf(\"X\") > 1 ? reason.substring(0, 3) + \" \" : reason\r\n  })\r\n\r\n  //Далее позиции 90 - 170 заняты пробелами, т.е. Space(81)\r\n\r\n  //Позиция 171 - вскрытие (Y - да, N - нет, U - поле не заполнено)\r\n  //В базе код вскрытия 4, а не 1!!!!!!\r\n\r\n  const X171 = !certificate.basisDetermining ? \"U\" : certificate.basisDetermining === 4 ? \"Y\" : \"N\"\r\n  //Позиции 172-173 заняты пробелами\r\n  //Позиция 174 в случае смерти беременной (21п.)\r\n  let X174 = \"3\"\r\n  if (certificate.pregnancyConnection) X174 = [\"9\", \"3\", \"4\", \"1\"][certificate.pregnancyConnection]\r\n\r\n  //Позиция 175 занята пробелом\r\n  //Позиции 176-177 - месяц даты травмы (пункт 15 нашего свитетельства), отсутствие обозначено 99\r\n  const extReasonTime = certificate.extReasonTime?.toLocaleString()\r\n  const X176X177 = !extReasonTime ? \"99\" : extReasonTime.substring(3, 5)\r\n  //Позиции 178-179 - день даты травмы (пункт 15 нашего свитетельства), отсутствие обозначено 99\r\n  const X178X179 = !extReasonTime ? \"99\" : extReasonTime.substring(0, 2)\r\n  //Позиции 180-183 - год даты травмы (пункт 15 нашего свитетельства), отсутствие обозначено 9999\r\n  const X180X183 = !extReasonTime ? \"9999\" : extReasonTime.substring(6, 10)\r\n\r\n  //Позиции 184-187 (время травмы) заполнены 9999\r\n  //Позиция 188 (смерть от травмирования)\r\n\r\n  const X188 = !certificate.deathKind || certificate.deathKind !== 3 ? \" \" : \"Y\"\r\n\r\n  //Позиции 189 - 218 заполнены 30 пробелами, т.е. Space(30)\r\n  //Позиция 219 соответствует пятому знаку кода внешней причины (не считая точки)\r\n  let X219 = certificate.reasonD?.diagnosis?.ICD10\r\n  X219 = X219 && X219.length > 5 ? X219.substring(5, 6) : \" \"\r\n  //Позиции 220 - 231 могут быть заполнены кодом территории (п.7 свидетельства - республика, область, край)\r\n  let X220X231 = certificate.patient.person?.address?.state\r\n  X220X231 = !X220X231 ? \"            \" : X220X231.padStart(12, \" \")\r\n\r\n  //Позиции 232 - 261 для дополнительной информации заполнены пробелами, т.е. Space(30) с буквой q на конце\r\n  //ACMEAIN - объединяющая строка, формирующая входную кодограмму для внешнего модуля АСМЕ (файл с расширением ain)\r\n  const ACMEAIN =\r\n    X1X4 +\r\n    \"NC\" +\r\n    X7X12 +\r\n    \"1\" +\r\n    X14X17 +\r\n    \"1\" +\r\n    X19X21 +\r\n    X22X23 +\r\n    X24X25 +\r\n    X26X29 +\r\n    \"20042004\" +\r\n    XYMD +\r\n    X39X41 +\r\n    X42 +\r\n    \"  \" +\r\n    X45 +\r\n    \"     \" +\r\n    codogram(reasonA || \"    \", reasonB, reasonC, reasonD, reasons_in) +\r\n    X171 +\r\n    \"  \" +\r\n    X174 +\r\n    \" \" +\r\n    X176X177 +\r\n    X178X179 +\r\n    X180X183 +\r\n    \"9999\" +\r\n    X188 +\r\n    \"                              \" +\r\n    X219 +\r\n    X220X231\r\n  return ACMEAIN.padEnd(260, \" \") + \"q\"\r\n}\r\n/**\r\n * Достаем первоначальную причину смерти из кодограммы ACME Во входной\r\n * кодограмме позиции 51-54 соответствуют первоначальной причине смерти, а\r\n * позиция 45 - четвертому знаку внешней причины. При отсутствии четвертого\r\n * знака добавляется знак Х.\r\n *\r\n * @param xACME - входная кодограмма из файла *.TIN\r\n * @return первоначальную причину смерти или пустую строку\r\n */\r\nconst parse_ACME_TIN = (xACME: string) => {\r\n  let _sb = \"\"\r\n  const x45 = xACME.substring(44, 45)\r\n  const x54 = xACME.substring(53, 54)\r\n  const x51_53 = xACME.substring(50, 53)\r\n  const spX45 = \" \" === x45\r\n  const spX54 = \" \" === x54\r\n  const spX51_53 = \"   \" === x51_53\r\n  if (spX45 && !spX54) _sb = `${x51_53}.${x54}`\r\n  else if (spX45 && spX54 && !spX51_53) _sb = `${x51_53}.X`\r\n  else if (!spX45 && !spX51_53 && \"V01\" < x51_53 && \"Y98.X\" >= x51_53) _sb = `${x51_53}.${x45}`\r\n  else if (!spX45 && !spX51_53 && \"V\" > x51_53) _sb = `${x51_53}.${x54}`\r\n  return _sb\r\n}\r\n\r\n/**\r\n * экспорт массива причин в строку АСМЕAIN запрос сервиса ACME\r\n * чтение парсинг результата АСМЕTIN и его обработка.\r\n *\r\n * @return код результата операции\r\n */\r\nexport const doACME = (\r\n  certificate: Certificate,\r\n  onSucccess: (result: string) => void,\r\n  onError: (message: string) => void\r\n) => {\r\n  let _result = -1\r\n  try {\r\n    // Получаем строку входных параметров для внешнего модуля АСМЕ\r\n    const strACMEAIN1 = ACME_AIN(true, certificate)\r\n    _result = -2\r\n    const isReasonD = !!certificate.reasonD && !!certificate.reasonD.diagnosis && !!certificate.reasonD.diagnosis.ICD10\r\n    // Получаем дополнительную строку входных параметров\r\n    // без прочих причин на входе, если внешняя причина определена\r\n    const strACMEAIN2 = isReasonD ? ACME_AIN(false, certificate) : \"\"\r\n    _result = -3\r\n    // делаем запрос к сервису АСМЕ\r\n    ACMEService.runACME(strACMEAIN1 + strACMEAIN2)\r\n      .then((response) => {\r\n        if (response.data && response.data.length < 120) {\r\n          //Длина менее 120, что-то пошло не так\r\n          onError(`Сбой операции: получен некорректный ответ от АСМЕ: ${response.data}`)\r\n        } else {\r\n          // сервис вернул корректный результат\r\n          const TINs = (response.data as any).data_TIN.split(\"\\r\\n\")\r\n          console.log(\"response.data\", response.data)\r\n          if (!isReasonD) onSucccess(parse_ACME_TIN(TINs[0]))\r\n          else {\r\n            let _res = \"\"\r\n            let _alter = \"\"\r\n            if (Number.parseInt(TINs[0].slice(6, 12) + TINs[0].slice(13, 17)) === 1) {\r\n              _res = parse_ACME_TIN(TINs[0])\r\n              _alter = parse_ACME_TIN(TINs[1])\r\n            } else {\r\n              _res = parse_ACME_TIN(TINs[1])\r\n              _alter = parse_ACME_TIN(TINs[0])\r\n            }\r\n            if (_res < \"V00\" || _res > \"Y99.X\") _res = \"\"\r\n            if (\"\" === _res) _res = _alter\r\n            onSucccess(_res)\r\n          }\r\n        }\r\n      })\r\n      .catch((reason) => {\r\n        onError(`Сбой операции: код завершения - 0, подробности: ${reason}`)\r\n      })\r\n    _result = 0\r\n  } catch (error) {\r\n    onError(`Сбой операции: код завершения ${_result}, подробности: ${error}`)\r\n  }\r\n}\r\n","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext} from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { DeathReason } from '../../models/FormsData/DeathReason'\r\nimport Reason from '../inputs/Reason'\r\nimport { Button } from 'primereact/button'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { doACME } from '../../utils/acme'\r\n\r\n\r\n const Section7: FC = () => {\r\n  const { certificateStore, layoutStore } = useContext(Context)   \r\n  \r\n  \r\n  const header = () => {\r\n      return <span> <span className='paragraph p-mr-1'>22(I).</span>  Причины смерти.</span>\r\n    }\r\n  const certificate = certificateStore.cert     \r\n  const mainCSSClass = (isACME: boolean) => isACME  ? \"p-fluid p-d-flex p-jc-start ACME-reason\" : \"p-fluid p-d-flex p-jc-start\"\r\n  const reasonBckecked = !!certificate.reasonB\r\n  const reasonCckecked = !!certificate.reasonC\r\n  const reasonDckecked = !!certificate.reasonD \r\n\r\n  const reasonIDExchange = (first: DeathReason, second: DeathReason) => {\r\n    if (!first.id && !second.id) return\r\n    let _id = first.id\r\n    first.id = second.id\r\n    second.id = _id      \r\n  }\r\n      \r\n  return (<>    \r\n    <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n      <div className={mainCSSClass(!!certificate.reasonA && certificate.reasonA===certificate.reasonACME)}\r\n       style={{width: '98%'}} key={`ra_${certificate.reasonA?.diagnosis?.ICD10}`}> \r\n        <div className='paragraph p-mr-1'>а) </div>           \r\n        <Reason label=\"Болезнь или состояние, непосредственно приведшее к смерти\" \r\n          deathReason={certificate.reasonA} certificate={certificate}\r\n           key={`ra2_${certificate.reasonA?.effectiveTime}`} \r\n          onChange={(reason: DeathReason | undefined)=>{ \r\n            if (reason!==certificate.reasonA ) { certificate.reasonA = reason\r\n            layoutStore.message = { severity: 'success', summary: 'Успешно', detail: 'Причина А изменена, рекомендуется сохранить изменения', life: 3000 }}\r\n           }}\r\n          disabled checked\r\n          fieldName='a_reason' \r\n          onDown={()=>{\r\n            if (!certificate.reasonA && !certificate.reasonB) return\r\n            reasonIDExchange(certificate.reasonA || new DeathReason(), \r\n            certificate.reasonB || new DeathReason())            \r\n            const reason = certificate.reasonA\r\n            certificate.reasonA = certificate.reasonB\r\n            certificate.reasonB = reason           \r\n          }}\r\n        />\r\n      </div>  \r\n      <div className={mainCSSClass(!!certificate.reasonB && certificate.reasonB===certificate.reasonACME)} style={{width: '98%'}} key={`rb_${certificate.reasonB?.diagnosis?.ICD10}`}>   \r\n        <div className='paragraph p-mr-1'>б) </div>\r\n        <Reason label=\"Патологическое состояние, которое привело к возникновению непос- редственной причины смерти\" \r\n          deathReason={certificate.reasonB} certificate={certificate}  key={`rb2_${certificate.reasonB?.id}`}\r\n          onChange={(reason: DeathReason | undefined)=>{ \r\n            if (reason!==certificate.reasonB ) \r\n            certificate.reasonB = reason \r\n          }}           \r\n          checked={reasonBckecked} \r\n          fieldName='b_reason' \r\n          onDown={()=>{\r\n            if (!certificate.reasonB && !certificate.reasonC) return\r\n            reasonIDExchange(certificate.reasonB || new DeathReason(), \r\n            certificate.reasonC || new DeathReason())\r\n            const reason = certificate.reasonB\r\n            certificate.reasonB = certificate.reasonC\r\n            certificate.reasonC = reason\r\n          }}  \r\n          onUp={()=>{\r\n            if (!certificate.reasonB && !certificate.reasonC) return\r\n            reasonIDExchange(certificate.reasonC || new DeathReason(),\r\n             certificate.reasonB || new DeathReason())\r\n            const reason = certificate.reasonB\r\n            certificate.reasonB = certificate.reasonA\r\n            certificate.reasonA = reason\r\n          }}            \r\n        />\r\n      </div>  \r\n      <div className={mainCSSClass(!!certificate.reasonC && certificate.reasonC===certificate.reasonACME)} \r\n      style={{width: '98%'}} key={`rc_${certificate.reasonC?.diagnosis?.ICD10}`}>  \r\n        <div className='paragraph p-mr-1'>в) </div>\r\n        <Reason label=\"Первоначальная причина смерти\" \r\n          deathReason={certificate.reasonC} certificate={certificate} \r\n          key={`rc2_${reasonCckecked}_${certificate.reasonC?.effectiveTime}`}\r\n          onChange={(reason: DeathReason | undefined)=>{ \r\n            if (reason !== certificate.reasonC) certificate.reasonC = reason            \r\n          }} fieldName='c_reason' checked={reasonCckecked}\r\n          onUp={()=>{\r\n            if (!certificate.reasonC && !certificate.reasonB) return\r\n            reasonIDExchange(certificate.reasonC || new DeathReason(),\r\n             certificate.reasonB || new DeathReason())\r\n            const reason = certificate.reasonC\r\n            certificate.reasonC = certificate.reasonB\r\n            certificate.reasonB = reason\r\n          }}        \r\n        />\r\n      </div>\r\n      <div className={mainCSSClass(false)}  style={{width: '98%'}} >  \r\n        <div className='paragraph p-mr-1'>г) </div>\r\n        <Reason label=\"Внешняя причина смерти при травмах и отравлениях\" \r\n          deathReason={certificate.reasonD} certificate={certificate} \r\n          key={`rd2_${reasonDckecked}_${certificate.reasonD?.effectiveTime}`}\r\n          onChange={(reason: DeathReason | undefined)=>{ if (reason!==certificate.reasonD ) certificate.reasonD = reason }} fieldName='d_reason'\r\n          checked={reasonDckecked}  \r\n          isExt       \r\n        />   \r\n      </div>  \r\n      <div className={mainCSSClass(false)+'p-fluid'}  style={{width: '98%',padding:'4px'}} >  \r\n        <Button type=\"button\" label=\"ACME\" \r\n          style={{width: '5rem', height: '2.4rem'}} \r\n          className='p-button-warning p-mr-2'\r\n          onClick={()=>{            \r\n            if (certificate.reasonA?.diagnosis?.ICD10) {\r\n              if (certificate.reasonC?.diagnosis?.ICD10 && certificate.reasonC.diagnosis.ICD10.includes('U07')) {\r\n                  certificate.changeReasonACME(certificate.reasonC.diagnosis.ICD10)\r\n                  layoutStore.message = { severity: 'success', summary: 'Успешно', detail: `${certificate.reasonC.diagnosis.ICD10}-первопричина определенная АСМЕ`, life: 3000 }\r\n              } else                 \r\n              doACME(certificate, result=>{\r\n                certificate.changeReasonACME(result)\r\n                layoutStore.message = { severity: 'success', summary: 'Успешно', detail: `${result}-первопричина определенная АСМЕ`, life: 3000 }           \r\n              },message=>{\r\n                layoutStore.message = { severity: 'error', summary: 'Сбой', detail: message, life: 7000 }\r\n              })\r\n            } else {\r\n              layoutStore.message = { severity: 'warn', summary: 'Oтклонено', detail: \"Причина а) отсутствует\", life: 7000 }\r\n            }\r\n          }}\r\n        />\r\n         <div className=\"p-field  p-grid\">       \r\n          <label htmlFor=\"ACME\" \r\n                 className=\"p-col-fixed\" \r\n                 style={{width:'226px'}}>Первоначальная причина по АСМЕ</label>   \r\n          <div className='p-col-12 p-md-2'>                  \r\n            <InputText id=\"ACME\" type=\"text\" \r\n              disabled value={certificate.reasonACME?.diagnosis?.ICD10 || ''}  \r\n            />\r\n          </div>\r\n         </div>            \r\n      </div>        \r\n    </Card>  \r\n  </>)\r\n  }\r\n  export default observer(Section7) ","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useEffect, useState } from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport '../../styles/components/Calendar.css'\r\nimport { DeathReason } from '../../models/FormsData/DeathReason'\r\nimport { IDeathReason } from '../../models/responses/IDeathReason'\r\nimport Reason from '../inputs/Reason'\r\nimport { Button } from 'primereact/button'\r\nimport { IMedicalServs } from '../../models/responses/IMedservs'\r\nimport DiagnosisService from '../../services/DiagnosisService'\r\nimport { AutoComplete } from 'primereact/autocomplete'\r\nimport { Procedure } from '../../models/FormsData/Procedure'\r\nimport { IProcedure } from '../../models/responses/IProcedure'\r\nimport { Calendar } from 'primereact/calendar'\r\nimport { Checkbox } from 'primereact/checkbox'\r\nimport { DataTable } from 'primereact/datatable'\r\nimport { Column } from 'primereact/column'\r\nimport { EXT_REASON_SUG, EXT_REASON_TIME_SUG } from '../../utils/defaults'\r\nimport { InputText } from 'primereact/inputtext'\r\n\r\n\r\n\r\n const Section8: FC = () => {\r\n  const { certificateStore, temporaryIDStore, suggestionsStore } = useContext(Context) \r\n  const checkReason = suggestionsStore.suggestions[EXT_REASON_SUG].done && suggestionsStore.suggestions[EXT_REASON_TIME_SUG].done\r\n  \r\n  \r\n  const certificate = certificateStore.cert   \r\n  const [newReason, setNewReason] = useState(new DeathReason({id: temporaryIDStore.lastDeathReasonID} as IDeathReason))\r\n  const [medicalServs, setMedicalServs] = useState<IMedicalServs[]>([]) \r\n  const [medservText, setMedservText] = useState('')  \r\n  const [medservCode, setMedservCode] = useState('')\r\n  const [procedure, setProcedure] = useState<Procedure | null>(null)  \r\n  const [dateETChecked, setDateETChecked] = useState(false)\r\n  const [diagnosChecked, setDiagnosChecked] = useState(true)\r\n  const [selectedProcedures, setSelectedProcedures] = useState<Procedure[]>([])\r\n  const [selectedReasons, setSelectedReasons] = useState<DeathReason[]>([])\r\n  useEffect(()=>{\r\n    suggestionsStore.suggestions[EXT_REASON_SUG].done = !(newReason.diagnosis === undefined && (newReason.nullFlavors.length===0 || newReason.nullFlavors.findIndex((item)=>item.parent_attr==='diagnosis')===-1))\r\n    suggestionsStore.suggestions[EXT_REASON_TIME_SUG].done = !(newReason.effectiveTime === undefined && newReason.nullFlavors.findIndex((item)=>item.parent_attr==='effective_time')===-1)\r\n  },[newReason.diagnosis, newReason.effectiveTime, suggestionsStore.suggestions, newReason.nullFlavors]) \r\n  const header = () => {\r\n      return <><span><span className='paragraph p-mr-1'>22(II).</span>Прочие состояния.</span> \r\n      <Button icon=\"pi pi-plus\" className=\"p-ml-auto p-mr-2 p-button-sm p-button-raised p-button-success\" label=\"Добавить состояние\" \r\n        disabled={!checkReason || (!newReason.diagnosis && newReason.procedures.length===0) || procedure!==null }\r\n        onClick={()=>{\r\n          if (!certificate.deathReasons.includes(newReason)) certificate.deathReasons.push(newReason)\r\n          setNewReason(new DeathReason({id: temporaryIDStore.lastDeathReasonID} as IDeathReason))                \r\n        }}\r\n      />\r\n      <Button icon=\"pi pi-minus\" className=\"p-button-sm p-button-raised p-button-danger\"  \r\n        title=\"Удалить состояние\" disabled={selectedReasons.length===0} \r\n        onClick={()=>{\r\n          let _reasons = certificate.deathReasons?.filter(val => !selectedReasons.includes(val));\r\n          certificate.deathReasons = _reasons\r\n          setSelectedReasons([])\r\n        }} />\r\n      </>\r\n    }\r\n    \r\n  const  getMedservs = (event: { query: string })=>{\r\n  const option = {} as any\r\n  if (event.query.trim().length>0) option.name_cont = event.query.trim()\r\n  if (medservCode.trim().length>0) option.s_code_start =  medservCode    \r\n  DiagnosisService.fetchMedicalServs(option).then(response=>{\r\n        if (response.data.length>0) setMedicalServs(response.data)\r\n        else setMedicalServs([])        \r\n      }).catch((reason)=>console.log(reason))    \r\n  }\r\n  const  getCodes = (event: { query: string })=>{    \r\n    if (event.query.trim().length>0) {\r\n      DiagnosisService.fetchMedicalServs({'s_code_start': event.query.trim()}).then(response=>{        \r\n        if (response.data.length>0) setMedicalServs(response.data)\r\n        else setMedicalServs([])        \r\n      }).catch((reason)=>console.log(reason))       \r\n    } \r\n  }\r\n\r\n  const setMedServValue = (e:any)=>{\r\n    if (procedure) procedure.medicalServ = e.value\r\n    else  setProcedure(new Procedure({id: temporaryIDStore.lastProcedureID, medical_serv: e.value} as IProcedure))    \r\n    setMedservText(e.value.name)\r\n    setMedservCode(e.value.s_code)              \r\n  } \r\n  const medServOptionTemplate = (option: IMedicalServs) => {\r\n        return (\r\n          <span>\r\n            <span style={{marginRight:'4px'}}>{option.s_code}</span>\r\n            <span>{option.name}</span>\r\n          </span>\r\n        )\r\n    }\r\n\r\n  const mainCSSClass = (isACME: boolean) => isACME  ? \"p-fluid p-d-flex p-jc-start ACME-reason\" : \"p-fluid p-d-flex p-jc-start\"\r\n  \r\n  const procTimeBodyTemplate = (rowData: Procedure) => {\r\n    return rowData.timeStr()\r\n  }\r\n  const reasonTimeBodyTemplate = (rowData: DeathReason) => {\r\n    let _resultStr = ''\r\n    if (rowData.effectiveTime === undefined) return _resultStr\r\n    if (rowData.years && rowData.years > 0) _resultStr += `лет:${rowData.years} `\r\n    if (rowData.months && rowData.months > 0) _resultStr += `мес: ${rowData.months}`\r\n    if (rowData.weeks && rowData.weeks > 0) _resultStr += `нед: ${rowData.weeks}`\r\n    if (rowData.days && rowData.days > 0) _resultStr += `дн: ${rowData.days}`\r\n    if (rowData.hours && rowData.hours > 0) _resultStr += `час: ${rowData.hours}`\r\n    if (rowData.minutes && rowData.minutes > 0) _resultStr += `мин: ${rowData.minutes}`\r\n    return _resultStr\r\n  }\r\n  \r\n  const reasonTextBodyTemplate = (rowData: DeathReason) => {\r\n    let _resultStr = ''\r\n    if (rowData.diagnosis) _resultStr = rowData.diagnosis.s_name+';'\r\n    if (rowData.procedures.length>0) _resultStr += rowData.procNames()\r\n    return _resultStr\r\n  }  \r\n  return (<>    \r\n    <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>\r\n      <div className={mainCSSClass(false)}\r\n       style={{width: '98%'}} key={`ra_${newReason.id}_${diagnosChecked}`}>      \r\n        <div className='paragraph p-mr-1'>*)</div>\r\n        <Reason label=\"способствовавшие смерти, но не связанные с болезнью или патологическим состоянием, приведшим к ней\" \r\n          deathReason={newReason} certificate={certificate}\r\n          key={`ra2_${newReason.effectiveTime}`}           \r\n          onChange={(reason: DeathReason | undefined)=>{  \r\n            if (reason) {              \r\n              if (reason!==newReason) {\r\n                if (!reason.id) reason.id = temporaryIDStore.lastDeathReasonID\r\n                setNewReason(reason)\r\n              }  \r\n            }           \r\n          }}\r\n          onDiagnosisChecked={(checked)=>setDiagnosChecked(checked)}\r\n          checked={diagnosChecked}                                   \r\n        />                   \r\n      </div>\r\n      <div className='p-fluid p-formgrid p-grid p-add-block' style={{marginLeft:'1rem'}}>   \r\n          <div className='p-field p-col-12 p-md-9'>             \r\n            <AutoComplete id=\"procedure_text\" placeholder=\"Наименование хирургической операции\"\r\n              suggestions={medicalServs} delay={1000} dropdown \r\n              completeMethod={getMedservs} itemTemplate={medServOptionTemplate}\r\n              field=\"name\" onChange={(e) =>{ \r\n                if (e.value.s_code) setMedServValue(e)\r\n                else setMedservText(e.value)\r\n              }}\r\n              value={medservText}/>          \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-3\">\r\n            <AutoComplete id=\"procedure_code\" placeholder=\"Код\"\r\n              suggestions={medicalServs} delay={1000} field=\"s_code\"\r\n              itemTemplate={medServOptionTemplate}\r\n              completeMethod={getCodes} onChange={(e) =>{ \r\n                 if (e.value.s_code) setMedServValue(e)\r\n                 else setMedservCode(e.value)               \r\n              }}\r\n              value={medservCode}/>          \r\n          </div>  \r\n          <div className=\"p-field p-col-12\">\r\n            <InputText id=\"procedure_alterText\" disabled={!procedure}\r\n            placeholder=\"Свое наименование, если оно отличается от официального\"\r\n               onChange={e =>{ \r\n                if (procedure) procedure.textValue = e.target.value               \r\n              }}\r\n              value={procedure?.textValue || ''}/>          \r\n          </div>       \r\n          <div className=\"p-field p-col-12  p-d-flex p-ai-center\">                          \r\n            <Calendar id=\"effectiveDate\" key={`effectiveDate${dateETChecked}`} className=\"p-mr-3\" inputStyle={{width:'12.5rem'}} \r\n              showTime={!dateETChecked} dateFormat=\"dd.mm.yy\" locale=\"ru\"\r\n              mask={dateETChecked ? '99.99.9999' : '99.99.9999 99:99'} panelStyle={{margin:'10rem'}}                           \r\n              value={procedure?.effectiveTime} \r\n              onChange={(e)=>{ \r\n                if (procedure===null) return \r\n                if (e.target.value) {                  \r\n                  procedure.effectiveTime = e.target.value as Date\r\n                } else procedure.effectiveTime =  undefined               \r\n               }}\r\n              showIcon \r\n            />            \r\n            <div className=\"p-field-checkbox\">              \r\n              <Checkbox checked={dateETChecked} \r\n                inputId=\"et_date\" \r\n                onChange={e=>{setDateETChecked(e.checked)}}\r\n              />\r\n              <label htmlFor=\"et_date\">Только дата</label>\r\n            </div>                       \r\n            <Button icon=\"pi pi-plus\" className=\"p-ml-auto p-mr-2 p-button-sm p-button-raised p-button-success\"  title=\"Добавить хир.операцию\" disabled={procedure===null || (procedure.medicalServ===undefined && procedure.textValue === undefined)} onClick={()=>{\r\n              if (procedure) { \r\n                if (newReason.procedures.findIndex(pr=>pr.guid === procedure.guid)===-1) newReason.procedures.push(procedure)\r\n                setProcedure(null) \r\n                setMedservCode('')\r\n                setMedservText('')               \r\n              }  \r\n            }} />   \r\n            <Button icon=\"pi pi-minus\" className=\"p-button-sm p-button-raised p-button-danger\"  title=\"Удалить  хир.операцию\" disabled={selectedProcedures.length===0} onClick={()=>{\r\n              let _procedures = newReason.procedures.filter(val => !selectedProcedures.includes(val));\r\n              newReason.procedures = _procedures\r\n              setSelectedProcedures([])\r\n            }} />                    \r\n          </div>\r\n          <div className=\"p-field p-col-12\">\r\n            <DataTable value={newReason.procedures} selection={selectedProcedures}\r\n              responsiveLayout=\"scroll\" dataKey={\"id\"}\r\n              className=\"p-datatable-sm\" emptyMessage=\"Операции отсутствуют\" style={{width:'100%'}} \r\n              onSelectionChange={e =>{\r\n                setSelectedProcedures(e.value)                \r\n                if (e.value && e.value.length>0) {\r\n                  const pr = e.value[0] as Procedure\r\n                  setProcedure(pr)\r\n                  setDateETChecked(pr.effectiveTime?.getHours() === 0 && pr.effectiveTime.getMinutes()=== 0)\r\n                  setMedservCode(pr.medicalServ.s_code)\r\n                  setMedservText(pr.medicalServ.name)\r\n                } else {\r\n                  setProcedure(null) \r\n                  setMedservCode('')\r\n                  setMedservText('') \r\n                }\r\n              }}  >\r\n              <Column selectionMode=\"multiple\" headerStyle={{width: '3em'}}></Column>\r\n              <Column field=\"medicalServ.name\" header=\"Наименование\"></Column>\r\n              <Column header=\"Время\" body={procTimeBodyTemplate}></Column>                            \r\n            </DataTable>\r\n          </div>  \r\n        </div> \r\n        <DataTable value={certificate.deathReasons} style={{marginTop:'8px', marginLeft:'10px'}} \r\n          className=\"p-datatable-sm\" emptyMessage=\"Состояния отсутствуют\" selection={selectedReasons}  \r\n          responsiveLayout=\"scroll\" dataKey={\"id\"} onSelectionChange={e=>{            \r\n            setSelectedReasons(e.value)            \r\n            if (e.value && e.value.length>0) setNewReason(e.value[0])\r\n            else {\r\n              setNewReason(new DeathReason({id: temporaryIDStore.lastDeathReasonID} as IDeathReason)) \r\n            }\r\n          }}>\r\n          <Column selectionMode=\"multiple\" headerStyle={{width: '3em'}}></Column>\r\n          <Column header=\"Состояние\" body={reasonTextBodyTemplate}></Column>\r\n          <Column header=\"Период времени\" body={reasonTimeBodyTemplate}></Column>\r\n          <Column field=\"diagnosis.ICD10\" header=\"Kод МКБ10\"></Column>              \r\n        </DataTable>            \r\n    </Card>  \r\n  </>)\r\n  }\r\n  export default observer(Section8) ","//Связь смерти с ДТП\r\n//OID: 1.2.643.5.1.13.13.99.2.24  Версия: 1.1\r\nexport const TRAFFIC_ACCIDENT = [\r\n  { code: 1, name: \"в течение 30 суток\" },\r\n  { code: 2, name: \"из них в течение 7 суток\" },\r\n]\r\n","//Связь смерти с беременностью\r\n//OID: 1.2.643.5.1.13.13.99.2.25  Версия: 1.2\r\nexport const PREGNANCY_CONNECTION = [\r\n  { code: 1, name: \"смерть беременной (независимо от срока и локализации)\" },\r\n  { code: 2, name: \"в процессе родов\" },\r\n  { code: 3, name: \"в течение 42 дней после окончания беременности\" },\r\n  { code: 4, name: \"в течение 43-365 дней после окончания беременности\" },\r\n]\r\n","import { removeEmpty } from \"../../utils/functions\"\r\nimport { IAudit } from \"../IAudit\"\r\nimport { IDoctor } from \"../IDoctor\"\r\nimport Doctor from \"./Doctor\"\r\n\r\n//генерит API запрос на добавление врача\r\nexport const genCreateDoctorRequest = (doctor: IDoctor) => {\r\n  let _doctor = {\r\n    id: doctor.id,\r\n    guid: doctor.guid,\r\n    position_id: doctor.position?.id,\r\n    organization_id: doctor.organization?.id,\r\n    person_attributes: {\r\n      id: doctor.person?.id,\r\n      person_name_attributes: { ...doctor.person?.person_name },\r\n      SNILS: doctor.person?.SNILS,\r\n      address_attributes: doctor.person?.address ? { ...doctor.person?.address } : undefined,\r\n      contacts_attributes:\r\n        doctor.person?.contacts && doctor.person?.contacts?.length > 0\r\n          ? doctor.person?.contacts.map((item) => item)\r\n          : undefined,\r\n    },\r\n    null_flavor_attributes:\r\n      doctor.null_flavors && doctor.null_flavors?.length > 0 ? doctor.null_flavors.map((item) => item) : undefined,\r\n  }\r\n  _doctor = removeEmpty(_doctor)\r\n  return _doctor\r\n}\r\n\r\n//Стандартные настройки JSON рендеринга модели врача\r\nexport const DOCTOR_RENDER_OPTIONS = {\r\n  render_options: { only: [\"id\", \"guid\"], include: [\"position\", \"person\", \"organization\"] },\r\n  includes: [\"position\", \"person\", \"organization\"],\r\n  organization: { only: [\"id\", \"name\"] },\r\n  position: { only: [\"id\", \"name\"] },\r\n  person: { only: [\"id\", \"SNILS\"], include: [\"person_name\", \"address\", \"contacts\"] },\r\n}\r\n\r\n//генерит API запрос на обновление врача\r\nexport const genUpdateDoctorRequest = (oldValue: IDoctor, newValue: Doctor) => {\r\n  if (oldValue.id !== newValue.id) return false\r\n  let _request = { Doctor: {}, audits: [] as IAudit[] } as any\r\n  const createAudit = (audit: IAudit) => {\r\n    let _audits = _request.audits.filter((item: IAudit) => item.field !== audit.field)\r\n    if (_audits) {\r\n      _audits.push(audit)\r\n      _request.audits = _audits\r\n    } else _request.audits.push(audit) // keep only uniq changes\r\n  }\r\n  if (oldValue.position?.id !== newValue.position?.id) {\r\n    _request.Doctor.position_id = newValue.position?.id\r\n    createAudit({\r\n      field: \"position\",\r\n      before: oldValue.position?.id + \"\",\r\n      after: newValue.position?.id + \"\",\r\n      detail: `должность: ${oldValue.position?.name} -> ${newValue.position?.name}`,\r\n    } as IAudit)\r\n  }\r\n  let _person_attributes = {} as any\r\n  const oldPerson = oldValue.person\r\n  const newPerson = newValue.person\r\n  if (oldPerson?.SNILS !== newPerson?.SNILS) {\r\n    _person_attributes.SNILS = newPerson?.SNILS\r\n    createAudit({\r\n      field: \"person.SNILS\",\r\n      before: oldPerson?.SNILS,\r\n      after: newPerson?.SNILS,\r\n      detail: `СНИЛС: ${oldPerson?.SNILS} -> ${newPerson?.SNILS}`,\r\n    } as IAudit)\r\n  }\r\n  let _person_name_attributes = {} as any\r\n  const oldFIO = oldPerson?.person_name\r\n  const newFIO = newValue.person?.fio\r\n  if (!!oldFIO && !!newFIO) {\r\n    if (oldFIO.family !== newFIO.family) {\r\n      _person_name_attributes.family = newFIO.family\r\n      createAudit({\r\n        field: \"person.person_name.family\",\r\n        before: oldFIO.family,\r\n        after: newFIO.family,\r\n        detail: `фамилия: ${oldFIO.family} -> ${newFIO.family}`,\r\n      } as IAudit)\r\n    }\r\n    if (oldFIO.given_1 !== newFIO.given_1) {\r\n      _person_name_attributes.given_1 = newFIO.given_1\r\n      createAudit({\r\n        field: \"person.person_name.given_1\",\r\n        before: oldFIO.given_1,\r\n        after: newFIO.given_1,\r\n        detail: `имя: ${oldFIO.given_1} -> ${newFIO.given_1}`,\r\n      } as IAudit)\r\n    }\r\n    if (oldFIO.given_2 !== newFIO.given_2) {\r\n      _person_name_attributes.given_2 = newFIO.given_2\r\n      createAudit({\r\n        field: \"person.person_name.given_2\",\r\n        before: oldFIO.given_2,\r\n        after: newFIO.given_2,\r\n        detail: `Отчество: ${oldFIO.given_2} -> ${newFIO.given_2}`,\r\n      } as IAudit)\r\n    }\r\n  }\r\n  if (Object.keys(_person_name_attributes).length > 0)\r\n    if (newValue.person.fio)\r\n      _person_attributes.person_name_attributes = { id: newValue.person.fio.id, ..._person_name_attributes }\r\n  const oldAddress = oldPerson.address?.streetAddressLine\r\n  const newAddress = newPerson.address?.streetAddressLine\r\n  if (oldAddress !== newAddress) {\r\n    _person_attributes.address_attributes = newPerson.address\r\n    createAudit({\r\n      field: \"person.address\",\r\n      before: oldAddress,\r\n      after: newAddress,\r\n      detail: `адрес: ${oldAddress} -> ${newAddress}`,\r\n    } as IAudit)\r\n  }\r\n  const oldContacts = oldPerson.contacts?.reduce<string>((u, item) => `${u} ${item.telcom_value}`, \"\").trim()\r\n  const newContacts = newPerson.contacts?.reduce<string>((u, item) => `${u} ${item.telcom_value}`, \"\").trim()\r\n  if (oldContacts !== newContacts) {\r\n    _person_attributes.contacts_attributes = newPerson.contacts\r\n    createAudit({\r\n      field: \"person.contacts\",\r\n      before: oldContacts,\r\n      after: newContacts,\r\n      detail: `контакты: ${oldContacts} -> ${newContacts}`,\r\n    } as IAudit)\r\n  }\r\n  const oldNullFlavors = oldPerson.null_flavors\r\n    ?.reduce<string>((u, item) => `${u} ${item.parent_attr}${item.code}`, \"\")\r\n    .trim()\r\n  const newNullFlavors = newPerson.nullFlavors\r\n    ?.reduce<string>((u, item) => `${u} ${item.parent_attr}${item.code}`, \"\")\r\n    .trim()\r\n  if (oldNullFlavors !== newNullFlavors) {\r\n    _person_attributes.null_flavor_attributes = newPerson.null_flavors_attributes()\r\n    createAudit({\r\n      field: \"person.nullFlavors\",\r\n      before: oldNullFlavors,\r\n      after: newNullFlavors,\r\n      detail: `изменены причины отсутствия информации`,\r\n    } as IAudit)\r\n  }\r\n\r\n  if (Object.keys(_person_attributes).length > 0)\r\n    _request.Doctor.person_attributes = { id: oldPerson.id, ..._person_attributes }\r\n  if (Object.keys(_request.Doctor).length > 0) {\r\n    _request.Doctor.id = newValue.id\r\n    return _request\r\n  } else return false\r\n}\r\n","//All interactions with the API for working with the doctors model\r\n//Все взаимодействия с API для работы с моделью  врачей\r\n\r\nimport { AxiosResponse } from \"axios\"\r\nimport $api, { API_URL } from \"../http\"\r\nimport { IDoctor } from \"../models/IDoctor\"\r\nimport { IReferenceId } from \"../models/IReference\"\r\nimport { DOCTOR_RENDER_OPTIONS } from \"../models/FormsData/DoctorRequest\"\r\nimport { IDoctorR } from \"../models/requests/IDoctorR\"\r\n\r\nexport default class DoctorService {\r\n  //POST request for get doctor's list\r\n  static async getDoctors(query: any): Promise<AxiosResponse<IDoctor[]>> {\r\n    return $api.post(`${API_URL}model/Doctor/`, { ...query, offset: 0, limit: 100, ...DOCTOR_RENDER_OPTIONS })\r\n  }\r\n  //POST request for get list of pasible values for Doctor.position field\r\n  static async getPositions(query: any): Promise<AxiosResponse<IReferenceId[]>> {\r\n    return $api.post(`${API_URL}model/Position/`, { q: query, offset: 0, limit: 200 })\r\n  }\r\n  //POST request for add Doctor /REST_API/v1/model/Doctor/add\r\n  static async addDoctor(doctor: IDoctorR): Promise<AxiosResponse<IDoctor>> {\r\n    return $api.post(`${API_URL}model/Doctor/add`, {\r\n      Doctor: doctor,\r\n      ...DOCTOR_RENDER_OPTIONS,\r\n    })\r\n  }\r\n\r\n  //PUT request for update Doctor /REST_API/v1/model/Doctor/:id\r\n  static async updateDoctor(request: any): Promise<AxiosResponse<IDoctor>> {\r\n    return $api.put(`${API_URL}model/Doctor/${request.Doctor.id}`, {\r\n      ...request,\r\n      ...DOCTOR_RENDER_OPTIONS,\r\n    })\r\n  }\r\n  // DELETE request for remove Doctor /REST_API/v1/model/Doctor/:id\r\n  static async removeDoctor(doctor_id: number): Promise<AxiosResponse<IDoctor>> {\r\n    return $api.delete(`${API_URL}model/Doctor/${doctor_id}`)\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IAuthenticatorR } from \"../requests/IAuthenticatorR\"\r\nimport { IAuthenticator } from \"../responses/IAuthenticator\"\r\n\r\nexport default class Authenticator implements ISerializable {\r\n  private _id?: number | undefined\r\n  private _time?: Date | undefined\r\n  private _doctorID?: number | undefined\r\n  constructor(props: IAuthenticator) {\r\n    this._id = props.id\r\n    this._doctorID = props.doctor.id\r\n    if (props.time) this._time = new Date(props.time)\r\n    else this._time = new Date()\r\n    makeAutoObservable(this)\r\n  }\r\n  get time(): Date | undefined {\r\n    return this._time\r\n  }\r\n  set time(value: Date | undefined) {\r\n    this._time = value\r\n  }\r\n  get doctorID(): number | undefined {\r\n    return this._doctorID\r\n  }\r\n  set doctorID(value: number | undefined) {\r\n    this._doctorID = value\r\n  }\r\n  get id(): number | undefined {\r\n    return this._id\r\n  }\r\n\r\n  getAttributes(): IAuthenticatorR {\r\n    let _authenticator = { time: this._time } as IAuthenticatorR\r\n    if (this._id) _authenticator.id = this._id\r\n    if (this._doctorID) _authenticator.doctor_id = this._doctorID\r\n    return _authenticator\r\n  }\r\n}\r\n","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useEffect, useState} from 'react'\r\nimport { Context } from '../..'\r\nimport { Card } from 'primereact/card'\r\nimport { CheckboxChangeParams } from 'primereact/checkbox'\r\nimport NullFlavorWrapper from '../NullFlavorWrapper'\r\nimport { NA, NULL_FLAVORS } from '../../utils/defaults'\r\nimport { IReference, IReferenceId } from '../../models/IReference'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { INullFlavorR } from '../../models/INullFlavor'\r\nimport { TRAFFIC_ACCIDENT } from '../../NSI/1.2.643.5.1.13.13.99.2.24'\r\nimport { PREGNANCY_CONNECTION } from '../../NSI/1.2.643.5.1.13.13.99.2.25'\r\nimport DoctorService from '../../services/DoctorService'\r\nimport Authenticator from '../../models/FormsData/Authenticator'\r\nimport { IAuthenticator } from '../../models/responses/IAuthenticator'\r\n\r\n const Section9: FC = () => {\r\n  const { userStore, certificateStore, layoutStore } = useContext(Context)\r\n   const certificate = certificateStore.cert \r\n  const [doctors, setDoctors] = useState<IReferenceId[] | null>(null)  \r\n  useEffect(()=>{\r\n    if (doctors===null && userStore.userInfo) {\r\n      //layoutStore.isLoading = true\r\n      DoctorService.getDoctors({       \r\n        q:{organization_id_eq: userStore.userInfo.organization.id}        \r\n      }).then(response=>{\r\n        const data = response.data.map(doctor=>{\r\n          if (!doctor.person || !doctor.person.person_name) return {id: doctor.id, name: doctor.position?.name } as IReferenceId\r\n          return {id: doctor.id, name: `${doctor.person.person_name.family} ${doctor.person.person_name.given_1} ${doctor.person.person_name.given_2} ${doctor.position?.name}`} as IReferenceId})\r\n        if (data) setDoctors(data)\r\n      }).catch((err)=>console.log('ошибка загрузки списка врачей'))//.finally(()=>layoutStore.isLoading=false)\r\n    }\r\n  },[doctors, layoutStore, userStore.userInfo])\r\n   \r\n  const optionCode = 'NA'\r\n  const options = NULL_FLAVORS.filter((item:IReference)=>optionCode.includes(item.code))  \r\n  \r\n  const header = () => {\r\n      return <span>Прочие характеристики причины смерти</span>\r\n    }\r\n  \r\n  const isTrafficAccident = !!certificate.trafficAccident || certificate.nullFlavors.findIndex((item)=>item.parent_attr==='traffic_accident')===-1\r\n  const isPregnancyConnection = !!certificate.pregnancyConnection || certificate.nullFlavors.findIndex((item)=>item.parent_attr==='pregnancy_connection')===-1  \r\n  const nullFlavorDropdnStyle = {minWidth:'210px', maxWidth:'500px', marginTop: '0.5rem', marginLeft: '-0.75rem'}\r\n  const customDropdnStyle = {minWidth:'210px', maxWidth:'500px', marginTop: '0.5rem', marginLeft: '-1.25rem'}\r\n  const customParagraphFieldStyle = {paddingTop: '0.1rem', width: '80%'} \r\n     \r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>23.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{width: '90%'}}>                                  \r\n                <NullFlavorWrapper paraNum  checked={isTrafficAccident}                                      \r\n                  label={<label htmlFor=\"trafficAccident\">В случае смерти в результате ДТП: смерть наступила –</label>}\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) certificate.trafficAccident = undefined                        \r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                    }} \r\n                  field={\r\n                    <Dropdown inputId=\"trafficAccident\" style={nullFlavorDropdnStyle} placeholder=\"Выбрать\"  \r\n                      options={TRAFFIC_ACCIDENT} optionLabel=\"name\" \r\n                      value={TRAFFIC_ACCIDENT.find((item)=> item.code === certificate.trafficAccident)} \r\n                      onChange={(e) =>certificate.trafficAccident =  e.value.code}                       \r\n                    />             \r\n                  }\r\n                  options={options} \r\n                  value={NA} \r\n                  nullFlavors={certificate.nullFlavors}  \r\n                  field_name=\"traffic_accident\"\r\n                />                               \r\n              </div>              \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}} >\r\n              <div className='paragraph p-mr-1'>24.</div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\"  \r\n              style={{width: '90%'}}>                                  \r\n                <NullFlavorWrapper paraNum  checked={isPregnancyConnection}                                      \r\n                  label={<label htmlFor=\"pregnancyConnection\"> В случае смерти беременной (независимо от срока и локализации) </label>}\r\n                  setCheck={(e:CheckboxChangeParams, nullFlavors: INullFlavorR[] | undefined)=>{                      \r\n                      if (!e.checked) {                        \r\n                        certificate.pregnancyConnection = undefined                        \r\n                      } \r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors\r\n                    }} \r\n                  onChange={(e:IReference,  nullFlavors: INullFlavorR[] | undefined)=>{\r\n                      if (nullFlavors) certificate.nullFlavors = nullFlavors}}\r\n                  field={\r\n                    <Dropdown inputId=\"pregnancyConnection\" style={nullFlavorDropdnStyle} placeholder=\"Выбрать\"  \r\n                      options={PREGNANCY_CONNECTION} optionLabel=\"name\" \r\n                      value={PREGNANCY_CONNECTION.find((item)=> item.code === certificate.pregnancyConnection)} \r\n                      onChange={(e) =>{\r\n                        certificate.pregnancyConnection = e.value.code}\r\n                      } \r\n                    />             \r\n                  }\r\n                  options={options} \r\n                  value={NA} \r\n                  nullFlavors={certificate.nullFlavors}  \r\n                  field_name=\"pregnancy_connection\"\r\n                />                               \r\n              </div>              \r\n            </div> \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%', paddingLeft:'0.5rem',fontWeight:600, fontSize: 'larger'}} >\r\n              Подписи \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}}>\r\n              <div className='paragraph p-mr-1'>25. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={customParagraphFieldStyle}>\r\n                <label htmlFor=\"author\">Врач (фельдшер, акушерка), заполнивший Медицинское свидетельство о смерти *</label>\r\n                <Dropdown inputId=\"author\"  placeholder=\"Выбрать\" style={customDropdnStyle}                   \r\n                  optionLabel=\"name\" autoFocus className=\"p-mb-2\"  options={doctors || []} \r\n                  value={doctors?.find(item=>item.id === certificate.author?.doctorID)} showClear             \r\n                  onChange={(e) =>{\r\n                    if (e.value) { \r\n                      certificate.author = new Authenticator({doctor: e.value} as IAuthenticator)                     \r\n                    } else certificate.author = undefined                       \r\n                  }} />\r\n                <label htmlFor=\"legalAuthenticator\">Руководитель медицинской организации *</label>\r\n                <Dropdown inputId=\"legalAuthenticator\"  placeholder=\"Выбрать\" style={customDropdnStyle} \r\n                  optionLabel=\"name\" options={doctors || []} showClear\r\n                  value={doctors?.find(item=>item.id === certificate.legalAuthenticator?.doctorID)}                \r\n                  onChange={(e) =>{\r\n                    if (e.value) { \r\n                      certificate.legalAuthenticator =  new Authenticator({doctor: e.value} as IAuthenticator)                     \r\n                    } else certificate.legalAuthenticator = undefined                   \r\n                  }} />  \r\n              </div>               \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%'}}>\r\n              <div className='paragraph p-mr-1'>26. </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={customParagraphFieldStyle}>\r\n                <label htmlFor=\"authenticator\">Свидетельство проверено ответственным *</label>\r\n                <Dropdown inputId=\"authenticator\" placeholder=\"Выбрать\" style={customDropdnStyle} \r\n                  optionLabel=\"name\"  options={doctors || []} showClear\r\n                  value={doctors?.find(item=>item.id===certificate.authenticator?.doctorID)}                \r\n                  onChange={e=>{\r\n                    if (e.value) {\r\n                      certificate.authenticator =  new Authenticator({doctor: e.value} as IAuthenticator)                      \r\n                    } else certificate.authenticator = undefined\r\n                  }} \r\n                />\r\n              </div>  \r\n            </div>\r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\" style={{width: '98%', paddingLeft:'0.5rem'}} >\r\n              <em>* Заполнить в день фактического подписания бумажного носителя</em>\r\n            </div>     \r\n          </div>          \r\n      </Card>  \r\n    </>)\r\n  }\r\n  export default observer(Section9) ","import { makeAutoObservable } from \"mobx\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IParticipantR } from \"../requests/IParticipintR\"\r\nimport { IParticipant } from \"../responses/IParticipant\"\r\nimport Identity from \"./Identity\"\r\nimport Person from \"./Person\"\r\n\r\nexport default class Participant implements ISerializable {\r\n  private _id?: number | undefined\r\n  private _person: Person\r\n  private _receiptDate: Date\r\n  private _description?: string | undefined\r\n  private _identity?: Identity | undefined\r\n  private _original: boolean\r\n  private _oldOne?: IParticipant | undefined\r\n\r\n  constructor(props = {} as IParticipant) {\r\n    this._oldOne = { ...props }\r\n    if (props.person) this._person = new Person(props.person)\r\n    else this._person = new Person()\r\n    if (props.receipt_date) this._receiptDate = new Date(props.receipt_date)\r\n    else this._receiptDate = new Date()\r\n    if (props.identity) this._identity = new Identity(props.identity)\r\n    this._id = props.id\r\n    this._description = props.description\r\n    this._original = props.original === undefined ? true : props.original\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes() {\r\n    const _pr = {} as IParticipantR\r\n    if (this._id) _pr.id = this._id\r\n    _pr.description = this._description\r\n    _pr.original = this._original\r\n    _pr.receipt_date = this._receiptDate?.toDateString()\r\n    if (this._person) _pr.person_attributes = this._person.getAttributes()\r\n    if (this._identity) _pr.identity_attributes = this._identity.getAttributes()\r\n    return _pr\r\n  }\r\n  get oldOne(): IParticipant | undefined {\r\n    return this._oldOne\r\n  }\r\n  get original(): boolean {\r\n    return this._original\r\n  }\r\n  set original(value: boolean) {\r\n    this._original = value\r\n  }\r\n  get identity(): Identity | undefined {\r\n    return this._identity\r\n  }\r\n  set identity(value: Identity | undefined) {\r\n    this._identity = value\r\n  }\r\n  get description(): string | undefined {\r\n    return this._description\r\n  }\r\n  set description(value: string | undefined) {\r\n    this._description = value\r\n  }\r\n  get receiptDate(): Date {\r\n    return this._receiptDate\r\n  }\r\n  set receiptDate(value: Date) {\r\n    this._receiptDate = value\r\n  }\r\n  get person(): Person {\r\n    return this._person\r\n  }\r\n  set person(value: Person) {\r\n    this._person = value\r\n  }\r\n  get id(): number | undefined {\r\n    return this._id\r\n  }\r\n}\r\n","import { observer } from \"mobx-react-lite\"\r\nimport { Button } from \"primereact/button\"\r\nimport { Calendar } from \"primereact/calendar\"\r\nimport { Card } from \"primereact/card\"\r\nimport { CheckboxChangeParams } from \"primereact/checkbox\"\r\nimport { Dropdown } from \"primereact/dropdown\"\r\nimport { InputMask } from \"primereact/inputmask\"\r\nimport { InputText } from \"primereact/inputtext\"\r\nimport { InputTextarea } from \"primereact/inputtextarea\"\r\nimport { FC, useContext, useEffect, useState } from \"react\"\r\nimport { Context } from \"../..\"\r\nimport Identity from \"../../models/FormsData/Identity\"\r\nimport Participant from \"../../models/FormsData/Participant\"\r\nimport IIdentity from \"../../models/IIdentity\"\r\nimport { IPersonName } from \"../../models/IPersonName\"\r\nimport { ID_CARD_TYPES, NA, NULL_FLAVORS, PARTIPICIPANT_DATE_SUG, PARTIPICIPANT_FIO_SUG, PARTIPICIPANT_IDENTITY_SUG, PASSPORT_RF } from \"../../utils/defaults\"\r\nimport { inputsIdentity } from \"../inputs/inputsIdentity\"\r\nimport { PersonName } from \"../inputs/PersonName\"\r\nimport NullFlavorWrapper from \"../NullFlavorWrapper\"\r\n\r\nconst Section10: FC = () => {\r\n  const { certificateStore, suggestionsStore, layoutStore } = useContext(Context)\r\n  const certificate = certificateStore.cert \r\n  const [participant] = useState(certificate.participant || new Participant())\r\n  const person = participant.person \r\n  const identity = participant.identity\r\n  const [docChecked, setDocChecked] = useState(!!participant.identity)\r\n  const [dulValue, setDulValue]  = useState(ID_CARD_TYPES.find((item)=>item.code === identity?.identityCardType))\r\n  const header = () => {\r\n      return <span>Данные получателя свидетельства</span>\r\n  }  \r\n  useEffect(()=>{\r\n    if (!!participant.person.fio?.family && !!participant.person.fio?.given_1) \r\n    suggestionsStore.suggestions[PARTIPICIPANT_FIO_SUG].done = true\r\n  },[participant.person.fio?.family, participant.person.fio?.given_1, suggestionsStore.suggestions])\r\n  useEffect(()=>{\r\n    if (!!participant.receiptDate) \r\n    suggestionsStore.suggestions[PARTIPICIPANT_DATE_SUG].done = true\r\n  },[participant.receiptDate, suggestionsStore.suggestions])\r\n  useEffect(()=>{\r\n    if (!!participant.person.SNILS || !!participant.identity) \r\n    suggestionsStore.suggestions[PARTIPICIPANT_IDENTITY_SUG].done = true\r\n  },[participant.identity, participant.person.SNILS, suggestionsStore.suggestions])\r\n\r\n  const [seriesField, numberField, depCodeField] = inputsIdentity({dulValue, identity})\r\n  const buttonDisabled = !!certificate.participant || !(suggestionsStore.suggestions[PARTIPICIPANT_IDENTITY_SUG].done \r\n      && suggestionsStore.suggestions[PARTIPICIPANT_DATE_SUG].done\r\n      && suggestionsStore.suggestions[PARTIPICIPANT_FIO_SUG].done)\r\n  \r\n\r\n  return (<>    \r\n      <Card className=\"c-section p-mr-2 p-mb-2\" header={header} style={{paddingLeft:'1rem'}}>        \r\n          <div className=\"p-fluid p-formgrid p-grid\">   \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">              \r\n              <div className='p-paragraph-field p-col-6'>\r\n                <label htmlFor=\"fio\">Фамилия, Имя, Отчество(при наличии)</label>\r\n                <PersonName personName={participant.person?.fio} submitted={false}\r\n                  onChange={(value: IPersonName)=>{                       \r\n                    participant.person.fio  = value\r\n                  }}  \r\n                />                   \r\n              </div>\r\n              <div className='p-paragraph-field p-col-5'>\r\n                <label htmlFor=\"description\">Кем приходится</label>\r\n                <InputText value={participant.description} \r\n                  placeholder=\"родств./пр-ль\"\r\n                  onChange={e=>participant.description = e.target.value}  \r\n                />                   \r\n              </div>\r\n              <div className='p-paragraph-field p-col-6'>\r\n                <label htmlFor=\"description\">Дата выдачи</label>\r\n                <Calendar id=\"dateBirth\" showIcon dateFormat='dd.mm.yy'\r\n                  locale='ru' mask='99.99.9999'                                          \r\n                  value={participant.receiptDate} \r\n                  onChange={(e)=>{\r\n                    if (e.target.value) participant.receiptDate = e.target.value as Date\r\n                  }}                         \r\n                />                   \r\n              </div>\r\n              <div className='p-paragraph-field p-col-4'> \r\n                <label htmlFor=\"snils\">СНИЛС</label> \r\n                <InputMask id=\"snils\"  \r\n                  type=\"text\" mask=\"999-999-999 99\"\r\n                  value={person?.SNILS} \r\n                  onChange={(e)=>{                     \r\n                    person.SNILS = e.value\r\n                  }}\r\n                />                             \r\n              </div>              \r\n            </div>           \r\n            <div className=\"p-field p-d-flex p-flex-wrap p-jc-start\">              \r\n              <div className='p-paragraph-field p-mr-2 p-mb-2'>\r\n                <NullFlavorWrapper\r\n                  checked={docChecked} setCheck={(e: CheckboxChangeParams) => {\r\n                    if (e.checked) {\r\n                      participant.identity = new Identity({\r\n                      identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code,\r\n                    } as IIdentity)\r\n                    } else participant.identity = undefined\r\n                    setDocChecked(e.checked)\r\n                    } \r\n                  }\r\n                  label={<label htmlFor=\"identity_card_type\">Иной документ, удостоверяющей личность: </label>}\r\n                  field={<Dropdown id=\"identity_card_type\" value={dulValue}\r\n                    autoFocus options={ID_CARD_TYPES} optionLabel='name'\r\n                    onChange={(e) => {\r\n                      if (identity) identity.identityCardType = e.value.code\r\n                      else participant.identity = new Identity({ identity_card_type_id: e.value.code } as IIdentity)\r\n                      setDulValue(ID_CARD_TYPES.find((item) => item.code === e.value.code))\r\n                    }} />\r\n                  } \r\n                  options={[NULL_FLAVORS[NA]]}  value={NA}       \r\n                />             \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`ser_${docChecked}`} \r\n                style={{marginLeft:'1.5rem'}}>\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"series\">Серия</label>}\r\n                  checked={docChecked && \r\n                    participant.identity?.nullFlavors.findIndex(nf=>nf.parent_attr==='series')===-1} \r\n                  setCheck={(e:CheckboxChangeParams)=>{\r\n                    if (e.checked && participant.identity) participant.identity.series = ''\r\n                    else if (participant.identity) participant.identity.series = undefined                                    \r\n                  }}                 \r\n                  field={seriesField}\r\n                  field_name='series'\r\n                  options={[NULL_FLAVORS[NA]]} value={NA}                  \r\n                  lincked={!docChecked}                                   \r\n                />  \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" key={`num_${docChecked}`}\r\n                style={{marginLeft:'1.5rem'}} >\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"docNumber\">Номер</label>}\r\n                  checked={docChecked}                 \r\n                  field={numberField}\r\n                  options={[NULL_FLAVORS[NA]]} value={NA} \r\n                  lincked                                      \r\n                />                    \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-3 p-mb-2\" key={`org_${docChecked}`} style={{marginLeft:'1.5rem'}} >\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"issueOrgName\">Кем выдан</label>}\r\n                  checked={docChecked}                   \r\n                  field={\r\n                    <InputTextarea id=\"issueOrgName\" value={identity?.issueOrgName} \r\n                      cols={65} rows={2}  \r\n                      onChange={(e)=>{if (identity) identity.issueOrgName = e.target.value }}\r\n                    />}\r\n                  options={[NULL_FLAVORS[NA]]} value={NA} \r\n                  lincked                                      \r\n                />                    \r\n              </div>\r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" style={{marginLeft:'1.5rem'}} key={`pdiv5_${docChecked}`}>\r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"issueDate\">Когда выдан</label>}\r\n                  checked={docChecked}                   \r\n                  field={<Calendar  id=\"issueDate\" className=\"p-mr-2\" \r\n                    dateFormat={\"dd.mm.yy\"} \r\n                    locale=\"ru\" mask=\"99.99.9999\"                    \r\n                    value={identity?.issueOrgDate}\r\n                    onChange={(e)=>{if (identity) identity.issueOrgDate = e.target.value as Date | undefined}}\r\n                    showIcon />\r\n                  }                  \r\n                  options={[NULL_FLAVORS[NA]]} value={NA} \r\n                  lincked                                       \r\n                /> \r\n              </div>  \r\n              <div className=\"p-paragraph-field p-mr-2 p-mb-2\" \r\n                key={`code_${docChecked}`} style={{marginLeft:'1.5rem'}}> \r\n                <NullFlavorWrapper                   \r\n                  label={<label htmlFor=\"depCode\">Код подразделения</label>}\r\n                  checked={docChecked} \r\n                  setCheck={(e:CheckboxChangeParams)=>{\r\n                    if (e.checked && participant.identity) participant.identity.issueOrgCode = ''\r\n                    else if (participant.identity) participant.identity.issueOrgCode = undefined                                  \r\n                  }}                   \r\n                  field={depCodeField}\r\n                  options={[NULL_FLAVORS[NA]]} value={NA}                   \r\n                  lincked={!docChecked}\r\n                  field_name=\"issueOrgCode\"                                     \r\n                />                    \r\n              </div> \r\n              <Button type=\"button\" label=\"ВЫДАТЬ\" style={{height:'2.4rem'}}\r\n                className=\"p-button-raised p-button-success\"\r\n                disabled={buttonDisabled}\r\n                onClick={()=>{\r\n                  certificate.participant = participant\r\n                  certificate.issueDate = participant.receiptDate\r\n                  layoutStore.message = { severity: 'success', summary: 'Успешно', detail: 'Данные получателя введены, сохраните изменения, после чего будет возможна печать.', life: 3000 }\r\n                }}   \r\n              />             \r\n            </div>           \r\n           </div>           \r\n          </Card>\r\n        </>)\r\n\r\n}\r\nexport default observer(Section10)    ","import { Card } from 'primereact/card'\r\nimport { Column } from 'primereact/column'\r\nimport { DataTable } from 'primereact/datatable'\r\n\r\nimport '../styles/components/Calendar.css'\r\nimport '../styles/components/Divider.css'\r\nimport '../styles/components/Button.css'\r\nimport '../styles/pages/CertificatePage.css'\r\n\r\nimport { useContext, FC, useEffect, useRef, useState } from 'react'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { CERTIFICATE_ROUTE } from '../utils/consts'\r\nimport { Avatar } from 'primereact/avatar'\r\nimport { Badge } from 'primereact/badge'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport Section0 from '../components/c_sections/section_0'\r\nimport Section1 from '../components/c_sections/section_1'\r\nimport Section2 from '../components/c_sections/section_2'\r\nimport Section3 from '../components/c_sections/section_3'\r\nimport Section5 from '../components/c_sections/section_5'\r\nimport Section6 from '../components/c_sections/section_6'\r\nimport Section7 from '../components/c_sections/section_7'\r\nimport Section8 from '../components/c_sections/section_8'\r\nimport Section9 from '../components/c_sections/section_9'\r\nimport Section10 from '../components/c_sections/section_10'\r\nimport { Context } from '..'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { ISuggestions } from '../models/ISuggestions'\r\nimport { Toast, ToastMessageType } from 'primereact/toast'\r\nimport { CERT_TYPE_SUG, DEFAULT_ERROR_TOAST, PERSON_NAME_SUG } from '../utils/defaults'\r\nimport { ICertificate } from '../models/responses/ICertificate'\r\n\r\n\r\ninterface IMatch extends IRouteMatch {  \r\n  params: {id: string}\r\n}\r\ninterface CertificatePageProps extends IRouteProps { \r\n    match: IMatch  \r\n}\r\n\r\nconst CertificatePage: FC<CertificatePageProps> = (props: CertificatePageProps) => {  \r\n  const { certificateStore, userStore, layoutStore, suggestionsStore } = useContext(Context)     \r\n  const [certID, setCertID] = useState(Number.parseInt(props.match.params.id))\r\n  const [message, setMessage] = useState<ToastMessageType | null>(null)\r\n  useEffect(()=>{\r\n    if (!!message) {\r\n      layoutStore.message = message\r\n      setMessage(null)\r\n    }\r\n  },[layoutStore, message])\r\n  useEffect(()=>{    \r\n    //if (certID ===-1 && toast!==null && toast.current!==null) toast.current.show()\r\n    if (certID === certificateStore.cert.id || certID===-1) {\r\n      layoutStore.isLoading = false\r\n      return\r\n    }  \r\n    let _idx = -1\r\n    const cArray = certificateStore.certs   \r\n    if (cArray.length>0){            \r\n      _idx = cArray.findIndex(el=>el.id === certID)      \r\n    }\r\n    if (_idx>-1) { \r\n      certificateStore.select(_idx)\r\n      layoutStore.isLoading = false\r\n    } else {      \r\n      certificateStore.findById(certID, ()=>{layoutStore.isLoading = false})\r\n    }  \r\n  },[certID, certificateStore, layoutStore, certificateStore.cert.id])\r\n  useEffect(()=>{\r\n    if (!layoutStore.isLoading && !!layoutStore.message && !!toast.current) { \r\n      toast.current.show(layoutStore.message)\r\n      layoutStore.message = null\r\n    }\r\n  },[layoutStore, layoutStore.isLoading, layoutStore.message])\r\n  const toast = useRef<Toast>(null)  \r\n  const secton_router = ()=>{\r\n    switch (props.location.search) {\r\n      case \"?q=0\": return <Section0 />\r\n      case \"?q=1\": return <Section1 />\r\n      case \"?q=2\": return <Section2 />\r\n      case \"?q=3\": return <Section3 />      \r\n      case \"?q=5\": return <Section5 />\r\n      case \"?q=6\": return <Section6 />\r\n      case \"?q=7\": return <Section7 />\r\n      case \"?q=8\": return <Section8 />\r\n      case \"?q=9\": return <Section9 />\r\n      case \"?q=10\": return <Section10 />\r\n      default: return <Section0 /> \r\n    } \r\n  }    \r\n  const items = [        \r\n        {\r\n            label: 'Назад',\r\n            icon: 'pi pi-chevron-left',\r\n            command: () => {\r\n              let section = Number.parseInt(props.location.search[props.location.search.length-1])-1             \r\n              if (section===4) section--\r\n                if (section > -1) {               \r\n                userStore.history().push(`${CERTIFICATE_ROUTE}/${certificateStore.cert.id}?q=${section}`)\r\n              }\r\n            }\r\n        },\r\n        {\r\n            label: 'Удалить',\r\n            icon: 'pi pi-trash p-danger',\r\n            command: () => {\r\n              layoutStore.isLoading = true\r\n              const result = certificateStore.delete()\r\n              if (!result) {\r\n                layoutStore.isLoading = false\r\n              } else {\r\n                result.then(response=>{\r\n                  layoutStore.isLoading = false\r\n                  certificateStore.clean() \r\n                  setCertID(certificateStore.cert.id)                 \r\n                  setMessage({ severity: 'success', summary: 'Успешно', detail: 'Запись удалена', life: 3000 })                                 \r\n                })\r\n                .catch(reason=>{\r\n                  layoutStore.isLoading = false\r\n                  console.log(reason)\r\n                  setMessage((DEFAULT_ERROR_TOAST))\r\n                })                \r\n              }\r\n            }\r\n        },\r\n        {\r\n            label: 'Сохранить',\r\n            icon: 'pi pi-save p-success',\r\n            command: () => { \r\n              if (!suggestionsStore.suggestions[CERT_TYPE_SUG].done || !suggestionsStore.suggestions[PERSON_NAME_SUG].done ) {\r\n                 setMessage({severity:'warn', summary:'ОТКЛОНЕНО', detail:'Внесите минимальный набор данных: вид свидетельства, ФИО умершего(для идентифицированых)', life: 6000})\r\n                 return\r\n               }\r\n              layoutStore.isLoading = true\r\n              const result = certificateStore.save((data:ICertificate)=>{                                \r\n                  setMessage({ severity: 'success', summary: 'Успешно', detail: 'Изменения сохранены', life: 3000 })\r\n                  setCertID(data.id)\r\n                  console.log(data)   \r\n              }, (message:string)=>{                         \r\n                setMessage(DEFAULT_ERROR_TOAST)\r\n                console.log(message)\r\n              }, userStore.userInfo?.organization.sm_code)\r\n              if (!result) {\r\n                console.log('нет юзера')\r\n                layoutStore.isLoading = false\r\n              } else result.finally(()=>{layoutStore.isLoading = false})               \r\n            }\r\n        },    \r\n        {\r\n            label: 'Создать',\r\n            icon: 'pi pi-plus',\r\n            command: () => { \r\n              try {\r\n                certificateStore.createNew()\r\n                setCertID(-1)      \r\n                setMessage({ severity: 'success', summary: 'Пустое  свидетельство создано!', detail: 'Внесите минимальные изменения и сохраните, чтоб получить номер', life: 3000 })                   \r\n              } catch { \r\n                setMessage(DEFAULT_ERROR_TOAST)\r\n              }\r\n            }  \r\n        },\r\n        {\r\n            label: 'Заменить',\r\n            icon: 'pi pi-sync',            \r\n            command: () => { \r\n              if (certificateStore.cert.id < 0 || !certificateStore.cert.issueDate) {\r\n                setMessage({severity:'warn', summary:'ОТКЛОНЕНО', detail:'Замена возможна только для выданных свидетельств'})\r\n              return  \r\n              }\r\n              try {\r\n                certificateStore.replace()\r\n                setCertID(-1) \r\n                setMessage({ severity: 'success', summary: 'Cвидетельство заменено!', detail: 'Проверьте вид и сохраните, чтоб получить номер', life: 3000 })                        \r\n              } catch { \r\n                setMessage(DEFAULT_ERROR_TOAST)\r\n              }\r\n            }  \r\n        },\r\n        {\r\n            label: 'Далее',\r\n            icon: 'pi pi-chevron-right',\r\n            command: () => {\r\n              let section = Number.parseInt(props.location.search[props.location.search.length-1])+1              \r\n              if (section===4) section++\r\n              if (section > -1) {\r\n                userStore.history().push(`${CERTIFICATE_ROUTE}/${certificateStore.cert.id}?q=${section}`)\r\n              } \r\n            }\r\n        },        \r\n        \r\n\r\n    ]\r\n  const doneBodyTemplate = (rowData:any) => {\r\n        return rowData.done ? <Avatar icon=\"pi pi-check\" shape=\"circle\" style={{ color: 'rgb(104 159 56)'}}/>\r\n        : ''\r\n  }  \r\n  const rowClass = (data:any) => {\r\n    return {\r\n      'p-suggestion-actual': !data.done\r\n    }\r\n  } \r\n  const sugCount = suggestionsStore.redSuggestionsCount() \r\n  const suggestionHeader = () => {    \r\n    const avatar = sugCount === 0 ? <Avatar icon=\"pi pi-check\" shape=\"circle\" style={{ height:'1.5rem', width: '1.5rem',backgroundColor: 'rgb(104 159 56)', color: 'white'}}/> : <Badge value={sugCount}  style={{ backgroundColor: 'rgb(204, 0, 0)', color: 'white', marginLeft: '4px'}}/>\r\n    return <><span>Контроль заполнения</span>{avatar}</>\r\n  }\r\n  const suggestions = suggestionsStore.suggestions\r\n    .filter((item:ISuggestions) =>\r\n    item.section === props.location.search.slice(3))\r\n  \r\n  const layoutParams = {\r\n    title: 'Медицинское свидетельство о смерти',     \r\n    url: `${CERTIFICATE_ROUTE}/${certID}${props.location.search}`,\r\n    content:(<>      \r\n      <div className=\"p-d-flex p-jc-center\" >        \r\n        {secton_router()}        \r\n        <Card className=\"p-mr-2 p-mb-2 p-suggestion\"\r\n         key={`p_sug_${sugCount}`} header={suggestionHeader}>                        \r\n            <DataTable className=\"p-datatable-sm\" rowClassName={rowClass} \r\n            value={suggestions} responsiveLayout=\"scroll\">\r\n              <Column field=\"code\" header=\"Код\"></Column>\r\n              <Column field=\"suggestion\" header=\"Проверка\"></Column>\r\n              <Column body={doneBodyTemplate}></Column>\r\n            </DataTable> \r\n        </Card>\r\n      </div>   \r\n      <Toast ref={toast} />   \r\n    </>),\r\n    actionItems: items\r\n  } \r\n  return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}\r\nexport default observer(CertificatePage) ","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IDoctor } from \"../IDoctor\"\r\nimport { IReferenceId } from \"../IReference\"\r\nimport { IDoctorR } from \"../requests/IDoctorR\"\r\nimport Person from \"./Person\"\r\n\r\nexport default class Doctor implements ISerializable {\r\n  private _id?: number\r\n  private _person: Person\r\n  private _position?: IReferenceId | undefined\r\n  private _organization?: IReferenceId | undefined\r\n  private _guid: string\r\n  constructor(props = {} as IDoctor) {\r\n    this._id = props.id\r\n    this._guid = props.guid || uuidv4()\r\n    this._person = props.person ? new Person(props.person) : new Person()\r\n    this._organization = props.organization || undefined\r\n    this._position = props.position || undefined\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes(): IDoctorR {\r\n    let _doctor = { guid: this._guid } as IDoctorR\r\n    if (this._id) _doctor.id = this._id\r\n    if (this._person) _doctor.person_attributes = this._person.getAttributes()\r\n    if (this._organization) _doctor.organization_id = this._organization.id\r\n    if (this._position) _doctor.position_id = this._position.id\r\n    return _doctor\r\n  }\r\n  get id() {\r\n    return this._id\r\n  }\r\n  set id(id: number | undefined) {\r\n    this._id = id\r\n  }\r\n  get person() {\r\n    return this._person\r\n  }\r\n\r\n  get guid() {\r\n    return this._guid\r\n  }\r\n  get position(): IReferenceId | undefined {\r\n    return this._position\r\n  }\r\n  set position(value: IReferenceId | undefined) {\r\n    this._position = value\r\n  }\r\n  get organization(): IReferenceId | undefined {\r\n    return this._organization\r\n  }\r\n  set organization(value: IReferenceId | undefined) {\r\n    this._organization = value\r\n  }\r\n}\r\n","\r\nimport React, { useState, useEffect, useRef, useContext, FC } from 'react'\r\nimport { classNames } from 'primereact/utils'\r\nimport { DataTable } from 'primereact/datatable'\r\nimport { Column } from 'primereact/column'\r\nimport { Toast } from 'primereact/toast'\r\nimport { Button } from 'primereact/button'\r\nimport { Toolbar } from 'primereact/toolbar'\r\nimport { Dialog } from 'primereact/dialog'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { Context } from '..'\r\nimport { IDoctor } from '../models/IDoctor'\r\nimport DoctorService from \"../services/DoctorService\"\r\nimport '../styles/components/Toolbar.css'\r\nimport '../styles/components/Dialog.css'\r\nimport '../styles/components/Toast.css'\r\nimport '../styles/components/AutoComplete.css'\r\nimport { InputMask } from 'primereact/inputmask'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { DESTROY_OPTION, DOCTORS_ROUTE } from '../utils/consts'\r\nimport { IContact } from '../models/IContact'\r\nimport { IReferenceId } from '../models/IReference'\r\nimport { AutoComplete } from 'primereact/autocomplete'\r\nimport { DEFAULT_ERROR_TOAST } from '../utils/defaults'\r\nimport Address from '../models/FormsData/Address'\r\nimport { IPerson } from '../models/IPerson'\r\nimport { genUpdateDoctorRequest } from '../models/FormsData/DoctorRequest'\r\nimport InputAddress from '../components/inputs/InputAddress'\r\nimport AddressDialog from '../components/dialogs/AddressDialog'\r\nimport Doctor from '../models/FormsData/Doctor'\r\nimport { DEFAULT_ADDRESS, IAddressR } from '../models/requests/IAddressR'\r\nimport { getOneLinePersonName, IPersonName } from '../models/IPersonName'\r\nimport { PersonName } from '../components/inputs/PersonName'\r\n\r\nconst DoctorsPage: FC = () => {    \r\n    const {addressStore, userStore} = useContext(Context)\r\n    let emptyDoctor = {\r\n        organization: userStore.userInfo?.organization,\r\n        guid: uuidv4(),       \r\n        person: { person_name: {family:'Тестов', given_1:'Тест'}, \r\n          contacts:[] as IContact[],\r\n          SNILS: '456-145-154 25'\r\n          } as IPerson        \r\n    } as IDoctor\r\n    const [doctor, setDoctor] = useState(new Doctor(emptyDoctor))\r\n    const [doctors, setDoctors] = useState<IDoctor[]>([])\r\n    const [doctorDialog, setDoctorDialog] = useState(false)\r\n    const [deleteDoctorDialog, setDeleteDoctorDialog] = useState(false)\r\n    const [deleteDoctorsDialog, setDeleteDoctorsDialog] = useState(false)    \r\n    const [selectedDoctors, setSelectedDoctors] = useState<IDoctor[]>([])\r\n    const [submitted, setSubmitted] = useState(false)   \r\n    const [email, setEmail] = useState<IContact>({telcom_value:'', main:false} as IContact) \r\n    const [phone, setPhone] = useState<IContact>({telcom_value:'', main:true} as IContact)\r\n    const [position, setPosition] = useState('')\r\n    const [positions, setPositions] = useState<IReferenceId[]>([])\r\n    const toast = useRef<Toast>(null)\r\n    const dt = useRef(null)\r\n     \r\n\r\n    useEffect(() => {      \r\n      if (userStore && userStore.userInfo) \r\n      DoctorService.getDoctors({       \r\n        q:{organization_id_eq: userStore.userInfo.organization.id}        \r\n      })\r\n      .then(data => {        \r\n        setDoctors(data.data)\r\n      })\r\n      .catch(()=>setDoctors([]))\r\n    }, [userStore.userInfo]) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    const  getPositions = (event: { query: string })=>{\r\n        const option = {} as any\r\n        if (event.query.trim().length>0) option.name_cont = event.query.trim()      \r\n        DoctorService.getPositions(option).then(response=>{\r\n            if (response.data.length>0) setPositions(response.data)\r\n            else setPositions([])        \r\n        }).catch((reason)=>console.log(reason))    \r\n    }\r\n\r\n    const openNew = () => {        \r\n        if (doctor.id) setDoctor(new Doctor(emptyDoctor))\r\n        addressStore.address = new Address(DEFAULT_ADDRESS)\r\n        setSubmitted(false)\r\n        setDoctorDialog(true)\r\n        setEmail({telcom_value:'', main:false} as IContact)\r\n        setPhone({telcom_value:'', main:true} as IContact)\r\n        setPosition('')\r\n    }\r\n\r\n    const hideDialog = () => {\r\n        setSubmitted(false);\r\n        setDoctorDialog(false);\r\n    }\r\n\r\n    const hideDeleteDoctorDialog = () => {\r\n        setDeleteDoctorDialog(false)\r\n    }\r\n\r\n    const hideDeleteDoctorsDialog = () => {\r\n        setDeleteDoctorsDialog(false)\r\n    }\r\n\r\n    const saveDoctor = () => {\r\n        setSubmitted(true)\r\n        console.log('doctor2',doctor)\r\n        if (doctor.person?.fio?.family.trim() && doctor.person?.SNILS && doctor.position) {\r\n            let _doctors = [...doctors]\r\n            onContactChange(phone)\r\n            onContactChange(email)  \r\n            if (doctor.id) { \r\n              const index = findIndexById(doctor.id)\r\n              const request = genUpdateDoctorRequest(_doctors[index], doctor)\r\n              if (request) DoctorService.updateDoctor(request).then((response)=>{                \r\n                _doctors[index] = response.data\r\n                setDoctorDialog(false)\r\n                setDoctors(_doctors)\r\n                if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Успешно', detail: 'Запись обновлена', life: 3000 })\r\n              }).catch((reason)=>{\r\n                console.log('reason',reason)\r\n                setDoctorDialog(false)\r\n                if (toast!==null && toast.current!==null) \r\n                  toast.current.show(DEFAULT_ERROR_TOAST)\r\n              })\r\n              else {\r\n                if (toast!==null && toast.current!==null) toast.current.show({ severity: 'info', summary: 'Отклонено', detail: 'Изменения отсутствуют', life: 3000 })\r\n                setDoctorDialog(false)\r\n              }\r\n            } else {               \r\n              DoctorService.addDoctor(doctor.getAttributes()).then((response)=>{\r\n                if (response.data) {                  \r\n                  _doctors.push(response.data)\r\n                  setDoctors(_doctors)\r\n                  setDoctorDialog(false)                            \r\n                  setEmail({telcom_value:'', main:false} as IContact)\r\n                  setPhone({telcom_value:'', main:true} as IContact)\r\n                  setPosition('')\r\n                  if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Успешно', detail: 'Запись добавлена', life: 3000 })\r\n                }  \r\n              }).catch((reason)=>{\r\n                console.log('reason',reason)\r\n                setDoctorDialog(false)\r\n                if (toast!==null && toast.current!==null) \r\n                  toast.current.show(DEFAULT_ERROR_TOAST)\r\n              })\r\n            }\r\n          \r\n        }\r\n    }\r\n\r\n    const editDoctor = (_doctor: IDoctor) => {        \r\n        setPhone({telcom_value:'', main:true} as IContact)\r\n        setEmail({telcom_value:'', main:false} as IContact)        \r\n        if (_doctor.id !== doctor.id) setDoctor(new Doctor(_doctor))\r\n        doctor.person.contacts?.forEach((item)=>{if (item.main) setPhone({...item})\r\n        else setEmail({...item, telcom_value: item.telcom_value.replace('mailto:','')})})        \r\n        //addressStore.address = new Address(doctor.person.address || DEFAULT_ADDRESS)         \r\n        setPosition(doctor.position?.name || '')\r\n        setDoctorDialog(true)        \r\n    }\r\n\r\n    const confirmDeleteDoctor = (_doctor: IDoctor) => {\r\n        if (_doctor.id !== doctor.id) setDoctor(new Doctor(_doctor))\r\n        setDeleteDoctorDialog(true)\r\n    }\r\n\r\n    const deleteDoctor = () => {\r\n        if (doctor.id) DoctorService.removeDoctor(doctor.id).then(response=>{\r\n          let _doctors = doctors.filter(val => val.id !== doctor.id)\r\n          setDoctors(_doctors)\r\n          setDeleteDoctorDialog(false)\r\n          setDoctor(new Doctor(emptyDoctor))\r\n          if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Успешно', detail: 'Запись удалена', life: 3000 })\r\n        }).catch(reason=>{\r\n          console.log('reason',reason)\r\n          if (toast!==null && toast.current!==null) \r\n                  toast.current.show(DEFAULT_ERROR_TOAST)\r\n        })        \r\n    }\r\n    const findIndexById = (id:number | undefined) => {        \r\n        return doctors.findIndex((element)=>element.id === id)\r\n    }    \r\n\r\n    const confirmDeleteSelected = () => {\r\n        setDeleteDoctorsDialog(true);\r\n    }\r\n\r\n    const deleteSelectedDoctors = () => {\r\n        let _doctors = doctors.filter(val => !selectedDoctors.includes(val))\r\n        setDoctors(_doctors);\r\n        setDeleteDoctorsDialog(false);\r\n        setSelectedDoctors([]);\r\n        if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Удачно', detail: 'Записи удалены', life: 3000 });\r\n    }      \r\n\r\n    // Обработчик изменения контактов      \r\n    const onContactChange = (contact: IContact) => {   \r\n      let _contact = contact.telcom_value==='' ?\r\n      (contact.id ? {...contact,...DESTROY_OPTION} : {...contact}) :    \r\n      (contact.id ? {id:contact.id, parent_guid: contact.parent_guid, telcom_use: contact.telcom_use, telcom_value: contact.telcom_value, main: contact.main} : {...contact}) \r\n      if (doctor.person.contacts === undefined) doctor.person.contacts = []\r\n      if (_contact.id) {        \r\n          const idx = doctor.person.contacts.findIndex(item=>item.id===_contact.id)  \r\n          if (idx>-1) doctor.person.contacts[idx] = _contact        \r\n      } else doctor.person.contacts.push(_contact)       \r\n    } \r\n\r\n    const rightToolbarTemplate = () => {\r\n      return (\r\n        <React.Fragment>                \r\n          <Button  icon=\"pi pi-plus\" label=\"ДОБАВИТЬ\" className=\"p-button-success p-mr-2\" onClick={openNew} />\r\n          <Button  icon=\"pi pi-trash\" label=\"УДАЛИТЬ\" className=\"p-button-danger\" onClick={confirmDeleteSelected} disabled={!selectedDoctors || !selectedDoctors.length} />\r\n        </React.Fragment>\r\n      )\r\n    }\r\n\r\n    const actionBodyTemplate = (rowData: IDoctor) => {\r\n        return (\r\n            <React.Fragment>\r\n                <Button icon=\"pi pi-pencil\" className=\"p-button-rounded p-button-success p-mr-2\" onClick={() => editDoctor(rowData)} />\r\n                <Button icon=\"pi pi-trash\" className=\"p-button-rounded p-button-warning\" onClick={() => confirmDeleteDoctor(rowData)} />\r\n            </React.Fragment>\r\n        )\r\n    }\r\n    \r\n    const doctorDialogFooter = (\r\n        <React.Fragment>\r\n            <Button label=\"ОТМЕНА\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDialog} />\r\n            <Button label=\"ВНЕСТИ\" icon=\"pi pi-check\" className=\"p-button-text p-button-success\" onClick={saveDoctor} />\r\n        </React.Fragment>\r\n    )\r\n    const deleteDoctorDialogFooter = (\r\n        <React.Fragment>\r\n            <Button label=\"НЕТ\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDeleteDoctorDialog} />\r\n            <Button label=\"ДА\" icon=\"pi pi-check\" className=\"p-button-text p-button-warning\" onClick={deleteDoctor} />\r\n        </React.Fragment>\r\n    )\r\n    const deleteDoctorsDialogFooter = (\r\n        <React.Fragment>\r\n            <Button label=\"НЕТ\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDeleteDoctorsDialog} />\r\n            <Button label=\"ДА\" icon=\"pi pi-check\" className=\"p-button-text p-button-warning\" onClick={deleteSelectedDoctors} />\r\n        </React.Fragment>\r\n    )\r\n    const fioBodyTemplate = (row: IDoctor)=>{\r\n      const fio = row.person?.person_name      \r\n      const result = getOneLinePersonName(fio)\r\n      return <>{result}</>\r\n    }  \r\n    const layoutParams = {\r\n        title: 'Врачи',     \r\n        url: DOCTORS_ROUTE,\r\n        content:\r\n        <div>\r\n            <Toast ref={toast} />\r\n            <div className=\"card\">\r\n                <Toolbar className=\"p-mb-4\" right={rightToolbarTemplate}></Toolbar>\r\n                <DataTable ref={dt} value={doctors} selection={selectedDoctors} onSelectionChange={(e) => setSelectedDoctors(e.value)} responsiveLayout=\"scroll\"\r\n                    dataKey=\"id\" >\r\n                    <Column selectionMode=\"multiple\" headerStyle={{ width: '3rem' }} exportable={false}></Column>                    \r\n                    <Column  header=\"ФИО\" body={fioBodyTemplate}  style={{ minWidth: '10rem' }}></Column>\r\n                    <Column field=\"position.name\" header=\"Должность\" ></Column>\r\n                    <Column field=\"person.SNILS\" header=\"СНИЛС\" ></Column>                    \r\n                    <Column body={actionBodyTemplate} exportable={false} style={{ minWidth: '8rem' }}></Column>\r\n                </DataTable>\r\n            </div>\r\n\r\n            <Dialog visible={doctorDialog} style={{ width: '800px' }} header=\"Данные врача\" modal \r\n             footer={doctorDialogFooter} onHide={hideDialog} >   \r\n               <div className='p-fluid p-formgrid p-grid'> \r\n                <div className=\"p-field p-col-12 p-md-6\">\r\n                    <label htmlFor=\"fio\">Фамилия, Имя, Отчество(при наличии)</label>\r\n                    <PersonName personName={doctor.person?.fio} submitted={submitted}\r\n                      onChange={(value: IPersonName)=>{                       \r\n                        if (doctor.person) doctor.person.fio  = value\r\n                      }}  \r\n                    />                   \r\n                </div>                \r\n                <div className=\"p-field  p-col-12 p-md-3\">\r\n                    <label htmlFor=\"snils\">СНИЛС</label>\r\n                    <InputMask id=\"snils\"  \r\n                      type=\"text\" mask=\"999-999-999 99\"\r\n                      value={doctor.person.SNILS} \r\n                      onChange={(e)=>{ \r\n                        doctor.person.SNILS = e.target.value  \r\n                        }} \r\n                      required className={classNames({ 'p-invalid': submitted && !doctor.person?.SNILS})}\r\n                    />\r\n                    {submitted && !doctor.person?.SNILS && <small className=\"p-error\">СНИЛС некорректен.</small>}\r\n                </div>\r\n                <div className=\"p-field  p-col-12 p-md-4\">\r\n                    <label htmlFor=\"position\">Должность</label>\r\n                    <AutoComplete id=\"position\" suggestions={positions} field=\"name\"\r\n                      value={doctor.position || position } delay={1000} dropdown \r\n                      completeMethod={getPositions}\r\n                      onChange={(e)=>{ \r\n                        console.log('e.value',e.value)\r\n                        if (e.value.name) { \r\n                          doctor.position = e.value\r\n                          setPosition(e.value.name) \r\n                        } else setPosition(e.value)   \r\n                       }}  \r\n                        className={classNames({ 'p-invalid': submitted && !doctor.position})}\r\n                    />\r\n                    {submitted && !doctor.position && <small className=\"p-error\">Должность должна быть указана.</small>}\r\n                </div>\r\n                <div className=\"p-field  p-col-12 p-md-4\">\r\n                    <label htmlFor=\"phone\">телефон</label>\r\n                    <InputMask id=\"phone\"  \r\n                      type=\"text\" mask=\"tel:+79999999999\"\r\n                      value={phone.telcom_value} \r\n                      onChange={(e)=>{setPhone({...phone, telcom_value: e.target.value})  \r\n                        }} required className={classNames({ 'p-invalid': submitted && !/tel:\\+?[-0-9().]+/i.test(phone.telcom_value)})}\r\n                    />\r\n                    {submitted && !/tel:\\+?[-0-9().]+/i.test(phone.telcom_value) && <small className=\"p-error\">тел.номер некорректен!</small>}\r\n                </div>\r\n                <div className=\"p-field  p-col-12 p-md-4\">\r\n                    <label htmlFor=\"email\">email</label>\r\n                    <InputText id=\"email\" type=\"text\" \r\n                      value={email.telcom_value} \r\n                      onChange={(e)=>{  \r\n                        setEmail({...email, telcom_value:e.target.value})  \r\n                        }} className={classNames({ 'p-invalid': submitted && !(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='')})}\r\n                    />\r\n                    {submitted && !(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='') && <small className=\"p-error\">Неверный email</small>}\r\n                </div>\r\n                <InputAddress className=\"p-col-12\" submitted={submitted} \r\n                  label='Адрес проживания'\r\n                  value={doctor.person.address || DEFAULT_ADDRESS} strictly \r\n                  onClear={(value: IAddressR)=>{\r\n                    doctor.person.address = {...value}                    \r\n                  }}\r\n                  onChange={()=>doctor.person.address = {...addressStore.addressProps()}} \r\n                />    \r\n               </div>               \r\n            </Dialog>\r\n            <AddressDialog />\r\n            <Dialog visible={deleteDoctorDialog} style={{ width: '450px' }} header=\"Подтвердите\" modal footer={deleteDoctorDialogFooter} onHide={hideDeleteDoctorDialog}>\r\n                <div className=\"confirmation-content\">\r\n                    <i className=\"pi pi-exclamation-triangle p-mr-3\" style={{ fontSize: '2rem'}} />\r\n                    {doctor && <span>Вы действительно хотите удалить <b>{fioBodyTemplate}</b>?</span>}\r\n                </div>\r\n            </Dialog>\r\n\r\n            <Dialog visible={deleteDoctorsDialog} style={{ width: '450px' }} header=\"Подтвердите\" modal footer={deleteDoctorsDialogFooter} onHide={hideDeleteDoctorsDialog}>\r\n                <div className=\"confirmation-content\">\r\n                    <i className=\"pi pi-exclamation-triangle p-mr-3\" style={{ fontSize: '2rem'}} />\r\n                    {doctor && <span>Вы действительно хотите удалить выбранные записи?</span>}\r\n                </div>\r\n            </Dialog>\r\n        </div>\r\n    }\r\n    return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}\r\nexport default observer(DoctorsPage)               ","//Пол пациента\r\n//OID: 1.2.643.5.1.13.13.11.1040 Версия: 2.1\r\nexport const GENDERS = [\r\n  { code: 1, name: \"Мужской\" },\r\n  { code: 2, name: \"Женский\" },\r\n]\r\n","import { observer } from 'mobx-react-lite'\r\nimport { Context } from '..'\r\nimport { MultiSelect } from 'primereact/multiselect'\r\nimport { Column} from 'primereact/column'\r\nimport { DataTable, DataTableFilterMatchModeType, DataTableFilterMeta, DataTableSortParams } from 'primereact/datatable'\r\nimport { Toast } from 'primereact/toast'\r\nimport { FC, useContext, useEffect, useRef, useState } from 'react'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { CERTIFICATE_ROUTE, DIRECTION, LIST_ROUTE, RunsackFilterMatchMode } from '../utils/consts'\r\nimport { ICertificate } from '../models/responses/ICertificate'\r\nimport React from 'react'\r\nimport { Button } from 'primereact/button'\r\nimport { GENDERS } from '../NSI/1.2.643.5.1.13.13.11.1040'\r\nimport { DEAD_PLACE_TYPES } from '../NSI/1.2.643.5.1.13.13.99.2.20'\r\nimport { BASIS_DERMINING } from '../NSI/1.2.643.5.1.13.13.99.2.23'\r\nimport '../styles/components/DataTable.css'\r\nimport '../styles/components/MultiSelect.css'\r\nimport { CERT_TYPES } from '../NSI/1.2.643.5.1.13.13.99.2.19'\r\nimport { getOneLinePersonName } from '../models/IPersonName'\r\nimport  PrimeReact, {FilterMatchMode}  from 'primereact/api'\r\nimport { IReference } from '../models/IReference'\r\nimport { InputText } from 'primereact/inputtext'\r\n\r\n\r\n\r\n\r\ntype ListPageProps = {}\r\n\r\nconst ListPage: FC<ListPageProps> = (props: ListPageProps) => {\r\n  const {certificateStore, userStore} = useContext(Context)  \r\n  const [lazyLoading, setLazyLoading] = useState(false)\r\n  const [sortField, setSortField] = useState<string>('')\r\n  const [sortOrder, setSortOrder] = useState<-1 | 0 | 1>(0)\r\n  const [filters, setFilters] = useState<DataTableFilterMeta | undefined>()\r\n \r\n  PrimeReact.locale = 'ru'\r\n  const toast = useRef<Toast>(null)\r\n  const dt = useRef(null)  \r\n\r\n  const [selected, setSelected] = useState<ICertificate | undefined>()\r\n\r\n  const initFilters = () => {\r\n        setFilters({\r\n        'basis_determining': { value: null, matchMode: FilterMatchMode.IN },              \r\n        'number': { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.STARTS_WITH }]}, \r\n        'patient_fio': { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.CONTAINS }]},\r\n        'patient_birth_date' : { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.DATE_AFTER},{ value: null, matchMode: FilterMatchMode.DATE_BEFORE}]},\r\n        'issue_date': { operator: 'and', constraints: [{ value: null, matchMode: FilterMatchMode.DATE_AFTER},{ value: null, matchMode: FilterMatchMode.DATE_BEFORE}]},   \r\n        'death_place': { value: null, matchMode: FilterMatchMode.IN },        \r\n        })        \r\n    }\r\n   \r\n   \r\n    useEffect(() => {        \r\n        initFilters()\r\n    }, [])\r\n  const orderNumberBodyTemplate = (rowData: ICertificate)=>{\r\n    const idx = certificateStore.certs.indexOf(rowData)+1\r\n    return <i>{idx}</i>\r\n  }\r\n  const seriesNumberBodyTemplate = (rowData: ICertificate)=>{   \r\n    const cert_type = CERT_TYPES.find(el=>el.code===rowData.cert_type) \r\n    return <>{rowData.series} {rowData.number} {cert_type?.s_name}</>\r\n  }\r\n  const reasonsBodyTemplate = (rowData: ICertificate)=>{\r\n    const acme = rowData.reason_ACME\r\n    const isACME = !!acme\r\n    const cr = rowData.c_reason?.diagnosis\r\n    const ar = rowData.a_reason?.diagnosis\r\n    const br = rowData.b_reason?.diagnosis\r\n    const dr = rowData.d_reason?.ext_diagnosis\r\n    let result = isACME && !!cr && acme === cr.ICD10 ? \r\n      `(ПП-${acme})${cr.s_name}; ` : !!cr ? `(В-${cr.ICD10})${cr.s_name}; ` : ''\r\n    result += (isACME && !!ar && acme === ar.ICD10 ? `(ПП-${acme})${ar.s_name}; ` : \r\n          !!ar ? `(А-${ar.ICD10})${ar.s_name}; ` : '')\r\n    result += (isACME && !!br && acme === br.ICD10 ? `(ПП-${acme})${br.s_name}; ` : \r\n          !!br ? `(Б-${br.ICD10})${br.s_name}; ` : '')\r\n    result += (isACME && !!dr && acme === dr.ICD10 ? `(ПП-${acme})${dr.s_name}; ` : \r\n          !!dr ? `(Г-${dr.ICD10})${dr.s_name}; ` : '')\r\n    if (rowData.death_reasons && rowData.death_reasons.length>0) { \r\n      result +=\"Сопутствующие: \" \r\n      rowData.death_reasons.forEach(el=>{\r\n        result +=`(${el.diagnosis?.ICD10})${el.diagnosis?.s_name}; `\r\n      })          \r\n    }\r\n    return <span style={{fontSize:'smaller'}}>{result}</span>\r\n  }\r\n\r\n  const filterClearTemplate = (options:any) => {\r\n        return <Button type=\"button\" icon=\"pi pi-times\" onClick={options.filterClearCallback} className=\"p-button-secondary\"></Button>;\r\n    }\r\n   const filterApplyTemplate = (options:any) => {\r\n        return <Button type=\"button\" icon=\"pi pi-check\" \r\n        onClick={options.filterApplyCallback} className=\"p-button-success\"></Button>\r\n    }\r\n \r\n  const datesBodyTemplate = (rowData: ICertificate)=>{\r\n    let _result =''\r\n    const birth = rowData.patient?.birth_date\r\n    if (!!birth) _result = `${birth.slice(8,10)}.${birth.slice(5,7)}.${birth.slice(0,4)}`\r\n    const death = !rowData.death_datetime ? !rowData.death_year ? false : rowData.death_year.toString() : rowData.death_datetime \r\n    if (death && death.length>4) {\r\n       if (_result.length>0)_result += `-${death?.slice(8,10)}.${death.slice(5,7)}.${death.slice(0,4)}`\r\n       else _result = `?-${death?.slice(8,10)}.${death.slice(5,7)}.${death.slice(0,4)}`\r\n    } else if (death && death.length<5){\r\n       if (_result.length>0)_result += `-${death}`\r\n       else _result = `?-${death}`\r\n    } else if (!death && _result.length>0) {\r\n      _result += '-?'\r\n    }  \r\n    return _result\r\n  }  \r\n  const ageBodyTemplate = (rowData: ICertificate)=>{\r\n    if (!rowData.death_datetime || !rowData.patient?.birth_date) return ''   \r\n    const dd = new Date(rowData.death_datetime)\r\n    const db = new Date(rowData.patient?.birth_date)\r\n    let age = dd.getFullYear() - db.getFullYear()\r\n    const m = dd.getMonth() - dd.getMonth()\r\n    if (m < 0 || (m === 0 && dd.getDate() < db.getDate())) age--    \r\n    return age\r\n  }\r\n\r\n  const genderBodyTemplate = (rowData: ICertificate)=>{\r\n    if (!rowData.patient?.gender) return ''\r\n    else return GENDERS[rowData.patient.gender-1].name.slice(0,1)\r\n  }\r\n\r\n  const fioBodyTemplate = (rowData: ICertificate)=>{\r\n      if (!rowData.patient) return \"\"\r\n      else if (!rowData.patient.person) return \"не иденти-фицирован\"          \r\n      const result = getOneLinePersonName(rowData.patient.person.person_name)\r\n      return <>{result}</>\r\n    }\r\n  const deathPlaceBodyTemplate = (rowData: ICertificate) => {\r\n    if (!rowData.death_place) return ''\r\n    else {\r\n     const place = DEAD_PLACE_TYPES.find(el=>el.code === rowData.death_place)\r\n     if (!place) return ''\r\n     else return <span style={{fontSize:'small'}}>{place.name}</span>\r\n    }      \r\n  }   \r\n  const basisDeterminingBodyTemplate = (rowData: ICertificate) => {\r\n    if (!rowData.basis_determining) return ''\r\n    else {\r\n     const basis = BASIS_DERMINING.find(el=>el.code === rowData.basis_determining)\r\n     if (!basis) return ''\r\n     else return <span style={{fontSize:'small'}}>{basis.name}</span>\r\n    }      \r\n  }\r\n  const custodianBodyTemplate = (rowData: ICertificate) => {\r\n    const cusName = rowData.custodian?.name\r\n    if (!cusName) return ''\r\n    else return <span style={{fontSize:'small'}}>{cusName}</span>\r\n  }  \r\n\r\n  const custodian = userStore.userInfo?.roles.includes('MIAC') ? \r\n    <Column  header=\"Мед. организация\" body={custodianBodyTemplate}                      \r\n                      style={{ flexGrow: 1, flexBasis: '100px' }}> </Column> :\r\n    <></>                  \r\n  const doctorBodyTemplate = (rowData: ICertificate) => {\r\n    if (!rowData.author) return ''\r\n    else {       \r\n      const result = getOneLinePersonName(rowData.author.doctor.person_name)\r\n      return  <span style={{fontSize:'small'}}>{result}</span>\r\n    }      \r\n  }\r\n  const positionBodyTemplate = (rowData: ICertificate) => {\r\n    if (!rowData.author?.doctor.position ) return ''\r\n    else return  <span style={{fontSize:'small'}}>{rowData.author.doctor.position.name}</span>         \r\n  }  \r\n  const issueDateBodyTemplate = (rowData: ICertificate) => {\r\n    const iDate = rowData.issue_date\r\n    if (!iDate ) return ''    \r\n    else return  <span style={{fontSize:'small'}}>{`${iDate.slice(8,10)}.${iDate.slice(5,7)}.${iDate.slice(0,4)}`}</span>         \r\n  }\r\n\r\n  const actionBodyTemplate = (rowData: ICertificate) => {       \r\n        return (\r\n            <React.Fragment>\r\n                <Button icon=\"pi pi-pencil\" className=\"p-button-rounded p-button-success p-mr-2\" onClick={()=>userStore.history().push(`${CERTIFICATE_ROUTE}/${rowData.id}?q=0`)} />\r\n                \r\n            </React.Fragment>\r\n        )\r\n    }\r\n  const loadCertificatesLazy = (event: {first:number, last:number}) => {       \r\n      certificateStore.getList(()=>{setLazyLoading(false)}, event.first, event.last)      \r\n  }   \r\n  const sortLazy = (e: DataTableSortParams) => {    \r\n    const order =  e.sortOrder ? DIRECTION[e.sortOrder] : DIRECTION[0]\r\n    certificateStore.sorts = [`${e.sortField} ${order}`]\r\n    setSortField(e.sortField)\r\n    if (e.sortOrder) setSortOrder(e.sortOrder)\r\n  }  \r\n  const basisDeterminingFilterTemplate = (options: any) => {\r\n        return <MultiSelect value={options.value} options={BASIS_DERMINING}  onChange={(e) => options.filterCallback(e.value)} optionLabel=\"name\" placeholder=\"не выбрано\" className=\"p-column-filter\" />;\r\n    }\r\n  const deathPlaceFilterTemplate = (options: any) => {\r\n        return <MultiSelect value={options.value} options={DEAD_PLACE_TYPES}  onChange={(e) => options.filterCallback(e.value)} optionLabel=\"name\" placeholder=\"не выбрано\" className=\"p-column-filter\" />;\r\n    }  \r\n  const fioFilterTemplate = (options: any) => {\r\n        return <InputText value={options.value}  onChange={(e) => options.filterCallback(e.target.value)}  placeholder=\"строка поиска\" className=\"p-column-filter\" />\r\n    }  \r\n  const footer = `Всего ${ certificateStore.count } свидетельств(а).`  \r\n  const layoutParams = {\r\n        title: 'СПИСОК СВИДЕТЕЛЬСТВ',     \r\n        url: LIST_ROUTE,\r\n        content:\r\n        <>\r\n          <Toast ref={toast} />\r\n          <div id='tableDiv' className='p-card' >             \r\n              <DataTable ref={dt} value={certificateStore.certs}  responsiveLayout=\"scroll\" scrollDirection=\"both\"\r\n                emptyMessage=\"нет данных, удовлетворяющих запросу\" scrollable scrollHeight=\"72vh\" \r\n                selectionMode=\"single\" selection={selected}  dataKey=\"id\" size=\"small\"\r\n                footer={footer}\r\n                onSelectionChange={e =>{\r\n                  certificateStore.select(certificateStore.certs.findIndex(el=>el.id === e.value.id))\r\n                  setSelected(e.value)\r\n                }} filterDisplay=\"menu\" \r\n                onFilter={e=>{\r\n                  console.log('e',e)\r\n                  let _filters = {} as any\r\n                  let _constraint: any = e.filters['issue_date'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`issue_date${RunsackFilterMatchMode[_constraint.constraints[0].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value                  \r\n                  if (_constraint && _constraint.constraints[1] && _constraint.constraints[1].value) \r\n                    _filters[`issue_date${RunsackFilterMatchMode[_constraint.constraints[1].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[1].value\r\n                  _constraint = e.filters['patient_birth_date'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`patient_birth_date${RunsackFilterMatchMode[_constraint.constraints[0].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value                  \r\n                  if (_constraint && _constraint.constraints[1] && _constraint.constraints[1].value) \r\n                    _filters[`patient_birth_date${RunsackFilterMatchMode[_constraint.constraints[1].matchMode  as DataTableFilterMatchModeType]}`]=_constraint.constraints[1].value     \r\n                  _constraint = e.filters['number'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`number${RunsackFilterMatchMode[_constraint.constraints[0].matchMode as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value\r\n                  _constraint = e.filters['patient_fio'] \r\n                  if (_constraint && _constraint.constraints[0] && _constraint.constraints[0].value) \r\n                    _filters[`patient_fio${RunsackFilterMatchMode[_constraint.constraints[0].matchMode as DataTableFilterMatchModeType]}`]=_constraint.constraints[0].value  \r\n                  _constraint = e.filters['basis_determining']   \r\n                  if (_constraint && _constraint.value) {\r\n                    const values = _constraint.value as IReference[]\r\n                    let _codes = [] as string[]\r\n                    values.map(item=> _codes.push(item.code)) \r\n                    _filters.basis_determining_in = _codes   \r\n                  }\r\n                   _constraint = e.filters['death_place']   \r\n                  if (_constraint && _constraint.value) {\r\n                    const values = _constraint.value as IReference[]\r\n                    let _codes = [] as string[]\r\n                    values.map(item=> _codes.push(item.code)) \r\n                    _filters.death_place_in = _codes   \r\n                  }\r\n                  certificateStore.filters = _filters\r\n                  certificateStore.getList(()=>{})  \r\n                }}                \r\n                virtualScrollerOptions={{ lazy: true, onLazyLoad: loadCertificatesLazy, itemSize: 6, delay: 200, showLoader: false, loading: lazyLoading }} filters={filters} filterLocale={'ru'}\r\n                onRowDoubleClick={()=>userStore.history().push(`${CERTIFICATE_ROUTE}/${certificateStore.cert.id}?q=0`)}\r\n                onSort={sortLazy} sortField={sortField} sortOrder={sortOrder}\r\n                >  \r\n                    <Column header=\"№ п.п\"  body={orderNumberBodyTemplate} \r\n                      style={{ flexGrow: 1, flexBasis: '38px' }} frozen></Column>                                   \r\n                    <Column header=\"Серия Номер Вид\" body={seriesNumberBodyTemplate} filterField='number'\r\n                      filter filterPlaceholder=\"Поиск по номеру\" dataType='text' showFilterOperator ={false}                                           \r\n                      filterClear={filterClearTemplate} filterApply={filterApplyTemplate} sortField='number' sortable style={{ flexGrow: 1, flexBasis: '110px' }} frozen></Column>\r\n                    <Column header=\"Причины смерти и соп. патологии\"  \r\n                      style={{ flexGrow: 1, flexBasis: '250px' }} body={reasonsBodyTemplate}></Column>\r\n                    <Column  header=\"ФИО\" body={fioBodyTemplate} \r\n                      sortField='patient.person.person_name.family'\r\n                      dataType='text' showFilterOperator ={false}\r\n                      filter filterField='patient_fio' filterClear={filterClearTemplate} filterApply={filterApplyTemplate}  filterElement={fioFilterTemplate}\r\n                      sortable style={{ flexGrow: 1, flexBasis: '140px' }}>  </Column>                    \r\n                    <Column  header=\"Даты\" body={datesBodyTemplate} filter sortable\r\n                       showFilterOperator={false} dataType='date' filterPlaceholder=\"дата рождения\"\r\n                     filterField='patient_birth_date' sortField='patient.birth_date' \r\n                     filterClear={filterClearTemplate} filterApply={filterApplyTemplate}  \r\n                       style={{ flexGrow: 1, flexBasis: '110px' }}> </Column>\r\n                    <Column  header=\"Лет\" body={ageBodyTemplate} \r\n                      style={{ flexGrow: 1, flexBasis: '46px' }}> </Column>\r\n                    <Column  header=\"Пол\" body={genderBodyTemplate} sortField='patient.gender'\r\n                      sortable style={{ flexGrow: 1, flexBasis: '56px' }}> </Column>    \r\n                    <Column  header=\"Адрес проживания\" sortable \r\n                      field='patient.person.address.streetAddressLine'\r\n                      style={{ flexGrow: 1, flexBasis: '200px' }}> </Column>  \r\n                    <Column  header=\"Адрес смерти\" sortable\r\n                      field='death_addr.streetAddressLine'\r\n                      style={{ flexGrow: 1, flexBasis: '200px' }}> </Column>                     \r\n                    <Column  header=\"Смерть наступила\" body={deathPlaceBodyTemplate}\r\n                      showFilterMatchModes={false} filterElement={deathPlaceFilterTemplate}\r\n                      filterClear={filterClearTemplate} filterApply={filterApplyTemplate} \r\n                      filter filterField='death_place' sortField='death_place' sortable \r\n                      style={{ flexGrow: 1, flexBasis: '140px' }}> </Column>  \r\n                    <Column  header=\"Основание заключения\" body={basisDeterminingBodyTemplate}\r\n                      sortField='basis_determining' sortable\r\n                      filterField='basis_determining' showFilterMatchModes={false}\r\n                      filterClear={filterClearTemplate} filterApply={filterApplyTemplate}\r\n                      filter filterElement={basisDeterminingFilterTemplate} \r\n                      style={{ flexGrow: 1, flexBasis: '140px' }}> </Column>\r\n                    {custodian}\r\n                    <Column  header=\"Специалист\" body={doctorBodyTemplate}\r\n                      style={{ flexGrow: 1, flexBasis: '120px' }}> </Column>\r\n                    <Column  header=\"Должность\" body={positionBodyTemplate}\r\n                      style={{ flexGrow: 1, flexBasis: '130px' }}> </Column>  \r\n                    <Column  header=\"Выдано\" body={issueDateBodyTemplate} \r\n                     showFilterOperator={false} dataType='date' \r\n                     filterField='issue_date' sortField='issue_date' filterPlaceholder=\"дата выпуска\"\r\n                     filterClear={filterClearTemplate} filterApply={filterApplyTemplate}                       \r\n                     filter sortable style={{ flexGrow: 1, flexBasis: '100px' }}> </Column>                \r\n                    <Column body={actionBodyTemplate} exportable={false} \r\n                      style={{ flexGrow: 1, flexBasis: '100px' }}></Column>\r\n                </DataTable>\r\n          </div>  \r\n        </>\r\n    }\r\n\r\n return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n )  \r\n}\r\nexport default observer(ListPage)","export default __webpack_public_path__ + \"static/media/security.f40a12e4.png\";","const LoginImageDiv = () => {\r\n  return (\r\n    <div className='login-image'>\r\n      <div className='login-image-content'>\r\n        <h1>Медицинское</h1>\r\n        <h1>свидетельство</h1>\r\n        <h1>о смерти</h1>\r\n        <h3>версия 3.0</h3>\r\n        <h3>(с учетом требований CDA_R2 уровня 3)</h3>\r\n      </div>\r\n      <div className='login-footer'>\r\n        <p>2022 © АО \"АМИАЦ\"</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default LoginImageDiv\r\n","import { observer } from 'mobx-react-lite'\r\nimport { useContext, useState } from 'react'\r\nimport { FC } from 'react'\r\nimport { Link} from 'react-router-dom'\r\nimport { Context } from '..'\r\nimport logo from \"../images/security.png\"\r\nimport '../styles/login.css'\r\nimport  '../styles/components/Inputtext.css'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport {Password} from 'primereact/password'\r\nimport { Button } from 'primereact/button'\r\nimport { Field, Form } from 'react-final-form'\r\nimport { classNames } from 'primereact/utils'\r\nimport LoginImageDiv from '../static/LoginImageDiv'\r\n\r\ninterface IAuth {\r\n  email: string\r\n  password: string\r\n}\r\nconst LoginPage: FC = () => {    \r\n  const [email, setEmail] = useState<string>('')\r\n  const {userStore} = useContext(Context)   \r\n  \r\n  const validate = (data: IAuth) => {\r\n    let errors: any = {}        \r\n        if (!data.email) {\r\n            errors.email = 'Поле <Email> обязательно'\r\n        } else if (/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(data.email)){\r\n          setEmail(data.email)\r\n        }\r\n        if (!data.password) {\r\n            errors.password = 'Поле <Пароль> обязательно'\r\n        }        \r\n        return errors\r\n  }\r\n  const onSubmit = async (data: IAuth, form: any) => {          \r\n    userStore.login(data.email, data.password)        \r\n  }\r\n  const onPassordRecovery = async () => {          \r\n    userStore.renew_link(email)        \r\n  }\r\n  const isFormFieldValid = (meta: any) => !!(meta.touched && meta.error)\r\n  const getFormErrorMessage = (meta: any) => {\r\n    return (isFormFieldValid(meta) && <small className=\"p-error\">{meta.error}</small>)\r\n  }    \r\n  return (\r\n  <>\r\n    <div className=\"login-body\">\r\n      <div className=\"login-wrapper\">\r\n        <div className=\"login-panel\">\r\n          <img src={logo} className='logo' alt=\"logo\"></img>\r\n          <div id=\"clickForm\" className=\"login-form\" >\r\n            <h2>Авторизация</h2>\r\n            <p>Нет учетной записи? <Link to=\"/registration\">Регистрация</Link></p>\r\n            <Form onSubmit={onSubmit} initialValues={{email: '', password: '' }} \r\n              validate={validate} \r\n              render={({ handleSubmit }) => (\r\n              <form  onSubmit={handleSubmit}  className=\"p-fluid\">\r\n                <Field name=\"email\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <i className=\"pi pi-envelope\" />\r\n                        <InputText id=\"email\"  autoFocus {...input} className={classNames({ 'p-invalid': isFormFieldValid(meta) })} />\r\n                        <label htmlFor=\"email\" \r\n                        className={classNames({ 'p-error': isFormFieldValid(meta) })}>Email*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"password\"  render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password\" autoComplete='off' {...input} toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n              <Button type=\"submit\" label=\"ВОЙТИ\" style={{marginBottom:\"1rem\"}}/>   \r\n              <Button type=\"button\" onClick={onPassordRecovery} label=\"не помню пароль\" className=\"p-button-link\"  /> \r\n            </form>)}/>            \r\n          </div>\r\n        </div>  \r\n        <LoginImageDiv/>      \r\n      </div>\r\n    </div>\r\n  </>\r\n)}\r\nexport default observer(LoginPage)","import { observer } from 'mobx-react-lite'\r\nimport { FC, useContext, useEffect } from 'react'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { CERTIFICATE_ROUTE, HOME_ROUTE, LIST_ROUTE, MO_SETTINGS_ROUTE } from '../utils/consts'\r\nimport { Button } from 'primereact/button'\r\nimport { Card } from 'primereact/card'\r\nimport { DataTable } from 'primereact/datatable'\r\nimport { Column } from 'primereact/column'\r\nimport { Divider } from 'primereact/divider'\r\nimport { Context } from '..'\r\nimport { ProgressSpinner } from 'primereact/progressspinner'\r\n\r\ntype MainPageProps = {}\r\n\r\nconst MainPage: FC<MainPageProps> = (props: MainPageProps) => {\r\n  const {userStore, certificateStore, layoutStore} = useContext(Context)\r\n  useEffect(()=>{\r\n    if (userStore.userInfo) certificateStore.userInfo = userStore.userInfo\r\n    layoutStore.isLoading = true\r\n    certificateStore.getList(()=>{layoutStore.isLoading = false},0,4)         \r\n  },[certificateStore, layoutStore, userStore.userInfo])\r\n  \r\n  const news =[{version:\"3.00\",record:\"с учетом требований CDA_R2 уровня 3\"},\r\n  {version:\"2.10\",record:\"Добавлена возможность 'грязной' выборки в ОТЧЕТНОМ БЛОКЕ\"},\r\n  {version:\"2.09\",record:\"Добавлена возможность ввода периода времени в п.19II\"}]\r\n  const layoutParams= {\r\n    title: 'Главная',     \r\n    url: HOME_ROUTE,\r\n    content: userStore ? ( \r\n      <>     \r\n        <div className=\"p-d-flex p-flex-column p-jc-around p-flex-md-row p-flex-wrap\">\r\n          <Button style={{minWidth:'243px'}} className=\"p-mr-2 p-mb-2 p-shadow-3\" label=\"Ввод свидетельства\"  title=\"Форма ввода свидетельства\" \r\n          onClick={(e)=>{userStore.history().push(`${CERTIFICATE_ROUTE}/${certificateStore.cert.id}?q=0`)}}/>\r\n            <Button style={{minWidth:'243px'}} className=\"p-button-secondary p-mr-2 p-mb-2 p-shadow-3\" label=\"Настройки\" title=\"Настройки учетной записи\" onClick={(e)=>{userStore.history().push(`${MO_SETTINGS_ROUTE}/${userStore.userInfo?.organization.id}`)}}/>\r\n            <Button style={{minWidth:'243px'}} className=\"p-button-secondary p-mr-2 p-mb-2 p-shadow-3\" id=\"reports\" label=\"Отчеты\" title=\"Формирование отчетов\" />\r\n            <Button style={{minWidth:'243px'}} className=\"p-mr-2 p-mb-2 p-shadow-3\" label=\"Перинатальное свидетельство\" /> \r\n            <Button className=\"p-button-secondary p-mr-2 p-mb-2 p-shadow-3\" \r\n            id=\"repBt\" style={{minWidth:'243px'}} label=\"ЖУРНАЛ\" title=\"Журнал выданных свидетельств и копий\" />                     \r\n            <Button style={{minWidth:'243px'}} className=\"p-button-success p-mr-2 p-mb-2 p-shadow-3\" label=\"Список свидетельств\" title=\"Список введеных свидетельств\" onClick={(e)=>{userStore.history().push(LIST_ROUTE)}}/>            \r\n        </div> \r\n        <Divider style={{marginTop:'1rem', marginBottom:'1rem'}}/>\r\n        <div className=\"p-d-flex p-flex-column p-jc-around p-flex-md-row p-flex-wrap\">\r\n          <Card className=\"p-mr-2 p-mb-2\" title=\"Последние изменения\" >\r\n            <DataTable className=\"p-datatable-sm\" value={news} responsiveLayout='scroll'>\r\n              <Column field=\"version\" header=\"Версия\"></Column>\r\n              <Column field=\"record\" header=\"Что нового\"></Column>\r\n            </DataTable> \r\n          </Card>\r\n        </div>                  \r\n      </>\r\n    ) : (<ProgressSpinner/>)   \r\n  }  \r\n  return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}\r\nexport default observer(MainPage)","export default __webpack_public_path__ + \"static/media/ava.ec8d39a0.jpg\";","import $api, { API_URL } from \"../http\"\r\nimport { AxiosResponse } from \"axios\"\r\nimport { IUser } from \"../models/IUser\"\r\nimport { IUserInfo } from \"../models/responses/IUserInfo\"\r\nexport default class UsersService {\r\n  static async fetchUsers(): Promise<AxiosResponse<IUser[]>> {\r\n    return $api.post(`${API_URL}model/User/`, {\r\n      render_options: { only: [\"id\", \"email\", \"roles\", \"organization_id\", \"activated\"] },\r\n    })\r\n  }\r\n  static async getUser(id: number): Promise<AxiosResponse<IUserInfo>> {\r\n    return $api.post(`${API_URL}/show/model/User/${id}`, {\r\n      render_options: { only: [\"id\", \"roles\"], include: [\"person_name\", \"organization\", \"contacts\"] },\r\n      includes: [\"person_name\", \"organization\", \"contacts\"],\r\n      organization: { only: [\"id\", \"name\", \"sm_code\"] },\r\n    })\r\n  }\r\n}\r\n","import $api, { API_URL } from \"../http\"\r\nimport { AxiosResponse } from \"axios\"\r\nimport { IReferenceId } from \"../models/IReference\"\r\nimport { IOrganization } from \"../models/IOrganization\"\r\n\r\nconst ORGANIZATION_RENDER_OPTIONS = {\r\n  render_options: { except: [\"updated_at\", \"old_oid\"], include: [\"address\", \"contacts\"] },\r\n  includes: [\"address\", \"contacts\"],\r\n  address: { except: [\"updated_at\", \"created_at\"], include: [\"null_flavors\"] },\r\n}\r\nexport default class OrganizationService {\r\n  // GET from public endpoint /auth/organizations/\r\n  static async getOrganizations(): Promise<AxiosResponse<{ organizations: IReferenceId[] }>> {\r\n    return $api.get(`${API_URL}auth/organizations/`)\r\n  }\r\n\r\n  // POST /show/model/Organization/:id from UEC endpoint\r\n  static async getOrganization(id: string): Promise<AxiosResponse<IOrganization>> {\r\n    return $api.post(`${API_URL}/show/model/Organization/${id}`, ORGANIZATION_RENDER_OPTIONS)\r\n  }\r\n  //PUT request for update Doctor /REST_API/v1/model/Doctor/:id\r\n  static async updateOrganization(request: any): Promise<AxiosResponse<IOrganization>> {\r\n    return $api.put(`${API_URL}model/Organization/${request.Organization.id}`, {\r\n      ...request,\r\n      ...ORGANIZATION_RENDER_OPTIONS,\r\n    })\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/hospital.0e4a3324.jpg\";","import { FC, useContext, useEffect, useRef, useState } from 'react'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport ava from '../images/hospital.jpg'\r\nimport '../styles/pages/ProfilePage.css'\r\nimport '../styles/components/AutoComplete.css'\r\nimport { DESTROY_OPTION, MO_SETTINGS_ROUTE} from '../utils/consts'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport OrganizationService from '../services/OrganizationService'\r\nimport { IOrganization } from '../models/IOrganization'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { ProgressSpinner } from 'primereact/progressspinner'\r\nimport { IAudit } from '../models/IAudit'\r\nimport { classNames } from 'primereact/utils'\r\nimport { InputMask } from 'primereact/inputmask'\r\nimport { IContact } from '../models/IContact'\r\nimport { Button } from 'primereact/button'\r\nimport { Toast } from 'primereact/toast'\r\nimport { DEFAULT_ERROR_TOAST } from '../utils/defaults'\r\nimport { Context } from '..'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { IReferenceId } from '../models/IReference'\r\nimport AddressDialog from '../components/dialogs/AddressDialog'\r\nimport { observer } from 'mobx-react-lite'\r\nimport AddressFC2 from '../components/inputs/InputAddress'\r\nimport { IAddressR } from '../models/requests/IAddressR'\r\n\r\n// страница настроек профиля организации\r\n// Organization profile page\r\n\r\n// используем роут с параметром id для загрузки с API\r\ninterface IMatch extends IRouteMatch {  \r\n  params: {id: string}\r\n}\r\ninterface SettingsPageProps extends IRouteProps { \r\n    match: IMatch  \r\n}\r\n\r\n\r\nconst SettingsPage: FC<SettingsPageProps> = (props: SettingsPageProps) =>{ \r\n  const {userStore, addressStore} = useContext(Context)\r\n  const [audits, setAudits] = useState<IAudit[]>([])\r\n  const [submitted, setSubmitted] = useState(false)\r\n  const [email, setEmail] = useState<IContact>({telcom_value:'', main:false} as IContact) \r\n  const [phone, setPhone] = useState<IContact>({telcom_value:'', main:true} as IContact)\r\n  const [organization, setOrganization] = useState<IOrganization | null>(null)\r\n  const [ID, setID] = useState<number | null>(null)\r\n  const toast = useRef<Toast>(null) \r\n  useEffect(()=>{\r\n    if (organization!==null && organization.id !== ID) {\r\n      setPhone({telcom_value:'', main:true} as IContact)\r\n      setEmail({telcom_value:'', main:false} as IContact)          \r\n      organization.contacts.forEach((item)=>{if (item.main) setPhone({...item})\r\n        else setEmail({...item, telcom_value: item.telcom_value.replace('mailto:','')})})\r\n      setID(organization.id)      \r\n    }\r\n  },[organization, ID])\r\n\r\n  useEffect(()=>{\r\n    if (organization===null && props.match.params.id) {\r\n        OrganizationService.getOrganization(props.match.params.id)\r\n        .then(response=>{        \r\n          setOrganization(response.data)        \r\n        })\r\n        .catch((reason=>{console.log(reason)\r\n          if (toast!==null && toast.current!==null) toast.current.show(DEFAULT_ERROR_TOAST)\r\n        }))      \r\n    }\r\n  },[organization, props.match.params.id, userStore.userInfo])\r\n  const [organizations, setOrganizations] = useState<IReferenceId[] | null>(null)\r\n  useEffect(()=>{\r\n    if (organizations===null && userStore.userInfo\r\n       && userStore.userInfo.roles.includes('ADMIN')) \r\n    OrganizationService.getOrganizations().then(response=>\r\n      setOrganizations(response.data.organizations)\r\n    ).catch(()=>{\r\n      setOrganizations([])\r\n      if (toast!==null && toast.current!==null) toast.current.show(DEFAULT_ERROR_TOAST)\r\n    })},[organizations, userStore.userInfo])\r\n  const changesAudit = (fieldName: string, field: string, oldValue: string, newValue: string) => {\r\n    if (organization ===null) return\r\n    let _audits = audits\r\n    const audit = _audits.find(element=>element.field === field) || {field, before: oldValue} as IAudit\r\n    if (audit.after === undefined) _audits.push(audit)    \r\n    audit.after = newValue   \r\n    audit.detail = `${fieldName}: ${audit.before} -> ${audit.after}`     \r\n    setAudits(_audits)\r\n  }\r\n  \r\n\r\n  // Обработчик изменения контактов      \r\n  const onContactChange = (contact: IContact) => { \r\n      if (organization === null) return  \r\n      let _contact = contact.telcom_value==='' ?\r\n      (contact.id ? {...contact,...DESTROY_OPTION} : {...contact}) :    \r\n      (contact.id ? {id:contact.id, parent_guid: contact.parent_guid, telcom_use: contact.telcom_use, telcom_value: contact.telcom_value, main: contact.main} : {...contact}) \r\n      if (organization.contacts === undefined) organization.contacts = []\r\n      if (_contact.id) {        \r\n          const idx = organization.contacts.findIndex(item=>item.id===_contact.id)  \r\n          if (idx>-1) organization.contacts[idx] = _contact        \r\n      } else organization.contacts.push(_contact)       \r\n  }\r\n\r\n  // проверка возможности сохранения\r\n  const isSaveAvaible = () : boolean => {\r\n    if (organization === null) return false    \r\n    let _result = audits.length > 0    \r\n    _result = _result && /tel:\\+?[-0-9().]+/i.test(phone.telcom_value)    \r\n    _result = _result && (/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='')    \r\n    _result = _result && !(!organization.name || (!organization.name && organization.name.length > 100))\r\n    _result = _result && !!organization.name_full    \r\n    //_result = _result && !(!organization.address || !organization.address.houseGUID)\r\n   \r\n    return  _result\r\n  }  \r\n  const saveOrganization = () => {\r\n    if (organization===null) return    \r\n    setSubmitted(true)\r\n    if (isSaveAvaible()) {\r\n      onContactChange(phone)\r\n      onContactChange(email)\r\n      let _organization = { id: organization.id,                               \r\n                            name: organization.name,\r\n                            name_full: organization.name_full,\r\n                            license: organization.license || null,\r\n                            license_data: organization.license_data || null,\r\n                            okpo: organization.okpo || null,\r\n                            sm_code: organization.sm_code || '00',\r\n                            contacts_attributes: organization.contacts,\r\n                            address_attributes: organization.address\r\n                           } as any                                                     \r\n      OrganizationService.updateOrganization({Organization: _organization, audits: audits})\r\n        .then(response=>{          \r\n          setAudits([])\r\n          setSubmitted(false)\r\n          setOrganization(response.data)\r\n          //console.log('response.data',response.data)\r\n          if (toast!==null && toast.current!==null) toast.current.show({ severity: 'success', summary: 'Успешно', detail: 'Изменения применены', life:3000 })\r\n        })\r\n        .catch((reason=>{console.log(reason)\r\n          if (toast!==null && toast.current!==null) toast.current.show(DEFAULT_ERROR_TOAST)\r\n        }))    \r\n    } else if (toast!==null && toast.current!==null) toast.current.show({ severity: 'info', summary: 'Отклонено', detail: 'Изменения отсутствуют или неприменимы', life:3000 })   \r\n  } \r\n  \r\n  const adminOpportunities = ()=>{    \r\n    return (userStore.userInfo && userStore.userInfo.roles.includes('ADMIN')) ? \r\n    (<>\r\n      <div className=\"p-field p-col-12\">\r\n        <label htmlFor=\"organization\" >Выбрать медорганизацию</label>\r\n        <Dropdown id=\"organization\"  options={organizations || []}\r\n          onChange={(e)=>{            \r\n            if (e.value.id) {\r\n              const history = userStore.history()\r\n              let link = `${MO_SETTINGS_ROUTE}/${e.value.id}`\r\n              setOrganization(null)              \r\n              history.push(link)              \r\n            }  \r\n          }}\r\n          filter showClear optionLabel=\"name\" />\r\n      </div>\r\n    </>) \r\n    : (<></>)     \r\n  }\r\n  const layoutParams = {\r\n    title: 'Профиль медорганизации',     \r\n    url: MO_SETTINGS_ROUTE,\r\n    content: organization ? (<>    \r\n    <div className=\"card widget-user-card\" key={props.match.params.id}>\r\n      <div className=\"user-card-header\">\r\n        <img src={ava} alt=\"\" className=\"user-card-avatar\" />\r\n      </div>\r\n      <div className=\"user-card-body\">  \r\n      <div className=\"user-card-title\">\r\n        {organization.name || ''}\r\n      </div>             \r\n      <div className=\"user-card-subtext\">{organization.oid}</div>\r\n      <div className=\"p-grid user-card-stats\">\r\n        <div className=\"p-col-4\">\r\n          <i className=\"pi pi-users\"></i>\r\n          <div>14 Создано</div>\r\n        </div>\r\n        <div className=\"p-col-4\">\r\n          <i className=\"pi pi-bookmark\"></i>\r\n          <div>2 Выданно</div>\r\n        </div>\r\n        <div className=\"p-col-4\">\r\n          <i className=\"pi pi-check-square\"></i>\r\n          <div>6 Отправленно</div>\r\n        </div>\r\n      </div>        \r\n    </div>\r\n    <div className='card' style={{textAlign: 'left'}} >      \r\n        <div className='p-fluid p-formgrid p-grid'>\r\n          <div className=\"p-field p-col-12 p-md-5 \">\r\n            <label htmlFor=\"name\">Наименование</label>\r\n            <InputText id=\"name\" required value={organization.name || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"Наименование\", \"name\", _organization.name || '', e.target.value || '')\r\n                   _organization.name = e.target.value\r\n                  setOrganization(_organization) \r\n              }}\r\n              autoFocus className={classNames({ 'p-invalid': submitted && organization.name && organization.name?.length > 100})}\r\n            />\r\n            {submitted && (!organization.name || (organization.name && organization.name.length > 100)) && <small className=\"p-error\">Краткое наименование более 100 знаков или отсутствует</small>}\r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-7\">\r\n            <label htmlFor=\"name_full\">Полное наименование</label>\r\n            <InputText id=\"name_full\" value={organization.name_full || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}                  \r\n                  changesAudit(\"Полное наименование\", \"name_full\", _organization.name || '', e.target.value || '')\r\n                  _organization.name_full = e.target.value\r\n                  setOrganization(_organization) \r\n              }}\r\n              required className={classNames({ 'p-invalid': submitted && !organization.name_full})}\r\n            />\r\n            {submitted && !organization.name_full && <small className=\"p-error\">Полное наименование обязательно</small>}\r\n          </div>\r\n          <div className=\"p-field p-col-12\">\r\n            <label htmlFor=\"license\">Cерия и номер лицензии на осуществление медицинской деятельности</label>\r\n            <InputText id=\"license\" value={organization.license || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"Cерия и номер лицензии\", \"license\", _organization.license || '', e.target.value || '')\r\n                   _organization.license = e.target.value\r\n                  setOrganization(_organization) \r\n              }}               \r\n            />            \r\n          </div>\r\n          <div className=\"p-field p-col-12\">\r\n            <label htmlFor=\"license_data\">указание на Федеральную службу по надзору в сфере здравоохранения и дату регистрации лицензии</label>\r\n            <InputText id=\"license_data\" value={organization.license_data || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"Данные лицензии\", \"license_data\", _organization.license_data || '', e.target.value || '')\r\n                   _organization.license_data = e.target.value\r\n                  setOrganization(_organization) \r\n              }}               \r\n            />            \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">\r\n            <label htmlFor=\"okpo\">ОКПО</label>\r\n            <InputText id=\"okpo\" value={organization.okpo || ''} \r\n              onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"ОКПО\", \"okpo\", _organization.okpo || '', e.target.value || '')\r\n                  _organization.okpo = e.target.value\r\n                  setOrganization(_organization) \r\n              }}               \r\n            />            \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">\r\n            <label htmlFor=\"sm_code\">Последние две цифры кода в ТФОМС</label>\r\n            <div className=\"p-inputgroup\">\r\n              <span className=\"p-inputgroup-addon\">2800</span>\r\n              <InputMask mask=\"99\" id=\"sm_code\" value={organization.sm_code || ''} \r\n                onChange={e=>{\r\n                  let _organization = {...organization}\r\n                  changesAudit(\"ТФОМС код\", \"sm_code\", _organization.sm_code || '', e.target.value || '')\r\n                  _organization.sm_code = e.value\r\n                  setOrganization(_organization) \r\n                }}               \r\n              />                            \r\n            </div>                        \r\n          </div>\r\n          <div className=\"p-field p-col-12 p-md-6\">\r\n            <label htmlFor=\"phone\">телефон</label>\r\n            <InputMask id=\"phone\" required \r\n              type=\"text\" mask=\"tel:+79999999999\"\r\n              value={phone.telcom_value} \r\n              onChange={(e)=>{\r\n                changesAudit(\"телефон\", \"phone\", phone.telcom_value || '', e.target.value || '')  \r\n                setPhone({...phone, telcom_value: e.target.value})                \r\n              }} \r\n              className={classNames({ 'p-invalid': submitted && !/tel:\\+?[-0-9().]+/i.test(phone.telcom_value)})}\r\n            />\r\n            {submitted && !/tel:\\+?[-0-9().]+/i.test(phone.telcom_value) && <small className=\"p-error\">тел.номер некорректен или отсутствует!</small>}            \r\n          </div>\r\n          <div className=\"p-field  p-col-12 p-md-6\">\r\n            <label htmlFor=\"email\">email</label>\r\n            <InputText id=\"email\" type=\"text\" \r\n              value={email.telcom_value} \r\n              onChange={(e)=>{ \r\n                changesAudit(\"email\", \"email\", email.telcom_value || '', e.target.value || '') \r\n                setEmail({...email, telcom_value:e.target.value})  \r\n              }} \r\n              className={classNames({ 'p-invalid': submitted && !(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='')})}\r\n                    />\r\n              {submitted && !(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email.telcom_value) || email.telcom_value==='') && <small className=\"p-error\">Неверный email</small>}\r\n          </div>      \r\n          <AddressFC2 className=\"p-col-12\" submitted={submitted} \r\n            label='Адрес медорганизации'\r\n            value={organization.address} strictly \r\n            onClear={(value: IAddressR)=>setOrganization({...organization, address: {...value}})}\r\n            onChange={()=>{        \r\n              let _organization = {...organization, address: addressStore.addressProps()}                \r\n              changesAudit(\"Адрес\", \"address\", organization.address?.streetAddressLine || '', _organization.address?.streetAddressLine || '')                 \r\n              setOrganization(_organization)\r\n            }}  \r\n          />\r\n          <div className=\"p-field  p-col-12 p-md-6\">\r\n            <Button label=\"ПРИМЕНИТЬ\"  className=\"p-button-success\" \r\n              style={{marginTop: '22px'}} onClick={saveOrganization}  />\r\n          </div>   \r\n          {adminOpportunities()}          \r\n        </div>        \r\n      </div>             \r\n    </div>\r\n    <Toast ref={toast} /> \r\n    <AddressDialog />        \r\n  </>) : (<><Toast ref={toast} /><ProgressSpinner/></>)\r\n  }\r\n  return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}\r\nexport default observer(SettingsPage)","import { AdminPage } from \"./pages/AdminPage\"\r\nimport CertificatePage from \"./pages/CertificatePage\"\r\nimport DoctorsPage from \"./pages/DoctorsPage\"\r\nimport { ErrorPage } from \"./pages/ErrorPage\"\r\nimport ListPage from \"./pages/ListPage\"\r\nimport LoginPage from \"./pages/LoginPage\"\r\nimport MainPage from \"./pages/MainPage\"\r\nimport { MessagePage } from \"./pages/MessagePage\"\r\nimport { PassordRecoveryPage } from \"./pages/PasswordRecoveryPage\"\r\nimport { ProfilePage } from \"./pages/ProfilePage\"\r\nimport { RegistrationPage } from \"./pages/RegistrationPage\"\r\nimport SettingsPage from \"./pages/SettingsPage\"\r\nimport {\r\n  ADMIN_ROUTE,\r\n  CERTIFICATE_ROUTE,\r\n  ERROR_ROUTE,\r\n  HOME_ROUTE,\r\n  LIST_ROUTE,\r\n  LOGIN_ROUTE,\r\n  MESSAGE_ROUTE,\r\n  PWD_RECOVERY_ROUTE,\r\n  REGISTRATION_ROUTE,\r\n  USER_ROUTE,\r\n  DOCTORS_ROUTE,\r\n  MO_SETTINGS_ROUTE,\r\n} from \"./utils/consts\"\r\n\r\nexport const AUTH_ROUTES = [\r\n  { path: HOME_ROUTE, Component: MainPage },\r\n  { path: ADMIN_ROUTE, Component: AdminPage },\r\n  { path: LIST_ROUTE, Component: ListPage },\r\n  { path: CERTIFICATE_ROUTE + \"/:id\", Component: CertificatePage },\r\n  { path: DOCTORS_ROUTE, Component: DoctorsPage },\r\n  { path: USER_ROUTE + \"/:id\", Component: ProfilePage },\r\n  { path: MO_SETTINGS_ROUTE + \"/:id\", Component: SettingsPage },\r\n  { path: LOGIN_ROUTE, Component: MainPage },\r\n]\r\nexport const NON_AUTH_ROUTES = [\r\n  { path: LOGIN_ROUTE, Component: LoginPage },\r\n  { path: REGISTRATION_ROUTE, Component: RegistrationPage },\r\n  { path: PWD_RECOVERY_ROUTE + \"/:code\", Component: PassordRecoveryPage },\r\n  { path: HOME_ROUTE, Component: LoginPage },\r\n]\r\nexport const PUBLIC_ROUTES = [\r\n  { path: MESSAGE_ROUTE + \"/:message\", Component: MessagePage },\r\n  { path: ERROR_ROUTE + \"/:error\", Component: ErrorPage },\r\n]\r\n","//import React, { useEffect } from 'react';\r\nimport { FC } from 'react'\r\n\r\ntype AdminPageProps = {}\r\n\r\nexport const AdminPage: FC<AdminPageProps> = (props: AdminPageProps) => {\r\n  //const [state, setState] = useState();\r\n\r\n  //useEffect(() => {}, []);\r\n\r\n  return (\r\n    <>\r\n      <h1>AdminPage React TS FC Component</h1>\r\n      <div>List</div>\r\n    </>\r\n  );\r\n};","import { FC, useEffect, useState } from 'react'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport ava from '../images/ava.jpg'\r\nimport '../styles/pages/ProfilePage.css'\r\nimport { ROLES, USER_ROUTE } from '../utils/consts'\r\nimport MainLayout from '../components/layouts/MainLayout'\r\nimport { IUserInfo } from '../models/responses/IUserInfo'\r\nimport UsersService from '../services/UsersService'\r\n\r\n// страница настроек профиля пользователя\r\n// User profile page\r\n\r\n// используем роут с параметром id для загрузки с API\r\ninterface IMatch extends IRouteMatch {  \r\n  params: {id: number}\r\n}\r\ninterface ProfilePageProps extends IRouteProps { \r\n    match: IMatch  \r\n}\r\n\r\n\r\nexport const ProfilePage: FC<ProfilePageProps> = (props: ProfilePageProps) =>{ \r\n  const [user, setUser] = useState<IUserInfo | null>(null)\r\n  useEffect(()=>{\r\n    if (user===null && props.match.params.id) UsersService.getUser(props.match.params.id)\r\n    .then(response=>setUser(response.data))\r\n    .catch(()=>console.log('Ошибка получения пользователя')) \r\n  })\r\n  const user_name = `${user?.person_name.family} ${user?.person_name.given_1}`\r\n  const user_team = `${user!==null && user.roles ? ROLES[user.roles.split(' ')[0]] : ''} ${user?.organization.name}`\r\n  const layoutParams = {\r\n    title: 'Профиль пользователя',     \r\n    url: USER_ROUTE,\r\n    content: (<>  \r\n    <div className=\"card widget-user-card\">\r\n      <div className=\"user-card-header\">\r\n        <img src={ava} alt=\"\" className=\"user-card-avatar\" />\r\n      </div>\r\n      <div className=\"user-card-body\">\r\n        <div className=\"user-card-title\">{user_name}</div>\r\n        <div className=\"user-card-subtext\">{user_team}</div>\r\n        <div className=\"p-grid user-card-stats\">\r\n          <div className=\"p-col-4\">\r\n            <i className=\"pi pi-users\"></i>\r\n            <div>14 Создано</div>\r\n          </div>\r\n          <div className=\"p-col-4\">\r\n            <i className=\"pi pi-bookmark\"></i>\r\n            <div>2 Выданно</div>\r\n          </div>\r\n          <div className=\"p-col-4\">\r\n            <i className=\"pi pi-check-square\"></i>\r\n            <div>6 Отправленно</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>      \r\n  </>)\r\n  }\r\n  return (\r\n    <>\r\n      <MainLayout {...layoutParams} />\r\n    </>\r\n  )\r\n}","import { useHistory} from 'react-router-dom'\r\nimport { Button } from 'primereact/button'\r\nimport { InputText } from 'primereact/inputtext'\r\nimport { Password } from 'primereact/password'\r\nimport { Dropdown } from 'primereact/dropdown'\r\nimport { InputMask } from 'primereact/inputmask'\r\nimport { classNames } from 'primereact/utils'\r\nimport  '../styles/components/Dropdown.css'\r\nimport  '../styles/components/Inputtext.css'\r\nimport React, { useContext, useState } from 'react'\r\nimport { FC } from 'react'\r\nimport { Field, Form } from 'react-final-form'\r\nimport { Context } from '..'\r\nimport logo from \"../images/security.png\"\r\nimport { IRegisterForm } from '../models/FormsData/IRegisterForm'\r\nimport { IRegistration } from '../models/requests/IRegistration'\r\nimport LoginImageDiv from '../static/LoginImageDiv'\r\nimport OrganizationService from '../services/OrganizationService'\r\nimport { useEffect } from 'react'\r\nimport { IReferenceId } from '../models/IReference'\r\n\r\nexport const RegistrationPage: FC = () =>{ \r\n  const history = useHistory()  \r\n  const [organizations, setOrganizations] = useState<IReferenceId[] | null>(null)\r\n  useEffect(()=>{\r\n    if (organizations===null) OrganizationService.getOrganizations().then(response=>\r\n      setOrganizations(response.data.organizations)\r\n    ).catch(()=>{\r\n      setOrganizations([])\r\n      history.push(\"/error/Ошибка API при получении списка МО\")\r\n    })},[organizations, history])\r\n  const {userStore} = useContext(Context)  \r\n  const validate = (data: IRegisterForm) => {\r\n    let errors: any = {} \r\n    if (!data.name || (data.name.trim().split(' ').length < 2)){             \r\n            errors.name = 'значение <ФИО> некорректно'\r\n    }       \r\n    if (!data.email) {\r\n       errors.email = 'Поле <Email> обязательно'\r\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(data.email)) {\r\n       errors.email = 'Неверный email Н.п. example@email.com'\r\n    }\r\n    if (!data.password) {\r\n       errors.password = 'Поле <Пароль> обязательно'\r\n    } else if (data.password && data.password!==data.password_confirmation) {\r\n       errors.password_confirmation = 'пароли не совпадают'\r\n    }     \r\n    if (data.organization == null ) {\r\n       errors.organization = 'Поле <Медорганизация> обязательно'       \r\n    }   \r\n    return errors\r\n  }\r\n    const onSubmit = async (data: IRegisterForm, form: any) => {\r\n    const request:IRegistration  = {} as IRegistration \r\n    try {\r\n        const names = data.name.trim().split(' ')\r\n        request.person_name_attributes = {family: names[0], given_1: names[1]}         \r\n        if (names.length>2)  request.person_name_attributes.given_2= names[2]  \r\n        if (data.phone_number) request.contacts_attributes={telcom_value: data.phone_number, main: true}        \r\n        request.email = data.email\r\n        request.password = data.password\r\n        request.password_confirmation = data.password_confirmation\r\n        request.organization_id = data.organization.id                  \r\n        userStore.registration(request)        \r\n    } catch (e:any){\r\n      history.push(\"/error/\"+e.message)      \r\n    }          \r\n  }\r\n  const isFormFieldValid = (meta: any) => !!(meta.touched && meta.error)\r\n  const getFormErrorMessage = (meta: any) => {\r\n    return (isFormFieldValid(meta) && <small className=\"p-error\">{meta.error}</small>)\r\n  } \r\n  if (organizations)\r\n  return (\r\n  <>\r\n    <div className=\"login-body\">\r\n      <div className=\"login-wrapper\">\r\n        <div className=\"login-panel\">\r\n          <img src={logo} className=\"logo_reg\" alt=\"logo\"></img>\r\n          <div className=\"login-form\">\r\n            <h2>Регистрация</h2>            \r\n            <Form onSubmit={onSubmit} initialValues={{name: '', email: '', password: '', password_confirmation: '', organization: null, phone_number: ''}} \r\n              validate={validate} \r\n              render={({ handleSubmit }) => (\r\n              <form onSubmit={handleSubmit} className=\"p-fluid\" >\r\n                <Field name=\"name\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                       <InputText id=\"name\" {...input} autoFocus className={classNames({ 'p-invalid': isFormFieldValid(meta) })} />\r\n                        <label htmlFor=\"name\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Фамилия имя отчество*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                )} />                \r\n                <Field name=\"email\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <i className=\"pi pi-envelope\" />\r\n                        <InputText id=\"email\" {...input} className={classNames({ 'p-invalid': isFormFieldValid(meta) })} />\r\n                        <label htmlFor=\"email\" \r\n                        className={classNames({ 'p-error': isFormFieldValid(meta) })}>Email*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"password\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password\" {...input} toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"password_confirmation\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password_confirmation\" {...input}  toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password_confirmation\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Еще раз пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"organization\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label\">\r\n                       <Dropdown id=\"organization\" {...input} options={organizations}\r\n                        filter showClear optionLabel=\"name\" className=\"p-inputwrapper p-inputwrapper-filled\"/>  \r\n                        <label htmlFor=\"organization\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Медорганизация*</label>                     \r\n                      </span>  \r\n                      {getFormErrorMessage(meta)}                    \r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"phone\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <i className=\"pi pi-phone\" />\r\n                       <InputMask id=\"phone\" {...input} mask=\"+7(999) 999-9999\"  className={classNames({ 'p-invalid': isFormFieldValid(meta) })} />\r\n                        <label htmlFor=\"phone\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Контактный номер</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                )} />\r\n              <Button type=\"submit\" label=\"ДАЛЕЕ\" />    \r\n            </form>)}/>            \r\n          </div>\r\n        </div>  \r\n        <LoginImageDiv/>      \r\n      </div>\r\n    </div>\r\n  </>)\r\n  else return <></>\r\n}","import { FC, useContext } from 'react'\r\nimport { Field, Form } from 'react-final-form'\r\nimport { Button } from 'primereact/button'\r\nimport { Password } from 'primereact/password'\r\nimport { classNames } from 'primereact/utils'\r\nimport { Context } from '..'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport LoginImageDiv from '../static/LoginImageDiv'\r\nimport logo from '../images/security.png'\r\nimport { IPassRenew } from '../models/requests/IPassRenew'\r\ninterface IParams {code: string}\r\ninterface IMatch extends IRouteMatch {  \r\n  params: IParams\r\n}\r\ninterface PasswordRecoveryPageProps extends IRouteProps {  \r\n  match: IMatch  \r\n}\r\nexport const PassordRecoveryPage: FC<PasswordRecoveryPageProps> = (props: PasswordRecoveryPageProps) =>{\r\n  const {userStore} = useContext(Context)\r\n  const validate = (data: IPassRenew) => {\r\n    let errors: any = {}        \r\n    if (!data.password) {\r\n       errors.password = 'Поле <Пароль> обязательно'\r\n    } else if (data.password && data.password!==data.password_confirmation) {\r\n       errors.password_confirmation = 'пароли не совпадают'\r\n    }      \r\n    return errors\r\n  }\r\n  const isFormFieldValid = (meta: any) => !!(meta.touched && meta.error)\r\n  const getFormErrorMessage = (meta: any) => {\r\n    return (isFormFieldValid(meta) && <small className=\"p-error\">{meta.error}</small>)\r\n  }\r\n  const onSubmit = (data: IPassRenew, form: any) => {          \r\n     userStore.pwd_renew(data)       \r\n  }   \r\n  return (\r\n  <>    \r\n    <div className=\"login-body\">\r\n      <div className=\"login-wrapper\">\r\n        <div className=\"login-panel\">\r\n          <img src={logo} className='logo' alt=\"logo\"></img>\r\n          <div  className=\"login-form\" >\r\n            <h2>Восстановить пароль</h2>            \r\n            <Form onSubmit={onSubmit} initialValues={{ activation_link: props.match.params.code,password: '', password_confirmation: '' }} \r\n              validate={validate} \r\n              render={({ handleSubmit }) => (\r\n              <form  onSubmit={handleSubmit}  className=\"p-fluid\">                \r\n                  <Field name=\"password\"  render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password\" autoComplete='off' {...input} toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Новый пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n                  <Field name=\"password_confirmation\" render={({ input, meta }) => (\r\n                    <div className=\"p-field\">\r\n                      <span className=\"p-float-label p-input-icon-right\">\r\n                        <Password id=\"password_confirmation\" {...input}  toggleMask className={classNames({ 'p-invalid': isFormFieldValid(meta) })}  />\r\n                        <label htmlFor=\"password_confirmation\" className={classNames({ 'p-error': isFormFieldValid(meta) })}>Еще раз пароль*</label>\r\n                      </span>\r\n                      {getFormErrorMessage(meta)}\r\n                    </div>\r\n                  )} />\r\n              <Button type=\"submit\" label=\"ИЗМЕНИТЬ\" />               \r\n            </form>)}/>            \r\n          </div>\r\n        </div>  \r\n        <LoginImageDiv/>      \r\n      </div>\r\n    </div>\r\n  </>)\r\n}","\r\nimport { FC } from 'react';\r\nimport { IRouteMatch } from '../models/IRouteMatch';\r\nimport { IRouteProps } from '../models/IRouteProps';\r\n\r\ninterface IParams {message: string}\r\ninterface IMatch extends IRouteMatch {  \r\n  params: IParams\r\n}\r\ninterface MessagePageProps extends IRouteProps {  \r\n  match: IMatch  \r\n}\r\n\r\n\r\nexport const MessagePage: FC<MessagePageProps> = (props: MessagePageProps) => {\r\n  return (\r\n    <>\r\n      <h1>Внимание:</h1>\r\n      <div>{props.match.params.message}!</div>\r\n    </>\r\n  )\r\n}","\r\nimport { FC } from 'react'\r\nimport { IRouteMatch } from '../models/IRouteMatch'\r\nimport { IRouteProps } from '../models/IRouteProps'\r\nimport '../styles/simplePage.css'\r\nimport '../styles/root.css'\r\n\r\n\r\ninterface IMatch extends IRouteMatch {  \r\n  params: {error: string}\r\n}\r\ninterface ErrorPageProps extends IRouteProps { \r\n    match: IMatch  \r\n}\r\n\r\nexport const ErrorPage: FC<ErrorPageProps> = (props: ErrorPageProps) => {\r\n  return (\r\n    <>\r\n      <div className=\"error-body\">\r\n        <div className=\"erpage-block\">\r\n          <h1>Ошибка!</h1>\r\n          <div>{props.match.params.error}</div>\r\n        </div>\r\n      </div>  \r\n    </>\r\n  )\r\n}","import { observer } from 'mobx-react-lite'\r\nimport { useEffect } from 'react'\r\nimport { useContext } from 'react'\r\nimport { FC } from 'react'\r\nimport { Route, Switch, useHistory } from 'react-router-dom'\r\nimport { Context } from '..'\r\nimport { NoMatchPage } from '../pages/NoMatchPage'\r\nimport { AUTH_ROUTES, NON_AUTH_ROUTES, PUBLIC_ROUTES } from '../routes'\r\n\r\nconst AppRouter: FC = observer(() => {  \r\n  const history = useHistory()\r\n  const {userStore} = useContext(Context) \r\n  const token =  userStore.token()\r\n  const isAuth =  userStore.isAuth()\r\n  userStore.setHistory(history)  \r\n  useEffect(()=>{\r\n    if (token.length>0 && !isAuth) {\r\n      userStore.checkAuth()\r\n    }   \r\n  },[token, userStore, isAuth])  \r\n  const chech_routes =  userStore.isAuth() || (token.length>0) ?  AUTH_ROUTES : NON_AUTH_ROUTES    \r\n  return (\r\n    <Switch> \r\n      { chech_routes.map(\r\n        ({path, Component})=><Route key={path} path={path} component={Component} exact/>)\r\n      }          \r\n      { PUBLIC_ROUTES.map(\r\n        ({path, Component})=><Route key={path} path={path} component={Component} exact/>)\r\n      }\r\n      <Route component={NoMatchPage} />                         \r\n    </Switch>     \r\n  )\r\n})\r\nexport default AppRouter\r\n","import {FC} from 'react'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport AppRouter  from './components/AppRouter'\r\nimport './styles/root.css'\r\nimport './styles/primereact.css'\r\nimport 'primeicons/primeicons.css'\r\nimport 'primeflex/primeflex.css'\r\n\r\n\r\nconst App: FC =() => {    \r\n  return (\r\n    <BrowserRouter>\r\n      <AppRouter/>\r\n    </BrowserRouter>  \r\n  )  \r\n}\r\n\r\nexport default App\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport Address from \"../models/FormsData/Address\"\r\nimport { checkFieldNullFlavor, INullFlavorR } from \"../models/INullFlavor\"\r\nimport { IReference } from \"../models/IReference\"\r\nimport { DEFAULT_ADDRESS, IAddressR } from \"../models/requests/IAddressR\"\r\nimport { IFiasItem } from \"../models/responses/IFiasItem\"\r\nimport FiasService from \"../services/FiasService\"\r\nimport { HOME_REGION_CODE } from \"../utils/defaults\"\r\nimport { removeEmpty } from \"../utils/functions\"\r\nexport default class AddressStore {\r\n  private _address: Address\r\n  private _isLoding: boolean\r\n  private _history: any\r\n  private _regionsOptions: IReference[] | undefined\r\n  private _fiasOptions: IFiasItem[] | undefined\r\n  private _dialogVisible: boolean\r\n  private _manualMode: boolean\r\n  private _onAddrComplete?: (() => void) | undefined\r\n\r\n  constructor() {\r\n    this._isLoding = false\r\n    this._address = new Address(DEFAULT_ADDRESS)\r\n    this._dialogVisible = false\r\n    this._manualMode = false\r\n    makeAutoObservable(this)\r\n  }\r\n\r\n  fetchRegionOptions() {\r\n    const _regions = localStorage.getItem(\"Regions\")\r\n    if (_regions) {\r\n      this._regionsOptions = JSON.parse(_regions) as IReference[]\r\n      this.defaultRegion()\r\n    } else\r\n      FiasService.getRegions()\r\n        .then((response) => {\r\n          this._regionsOptions = response.data.data.map((item) => {\r\n            return { code: item.code?.substr(0, 2), name: item.streetAddressLine } as IReference\r\n          })\r\n          localStorage.setItem(\"Regions\", JSON.stringify(this._regionsOptions))\r\n          this.defaultRegion()\r\n        })\r\n        .finally(() => (this._isLoding = false))\r\n  }\r\n\r\n  async searchBar(query: string, regionID = HOME_REGION_CODE as string) {\r\n    this._isLoding = true\r\n    try {\r\n      const response = await FiasService.searchBar(query, regionID)\r\n      if (response.data.data) this._fiasOptions = response.data.data\r\n      else this._fiasOptions = []\r\n      return this._fiasOptions\r\n    } catch (e) {\r\n      console.log(e)\r\n      return []\r\n    } finally {\r\n      this._isLoding = false\r\n    }\r\n  }\r\n  defaultRegion() {\r\n    return this._regionsOptions?.find((item) => item.code === HOME_REGION_CODE)\r\n  }\r\n  async getChildItems(parent: string, level: string, query = \"\") {\r\n    this._isLoding = true\r\n    try {\r\n      const response = await FiasService.getChildItems(parent, level, query)\r\n      if (response.data.data)\r\n        this._fiasOptions = response.data.data.map((item) => {\r\n          if (item.level !== \"building\") item.name = `${item.name} ${item.shortname}`\r\n          return item\r\n        })\r\n      else this._fiasOptions = []\r\n      return this._fiasOptions\r\n    } finally {\r\n      this._isLoding = false\r\n    }\r\n  }\r\n\r\n  // Returned full streetAddressLine include flat and postal code to save in IAddress\r\n  // Возвращает полный строковый адрес, включая квартиру и почтовы код,\r\n  // обычно не используемые в строке поиска, для сохранения в POJO\r\n\r\n  streetAddressLine(): string {\r\n    const addr = this._address\r\n    return `${addr.streetAddressLine}${addr.flat ? \", \" + addr.flat : \"\"}${\r\n      addr.postalCode ? \", \" + addr.postalCode : \"\"\r\n    }`\r\n  }\r\n  createNullFlavors(): INullFlavorR[] {\r\n    const addr = this._address\r\n    //check postalcode\r\n    checkFieldNullFlavor(\"postalCode\", addr.postalCode, addr.nullFlavors)\r\n    //check aoGUID\r\n    checkFieldNullFlavor(\"aoGUID\", addr.aoGUID, addr.nullFlavors)\r\n    //check houseGUID\r\n    checkFieldNullFlavor(\"houseGUID\", addr.houseGUID, addr.nullFlavors)\r\n    return addr.null_flavors_attributes()\r\n  }\r\n  // Check address for FIAS requarens\r\n  isNotStrictly(): boolean {\r\n    const addr = this._address\r\n    return !addr.aoGUID || !addr.houseGUID || !addr.postalCode\r\n  }\r\n  // Returned POJO address data\r\n  // Возвращает POJO объект адреса\r\n  addressProps(): IAddressR {\r\n    const addr = this._address\r\n    const _result = {\r\n      id: addr.id,\r\n      state: addr.state?.code,\r\n      streetAddressLine: this.streetAddressLine(),\r\n      aoGUID: addr.aoGUID,\r\n      houseGUID: addr.houseGUID,\r\n      postalCode: addr.postalCode,\r\n      house_number: addr.housenum,\r\n      struct_number: addr.strucnum,\r\n      building_number: addr.buildnum,\r\n      flat_number: addr.flat,\r\n      parent_guid: addr.parent,\r\n      null_flavors_attributes: [...this.createNullFlavors()],\r\n    } as IAddressR\r\n    return removeEmpty(_result)\r\n  }\r\n\r\n  set history(history: any) {\r\n    this._history = history\r\n  }\r\n  get history() {\r\n    return this._history\r\n  }\r\n\r\n  set isLoading(isLoding: boolean) {\r\n    this._isLoding = isLoding\r\n  }\r\n  get isLoading() {\r\n    return this._isLoding\r\n  }\r\n  get address() {\r\n    return this._address\r\n  }\r\n  set address(value: Address) {\r\n    this._address = value\r\n  }\r\n  get regionsOptions() {\r\n    return this._regionsOptions\r\n  }\r\n  get fiasOptions() {\r\n    return this._fiasOptions\r\n  }\r\n  clear() {\r\n    if (this._address === undefined) return\r\n    this._address.postalCode = undefined\r\n    this._address.district = undefined\r\n    this._address.city = undefined\r\n    this._address.houseGUID = undefined\r\n    this._address.aoGUID = undefined\r\n    this._address.street = undefined\r\n    this._address.town = undefined\r\n    this._address.housenum = undefined\r\n    this._address.buildnum = undefined\r\n    this._address.strucnum = undefined\r\n    this._address.streetAddressLine = this._address.state?.name + \", \" || \"\"\r\n  }\r\n  get dialogVisible(): boolean {\r\n    return this._dialogVisible\r\n  }\r\n  set dialogVisible(value: boolean) {\r\n    this._dialogVisible = value\r\n  }\r\n\r\n  get manualMode(): boolean {\r\n    return this._manualMode\r\n  }\r\n  set manualMode(value: boolean) {\r\n    this._manualMode = value\r\n  }\r\n\r\n  get onAddrComplete(): (() => void) | undefined {\r\n    return this._onAddrComplete\r\n  }\r\n  set onAddrComplete(value: (() => void) | undefined) {\r\n    this._onAddrComplete = value\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NULL_FLAVOR_IDX } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { INullFlavorR } from \"../INullFlavor\"\r\nimport { IPatient } from \"../IPatient\"\r\nimport IIdentityR from \"../requests/IIdentityR\"\r\nimport { IPatientR } from \"../requests/IPatientR\"\r\nimport Identity from \"./Identity\"\r\nimport Person from \"./Person\"\r\nexport const MAIN_REGISTRATION_ADDRESS = 1\r\nexport default class Patient implements ISerializable {\r\n  private _id?: string | undefined\r\n  private _person?: Person\r\n  private _gender?: number | undefined\r\n  private _birth_date: Date | undefined\r\n  private _birth_year?: number\r\n  private _provider_organization?: number\r\n  private _addrType?: number\r\n  private _guid: string\r\n  private _identity?: Identity\r\n  private _nullFlavors: INullFlavorR[]\r\n  private _oldOne?: IPatient\r\n  constructor(props = {} as IPatient) {\r\n    this._guid = props.guid || uuidv4()\r\n    this._oldOne = { ...props }\r\n    if (props.person) this._person = new Person(props.person)\r\n    this._provider_organization = props.organization_id\r\n    if (props.gender) this._gender = props.gender\r\n    this._addrType = props.addr_type || MAIN_REGISTRATION_ADDRESS\r\n    if (props.birth_date) this._birth_date = new Date(props.birth_date)\r\n    if (props.id) this._id = props.id\r\n    if (props.birth_year) this._birth_year = props.birth_year\r\n    if (props.identity) this._identity = new Identity(props.identity)\r\n    this._nullFlavors =\r\n      props.null_flavors?.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      }) || []\r\n\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n  }\r\n  getAttributes(): IPatientR {\r\n    let _patient = { guid: this._guid } as IPatientR\r\n    if (this._id) _patient.id = this.id\r\n    if (this._addrType) _patient.addr_type = this._addrType\r\n    if (this._birth_date) _patient.birth_date = this._birth_date.toDateString()\r\n    if (this._birth_year) _patient.birth_year = this._birth_year\r\n    if (this._gender) _patient.gender = this._gender\r\n    if (this._identity) _patient.identity_attributes = this._identity.getAttributes()\r\n    else if (this._oldOne?.identity?.id)\r\n      _patient.identity_attributes = { id: this._oldOne.identity.id, _destroy: \"1\" } as IIdentityR\r\n    if (this._provider_organization) _patient.organization_id = this._provider_organization\r\n    if (this._person) _patient.person_attributes = this._person.getAttributes()\r\n    else _patient.person_id = null\r\n    if (this.nullFlavors.length > 0) _patient.null_flavors_attributes = this.null_flavors_attributes()\r\n    return _patient\r\n  }\r\n  get id() {\r\n    return this._id\r\n  }\r\n  set id(id: string | undefined) {\r\n    this._id = id\r\n  }\r\n  get person() {\r\n    return this._person\r\n  }\r\n\r\n  set person(value: Person | undefined) {\r\n    this._person = value\r\n  }\r\n\r\n  get gender() {\r\n    return this._gender\r\n  }\r\n  set gender(gender: number | undefined) {\r\n    this._gender = gender\r\n  }\r\n  get birth_date() {\r\n    return this._birth_date\r\n  }\r\n  set birth_date(birth_date: Date | undefined) {\r\n    this._birth_date = birth_date\r\n  }\r\n  get guid() {\r\n    return this._guid\r\n  }\r\n\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  get addr_type() {\r\n    return this._addrType\r\n  }\r\n  set addr_type(addr_type: number | undefined) {\r\n    this._addrType = addr_type\r\n  }\r\n  get provider_organization() {\r\n    return this._provider_organization\r\n  }\r\n  set provider_organization(provider_organization: number | undefined) {\r\n    this._provider_organization = provider_organization\r\n  }\r\n  get birth_year() {\r\n    return this._birth_year\r\n  }\r\n  set birth_year(birth_year: number | undefined) {\r\n    this._birth_year = birth_year\r\n  }\r\n  get identity() {\r\n    return this._identity\r\n  }\r\n  set identity(identity: Identity | undefined) {\r\n    this._identity = identity\r\n  }\r\n\r\n  setBirthDay(value: Date | undefined, isYear: boolean) {\r\n    if (value && !isYear) {\r\n      if (this._birth_date === undefined)\r\n        this.nullFlavors = this.nullFlavors.filter((element) => element.parent_attr !== \"birth_date\")\r\n      this.birth_date = value\r\n      this.birth_year = undefined\r\n    } else if (value && isYear) {\r\n      if (this.birth_date === undefined)\r\n        this.nullFlavors = this.nullFlavors.filter((element) => element.parent_attr !== \"birth_date\")\r\n      this.birth_date = value\r\n      this.birth_year = (this.birth_date as Date).getFullYear()\r\n    } else {\r\n      this.birth_date = undefined\r\n      this.birth_year = undefined\r\n    }\r\n  }\r\n}\r\n","import { autorun, makeAutoObservable } from \"mobx\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\nimport { NA, NULL_FLAVOR_IDX, REGION_OKATO } from \"../../utils/defaults\"\r\nimport { ISerializable } from \"../common/ISerializabale\"\r\nimport { IAudit } from \"../IAudit\"\r\nimport { checkFieldNullFlavor, INullFlavorR } from \"../INullFlavor\"\r\nimport { IAddressR } from \"../requests/IAddressR\"\r\nimport { ICertificateR } from \"../requests/ICertificateR\"\r\nimport { IChildInfoR } from \"../requests/IChildInfoR\"\r\nimport { IDeathReasonR } from \"../requests/IDeathReasonR\"\r\nimport { ICertificate } from \"../responses/ICertificate\"\r\nimport { IDeathReason } from \"../responses/IDeathReason\"\r\nimport Authenticator from \"./Authenticator\"\r\nimport { ChildInfo } from \"./ChildInfo\"\r\nimport { DeathReason } from \"./DeathReason\"\r\nimport Participant from \"./Participant\"\r\nimport Patient from \"./Patient\"\r\n\r\nexport default class Certificate implements ISerializable {\r\n  private _id: number\r\n  private _series?: string\r\n  private _number?: string\r\n  private _issueDate?: Date\r\n  private _certType?: number\r\n  private _seriesPrev?: string\r\n  private _numberPrev?: string\r\n  private _effTimePrev?: Date\r\n  private _patient: Patient\r\n  private _lifeAreaType?: number\r\n  private _deathAreaType?: number\r\n  private _deathDatetime?: Date\r\n  private _deathYear?: number\r\n  private _deathMonth?: number | undefined\r\n  private _deathPlace?: number | undefined\r\n  private _maritalStatus?: number | undefined\r\n  private _educationLevel?: number | undefined\r\n  private _socialStatus?: number | undefined\r\n  private _deathKind?: number | undefined\r\n  private _extReasonTime?: Date | undefined\r\n  private _extReasonDescription?: string | undefined\r\n  private _reasonA?: DeathReason | undefined\r\n  private _reasonB?: DeathReason\r\n  private _reasonC?: DeathReason\r\n  private _reasonD?: DeathReason\r\n  private _deathReasons: DeathReason[]\r\n  private _reasonACME?: DeathReason | undefined\r\n  private _deathAddr?: IAddressR\r\n  private _guid?: string\r\n  private _policyOMS?: string | undefined\r\n  private _childInfo?: ChildInfo | undefined\r\n  private _establishedMedic?: number | undefined\r\n  private _basisDetermining?: number | undefined\r\n  private _trafficAccident?: number | undefined\r\n  private _pregnancyConnection?: number | undefined\r\n  private _author?: Authenticator | undefined\r\n  private _audithor?: Authenticator | undefined\r\n  private _legalAuthenticator?: Authenticator | undefined\r\n  private _nullFlavors: INullFlavorR[]\r\n  private _audits: IAudit[]\r\n  private _custodian_id?: number\r\n  private _participant?: Participant | undefined\r\n  private _oldOne?: ICertificate | undefined\r\n  private _latestOne?: ICertificate | undefined\r\n  disposers: (() => void)[]\r\n\r\n  constructor(props: ICertificate) {\r\n    if (props.null_flavors && props.null_flavors.length > 0)\r\n      this._nullFlavors = props.null_flavors.map((item) => {\r\n        return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n      })\r\n    else this._nullFlavors = []\r\n    this._oldOne = { ...props }\r\n    this._latestOne = props.latest_one\r\n    this._audits = []\r\n    this._id = props.id || -1\r\n    this._guid = props.guid || uuidv4()\r\n    this._custodian_id = props.custodian?.id || props.patient?.organization_id\r\n    this._patient = props.patient ? new Patient(props.patient) : new Patient()\r\n    if (props.issue_date) this._issueDate = new Date(props.issue_date)\r\n    this._certType = props.cert_type\r\n    this._series = props.series || REGION_OKATO\r\n    this._number = props.number\r\n    if (!!props.death_datetime) this._deathDatetime = new Date(props.death_datetime)\r\n    this._deathYear = props.death_year\r\n    this._numberPrev = props.number_prev\r\n    this._seriesPrev = props.series_prev\r\n    this._policyOMS = props.policy_OMS\r\n    this._lifeAreaType = props.life_area_type\r\n    this._deathAreaType = props.death_area_type\r\n    this._deathAddr = {\r\n      ...props.death_addr,\r\n      null_flavors_attributes:\r\n        props.death_addr?.null_flavors?.map((item) => {\r\n          return { ...item, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n        }) || [],\r\n    } as IAddressR\r\n    this._deathPlace = props.death_place\r\n    this._deathKind = props.death_kind\r\n    this._educationLevel = props.education_level\r\n    this._maritalStatus = props.marital_status\r\n    this._socialStatus = props.social_status\r\n    if (props.eff_time_prev) this._effTimePrev = new Date(props.eff_time_prev)\r\n    if (props.child_info) this._childInfo = new ChildInfo(props.child_info)\r\n    if (props.author) this._author = new Authenticator(props.author)\r\n    if (props.audithor) this._audithor = new Authenticator(props.audithor)\r\n    if (props.legal_authenticator) this._legalAuthenticator = new Authenticator(props.legal_authenticator)\r\n    if (props.ext_reason_time) this._extReasonTime = new Date(props.ext_reason_time)\r\n    this._extReasonDescription = props.ext_reason_description\r\n    this._establishedMedic = props.established_medic\r\n    this._basisDetermining = props.basis_determining\r\n    this._trafficAccident = props.traffic_accident\r\n    this._pregnancyConnection = props.pregnancy_connection\r\n\r\n    if (props.a_reason) this._reasonA = new DeathReason(props.a_reason)\r\n    else this._reasonA = new DeathReason({} as IDeathReason)\r\n    if (props.b_reason) this._reasonB = new DeathReason(props.b_reason)\r\n    if (props.c_reason) this._reasonC = new DeathReason(props.c_reason)\r\n    if (props.reason_ACME) this.changeReasonACME(props.reason_ACME)\r\n\r\n    if (props.d_reason) this._reasonD = new DeathReason(props.d_reason)\r\n    if (props.death_reasons) this._deathReasons = props.death_reasons.map((reason) => new DeathReason(reason))\r\n    else this._deathReasons = []\r\n    if (props.participant) this._participant = new Participant(props.participant)\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n    this.disposers = []\r\n    this.disposers[0] = autorun(() => checkFieldNullFlavor(\"b_reason\", this.reasonB, this._nullFlavors, NA))\r\n    this.disposers[1] = autorun(() => checkFieldNullFlavor(\"c_reason\", this._reasonC, this._nullFlavors, NA))\r\n    this.disposers[2] = autorun(() => checkFieldNullFlavor(\"d_reason\", this.reasonD, this._nullFlavors, NA))\r\n  }\r\n\r\n  // получение копии массива заполнителей из Observable.array\r\n  null_flavors_attributes() {\r\n    return this._nullFlavors.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n\r\n  changeReasonACME(value: string | undefined) {\r\n    if (!value || \"\" === value) this._reasonACME = undefined\r\n    else {\r\n      if (value === this._reasonA?.diagnosis?.ICD10) this._reasonACME = this._reasonA\r\n      else if (value === this._reasonB?.diagnosis?.ICD10) this._reasonACME = this._reasonB\r\n      else if (value === this._reasonC?.diagnosis?.ICD10) this._reasonACME = this._reasonC\r\n      else this._reasonACME = undefined\r\n    }\r\n  }\r\n  milisecAge() {\r\n    // Discard the time-zone information.\r\n    const a = this._patient.birth_date as Date\r\n    if (a === undefined) return false\r\n    const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate(), a.getHours(), a.getMinutes())\r\n    const b = this._deathDatetime as Date\r\n    if (b === undefined) return false\r\n    const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate(), b.getHours(), b.getMinutes())\r\n    return utc2 - utc1\r\n  }\r\n  hoursAge() {\r\n    const _MS_PER_HOUR = 1000 * 60 * 60\r\n    const ms = this.milisecAge()\r\n    if (ms) return Math.floor(ms / _MS_PER_HOUR)\r\n    else return false\r\n  }\r\n  daysAge() {\r\n    const _MS_PER_DAY = 1000 * 60 * 60 * 24\r\n    const ms = this.milisecAge()\r\n    if (ms) return Math.floor(ms / _MS_PER_DAY)\r\n    else return false\r\n  }\r\n  yearsAge() {\r\n    const dd = this._deathDatetime as Date\r\n    const db = this._patient.birth_date as Date\r\n    if (!!dd && !!db) return dd.getFullYear() - db.getFullYear()\r\n    else return false\r\n  }\r\n  setDeathDay(value: Date | undefined, isYear: boolean) {\r\n    if (value && !isYear) {\r\n      this.deathDatetime = value\r\n      this.deathYear = undefined\r\n    } else if (value && isYear) {\r\n      this.deathDatetime = value\r\n      this.deathYear = (this.deathDatetime as Date).getFullYear()\r\n    } else {\r\n      this.deathDatetime = undefined\r\n      this.deathYear = undefined\r\n    }\r\n  }\r\n\r\n  saveReasonEffTime(reason: DeathReason) {\r\n    if (!this._deathDatetime) return false\r\n    let result = new Date(this._deathDatetime)\r\n    if (reason.minutes) result.setMinutes(result.getMinutes() - reason.minutes)\r\n    if (reason.hours) result.setHours(result.getHours() - reason.hours)\r\n    if (reason.days) result.setDate(result.getDate() - reason.days)\r\n    if (reason.weeks) result.setDate(result.getDate() - reason.weeks * 7)\r\n    if (reason.months) result.setMonth(result.getMonth() - reason.months)\r\n    if (reason.years) result.setFullYear(result.getFullYear() - reason.years)\r\n    reason.effectiveTime = result\r\n    return true\r\n  }\r\n\r\n  getAttributes(): ICertificateR {\r\n    let _cert = { guid: this._guid } as ICertificateR\r\n    if (this._id > -1) _cert.id = this._id\r\n    if (this._issueDate) _cert.issue_date = this._issueDate.toDateString()\r\n    _cert.number_prev = this._numberPrev\r\n    _cert.series_prev = this._seriesPrev\r\n    _cert.eff_time_prev = this._effTimePrev?.toDateString()\r\n    if (this._audithor) {\r\n      _cert.audithor_attributes = this._audithor.getAttributes()\r\n      if (!_cert.audithor_attributes.id && !!this._oldOne?.audithor?.id)\r\n        _cert.audithor_attributes.id = this._oldOne.audithor.id\r\n    } else if (this._oldOne && this._oldOne.audithor)\r\n      _cert.audithor_attributes = { id: this._oldOne.audithor.id, _destroy: \"1\" }\r\n    if (this._author) {\r\n      _cert.author_attributes = this._author.getAttributes()\r\n      if (!_cert.author_attributes.id && !!this._oldOne?.author?.id) _cert.author_attributes.id = this._oldOne.author.id\r\n    } else if (this._oldOne && this._oldOne.author)\r\n      _cert.author_attributes = { id: this._oldOne.author.id, _destroy: \"1\" }\r\n    if (this._legalAuthenticator) {\r\n      _cert.legal_authenticator_attributes = this._legalAuthenticator.getAttributes()\r\n      if (!_cert.legal_authenticator_attributes.id && !!this._oldOne?.legal_authenticator?.id)\r\n        _cert.legal_authenticator_attributes.id = this._oldOne.legal_authenticator.id\r\n    } else if (this._oldOne && this._oldOne.legal_authenticator)\r\n      _cert.legal_authenticator_attributes = { id: this._oldOne.legal_authenticator.id, _destroy: \"1\" }\r\n    if (this._basisDetermining) _cert.basis_determining = this._basisDetermining\r\n    if (this._certType) _cert.cert_type = this._certType\r\n    if (this._childInfo) _cert.child_info_attributes = this._childInfo.getAttributes()\r\n    else if (this._oldOne && this._oldOne.child_info) _cert.child_info_attributes = { _destroy: \"1\" } as IChildInfoR\r\n    if (this._deathAddr && !!this._deathAddr.state && !!this._deathAddr.streetAddressLine)\r\n      _cert.death_addr_attributes = { ...this._deathAddr } as IAddressR\r\n    else if (this._oldOne && this._oldOne.death_addr)\r\n      _cert.death_addr_attributes = { id: this._oldOne.death_addr.id, _destroy: \"1\" } as IAddressR\r\n    if (this._deathAreaType) _cert.death_area_type = this._deathAreaType\r\n    if (this._deathDatetime) _cert.death_datetime = this._deathDatetime\r\n    if (this._deathYear) _cert.death_year = this._deathYear\r\n    if (this._deathKind) _cert.death_kind = this._deathKind\r\n    if (this._deathPlace) _cert.death_place = this.deathPlace\r\n    if (this._deathReasons.length > 0)\r\n      _cert.death_reasons_attributes = this._deathReasons.map((item) => item.getAttributes())\r\n    if (this._oldOne?.death_reasons && this._oldOne.death_reasons.length > 0) {\r\n      let _temp = [] as IDeathReasonR[]\r\n      this._oldOne.death_reasons.forEach((item) => {\r\n        if (\r\n          !_cert.death_reasons_attributes ||\r\n          _cert.death_reasons_attributes.findIndex((el) => el.id === item.id) === -1\r\n        )\r\n          _temp.push({ id: item.id, _destroy: \"1\" } as IDeathReasonR)\r\n      })\r\n      if (_cert.death_reasons_attributes && _temp.length > 0)\r\n        _cert.death_reasons_attributes = _cert.death_reasons_attributes.concat(_temp)\r\n      else if (_temp.length > 0) _cert.death_reasons_attributes = _temp\r\n    }\r\n    if (this._educationLevel) _cert.education_level = this._educationLevel\r\n    if (this._establishedMedic) _cert.established_medic = this._establishedMedic\r\n    if (this._extReasonDescription) _cert.ext_reason_description = this.extReasonDescription\r\n    if (this._extReasonTime) _cert.ext_reason_time = this._extReasonTime\r\n    if (this._lifeAreaType) _cert.life_area_type = this._lifeAreaType\r\n    if (this._policyOMS) _cert.policy_OMS = this._policyOMS\r\n    if (this._pregnancyConnection) _cert.pregnancy_connection = this.pregnancyConnection\r\n    if (this._maritalStatus) _cert.marital_status = this._maritalStatus\r\n    if (this.nullFlavors.length > 0) _cert.null_flavors_attributes = this.null_flavors_attributes()\r\n    if (this._reasonA && this._reasonA.diagnosis) _cert.a_reason_attributes = this._reasonA.getAttributes()\r\n    else if (this._oldOne && this._oldOne.a_reason)\r\n      _cert.a_reason_attributes = { id: this._oldOne.a_reason.id, _destroy: \"1\" } as IDeathReasonR\r\n    if (this._reasonACME) _cert.reason_ACME = this._reasonACME.diagnosis?.ICD10\r\n    if (this._reasonB && this._reasonB.diagnosis) _cert.b_reason_attributes = this._reasonB.getAttributes()\r\n    else if (this._oldOne && this._oldOne.b_reason)\r\n      _cert.b_reason_attributes = { id: this._oldOne.b_reason.id, _destroy: \"1\" } as IDeathReasonR\r\n    if (this._reasonC && this._reasonC.diagnosis) _cert.c_reason_attributes = this._reasonC.getAttributes()\r\n    else if (this._oldOne && this._oldOne.c_reason)\r\n      _cert.c_reason_attributes = { id: this._oldOne.c_reason.id, _destroy: \"1\" } as IDeathReasonR\r\n    if (this._reasonD && this._reasonD.diagnosis) _cert.d_reason_attributes = this._reasonD.getAttributes(true)\r\n    else if (this._oldOne && this._oldOne.d_reason)\r\n      _cert.d_reason_attributes = { id: this._oldOne.d_reason.id, _destroy: \"1\" } as IDeathReasonR\r\n    if (this._series) _cert.series = this._series\r\n    if (this._socialStatus) _cert.social_status = this._socialStatus\r\n    if (this._trafficAccident) _cert.traffic_accident = this._trafficAccident\r\n    if (this._patient) _cert.patient_attributes = this._patient.getAttributes()\r\n    _cert.custodian_id = this._custodian_id || _cert.patient_attributes?.organization_id\r\n    if (this._participant) _cert.participant_attributes = this._participant.getAttributes()\r\n    return _cert\r\n  }\r\n  //#region Getters - Setters\r\n  get id() {\r\n    return this._id\r\n  }\r\n  set id(id: number) {\r\n    this._id = id\r\n  }\r\n  get series() {\r\n    return this._series\r\n  }\r\n  set series(series: string | undefined) {\r\n    this._series = series\r\n  }\r\n  get number() {\r\n    return this._number\r\n  }\r\n  set number(number: string | undefined) {\r\n    this._number = number\r\n  }\r\n  get issueDate() {\r\n    return this._issueDate\r\n  }\r\n  set issueDate(issueDate: Date | undefined) {\r\n    this._issueDate = issueDate\r\n  }\r\n  get deathDatetime() {\r\n    return this._deathDatetime\r\n  }\r\n  set deathDatetime(death_datetime: Date | undefined) {\r\n    this._deathDatetime = death_datetime\r\n  }\r\n  get certType() {\r\n    return this._certType\r\n  }\r\n  set certType(cert_type: number | undefined) {\r\n    this._certType = cert_type\r\n  }\r\n  get seriesPrev() {\r\n    return this._seriesPrev\r\n  }\r\n  set seriesPrev(series: string | undefined) {\r\n    this._seriesPrev = series\r\n  }\r\n  get numberPrev() {\r\n    return this._numberPrev\r\n  }\r\n  set numberPrev(number: string | undefined) {\r\n    this._numberPrev = number\r\n  }\r\n  get guid() {\r\n    return this._guid\r\n  }\r\n  get author(): Authenticator | undefined {\r\n    return this._author\r\n  }\r\n  set author(value: Authenticator | undefined) {\r\n    this._author = value\r\n  }\r\n  get authenticator(): Authenticator | undefined {\r\n    return this._audithor\r\n  }\r\n  set authenticator(value: Authenticator | undefined) {\r\n    this._audithor = value\r\n  }\r\n  get legalAuthenticator(): Authenticator | undefined {\r\n    return this._legalAuthenticator\r\n  }\r\n  set legalAuthenticator(value: Authenticator | undefined) {\r\n    this._legalAuthenticator = value\r\n  }\r\n\r\n  get extReasonTime(): Date | undefined {\r\n    return this._extReasonTime\r\n  }\r\n  set extReasonTime(value: Date | undefined) {\r\n    this._extReasonTime = value\r\n  }\r\n  get establishedMedic(): number | undefined {\r\n    return this._establishedMedic\r\n  }\r\n  set establishedMedic(value: number | undefined) {\r\n    this._establishedMedic = value\r\n  }\r\n  get basisDetermining(): number | undefined {\r\n    return this._basisDetermining\r\n  }\r\n  set basisDetermining(value: number | undefined) {\r\n    this._basisDetermining = value\r\n  }\r\n  get trafficAccident(): number | undefined {\r\n    return this._trafficAccident\r\n  }\r\n  set trafficAccident(value: number | undefined) {\r\n    this._trafficAccident = value\r\n  }\r\n  get pregnancyConnection(): number | undefined {\r\n    return this._pregnancyConnection\r\n  }\r\n  set pregnancyConnection(value: number | undefined) {\r\n    this._pregnancyConnection = value\r\n  }\r\n\r\n  get patient() {\r\n    return this._patient\r\n  }\r\n  get effTimePrev() {\r\n    return this._effTimePrev\r\n  }\r\n  set effTimePrev(eff_time: Date | undefined) {\r\n    this._effTimePrev = eff_time\r\n  }\r\n  get deathYear() {\r\n    return this._deathYear\r\n  }\r\n  set deathYear(death_year: number | undefined) {\r\n    this._deathYear = death_year\r\n  }\r\n\r\n  get policyOMS() {\r\n    return this._policyOMS || \"\"\r\n  }\r\n\r\n  set policyOMS(policyOMS: string | undefined) {\r\n    this._policyOMS = policyOMS\r\n  }\r\n\r\n  get lifeAreaType() {\r\n    return this._lifeAreaType\r\n  }\r\n  set lifeAreaType(lat: number | undefined) {\r\n    this._lifeAreaType = lat\r\n  }\r\n  get deathAreaType() {\r\n    return this._deathAreaType\r\n  }\r\n  set deathAreaType(dat: number | undefined) {\r\n    this._deathAreaType = dat\r\n  }\r\n\r\n  get deathAddr() {\r\n    return this._deathAddr\r\n  }\r\n  set deathAddr(value: IAddressR | undefined) {\r\n    this._deathAddr = value\r\n  }\r\n  get deathKind(): number | undefined {\r\n    return this._deathKind\r\n  }\r\n  set deathKind(value: number | undefined) {\r\n    this._deathKind = value\r\n  }\r\n  get socialStatus(): number | undefined {\r\n    return this._socialStatus\r\n  }\r\n  set socialStatus(value: number | undefined) {\r\n    this._socialStatus = value\r\n  }\r\n  get educationLevel(): number | undefined {\r\n    return this._educationLevel\r\n  }\r\n  set educationLevel(value: number | undefined) {\r\n    this._educationLevel = value\r\n  }\r\n  get maritalStatus(): number | undefined {\r\n    return this._maritalStatus\r\n  }\r\n  set maritalStatus(value: number | undefined) {\r\n    this._maritalStatus = value\r\n  }\r\n  get deathPlace(): number | undefined {\r\n    return this._deathPlace\r\n  }\r\n  set deathPlace(value: number | undefined) {\r\n    this._deathPlace = value\r\n  }\r\n  get deathMonth(): number | undefined {\r\n    return this._deathMonth\r\n  }\r\n  set deathMonth(value: number | undefined) {\r\n    this._deathMonth = value\r\n  }\r\n  get childInfo(): ChildInfo | undefined {\r\n    return this._childInfo\r\n  }\r\n  set childInfo(value: ChildInfo | undefined) {\r\n    this._childInfo = value\r\n  }\r\n  get extReasonDescription(): string | undefined {\r\n    return this._extReasonDescription\r\n  }\r\n  set extReasonDescription(value: string | undefined) {\r\n    this._extReasonDescription = value\r\n  }\r\n  get reasonA(): DeathReason | undefined {\r\n    return this._reasonA\r\n  }\r\n  set reasonA(value: DeathReason | undefined) {\r\n    this._reasonA = value\r\n  }\r\n  get reasonB(): DeathReason | undefined {\r\n    return this._reasonB\r\n  }\r\n  set reasonB(value: DeathReason | undefined) {\r\n    this._reasonB = value\r\n  }\r\n  get reasonC(): DeathReason | undefined {\r\n    return this._reasonC\r\n  }\r\n  set reasonC(value: DeathReason | undefined) {\r\n    this._reasonC = value\r\n  }\r\n  get reasonD(): DeathReason | undefined {\r\n    return this._reasonD\r\n  }\r\n  set reasonD(value: DeathReason | undefined) {\r\n    this._reasonD = value\r\n  }\r\n  get reasonACME(): DeathReason | undefined {\r\n    return this._reasonACME\r\n  }\r\n  set reasonACME(value: DeathReason | undefined) {\r\n    this._reasonACME = value\r\n  }\r\n  get deathReasons(): DeathReason[] {\r\n    return this._deathReasons\r\n  }\r\n  set deathReasons(value: DeathReason[]) {\r\n    this._deathReasons = value\r\n  }\r\n  get audits() {\r\n    return this._audits\r\n  }\r\n  get nullFlavors() {\r\n    return this._nullFlavors\r\n  }\r\n\r\n  set nullFlavors(nullFlavors: INullFlavorR[]) {\r\n    this._nullFlavors = nullFlavors\r\n  }\r\n\r\n  get participant(): Participant | undefined {\r\n    return this._participant\r\n  }\r\n  set participant(value: Participant | undefined) {\r\n    this._participant = value\r\n  }\r\n  get latestOne(): ICertificate | undefined {\r\n    return this._latestOne\r\n  }\r\n  set latestOne(value: ICertificate | undefined) {\r\n    this._latestOne = value\r\n  }\r\n\r\n  get oldOne(): ICertificate | undefined {\r\n    return this._oldOne\r\n  }\r\n\r\n  //#endregion\r\n\r\n  dispose() {\r\n    // So, to avoid subtle memory issues, always call the\r\n    // disposers when the reactions are no longer needed.\r\n    this.disposers.forEach((disposer) => disposer())\r\n  }\r\n}\r\n","export const DEFAULT_RENDER_OPTIONS = { except: [\"updated_at\", \"created_at\"] }\r\n","import { DEFAULT_RENDER_OPTIONS } from \"./default\"\r\n\r\nexport const NULLFLAVORABLE_RENDER_OPTIONS = {\r\n  ...DEFAULT_RENDER_OPTIONS,\r\n  include: [\"null_flavors\"],\r\n}\r\n","export const DEFAULT_AUTHENTICATOR_RENDER_OPTIONS = {\r\n  only: [\"id\", \"doctor\", \"time\"],\r\n  include: [\"doctor\"],\r\n}\r\n","export const LETTERED_DEATH_REASON_RENDER_OPTIONS = {\r\n  except: [\"diagnosis_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"diagnosis\", \"null_flavors\"],\r\n}\r\n","import { AxiosResponse } from \"axios\"\r\nimport $api, { API_URL } from \"../http\"\r\nimport { NULLFLAVORABLE_RENDER_OPTIONS } from \"../models/render_options/address\"\r\nimport { DEFAULT_AUTHENTICATOR_RENDER_OPTIONS } from \"../models/render_options/Authenticator\"\r\nimport { CHILD_INFO_RENDER_OPTIONS } from \"../models/render_options/child_info\"\r\nimport { DEFAULT_RENDER_OPTIONS } from \"../models/render_options/default\"\r\nimport { SHORT_DOCTOR_RENDER_OPTIONS } from \"../models/render_options/Doctor\"\r\nimport { EXTERNAL_DEATH_REASON_RENDER_OPTIONS } from \"../models/render_options/external_death_reason\"\r\nimport { LETTERED_DEATH_REASON_RENDER_OPTIONS } from \"../models/render_options/lettered_reason\"\r\nimport { OTHER_REASON_RENDER_OPTIONS } from \"../models/render_options/other_reason\"\r\nimport { PARTICIPANT_RENDER_OPTIONS } from \"../models/render_options/Participant\"\r\nimport { PATIENT_RENDER_OPTIONS } from \"../models/render_options/patient\"\r\nimport { PERSON_RENDER_OPTIONS } from \"../models/render_options/person\"\r\nimport { PROCEDURE_RENDER_OPTIONS } from \"../models/render_options/procedure\"\r\nimport { RELATED_SUBJECT_RENDER_OPTIONS } from \"../models/render_options/related_subject\"\r\nimport { ICertificateR } from \"../models/requests/ICertificateR\"\r\nimport { ICertificate } from \"../models/responses/ICertificate\"\r\n\r\nexport const CERTIFICATE_FULL_RENDER_OPTIONS = {\r\n  render_options: {\r\n    except: [\"custodian_id\", \"patient_id\", \"updated_at\"],\r\n    include: [\r\n      \"patient\",\r\n      \"author\",\r\n      \"legal_authenticator\",\r\n      \"audithor\",\r\n      \"a_reason\",\r\n      \"b_reason\",\r\n      \"c_reason\",\r\n      \"d_reason\",\r\n      \"death_addr\",\r\n      \"child_info\",\r\n      \"custodian\",\r\n      \"death_reasons\",\r\n      \"participant\",\r\n      \"null_flavors\",\r\n      \"latest_one\",\r\n    ],\r\n  },\r\n  includes: [\r\n    \"patient\",\r\n    \"participant\",\r\n    \"custodian\",\r\n    \"a_reason\",\r\n    \"b_reason\",\r\n    \"c_reason\",\r\n    \"d_reason\",\r\n    \"death_addr\",\r\n    \"child_info\",\r\n    \"death_reasons\",\r\n    \"latest_one\",\r\n  ],\r\n  death_addr: NULLFLAVORABLE_RENDER_OPTIONS,\r\n  patient: PATIENT_RENDER_OPTIONS,\r\n  identity: NULLFLAVORABLE_RENDER_OPTIONS,\r\n  address: NULLFLAVORABLE_RENDER_OPTIONS,\r\n  a_reason: LETTERED_DEATH_REASON_RENDER_OPTIONS,\r\n  b_reason: LETTERED_DEATH_REASON_RENDER_OPTIONS,\r\n  c_reason: LETTERED_DEATH_REASON_RENDER_OPTIONS,\r\n  d_reason: EXTERNAL_DEATH_REASON_RENDER_OPTIONS,\r\n  author: DEFAULT_AUTHENTICATOR_RENDER_OPTIONS,\r\n  legal_authenticator: DEFAULT_AUTHENTICATOR_RENDER_OPTIONS,\r\n  audithor: DEFAULT_AUTHENTICATOR_RENDER_OPTIONS,\r\n  death_reasons: OTHER_REASON_RENDER_OPTIONS,\r\n  procedures: PROCEDURE_RENDER_OPTIONS,\r\n  child_info: CHILD_INFO_RENDER_OPTIONS,\r\n  related_subject: RELATED_SUBJECT_RENDER_OPTIONS,\r\n  addr: NULLFLAVORABLE_RENDER_OPTIONS,\r\n  person: PERSON_RENDER_OPTIONS,\r\n  doctor: SHORT_DOCTOR_RENDER_OPTIONS,\r\n  participant: PARTICIPANT_RENDER_OPTIONS,\r\n  position: { only: [\"id\", \"name\"] },\r\n  custodian: { only: [\"id\", \"name\"] },\r\n  null_flavors: DEFAULT_RENDER_OPTIONS,\r\n}\r\n\r\nexport default class CertificateService {\r\n  //POST request for get Certificate's list\r\n  static async getCertificates(query: any, first = 0, last = 9): Promise<AxiosResponse<ICertificate[]>> {\r\n    return $api.post(`${API_URL}model/Certificate/`, {\r\n      ...query,\r\n      offset: first,\r\n      limit: last - first + 1,\r\n      ...CERTIFICATE_FULL_RENDER_OPTIONS,\r\n    })\r\n  }\r\n\r\n  // POST request for get Certificate's count\r\n  static async getCount(query: any): Promise<AxiosResponse<number>> {\r\n    return $api.post(`${API_URL}model/Certificate/`, { ...query, count: \"1\" })\r\n  }\r\n\r\n  //POST request for add  /REST_API/v1/model/Certificate/add\r\n  static async addCertificate(certificate: ICertificateR): Promise<AxiosResponse<ICertificate>> {\r\n    return $api.post(`${API_URL}model/Certificate/add`, {\r\n      Certificate: certificate,\r\n      ...CERTIFICATE_FULL_RENDER_OPTIONS,\r\n    })\r\n  }\r\n\r\n  //PUT request for update Certificate /REST_API/v1/model/Certificate/:id\r\n  static async updateCertificate(request: any): Promise<AxiosResponse<ICertificate>> {\r\n    return $api.put(`${API_URL}model/Certificate/${request.Certificate.id}`, {\r\n      ...request,\r\n      ...CERTIFICATE_FULL_RENDER_OPTIONS,\r\n    })\r\n  }\r\n  // DELETE request for remove Certificate /REST_API/v1/model/Certificate/:id\r\n  static async removeCertificate(certificate_id: number): Promise<AxiosResponse<ICertificate>> {\r\n    return $api.delete(`${API_URL}model/Certificate/${certificate_id}`)\r\n  }\r\n}\r\n","export const PATIENT_RENDER_OPTIONS = {\r\n  except: [\"person_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"person\", \"identity\", \"null_flavors\"],\r\n}\r\n","export const EXTERNAL_DEATH_REASON_RENDER_OPTIONS = {\r\n  except: [\"ext_diagnosis_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"ext_diagnosis\", \"null_flavors\"],\r\n}\r\n","export const OTHER_REASON_RENDER_OPTIONS = {\r\n  except: [\"diagnosis_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"diagnosis\", \"procedures\", \"null_flavors\"],\r\n}\r\n","export const PROCEDURE_RENDER_OPTIONS = {\r\n  except: [\"medical_serv_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"medical_serv\", \"null_flavors\"],\r\n}\r\n","export const CHILD_INFO_RENDER_OPTIONS = {\r\n  except: [\"related_subject_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"related_subject\", \"address\", \"null_flavors\"],\r\n}\r\n","export const RELATED_SUBJECT_RENDER_OPTIONS = {\r\n  except: [\"person_name_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"person_name\", \"addr\", \"null_flavors\"],\r\n}\r\n","export const PERSON_RENDER_OPTIONS = {\r\n  except: [\"created_at\", \"updated_at\"],\r\n  include: [\"person_name\", \"address\", \"null_flavors\"],\r\n}\r\n","export const SHORT_DOCTOR_RENDER_OPTIONS = {\r\n  only: [\"id\", \"person_name\", \"position\"],\r\n  include: [\"person_name\", \"position\"],\r\n}\r\n","export const PARTICIPANT_RENDER_OPTIONS = {\r\n  except: [\"person_id\", \"certificate_id\", \"updated_at\", \"created_at\"],\r\n  include: [\"person\", \"identity\"],\r\n}\r\n","import { autorun, configure, makeAutoObservable } from \"mobx\"\r\nimport Certificate from \"../models/FormsData/Certificate\"\r\nimport { IPatient } from \"../models/IPatient\"\r\nimport { ICertificate } from \"../models/responses/ICertificate\"\r\nimport { IUserInfo } from \"../models/responses/IUserInfo\"\r\nimport CertificateService from \"../services/CertificateService\"\r\nimport { ID_CARD_TYPES, NULL_FLAVOR_IDX, PASSPORT_RF } from \"../utils/defaults\"\r\nimport { DeathReason } from \"../models/FormsData/DeathReason\"\r\nimport { IDeathReason } from \"../models/responses/IDeathReason\"\r\nimport { IAddressR } from \"../models/requests/IAddressR\"\r\nimport { INullFlavorR } from \"../models/INullFlavor\"\r\nconfigure({\r\n  enforceActions: \"never\",\r\n})\r\nexport default class CertificateStore {\r\n  private _cert: Certificate\r\n  private _submitted: boolean\r\n  private _userInfo?: IUserInfo | undefined\r\n  private _certs: ICertificate[]\r\n  private _selected: number\r\n  private _sorts: string[] | undefined\r\n  private _filters: any\r\n  private _first: number\r\n  private _rows: number\r\n  private _count: number\r\n\r\n  disposers: (() => void)[]\r\n  constructor() {\r\n    this._submitted = false\r\n    this.disposers = []\r\n    this._certs = []\r\n    this._filters = {}\r\n    this._first = 0\r\n    this._rows = 0\r\n    this._count = 0\r\n    this._cert = new Certificate({\r\n      custodian: this._userInfo?.organization,\r\n      patient: {\r\n        organization_id: this._userInfo?.organization.id,\r\n        identity: {\r\n          identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code,\r\n        },\r\n        person: { person_name: { family: \"\", given_1: \"\", given_2: \"\" } },\r\n      } as IPatient,\r\n    } as ICertificate)\r\n    this._selected = 0\r\n    makeAutoObservable(this, undefined, { deep: false })\r\n\r\n    // реакции на изменение данных\r\n    this.disposers[0] = autorun(() => {\r\n      let _q = { ...this._filters }\r\n      if (this._userInfo && !this._userInfo.roles.includes(\"MIAC\")) _q.custodian_id_eq = this._userInfo?.organization.id\r\n      if (this._filters)\r\n        CertificateService.getCount({ q: _q })\r\n          .then((value) => (this._count = value.data))\r\n          .catch((reason) => console.log(reason))\r\n    })\r\n  }\r\n  //#region setters-getters\r\n  get cert() {\r\n    return this._cert\r\n  }\r\n  set cert(value: Certificate) {\r\n    this._cert = value\r\n  }\r\n\r\n  get submitted(): boolean {\r\n    return this._submitted\r\n  }\r\n  set submitted(value: boolean) {\r\n    this._submitted = value\r\n  }\r\n  get certs(): ICertificate[] {\r\n    return this._certs.map((el) => {\r\n      return { ...el }\r\n    })\r\n  }\r\n  get userInfo(): IUserInfo | undefined {\r\n    return this._userInfo\r\n  }\r\n  set userInfo(value: IUserInfo | undefined) {\r\n    this._userInfo = value\r\n  }\r\n  get sorts(): string[] | undefined {\r\n    return this._sorts\r\n  }\r\n  set sorts(value: string[] | undefined) {\r\n    this._sorts = value\r\n  }\r\n  get filters(): any {\r\n    return this._filters\r\n  }\r\n  set filters(value: any) {\r\n    this._filters = value\r\n  }\r\n  get first(): number {\r\n    return this._first\r\n  }\r\n  set first(value: number) {\r\n    this._first = value\r\n  }\r\n  get rows(): number {\r\n    return this._rows\r\n  }\r\n  set rows(value: number) {\r\n    this._rows = value\r\n  }\r\n  get count(): number {\r\n    return this._count\r\n  }\r\n  set count(value: number) {\r\n    this._count = value\r\n  }\r\n  //#endregion\r\n  createNew(id = -1) {\r\n    this._cert = new Certificate({\r\n      id: id,\r\n      custodian: this._userInfo?.organization,\r\n      patient: {\r\n        organization_id: this._userInfo?.organization.id,\r\n        identity: {\r\n          identity_card_type_id: ID_CARD_TYPES[PASSPORT_RF].code,\r\n        },\r\n        person: { person_name: { family: \"\", given_1: \"\", given_2: \"\" } },\r\n      } as IPatient,\r\n    } as ICertificate)\r\n  }\r\n  replace() {\r\n    const old = this._certs.find((cert) => cert.id === this._cert.id)\r\n    if (!old) return\r\n    this._cert = new Certificate({\r\n      id: -1,\r\n      custodian: old.custodian,\r\n      patient: old.patient,\r\n      basis_determining: old.basis_determining,\r\n      cert_type: old.cert_type === 1 ? 4 : 3,\r\n      death_area_type: old.death_area_type,\r\n      death_kind: old.death_kind,\r\n      death_datetime: old.death_datetime,\r\n      death_place: old.death_place,\r\n      death_year: old.death_year,\r\n      education_level: old.education_level,\r\n      eff_time_prev: old.issue_date,\r\n      established_medic: old.established_medic,\r\n      ext_reason_description: old.ext_reason_description,\r\n      ext_reason_time: old.ext_reason_time,\r\n      life_area_type: old.life_area_type,\r\n      marital_status: old.marital_status,\r\n      number_prev: old.number,\r\n      policy_OMS: old.policy_OMS,\r\n      pregnancy_connection: old.pregnancy_connection,\r\n      reason_ACME: old.reason_ACME,\r\n      series_prev: old.series,\r\n      social_status: old.social_status,\r\n      traffic_accident: old.traffic_accident,\r\n    } as ICertificate)\r\n    if (old.a_reason)\r\n      this._cert.reasonA = new DeathReason({\r\n        days: old.a_reason.days,\r\n        diagnosis: old.a_reason.diagnosis,\r\n        effective_time: old.a_reason.effective_time,\r\n        hours: old.a_reason.hours,\r\n        null_flavors: old.a_reason.null_flavors?.map((item) => {\r\n          return { code: item.code, parent_attr: item.parent_attr }\r\n        }),\r\n        minutes: old.a_reason.minutes,\r\n        months: old.a_reason.months,\r\n        years: old.a_reason.years,\r\n        weeks: old.a_reason.weeks,\r\n      } as IDeathReason)\r\n    else this._cert.reasonA = new DeathReason({} as IDeathReason)\r\n    if (old.b_reason)\r\n      this._cert.reasonB = new DeathReason({\r\n        days: old.b_reason.days,\r\n        diagnosis: old.b_reason.diagnosis,\r\n        effective_time: old.b_reason.effective_time,\r\n        hours: old.b_reason.hours,\r\n        null_flavors: old.b_reason.null_flavors?.map((item) => {\r\n          return { code: item.code, parent_attr: item.parent_attr }\r\n        }),\r\n        minutes: old.b_reason.minutes,\r\n        months: old.b_reason.months,\r\n        years: old.b_reason.years,\r\n        weeks: old.b_reason.weeks,\r\n      } as IDeathReason)\r\n    if (old.c_reason)\r\n      this._cert.reasonC = new DeathReason({\r\n        days: old.c_reason.days,\r\n        diagnosis: old.c_reason.diagnosis,\r\n        effective_time: old.c_reason.effective_time,\r\n        hours: old.c_reason.hours,\r\n        null_flavors: old.c_reason.null_flavors?.map((item) => {\r\n          return { code: item.code, parent_attr: item.parent_attr }\r\n        }),\r\n        minutes: old.c_reason.minutes,\r\n        months: old.c_reason.months,\r\n        years: old.c_reason.years,\r\n        weeks: old.c_reason.weeks,\r\n      } as IDeathReason)\r\n    if (old.d_reason)\r\n      this._cert.reasonD = new DeathReason({\r\n        days: old.d_reason.days,\r\n        diagnosis: old.d_reason.ext_diagnosis,\r\n        effective_time: old.d_reason.effective_time,\r\n        hours: old.d_reason.hours,\r\n        null_flavors: old.d_reason.null_flavors?.map((item) => {\r\n          return { code: item.code, parent_attr: item.parent_attr }\r\n        }),\r\n        minutes: old.d_reason.minutes,\r\n        months: old.d_reason.months,\r\n        years: old.d_reason.years,\r\n        weeks: old.d_reason.weeks,\r\n      } as IDeathReason)\r\n    if (old.death_reasons)\r\n      this._cert.deathReasons = old.death_reasons.map(\r\n        (reason) =>\r\n          new DeathReason({\r\n            days: reason.days,\r\n            diagnosis: reason.diagnosis,\r\n            effective_time: reason.effective_time,\r\n            hours: reason.hours,\r\n            null_flavors: reason.null_flavors?.map((item) => {\r\n              return { code: item.code, parent_attr: item.parent_attr }\r\n            }),\r\n            minutes: reason.minutes,\r\n            months: reason.months,\r\n            years: reason.years,\r\n            weeks: reason.weeks,\r\n            procedures: reason.procedures?.map((item) => {\r\n              return {\r\n                effective_time: item.effective_time,\r\n                medical_serv: item.medical_serv,\r\n                text_value: item.text_value,\r\n                null_flavors: item.null_flavors?.map((item) => {\r\n                  return { code: item.code, parent_attr: item.parent_attr }\r\n                }),\r\n              }\r\n            }),\r\n          } as IDeathReason)\r\n      )\r\n    else this._cert.deathReasons = []\r\n    if (old.death_addr)\r\n      this._cert.deathAddr = {\r\n        ...old.death_addr,\r\n        null_flavors_attributes:\r\n          old.death_addr?.null_flavors?.map((item) => {\r\n            return { parent_attr: item.parent_attr, code: NULL_FLAVOR_IDX[item.code] } as INullFlavorR\r\n          }) || [],\r\n        id: undefined,\r\n        parent_guid: undefined,\r\n      } as IAddressR\r\n\r\n    old.latest_one = this._cert.oldOne\r\n  }\r\n\r\n  save(onSuccess?: (data: ICertificate) => void, onError?: (message: string) => void, sm_code?: string) {\r\n    if (!this._userInfo) return false\r\n    if (!this._cert.patient.provider_organization)\r\n      this._cert.patient.provider_organization = this.userInfo?.organization.id\r\n    const request = this._cert.getAttributes()\r\n    if (!request.id && sm_code) {\r\n      request.number = sm_code\r\n      if (request.patient_attributes?.id) {\r\n        request.patient_id = request.patient_attributes?.id\r\n        request.patient_attributes = undefined\r\n      }\r\n    }\r\n    //console.log(\"request\", request)\r\n    return !request.id\r\n      ? CertificateService.addCertificate(request)\r\n          .then((response) => {\r\n            const nCert = response.data\r\n            if (nCert) {\r\n              const idx = this._certs.length\r\n              this._certs.push(nCert)\r\n              this.select(idx)\r\n              if (onSuccess) onSuccess(nCert)\r\n            } else {\r\n              if (onError)\r\n                onError(\"Cвидетельство сохранено, но сервер не вернул результат. Необходим повторный вход в систему\")\r\n            }\r\n          })\r\n          .catch((reason) => {\r\n            if (onError) onError(reason)\r\n          })\r\n      : CertificateService.updateCertificate({ Certificate: request })\r\n          .then((response) => {\r\n            const nCert = response.data\r\n            if (nCert) {\r\n              const idx = this._certs.findIndex((cert) => cert.id === nCert.id)\r\n              this._certs[idx] = nCert\r\n              this.select(idx)\r\n              if (onSuccess) onSuccess(nCert)\r\n            } else {\r\n              if (onError)\r\n                onError(\"Свидетельство сохранено, но сервер не вернул результат. Необходим повторный вход в систему\")\r\n            }\r\n          })\r\n          .catch((reason) => {\r\n            if (onError) onError(reason)\r\n          })\r\n  }\r\n  delete() {\r\n    if (this._cert.id === -1) return false\r\n    else return CertificateService.removeCertificate(this._cert.id)\r\n  }\r\n\r\n  clean(num = this._selected) {\r\n    try {\r\n      this._certs.splice(num)\r\n      const dataLength = this._certs.length\r\n      if (dataLength > 0) {\r\n        this.select(this._selected > dataLength - 1 ? dataLength - 1 : this._selected)\r\n      } else {\r\n        this.createNew(-1)\r\n        this._selected = 0\r\n      }\r\n    } catch {\r\n      throw Error(\"Not valid certificate number\")\r\n    }\r\n  }\r\n\r\n  select(num: number) {\r\n    this._cert = new Certificate(this._certs[num])\r\n    this._selected = num\r\n  }\r\n\r\n  getList(doAfter?: () => void, first = this._first, last = this._first + 9) {\r\n    let _q = { ...this._filters, sorts: this._sorts }\r\n    if (this._userInfo && !this._userInfo.roles.includes(\"MIAC\")) _q.custodian_id_eq = this._userInfo?.organization.id\r\n    else if (!this._userInfo) return false\r\n    CertificateService.getCertificates({ q: _q }, first, last)\r\n      .then((response) => {\r\n        this._certs = response.data\r\n        //console.log(\"getList response\", { q: { custudian_id_eq: this._userInfo?.organization.id } }, response.data)\r\n        const dataLength = response.data.length\r\n        if (dataLength > 0) {\r\n          this._first = first\r\n          this._rows = this._certs.length\r\n          this.select(this._selected > dataLength ? dataLength - 1 : this._selected)\r\n        }\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        if (doAfter) doAfter()\r\n      })\r\n  }\r\n\r\n  findById(certificate_id: number, doAfter?: () => void) {\r\n    if (!this._userInfo) return false\r\n    CertificateService.getCertificates({\r\n      q: { custodian_id_eq: this._userInfo.organization.id, id_eq: certificate_id },\r\n    })\r\n      .then((response) => {\r\n        if (response.data && response.data.length > 0) this._cert = new Certificate(response.data[0])\r\n\r\n        console.log(\r\n          \"findById response\",\r\n          { custudian_id_eq: this._userInfo?.organization.id, id_eq: certificate_id },\r\n          response.data\r\n        )\r\n        if (response.data) {\r\n          this.certs.push(response.data[0])\r\n          this.select(0)\r\n        }\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        if (doAfter) doAfter()\r\n      })\r\n  }\r\n  dispose() {\r\n    // So, to avoid subtle memory issues, always call the\r\n    // disposers when the reactions are no longer needed.\r\n    this.disposers.forEach((disposer) => disposer())\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\"\r\nimport { ToastMessageType } from \"primereact/toast\"\r\n\r\nexport default class LayoutStore {\r\n  private _isTabletOrMobile: boolean\r\n  private _isLayoutStaticInactive: boolean\r\n  private _isRightSidebarActive: boolean\r\n  private _isProfileMenuActive: boolean\r\n  private _isNotificationsMenuActive: boolean\r\n  private _isLoading: boolean\r\n  private _message: ToastMessageType | null\r\n\r\n  constructor() {\r\n    this._isTabletOrMobile = false\r\n    this._isLayoutStaticInactive = false\r\n    this._isRightSidebarActive = false\r\n    this._isProfileMenuActive = false\r\n    this._isNotificationsMenuActive = false\r\n    this._isLoading = false\r\n    this._message = null\r\n    makeAutoObservable(this)\r\n  }\r\n  setTabletOrMobile(visible: boolean) {\r\n    this._isTabletOrMobile = visible\r\n  }\r\n  tabletOrMobile() {\r\n    return this._isTabletOrMobile\r\n  }\r\n  sideBarToggle() {\r\n    this._isLayoutStaticInactive = !this._isLayoutStaticInactive\r\n  }\r\n  setLayoutStaticInactive(isLayoutStaticInactive: boolean) {\r\n    this._isLayoutStaticInactive = isLayoutStaticInactive\r\n  }\r\n  layoutStaticInactive() {\r\n    return this._isLayoutStaticInactive\r\n  }\r\n  rightSideBarActive() {\r\n    return this._isRightSidebarActive\r\n  }\r\n  setRightSideBarActive(rightSidebarActive: boolean) {\r\n    this._isRightSidebarActive = rightSidebarActive\r\n  }\r\n  profileMenuActive() {\r\n    return this._isProfileMenuActive\r\n  }\r\n  setProfileMenuActive(profileMenuActive: boolean) {\r\n    this._isProfileMenuActive = profileMenuActive\r\n  }\r\n  notificationsMenuActive() {\r\n    return this._isNotificationsMenuActive\r\n  }\r\n  setNotificationsMenuActive(notificationsMenuActive: boolean) {\r\n    this._isNotificationsMenuActive = notificationsMenuActive\r\n  }\r\n  get isLoading(): boolean {\r\n    return this._isLoading\r\n  }\r\n  set isLoading(value: boolean) {\r\n    this._isLoading = value\r\n  }\r\n\r\n  get message(): ToastMessageType | null {\r\n    return this._message\r\n  }\r\n  set message(value: ToastMessageType | null) {\r\n    this._message = value\r\n  }\r\n}\r\n","import { autorun, makeAutoObservable } from \"mobx\"\r\nimport { ISuggestions } from \"../models/ISuggestions\"\r\nimport { DISEASE_DEADTH_KIND } from \"../NSI/1.2.643.5.1.13.13.99.2.21\"\r\nimport {\r\n  AUTHENTICATOR_SUG,\r\n  AUTHOR_SUG,\r\n  BASIS_DERMINING_SUG,\r\n  CERT_DEATH_THIME_SUG,\r\n  CERT_TYPE_SUG,\r\n  CHILD_WEIGHT_SUG,\r\n  DEATH_AREA_SUG,\r\n  DEATH_KINDS_SUG,\r\n  DEATH_PLACE_SUG,\r\n  DEATH_PLACE_TYPE_SUG,\r\n  DEFAULT_CERT_SUGGESTIONS,\r\n  EDUCATION_LEVEL_SUG,\r\n  EST_MEDIC_SUG,\r\n  EXT_REASON_SUG,\r\n  EXT_REASON_TIME_SUG,\r\n  IDNUMBER_SUG,\r\n  IDSERIES_SUG,\r\n  IORGCODE_SUG,\r\n  IORGDATE_SUG,\r\n  IORGNAME_SUG,\r\n  KIND_DEATH_REASON_SUG,\r\n  LEGAL_AUTHENTICATOR_SUG,\r\n  LIFE_AREA_SUG,\r\n  LIFE_PLACE_SUG,\r\n  MARITAL_STATUS_SUG,\r\n  MOTHER_ADDRESS_SUG,\r\n  MOTHER_BIRTHDAY_SUG,\r\n  MOTHER_FIO_SUG,\r\n  NUMBER_PREGNANCY_SUG,\r\n  OMS_SUG,\r\n  PARTIPICIPANT_DATE_SUG,\r\n  PARTIPICIPANT_FIO_SUG,\r\n  PARTIPICIPANT_IDENTITY_SUG,\r\n  PATIENT_BIRTHDAY_SUG,\r\n  PATIENT_GENDER_SUG,\r\n  PERSON_NAME_SUG,\r\n  PREGNANCY_CONNECTION_SUG,\r\n  REASON_A_SUG,\r\n  REASON_A_TIME_SUG,\r\n  REASON_B_SUG,\r\n  REASON_B_TIME_SUG,\r\n  REASON_C_SUG,\r\n  REASON_C_TIME_SUG,\r\n  REASON_D_SUG,\r\n  REASON_D_TIME_SUG,\r\n  SNILS_SUG,\r\n  SOCIAL_STATUS_SUG,\r\n  TERMS_PREGNANCY_SUG,\r\n  TRAFFFIC_ACCIDENT_SUG,\r\n} from \"../utils/defaults\"\r\nimport CertificateStore from \"./certificateStore\"\r\n\r\nexport default class SuggestionsStore {\r\n  private _cStore: CertificateStore\r\n  private _suggestions: ISuggestions[]\r\n  private _identified: boolean\r\n  private _fromRelatives: boolean\r\n  disposers: (() => void)[]\r\n  constructor(cStore: CertificateStore) {\r\n    this._cStore = cStore\r\n    this.disposers = []\r\n    this._identified = true\r\n    this._fromRelatives = false\r\n    this._suggestions = DEFAULT_CERT_SUGGESTIONS\r\n    makeAutoObservable(this)\r\n    // проверки полноты заполнения свидетельства\r\n    // работают как реакции на изменение данных\r\n    this.disposers[0] = autorun(() => {\r\n      this._suggestions[CERT_TYPE_SUG].done = !!this._cStore.cert.certType\r\n    })\r\n\r\n    this.disposers[1] = autorun(() => {\r\n      this._suggestions[PATIENT_GENDER_SUG].done = !!this._cStore.cert.patient.gender\r\n    })\r\n    this.disposers[2] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const isBirthDay =\r\n        !patient.birth_date &&\r\n        patient.nullFlavors.findIndex((element) => {\r\n          return element.parent_attr === \"birth_date\" && !element._destroy\r\n        }) === -1\r\n      this._suggestions[PATIENT_BIRTHDAY_SUG].done = !isBirthDay\r\n    })\r\n    this.disposers[3] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const cert = this._cStore.cert\r\n      const isDeathDay =\r\n        !cert.deathDatetime && cert.nullFlavors.findIndex((element) => element.parent_attr === \"death_datetime\") === -1\r\n      this._suggestions[CERT_DEATH_THIME_SUG].done = !isDeathDay\r\n    })\r\n    this.disposers[4] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const person = this._cStore.cert.patient.person\r\n      const isSNILS =\r\n        (!person && this._identified) ||\r\n        (person &&\r\n          (!person.SNILS || person.SNILS.length < 14) &&\r\n          person.nullFlavors.findIndex((element) => element.parent_attr === \"SNILS\") === -1)\r\n      this._suggestions[SNILS_SUG].done = !isSNILS\r\n    })\r\n    this.disposers[5] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const oms = this._cStore.cert.policyOMS\r\n      const isOMS =\r\n        (!oms || oms.length < 7) &&\r\n        this._cStore.cert.nullFlavors.findIndex((element) => element.parent_attr === \"policy_OMS\") === -1\r\n      this._suggestions[OMS_SUG].done = !isOMS\r\n    })\r\n    this.disposers[6] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const identity = patient.identity\r\n      const code = identity?.issueOrgCode\r\n      const isCODE =\r\n        (!identity && patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\") === -1) ||\r\n        (identity &&\r\n          (!code || code.length < 1) &&\r\n          identity.nullFlavors.findIndex((element) => element.parent_attr === \"issueOrgCode\") === -1)\r\n      this._suggestions[IORGCODE_SUG].done = !isCODE\r\n    })\r\n    this.disposers[7] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const isIORGDate =\r\n        (!patient.identity && patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\") === -1) ||\r\n        (patient.identity && !patient.identity?.issueOrgDate)\r\n      this._suggestions[IORGDATE_SUG].done = !isIORGDate\r\n    })\r\n    this.disposers[8] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const isIORGName =\r\n        (!patient.identity && patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\") === -1) ||\r\n        (patient.identity && (!patient.identity?.issueOrgName || patient.identity.issueOrgName.length < 15))\r\n      this._suggestions[IORGNAME_SUG].done = !isIORGName\r\n    })\r\n    this.disposers[9] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const identity = patient.identity\r\n      const series = patient.identity?.series\r\n      const isIDSeries =\r\n        (!identity && patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\") === -1) ||\r\n        (identity &&\r\n          (!series || series.length < 1) &&\r\n          identity.nullFlavors.findIndex((element) => element.parent_attr === \"series\") === -1)\r\n      this._suggestions[IDSERIES_SUG].done = !isIDSeries\r\n    })\r\n    this.disposers[10] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const patient = this._cStore.cert.patient\r\n      const isIDNumber =\r\n        (!patient.identity &&\r\n          patient.nullFlavors.findIndex((element) => element.parent_attr === \"identity\" && !element._destroy) === -1) ||\r\n        (patient.identity && !patient.identity.number)\r\n      this._suggestions[IDNUMBER_SUG].done = !isIDNumber\r\n    })\r\n    this.disposers[11] = autorun(() => {\r\n      const person = this._cStore.cert.patient.person\r\n      const isLifeArea =\r\n        (!person && this._identified) ||\r\n        (person &&\r\n          (!person.address ||\r\n            !person.address.streetAddressLine ||\r\n            person.address.streetAddressLine.split(\",\").length < 3) &&\r\n          person.nullFlavors.findIndex((element) => element.parent_attr === \"address\") === -1)\r\n      this._suggestions[LIFE_PLACE_SUG].done = !isLifeArea\r\n    })\r\n    this.disposers[12] = autorun(() => {\r\n      const isDeathArea =\r\n        (!this._cStore.cert.deathAddr ||\r\n          !this._cStore.cert.deathAddr.streetAddressLine ||\r\n          this._cStore.cert.deathAddr.streetAddressLine.split(\",\").length < 3) &&\r\n        this._cStore.cert.nullFlavors.findIndex((element) => element.parent_attr === \"death_addr\") === -1\r\n      this._suggestions[DEATH_PLACE_SUG].done = !isDeathArea\r\n    })\r\n    this.disposers[13] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const isDeathAreaType =\r\n        this._cStore.cert.deathAreaType === undefined &&\r\n        this._cStore.cert.nullFlavors.findIndex((element) => element.parent_attr === \"death_area_type\") === -1\r\n      this._suggestions[DEATH_AREA_SUG].done = !isDeathAreaType\r\n    })\r\n    this.disposers[14] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const isLifeAreaType =\r\n        this._cStore.cert.lifeAreaType === undefined &&\r\n        this._cStore.cert.nullFlavors.findIndex((element) => element.parent_attr === \"life_area_type\") === -1\r\n      this._suggestions[LIFE_AREA_SUG].done = !isLifeAreaType\r\n    })\r\n    this.disposers[15] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[DEATH_PLACE_TYPE_SUG].done = this._cStore.cert.deathPlace !== undefined\r\n    })\r\n    this.disposers[16] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isTERMS_PREGNANCY =\r\n        childInfo === undefined ||\r\n        childInfo.termPregnancy !== undefined ||\r\n        childInfo.nullFlavors.findIndex((element) => element.parent_attr === \"term_pregnancy\") !== -1\r\n      this._suggestions[TERMS_PREGNANCY_SUG].done = isTERMS_PREGNANCY\r\n    })\r\n    this.disposers[17] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isCHILD_WEIGHT = childInfo === undefined || childInfo.weight !== undefined\r\n      this._suggestions[CHILD_WEIGHT_SUG].done = isCHILD_WEIGHT\r\n    })\r\n    this.disposers[18] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isNUMBER_PREGNANCY = !childInfo || !!childInfo.whichAccount\r\n      this._suggestions[NUMBER_PREGNANCY_SUG].done = isNUMBER_PREGNANCY\r\n    })\r\n    this.disposers[19] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isMOTHER_FIO =\r\n        !childInfo ||\r\n        (!!childInfo.relatedSubject &&\r\n          (childInfo.relatedSubject.nullFlavors.findIndex((item) => item.parent_attr === \"person_name\") !== -1 ||\r\n            !!childInfo.relatedSubject.fio))\r\n      this._suggestions[MOTHER_FIO_SUG].done = isMOTHER_FIO\r\n    })\r\n    this.disposers[20] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isMOTHER_BIRTHDAY =\r\n        !childInfo ||\r\n        (!!childInfo.relatedSubject &&\r\n          (childInfo.relatedSubject.nullFlavors.findIndex((item) => item.parent_attr === \"birthTime\") !== -1 ||\r\n            !!childInfo.relatedSubject.birthTime))\r\n      this._suggestions[MOTHER_BIRTHDAY_SUG].done = isMOTHER_BIRTHDAY\r\n    })\r\n    this.disposers[21] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      const childInfo = this._cStore.cert.childInfo\r\n      const isMOTHER_ADDRESS =\r\n        !childInfo ||\r\n        (!!childInfo.relatedSubject &&\r\n          (childInfo.relatedSubject.nullFlavors.findIndex((item) => item.parent_attr === \"addr\") !== -1 ||\r\n            (!!childInfo.relatedSubject.addr && !!childInfo.relatedSubject.addr.houseGUID)))\r\n      this._suggestions[MOTHER_ADDRESS_SUG].done = isMOTHER_ADDRESS\r\n    })\r\n    this.disposers[22] = autorun(() => {\r\n      this._suggestions[MARITAL_STATUS_SUG].done = !!this._cStore.cert && !!this._cStore.cert.maritalStatus\r\n    })\r\n    this.disposers[23] = autorun(() => {\r\n      this._suggestions[EDUCATION_LEVEL_SUG].done = !!this._cStore.cert && !!this._cStore.cert.educationLevel\r\n    })\r\n    this.disposers[24] = autorun(() => {\r\n      this._suggestions[SOCIAL_STATUS_SUG].done = !!this._cStore.cert && !!this._cStore.cert.socialStatus\r\n    })\r\n    this.disposers[25] = autorun(() => {\r\n      this._suggestions[DEATH_KINDS_SUG].done = !!this._cStore.cert && !!this._cStore.cert.deathKind\r\n    })\r\n    this.disposers[26] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[KIND_DEATH_REASON_SUG].done =\r\n        (!!this._cStore.cert.deathKind && this._cStore.cert.deathKind === DISEASE_DEADTH_KIND) ||\r\n        (!!this._cStore.cert.extReasonTime && !!this._cStore.cert.extReasonDescription)\r\n    })\r\n    this.disposers[27] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[EST_MEDIC_SUG].done = !!this._cStore.cert.establishedMedic\r\n    })\r\n    this.disposers[28] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[BASIS_DERMINING_SUG].done = !!this._cStore.cert.basisDetermining\r\n    })\r\n    this.disposers[29] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_A_SUG].done = !!this._cStore.cert.reasonA?.diagnosis\r\n    })\r\n    this.disposers[30] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_A_TIME_SUG].done =\r\n        !!this._cStore.cert.reasonA?.effectiveTime ||\r\n        this._cStore.cert.reasonA?.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"effective_time\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[31] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_B_SUG].done =\r\n        !!this._cStore.cert.reasonB?.diagnosis ||\r\n        this._cStore.cert.nullFlavors.findIndex((item) => item.parent_attr === \"b_reason\" && !item._destroy) !== -1\r\n    })\r\n    this.disposers[32] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_B_TIME_SUG].done =\r\n        !this._cStore.cert.reasonB ||\r\n        !!this._cStore.cert.reasonB.effectiveTime ||\r\n        this._cStore.cert.reasonB?.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"effective_time\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[33] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_C_SUG].done =\r\n        !!this._cStore.cert.reasonC?.diagnosis ||\r\n        this._cStore.cert.nullFlavors.findIndex((item) => item.parent_attr === \"c_reason\" && !item._destroy) !== -1\r\n    })\r\n    this.disposers[34] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_C_TIME_SUG].done =\r\n        !this._cStore.cert.reasonC ||\r\n        !!this._cStore.cert.reasonC.effectiveTime ||\r\n        this._cStore.cert.reasonC?.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"effective_time\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[35] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_D_SUG].done =\r\n        this._cStore.cert.reasonD?.diagnosis !== undefined ||\r\n        this._cStore.cert.nullFlavors.findIndex((item) => item.parent_attr === \"d_reason\" && !item._destroy) !== -1\r\n    })\r\n    this.disposers[36] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[REASON_D_TIME_SUG].done =\r\n        !this._cStore.cert.reasonD ||\r\n        !!this._cStore.cert.reasonD.effectiveTime ||\r\n        this._cStore.cert.reasonD?.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"effective_time\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[37] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[TRAFFFIC_ACCIDENT_SUG].done =\r\n        !!this._cStore.cert.trafficAccident ||\r\n        this._cStore.cert.nullFlavors.findIndex((item) => item.parent_attr === \"traffic_accident\" && !item._destroy) !==\r\n          -1\r\n    })\r\n    this.disposers[38] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[PREGNANCY_CONNECTION_SUG].done =\r\n        !!this._cStore.cert.pregnancyConnection ||\r\n        this._cStore.cert.nullFlavors.findIndex(\r\n          (item) => item.parent_attr === \"pregnancy_connection\" && !item._destroy\r\n        ) !== -1\r\n    })\r\n    this.disposers[39] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[AUTHOR_SUG].done = !!this._cStore.cert.author\r\n    })\r\n    this.disposers[40] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[AUTHENTICATOR_SUG].done = !!this._cStore.cert.authenticator\r\n    })\r\n    this.disposers[41] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._suggestions[LEGAL_AUTHENTICATOR_SUG].done = !!this._cStore.cert.legalAuthenticator\r\n    })\r\n    this.disposers[42] = autorun(() => {\r\n      this._identified =\r\n        !!this._cStore.cert.patient.person ||\r\n        this._cStore.cert.patient.nullFlavors.findIndex((el) => el.parent_attr === \"person\" && !el._destroy) === -1\r\n    })\r\n    this.disposers[43] = autorun(() => {\r\n      if (!this._cStore.cert) return\r\n      this._fromRelatives = this._identified && this._cStore.cert.patient && !this._cStore.cert.patient.identity\r\n    })\r\n    this.disposers[44] = autorun(() => {\r\n      const person = this._cStore.cert.patient?.person\r\n      const fio = person?.fio\r\n      const isPersonNameSug =\r\n        (!person && this._identified) ||\r\n        (!!fio &&\r\n          (fio.family.trim().length === 0 ||\r\n            fio.given_1.trim().length === 0 ||\r\n            (!!fio.given_2 && fio.given_2.trim().length === 0)))\r\n      this._suggestions[PERSON_NAME_SUG].done = !isPersonNameSug\r\n    })\r\n  }\r\n  dispose() {\r\n    // So, to avoid subtle memory issues, always call the\r\n    // disposers when the reactions are no longer needed.\r\n    this.disposers.forEach((disposer) => disposer())\r\n  }\r\n  redSuggestionsCount() {\r\n    return this.suggestions.reduce((result, item, index) => {\r\n      if (\r\n        !(\r\n          item.done ||\r\n          index in\r\n            [\r\n              EXT_REASON_SUG,\r\n              EXT_REASON_TIME_SUG,\r\n              PARTIPICIPANT_FIO_SUG,\r\n              PARTIPICIPANT_DATE_SUG,\r\n              PARTIPICIPANT_IDENTITY_SUG,\r\n            ]\r\n        )\r\n      )\r\n        ++result\r\n      return result\r\n    }, 0)\r\n  }\r\n  get identified(): boolean {\r\n    return this._identified\r\n  }\r\n  set identified(value: boolean) {\r\n    this._identified = value\r\n  }\r\n  get fromRelatives(): boolean {\r\n    return this._fromRelatives\r\n  }\r\n  set fromRelatives(value: boolean) {\r\n    this._fromRelatives = value\r\n  }\r\n  get suggestions(): ISuggestions[] {\r\n    return this._suggestions\r\n  }\r\n}\r\n","export default class TemporaryIDStore {\r\n  private _lastCertificateID: number\r\n  private _lastDeathReasonID: number\r\n  private _lastProcedureID: number\r\n\r\n  constructor() {\r\n    this._lastCertificateID = -1\r\n    this._lastDeathReasonID = -1\r\n    this._lastProcedureID = -1\r\n  }\r\n  get lastCertificateID(): number {\r\n    return this._lastCertificateID--\r\n  }\r\n  get lastDeathReasonID(): number {\r\n    return this._lastDeathReasonID--\r\n  }\r\n  get lastProcedureID(): number {\r\n    return this._lastProcedureID--\r\n  }\r\n}\r\n","import $api from \"../http\"\r\nimport { AxiosResponse } from \"axios\"\r\nimport { AuthResponse } from \"../models/responses/AuthResponse\"\r\nimport { IRegistration } from \"../models/requests/IRegistration\"\r\nimport { IPassRenew } from \"../models/requests/IPassRenew\"\r\nexport default class AuthService {\r\n  static async login(email: string, password: string): Promise<AxiosResponse<AuthResponse>> {\r\n    return $api.post(\"auth/login\", { email, password })\r\n  }\r\n  static async registration(user: IRegistration): Promise<AxiosResponse<AuthResponse>> {\r\n    return $api.post(\"auth/registration\", { user })\r\n  }\r\n  static async renew_link(email: string): Promise<AxiosResponse<void>> {\r\n    return $api.post(\"auth/renew_link\", { email })\r\n  }\r\n  static async pwd_renew(user: IPassRenew): Promise<AxiosResponse<void>> {\r\n    return $api.post(\"auth/pwd_renew\", { ...user })\r\n  }\r\n  static async logout(): Promise<void> {\r\n    return $api.post(\"auth/logout\")\r\n  }\r\n}\r\n","import { createContext } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport AddressStore from './store/addressStore'\r\nimport CertificateStore from './store/certificateStore'\r\nimport LayoutStore from './store/layoutStore'\r\nimport SuggestionsStore from './store/suggestionsStore'\r\nimport TemporaryIDStore from './store/temporaryIDStore'\r\nimport UserStore from './store/userStore'\r\ninterface IState{\r\n  userStore: UserStore\r\n  layoutStore: LayoutStore\r\n  certificateStore: CertificateStore\r\n  suggestionsStore: SuggestionsStore\r\n  addressStore: AddressStore \r\n  temporaryIDStore: TemporaryIDStore \r\n}\r\nconst userStore = new UserStore()\r\nconst layoutStore = new LayoutStore()\r\nconst certificateStore = new CertificateStore()\r\nconst suggestionsStore = new SuggestionsStore(certificateStore)\r\nconst addressStore = new AddressStore()\r\nconst temporaryIDStore = new TemporaryIDStore()\r\naddressStore.fetchRegionOptions()\r\nexport const Context = createContext<IState>({userStore, layoutStore, addressStore, certificateStore, temporaryIDStore,suggestionsStore}) \r\nReactDOM.render(  \r\n  <Context.Provider value={{userStore, layoutStore, addressStore, certificateStore, temporaryIDStore, suggestionsStore}} >\r\n    <App />  \r\n  </Context.Provider> , \r\n  document.getElementById('root')\r\n)\r\n\r\n\r\n","import axios from \"axios\"\r\nimport { makeAutoObservable } from \"mobx\"\r\nimport { API_URL } from \"../http\"\r\nimport { IUser } from \"../models/IUser\"\r\nimport { IPassRenew } from \"../models/requests/IPassRenew\"\r\nimport { IRegistration } from \"../models/requests/IRegistration\"\r\nimport { AuthResponse } from \"../models/responses/AuthResponse\"\r\nimport { IUserInfo } from \"../models/responses/IUserInfo\"\r\nimport AuthService from \"../services/AuthService\"\r\nimport UsersService from \"../services/UsersService\"\r\nimport { HOME_ROUTE, LOGIN_ROUTE } from \"../utils/consts\"\r\n\r\nexport default class UserStore {\r\n  private _isAuth: boolean\r\n  private _user: IUser\r\n  private _isLoding: boolean\r\n  private _history: any\r\n  private _token: string\r\n  private _userInfo?: IUserInfo\r\n\r\n  constructor() {\r\n    this._user = {} as IUser\r\n    this._isLoding = false\r\n    this._token = localStorage.getItem(\"token\") || \"\"\r\n    this._isAuth = this._token !== \"\"\r\n    if (this._isAuth) this.checkAuth()\r\n    makeAutoObservable(this)\r\n  }\r\n\r\n  setAuth(isAuth: boolean) {\r\n    this._isAuth = isAuth\r\n  }\r\n  isAuth() {\r\n    return this._isAuth\r\n  }\r\n  setUser(user: IUser) {\r\n    this._user = user\r\n  }\r\n  user() {\r\n    return this._user\r\n  }\r\n  setLoading(isLoding: boolean) {\r\n    this._isLoding = isLoding\r\n  }\r\n  isLoading() {\r\n    return this._isLoding\r\n  }\r\n  setHistory(history: any) {\r\n    this._history = history\r\n  }\r\n\r\n  setToken(access_token: string) {\r\n    this._token = access_token\r\n  }\r\n  token() {\r\n    return this._token\r\n  }\r\n  async login(email: string, password: string) {\r\n    AuthService.login(email, password)\r\n      .then((response) => {\r\n        if (response.data) {\r\n          localStorage.setItem(\"token\", response.data.tokens.access)\r\n          this.setAuth(true)\r\n          this.setUser(response.data.user)\r\n          this._history.push(HOME_ROUTE)\r\n        } else {\r\n          this._history.push(\"/error/Ошибка авторизации: неверный ответ API-сервера\")\r\n        }\r\n      })\r\n      .catch((reason) => {\r\n        this._history.push(\"/error/Auth1:\" + reason.message)\r\n      })\r\n  }\r\n  async registration(user: IRegistration) {\r\n    try {\r\n      await AuthService.registration(user)\r\n      this._history.push(\r\n        \"/message/Ваша заявка направлена администратору ресурса для активации. Письмо с результатом, будет выслано на Ваш email\"\r\n      )\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/\" + e.message)\r\n    }\r\n  }\r\n  async pwd_renew(user: IPassRenew) {\r\n    try {\r\n      await AuthService.pwd_renew(user)\r\n      this._history.push(\"/message/Пароль был успешно изменен\")\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/\" + e.message)\r\n      return false\r\n    }\r\n  }\r\n  async renew_link(email: string) {\r\n    try {\r\n      await AuthService.renew_link(email)\r\n      this._history.push(\"/message/Вам в почту направлено письмо, со ссылкой на страницу изменения пароля\")\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/\" + e.message)\r\n      return false\r\n    }\r\n  }\r\n  async logout() {\r\n    try {\r\n      await AuthService.logout()\r\n      this.setAuth(false)\r\n      localStorage.removeItem(\"token\")\r\n      this.setToken(\"\")\r\n      this.setUser({} as IUser)\r\n      this._userInfo = undefined\r\n      this._history.push(LOGIN_ROUTE)\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/\" + e.message)\r\n    }\r\n  }\r\n  async checkAuth() {\r\n    try {\r\n      this.setLoading(true)\r\n      const response = await axios.get<AuthResponse>(`${API_URL}auth/refresh`, { withCredentials: true })\r\n      localStorage.setItem(\"token\", response.data.tokens.access)\r\n      this.setToken(response.data.tokens.access)\r\n      this.setAuth(true)\r\n      this.setUser(response.data.user)\r\n    } catch (e: any) {\r\n      if (e.message?.includes(\"401\")) {\r\n        this._isAuth = false\r\n        this._token = \"\"\r\n        localStorage.removeItem(\"token\")\r\n        this._user = {} as IUser\r\n        this._history.push(LOGIN_ROUTE)\r\n      } else this._history.push(\"/error/Auth2:\" + e.message)\r\n    } finally {\r\n      this.setLoading(false)\r\n    }\r\n  }\r\n  async getUserInfo(id: number) {\r\n    if (id === undefined) return false\r\n    try {\r\n      this.setLoading(true)\r\n      const response = await UsersService.getUser(id)\r\n      return response.data\r\n    } catch (e: any) {\r\n      this._history.push(\"/error/Auth3:\" + e.message)\r\n    } finally {\r\n      this.setLoading(false)\r\n    }\r\n  }\r\n  history() {\r\n    return this._history\r\n  }\r\n  get userInfo() {\r\n    if (this._userInfo) return this._userInfo\r\n    else if (this._user.id)\r\n      this.getUserInfo(this._user.id).then((response) => {\r\n        if (response) this._userInfo = response\r\n        else this._userInfo = undefined\r\n      })\r\n    return null\r\n  }\r\n}\r\n"],"sourceRoot":""}